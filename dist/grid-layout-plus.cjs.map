{"version":3,"file":"grid-layout-plus.cjs","sources":["../node_modules/.pnpm/@vexip-ui+utils@2.13.0/node_modules/@vexip-ui/utils/dist/index.mjs","../src/helpers/common.ts","../src/helpers/draggable.ts","../src/helpers/responsive.ts","../src/helpers/dom.ts","../node_modules/.pnpm/framework-utils@1.1.0/node_modules/framework-utils/dist/utils.esm.js","../node_modules/.pnpm/@daybrush+utils@1.13.0/node_modules/@daybrush/utils/dist/utils.esm.js","../node_modules/.pnpm/@egjs+list-differ@1.0.1/node_modules/@egjs/list-differ/dist/list-differ.esm.js","../node_modules/.pnpm/croact@1.0.4/node_modules/croact/dist/croact.esm.js","../node_modules/.pnpm/@egjs+agent@2.4.3/node_modules/@egjs/agent/dist/agent.esm.js","../node_modules/.pnpm/@scena+matrix@1.1.1/node_modules/@scena/matrix/dist/matrix.esm.js","../node_modules/.pnpm/css-to-mat@1.1.1/node_modules/css-to-mat/dist/css-to-mat.esm.js","../node_modules/.pnpm/@egjs+children-differ@1.0.1/node_modules/@egjs/children-differ/dist/children-differ.esm.js","../node_modules/.pnpm/@scena+event-emitter@1.0.5/node_modules/@scena/event-emitter/dist/event-emitter.esm.js","../node_modules/.pnpm/@scena+dragscroll@1.4.0/node_modules/@scena/dragscroll/dist/dragscroll.esm.js","../node_modules/.pnpm/overlap-area@1.1.0/node_modules/overlap-area/dist/overlap-area.esm.js","../node_modules/.pnpm/gesto@1.19.4/node_modules/gesto/dist/gesto.esm.js","../node_modules/.pnpm/css-styled@1.0.8/node_modules/css-styled/dist/styled.esm.js","../node_modules/.pnpm/croact-css-styled@1.1.9/node_modules/croact-css-styled/dist/styled.esm.js","../node_modules/.pnpm/croact-moveable@0.9.0_croact@1.0.4/node_modules/croact-moveable/dist/moveable.esm.js","../node_modules/.pnpm/moveable@0.53.0/node_modules/moveable/dist/moveable.esm.js","../src/components/grid-item.vue","../node_modules/.pnpm/@vexip-ui+hooks@2.4.0_vue@3.2.47/node_modules/@vexip-ui/hooks/dist/index.mjs","../src/components/grid-layout.vue"],"sourcesContent":["const y = typeof window < \"u\";\nvar At;\nconst gn = y && ((At = window == null ? void 0 : window.navigator) == null ? void 0 : At.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent), te = Object.prototype.toString, ee = Object.prototype.hasOwnProperty;\nfunction B(t, e) {\n  return te.call(t) === `[object ${e}]`;\n}\nfunction pn(t, e) {\n  return ee.call(t, e);\n}\nfunction w(t) {\n  return t != null;\n}\nfunction ne(t) {\n  return t == null;\n}\nfunction mn(t) {\n  return typeof t == \"number\";\n}\nfunction re(t) {\n  return Number.isNaN(t);\n}\nfunction bn(t) {\n  return typeof t == \"string\";\n}\nfunction yn(t) {\n  return typeof t == \"boolean\";\n}\nfunction Mn(t) {\n  return t === !0;\n}\nfunction Sn(t) {\n  return t === !1;\n}\nfunction wn(t) {\n  return typeof t == \"symbol\";\n}\nfunction En(t) {\n  return typeof t == \"bigint\";\n}\nfunction Nn(t) {\n  return Array.isArray(t);\n}\nfunction Y(t) {\n  return B(t, \"Object\");\n}\nfunction An(t) {\n  return !!t && typeof t.then == \"function\" && typeof t.catch == \"function\";\n}\nfunction Ft(t) {\n  return typeof t == \"function\";\n}\nfunction Fn(t) {\n  return B(t, \"Set\");\n}\nfunction Tn(t) {\n  return B(t, \"Map\");\n}\nfunction On(t) {\n  return B(t, \"Date\");\n}\nfunction $n(t) {\n  return B(t, \"RegExp\");\n}\nfunction Rn(t) {\n  return Array.isArray(t) || typeof t == \"string\" ? t.length === 0 : t instanceof Map || t instanceof Set ? t.size === 0 : Y(t) ? Object.keys(t).length === 0 : typeof t == \"number\" ? re(t) : ne(t);\n}\nfunction _n(t, e = !1) {\n  return !e && !y ? !1 : !!(t && \"nodeType\" in t);\n}\nfunction W(t) {\n  return w(t) && typeof t[Symbol.iterator] == \"function\";\n}\nfunction ot() {\n}\nfunction oe() {\n  return !0;\n}\nfunction kn() {\n  return !1;\n}\nfunction Cn(t, e = 1, n = 1) {\n  const r = [];\n  for (let o = 0; o < t; ++o)\n    r.push(e + o * n);\n  return r;\n}\nfunction ie(t) {\n  return Object.prototype.toString.call(t).slice(8, -1);\n}\nfunction xn(t = 16) {\n  const e = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\", n = e.length;\n  let r = \"\";\n  for (; t--; )\n    r += e.charAt(Math.floor(Math.random() * n));\n  return r;\n}\nasync function Dn(t, e = {}) {\n  if (t.length) {\n    for (const [n, r] of t)\n      if (typeof n == \"function\" ? n() : n)\n        return typeof e.beforeMatchAny == \"function\" && await e.beforeMatchAny(), await r(), typeof e.afterMatchAny == \"function\" && await e.afterMatchAny(), !0;\n  }\n  return !1;\n}\nasync function In(t) {\n  if (!y)\n    return !1;\n  try {\n    return await navigator.clipboard.writeText(t), !0;\n  } catch {\n    let e = !1;\n    const n = document.createElement(\"textarea\"), r = document.activeElement;\n    n.value = t, n.setAttribute(\"readonly\", \"\"), n.style.contain = \"strict\", n.style.position = \"absolute\", n.style.height = \"0\", n.style.fontSize = \"12pt\";\n    const o = document.getSelection(), i = o ? o.rangeCount > 0 && o.getRangeAt(0) : null;\n    return document.body.appendChild(n), n.select(), n.selectionStart = 0, n.selectionEnd = t.length, e = document.execCommand(\"copy\"), document.body.removeChild(n), i && (o.removeAllRanges(), o.addRange(i)), r && r.focus(), e;\n  }\n}\nconst se = \"[-\\\\+]?\\\\d+%?\", ce = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\", F = `(?:${ce})|(?:${se})`, ae = `[\\\\s|\\\\(]+(${F})[,|\\\\s]+(${F})[,|\\\\s]+(${F})\\\\s*\\\\)?`, U = `[\\\\s|\\\\(]+(${F})[,|\\\\s]+(${F})[,|\\\\s]+(${F})[,|\\\\s]+(${F})\\\\s*\\\\)?`, Tt = new RegExp(`rgb${ae}`), Ot = new RegExp(`rgba${U}`), $t = new RegExp(`hsl${U}`), Rt = new RegExp(`hsla${U}`), _t = new RegExp(`hsv${U}`), kt = new RegExp(`hsva${U}`), Ct = /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, xt = /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, Dt = /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, It = /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, G = Object.freeze({\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n}), fe = Object.freeze(new Set(Object.keys(G)));\nfunction Ln(t) {\n  return t = String(t).trim().toLowerCase(), t ? t === \"transparent\" || G[t] ? !0 : t === \"transparent\" || fe.has(t) || Tt.test(t) || Ot.test(t) || $t.test(t) || Rt.test(t) || _t.test(t) || kt.test(t) || Ct.test(t) || xt.test(t) || Dt.test(t) || It.test(t) : !1;\n}\nfunction ue(t) {\n  if (t = t.toString().trim().toLowerCase(), t === \"transparent\")\n    return { r: 0, g: 0, b: 0, a: 0, format: \"name\", toString: M };\n  let e = !1;\n  G[t] && (t = G[t], e = !0);\n  let n;\n  if (n = Tt.exec(t)) {\n    const { r, g: o, b: i } = _(n[1], n[2], n[3]);\n    return {\n      r: r * 255,\n      g: o * 255,\n      b: i * 255,\n      format: \"rgb\",\n      toString: M\n    };\n  }\n  if (n = Ot.exec(t)) {\n    const { r, g: o, b: i } = _(n[1], n[2], n[3]);\n    return {\n      r: r * 255,\n      g: o * 255,\n      b: i * 255,\n      a: R(n[4]),\n      format: \"rgba\",\n      toString: M\n    };\n  }\n  if (n = $t.exec(t)) {\n    const { h: r, s: o, l: i } = z(n[0], n[1], n[3]);\n    return { h: r * 360, s: o, l: i, format: \"hsl\", toString: H };\n  }\n  if (n = Rt.exec(t)) {\n    const { h: r, s: o, l: i } = z(n[0], n[1], n[3]);\n    return {\n      h: r * 360,\n      s: o,\n      l: i,\n      a: R(n[4]),\n      format: \"hsla\",\n      toString: H\n    };\n  }\n  if (n = _t.exec(t)) {\n    const { h: r, s: o, v: i } = q(n[0], n[1], n[3]);\n    return { h: r * 360, s: o, v: i, format: \"hsv\", toString: j };\n  }\n  if (n = kt.exec(t)) {\n    const { h: r, s: o, v: i } = q(n[0], n[1], n[3]);\n    return {\n      h: r * 360,\n      s: o,\n      v: i,\n      a: R(n[4]),\n      format: \"hsva\",\n      toString: j\n    };\n  }\n  return (n = Ct.exec(t)) ? {\n    r: parseInt(`${n[1]}${n[1]}`, 16),\n    g: parseInt(`${n[2]}${n[2]}`, 16),\n    b: parseInt(`${n[3]}${n[3]}`, 16),\n    format: e ? \"name\" : \"hex3\",\n    toString: M\n  } : (n = xt.exec(t)) ? {\n    r: parseInt(`${n[1]}${n[1]}`, 16),\n    g: parseInt(`${n[2]}${n[2]}`, 16),\n    b: parseInt(`${n[3]}${n[3]}`, 16),\n    a: pt(`${n[4]}${n[4]}`),\n    format: e ? \"name\" : \"hex4\",\n    toString: M\n  } : (n = Dt.exec(t)) ? {\n    r: parseInt(n[1], 16),\n    g: parseInt(n[2], 16),\n    b: parseInt(n[3], 16),\n    format: e ? \"name\" : \"hex6\",\n    toString: M\n  } : (n = It.exec(t)) ? {\n    r: parseInt(n[1], 16),\n    g: parseInt(n[2], 16),\n    b: parseInt(n[3], 16),\n    a: pt(n[4]),\n    format: e ? \"name\" : \"hex8\",\n    toString: M\n  } : null;\n}\nfunction Hn(t) {\n  const { a: e, ...n } = T(t);\n  delete n.format;\n  const r = Ht(n.r, n.g, n.b), o = Pt(n.r, n.g, n.b), i = it(n.r, n.g, n.b), s = st(n.r, n.g, n.b, e);\n  return {\n    rgb: n,\n    hsl: r,\n    hsv: o,\n    hex: i,\n    alpha: e,\n    rgba: { ...n, a: e, format: \"rgba\" },\n    hsla: { ...r, a: e, format: \"hsla\" },\n    hsva: { ...o, a: e, format: \"hsva\" },\n    hex8: s,\n    gray: Ut(n),\n    origin: t\n  };\n}\nfunction T(t) {\n  let e = { r: 0, g: 0, b: 0 }, n = 1, r;\n  return typeof t == \"string\" ? r = ue(t) : r = t, r !== null && typeof r == \"object\" && (\"l\" in r ? e = Lt(r.h, r.s, r.l) : \"v\" in r && (e = de(r.h, r.s, r.v)), \"a\" in r && (n = R(r.a ?? 1), Number.isNaN(n) && (n = 1)), e = r), { ...e, a: n, format: \"rgba\", toString: M };\n}\nfunction z(t, e, n) {\n  return {\n    h: S(t, 0, 360) / 360,\n    s: S(I(e) ? L(e) : e, 0, 1),\n    l: S(I(n) ? L(n) : n, 0, 1)\n  };\n}\nfunction _(t, e, n) {\n  return {\n    r: S(t, 0, 255) / 255,\n    g: S(e, 0, 255) / 255,\n    b: S(n, 0, 255) / 255\n  };\n}\nfunction q(t, e, n) {\n  return {\n    h: S(t, 0, 360) / 360,\n    s: S(I(e) ? L(e) : e, 0, 1),\n    v: S(I(n) ? L(n) : n, 0, 1)\n  };\n}\nfunction R(t) {\n  return S(I(t) ? L(t) : t, 0, 1);\n}\nfunction Lt(t, e, n) {\n  let r, o, i;\n  if ({ h: t, s: e, l: n } = z(t, e, n), e === 0)\n    r = o = i = n;\n  else {\n    const s = n < 0.5 ? 1 * (1 + e) : n + e - n * e, c = 2 * n - s;\n    r = tt(c, s, t + 1 / 3), o = tt(c, s, t), i = tt(c, s, t - 1 / 3);\n  }\n  return r *= 255, o *= 255, i *= 255, { r, g: o, b: i, toString: M };\n}\nfunction Ht(t, e, n) {\n  ({ r: t, g: e, b: n } = _(t, e, n));\n  const r = Math.max(t, e, n), o = Math.min(t, e, n);\n  let i, s;\n  const c = (r + o) / 2;\n  if (r === o)\n    i = s = 0;\n  else {\n    const a = r - o;\n    switch (s = c > 0.5 ? a / (2 - r - o) : a / (r + o), r) {\n      case t: {\n        i = (e - n) / a + (e < n ? 6 : 0);\n        break;\n      }\n      case e: {\n        i = (n - t) / a + 2;\n        break;\n      }\n      case n: {\n        i = (t - e) / a + 4;\n        break;\n      }\n      default:\n        i = 0;\n    }\n    i *= 60;\n  }\n  return { h: i, s, l: c, toString: H };\n}\nfunction le(t, e, n) {\n  ({ h: t, s: e, l: n } = z(t, e, n));\n  const r = 0.5 * (2 * n + e * (1 - Math.abs(2 * n - 1)));\n  return e = 2 * (r - n) / r, { h: t * 360, s: e, v: r, toString: j };\n}\nfunction Pn(t, e, n) {\n  ({ h: t, s: e, v: n } = q(t, e, n));\n  const r = 0.5 * n * (2 - e);\n  return e = n * e / (1 - Math.abs(2 * r - 1)), { h: t * 360, s: e, l: r, toString: H };\n}\nfunction de(t, e, n) {\n  ({ h: t, s: e, v: n } = q(t, e, n)), t *= 6;\n  const r = Math.floor(t), o = t - r, i = n * (1 - e), s = n * (1 - o * e), c = n * (1 - (1 - o) * e), a = r % 6;\n  let f = [n, s, i, i, c, n][a], u = [c, n, n, s, i, i][a], d = [i, i, c, n, n, s][a];\n  return f *= 255, u *= 255, d *= 255, { r: f, g: u, b: d, toString: M };\n}\nfunction Pt(t, e, n) {\n  ({ r: t, g: e, b: n } = _(t, e, n));\n  const r = Math.max(t, e, n), o = Math.min(t, e, n);\n  let i;\n  const s = r, c = r - o, a = r === 0 ? 0 : c / r;\n  if (r === o)\n    i = 0;\n  else {\n    switch (r) {\n      case t: {\n        i = (e - n) / c + (e < n ? 6 : 0);\n        break;\n      }\n      case e: {\n        i = (n - t) / c + 2;\n        break;\n      }\n      case n: {\n        i = (t - e) / c + 4;\n        break;\n      }\n      default:\n        i = 0;\n    }\n    i *= 60;\n  }\n  return { h: i, s: a, v: s, toString: j };\n}\nfunction it(t, e, n, r = !1) {\n  ({ r: t, g: e, b: n } = _(t, e, n));\n  const o = [\n    O(Math.round(t * 255).toString(16)),\n    O(Math.round(e * 255).toString(16)),\n    O(Math.round(n * 255).toString(16))\n  ];\n  return r && $(o[0]) && $(o[1]) && $(o[2]) ? o[0].charAt(0) + o[1].charAt(0) + o[2].charAt(0) : \"#\" + o.join(\"\");\n}\nfunction st(t, e, n, r, o = !1) {\n  ({ r: t, g: e, b: n } = _(t, e, n));\n  const i = [\n    O(Math.round(t * 255).toString(16)),\n    O(Math.round(e * 255).toString(16)),\n    O(Math.round(n * 255).toString(16)),\n    O(he(R(r)))\n  ];\n  return o && $(i[0]) && $(i[1]) && $(i[2]) && $(i[3]) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) + i[3].charAt(0) : \"#\" + i.join(\"\");\n}\nfunction Bn(t, e, n = 0.5) {\n  if (!t && !e)\n    return { r: 0, g: 0, b: 0, a: 1 };\n  if (!t)\n    return T(e);\n  if (!e)\n    return T(t);\n  const r = T(t), o = T(e), i = S(n, 0, 1), s = i * 2 - 1, c = r.a - o.a, f = ((s * c === -1 ? s : (s + c) / (1 + s * c)) + 1) / 2, u = 1 - f;\n  return {\n    r: Math.round(r.r * f + o.r * u),\n    g: Math.round(r.g * f + o.g * u),\n    b: Math.round(r.b * f + o.b * u),\n    a: Math.round(r.a * i + o.a * (1 - i)),\n    format: \"rgba\",\n    toString: M\n  };\n}\nfunction Un(t, e) {\n  const n = T(t);\n  return n.a = R(e), n;\n}\nfunction Yn(t = !1, e = \"hex\") {\n  const n = Math.round(Math.random() * 255), r = Math.round(Math.random() * 255), o = Math.round(Math.random() * 255);\n  if (e === \"hex\")\n    return t ? st(n, r, o, Math.random()) : it(n, r, o);\n  let i;\n  return e === \"hsl\" ? i = Ht(n, r, o) : e === \"hsv\" ? i = Pt(n, r, o) : i = /* @__PURE__ */ Object.create({ r: n, g: r, b: o, toString: M }), t && (i.a = Math.random()), i.toString();\n}\nfunction Bt(t, e = !1, n = \"hex\") {\n  const r = Math.round(Math.random() * 360), o = Math.round(t === \"hard\" ? 80 + Math.random() * 20 : 20 + Math.random() * 70) / 100, i = Math.round(t === \"hard\" ? 40 + Math.random() * 20 : 80 + Math.random() * 15) / 100;\n  if (n === \"hsl\")\n    return H.bind({ h: r, s: o, l: i })();\n  let s;\n  if (n === \"hex\" || n === \"rgb\") {\n    if (s = Lt(r, o, i), n === \"hex\") {\n      const { r: c, g: a, b: f } = s;\n      return e ? st(c, a, f, Math.random()) : it(c, a, f);\n    }\n  } else\n    n === \"hsv\" && (s = le(r, o, i));\n  return e && (s.a = Math.random()), s.toString();\n}\nfunction Wn(t = !1, e = \"hex\") {\n  return Bt(\"hard\", t, e);\n}\nfunction Gn(t = !1, e = \"hex\") {\n  return Bt(\"soft\", t, e);\n}\nfunction zn(t) {\n  return Ut(T(t));\n}\nfunction O(t) {\n  return t.length === 1 ? `0${t}` : t.toString();\n}\nfunction $(t) {\n  return t.charAt(0) === t.charAt(1);\n}\nfunction he(t) {\n  return Math.round(parseFloat(t) * 255).toString(16);\n}\nfunction pt(t) {\n  return parseInt(t, 16) / 255;\n}\nfunction S(t, e, n) {\n  return Math.max(e, Math.min(n, parseFloat(t)));\n}\nfunction tt(t, e, n) {\n  return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? t + (e - t) * 6 * n : n < 1 / 2 ? e : n < 2 / 3 ? t + (e - t) * (2 / 3 - n) * 6 : t;\n}\nfunction I(t) {\n  return String(t).trim().includes(\"%\");\n}\nfunction L(t) {\n  const e = parseFloat(t) / 100;\n  return Number.isNaN(e) ? 0 : e;\n}\nfunction M() {\n  return w(this.a) && this.a >= 0 && this.a < 1 ? `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})` : `rgb(${this.r}, ${this.g}, ${this.b})`;\n}\nfunction H() {\n  const t = `${this.s * 100}%`, e = `${this.l * 100}%`;\n  return w(this.a) && this.a >= 0 && this.a < 1 ? `hsla(${this.h}, ${t}, ${e}, ${this.a})` : `hsl(${this.h}, ${t}, ${e})`;\n}\nfunction j() {\n  const t = `${this.s * 100}%`, e = `${this.v * 100}%`;\n  return w(this.a) && this.a >= 0 && this.a < 1 ? `hsva(${this.h}, ${t}, ${e}, ${this.a})` : `hsv(${this.h}, ${t}, ${e})`;\n}\nfunction Ut(t) {\n  return (t.r * 0.2126 + t.g * 0.7152 + t.b * 0.0722) / 255;\n}\nfunction mt(t) {\n  return t & -t;\n}\nfunction qn(t, e = 0) {\n  const n = new Array(t + 1).fill(0);\n  function r(c, a) {\n    if (!(!a || c >= t))\n      for (c += 1; c <= t; )\n        n[c] += a, c += mt(c);\n  }\n  function o(c = t) {\n    if (c <= 0)\n      return 0;\n    c > t && (c = t);\n    let a = c * e;\n    for (; c > 0; )\n      a += n[c], c -= mt(c);\n    return a;\n  }\n  function i(c) {\n    return o(c + 1) - o(c);\n  }\n  function s(c) {\n    let a = 0, f = t;\n    for (; f > a; ) {\n      const u = Math.floor((a + f) / 2), d = o(u);\n      if (d > c) {\n        f = u;\n        continue;\n      } else if (d < c) {\n        if (a === u)\n          return o(a + 1) <= c ? a + 1 : a;\n        a = u;\n      } else\n        return u;\n    }\n    return a;\n  }\n  return { tree: n, add: r, sum: o, get: i, boundIndex: s };\n}\nconst ge = /^\\s*[+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?\\s*$/;\nfunction pe(t, e = !1) {\n  return typeof t == \"number\" ? !Number.isNaN(t) : e ? ge.test(String(t)) : !Number.isNaN(parseFloat(t)) || !Number.isNaN(Number(t));\n}\nfunction me(t) {\n  let e = parseFloat(t);\n  return Number.isNaN(e) && (e = Number(t)), Number.isNaN(e) ? 0 : e;\n}\nfunction be(t, e) {\n  return e <= 0 ? t.toString() : `${t < 0 ? \"-\" : \"\"}${String(Math.abs(Math.round(t))).padStart(e, \"0\")}`;\n}\nfunction N(t) {\n  return be(t, 2);\n}\nfunction E(t) {\n  const e = t.toString().split(/[eE]/), n = (e[0].split(\".\")[1] || \"\").length - +(e[1] || 0);\n  return n > 0 ? n : 0;\n}\nfunction jn(t) {\n  return E(t);\n}\nfunction Kn(t, e = 3, n = \",\") {\n  if (typeof t != \"number\" && (t = parseFloat(t)), Number.isNaN(t))\n    return \"0\";\n  let [r, o] = String(t).split(\".\");\n  const i = new RegExp(`(\\\\d+)(\\\\d{${e}})`);\n  for (; i.test(r); )\n    r = r.replace(i, `$1${n}$2`);\n  return o = o ? `.${o}` : \"\", `${r}${o}`;\n}\nfunction Yt(t, e) {\n  if (e === 0)\n    return Math.round(t);\n  let n = t.toFixed(E(t));\n  const r = n.indexOf(\".\");\n  if (r === -1)\n    return t;\n  const o = n.replace(\".\", \"\").split(\"\"), i = r + e;\n  return o[i] ? (n.charAt(i + 1) === \"5\" ? n = n.substring(0, i + 1) + \"6\" : n = n.substring(0, i + 2), parseFloat(Number(n).toFixed(e))) : t;\n}\nfunction Qn(t, e, n) {\n  return Yt(t * e, n);\n}\nfunction Xn(t, e) {\n  if (e < 0 || e > 1)\n    return Math.round(t);\n  const n = Math.ceil(t);\n  return t + 1 - e >= n ? n : Math.floor(t);\n}\nfunction Zn(t, e, n) {\n  return Math.max(e, Math.min(n, parseFloat(t)));\n}\nfunction Vn(t, e, n = 0) {\n  if (t <= 0 || e <= 1)\n    return [t];\n  n < 1 && (n = 1 / 0);\n  const r = [];\n  let o = 0;\n  for (; t >= e && o < n; )\n    r.push(t % e), t = Math.floor(t / e), ++o;\n  return r.push(t), r.reverse();\n}\nconst bt = Object.freeze([\n  \"B\",\n  \"KB\",\n  \"MB\",\n  \"GB\",\n  \"TB\",\n  \"AUTO\"\n]);\nfunction vn(t, e = \"AUTO\", n = !1, r) {\n  typeof r > \"u\" && (typeof n == \"number\" ? (r = n, n = !1) : r = 2);\n  let o = e.toUpperCase();\n  o = bt.includes(o) ? o : \"AUTO\";\n  let i;\n  switch (o) {\n    case \"AUTO\":\n      i = 0;\n      break;\n    case \"KB\":\n      i = 1;\n      break;\n    case \"MB\":\n      i = 2;\n      break;\n    case \"GB\":\n      i = 3;\n      break;\n    case \"TB\":\n      i = 4;\n      break;\n    default:\n      return t;\n  }\n  let s;\n  if (i)\n    s = t / 1024 ** i;\n  else\n    for (s = t; s > 1024 && !(i > 4); ++i)\n      s = s / 1024;\n  return s = Yt(s, r), n ? `${s}${o === \"AUTO\" ? bt[Math.min(i, 4)] : o}` : s;\n}\nfunction Jn(t, e = 0) {\n  return e === t ? e : (e > t && ([e, t] = [t, e]), Math.random() * (t - e) + e);\n}\nfunction Wt(t, e = 15) {\n  return +parseFloat(Number(t).toPrecision(e));\n}\nfunction K(t) {\n  const e = String(t);\n  if (!e.includes(\"e\"))\n    return Number(e.replace(\".\", \"\"));\n  const n = E(t);\n  return n > 0 ? Wt(Number(t) * 10 ** n) : Number(t);\n}\nfunction Q(t) {\n  return (...e) => {\n    let n = e[0];\n    for (let r = 1, o = e.length; r < o; ++r)\n      n = t(n, e[r]);\n    return n;\n  };\n}\nconst P = Q((t, e) => {\n  const n = K(t), r = K(e), o = E(t) + E(e);\n  return n * r / 10 ** o;\n}), tr = Q((t, e) => {\n  const n = 10 ** Math.max(E(t), E(e));\n  return (P(t, n) + P(e, n)) / n;\n}), er = Q((t, e) => {\n  const n = 10 ** Math.max(E(t), E(e));\n  return (P(t, n) - P(e, n)) / n;\n}), nr = Q((t, e) => {\n  const n = K(t), r = K(e);\n  return P(n / r, Wt(10 ** (E(e) - E(t))));\n}), ye = 1e3, A = 1e3, C = 60, Me = C * A, rr = C * A, X = 60, Gt = X * C, Se = Gt * A, or = Gt * A, zt = 24, we = zt * X, qt = we * C, Ee = qt * A, ir = qt * A, ct = 7, Ne = ct * zt, Ae = Ne * X, jt = Ae * C, Fe = jt * A, sr = jt * A, Kt = 3, Te = 4, Oe = Te * Kt, $e = {\n  y(t, e) {\n    const n = t.getFullYear();\n    return e.length === 4 ? n : n % 1e3 % 100;\n  },\n  M(t, e) {\n    const n = t.getMonth() + 1;\n    return e.length === 2 ? N(n) : n;\n  },\n  d(t, e) {\n    const n = t.getDate();\n    return e.length === 2 ? N(n) : n;\n  },\n  H(t, e) {\n    const n = t.getHours();\n    return e.length === 2 ? N(n) : n;\n  },\n  m(t, e) {\n    const n = t.getMinutes();\n    return e.length === 2 ? N(n) : n;\n  },\n  s(t, e) {\n    const n = t.getSeconds();\n    return e.length === 2 ? N(n) : n;\n  },\n  q(t, e) {\n    const n = Math.ceil((t.getMonth() + 1) / 3);\n    return e.length === 2 ? N(n) : n;\n  }\n}, Re = /[yMdHmsq](\\w)*|./g, _e = /'(.+?)'/g;\nfunction h(t, e = !1) {\n  const n = new Date(t);\n  if (e && Number.isNaN(+n))\n    throw new RangeError(\"Invalid date value\");\n  return typeof t == \"string\" && !t.includes(\":\") && (n.setHours(0), n.setMinutes(0), n.setSeconds(0)), n;\n}\nfunction cr(t, e = \"yyyy-MM-dd HH:mm:ss\") {\n  t = h(t);\n  const n = e.match(Re), r = n == null ? void 0 : n.length;\n  if (!r)\n    return e;\n  let o = 0, i = \"\";\n  for (; o < r; ) {\n    const s = n[o], c = s[0], a = $e[c];\n    a ? i += a(t, s) : i += s, ++o;\n  }\n  return i.replace(_e, \"$1\");\n}\nfunction ar(t) {\n  return t = h(t), `${N(t.getHours())}:${N(t.getMinutes())}:${N(\n    t.getSeconds()\n  )}`;\n}\nfunction rt(t) {\n  return t = h(t), Math.floor(t.getMonth() / 3) + 1;\n}\nconst ke = [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"];\nfunction fr(t) {\n  return ke[t.getDay()];\n}\nfunction Ce(t, e) {\n  return t = h(t), t.setTime(t.getTime() + e), t;\n}\nfunction xe(t, e) {\n  return e *= A, Ce(t, e);\n}\nfunction De(t, e) {\n  return e *= C, xe(t, e);\n}\nfunction Ie(t, e) {\n  return e *= X, De(t, e);\n}\nfunction ur(t, e) {\n  return e *= 12, Ie(t, e);\n}\nfunction at(t, e) {\n  return t = h(t), e = ~~e, t.setDate(t.getDate() + e), t;\n}\nfunction lr(t, e) {\n  return e *= ct, at(t, e);\n}\nfunction ft(t, e) {\n  return t = h(t), e = ~~e, t.setMonth(t.getMonth() + e), t;\n}\nfunction dr(t, e) {\n  return e *= Kt, ft(t, e);\n}\nfunction hr(t, e) {\n  return e *= Oe, ft(t, e);\n}\nfunction gr(t, e = 42, n = 1) {\n  t = h(t);\n  const r = [];\n  for (let o = 0; o < e; ++o)\n    r.push(at(t, o * n));\n  return r;\n}\nfunction pr(t, e = 12, n = 1) {\n  t = h(t);\n  const r = [];\n  for (let o = 0; o < e; ++o)\n    r.push(ft(t, o * n));\n  return r;\n}\nfunction mr(t) {\n  const e = t.getDay() ?? 7;\n  return at(t, -e);\n}\nfunction yt(t) {\n  return t = h(t), t.setMilliseconds(0), t;\n}\nfunction Mt(t) {\n  return t = h(t), t.setSeconds(0, 0), t;\n}\nfunction St(t) {\n  return t = h(t), t.setMinutes(0, 0, 0), t;\n}\nfunction wt(t) {\n  return t = h(t), t.setHours(0, 0, 0, 0), t;\n}\nfunction br(t) {\n  return t = h(t), t.setHours(23, 59, 59, 999), t;\n}\nfunction Et(t, e = 0) {\n  e = e % 7, e < 0 && (e += 7), t = h(t);\n  const n = t.getDay(), r = (n < e ? 7 : 0) + n - e;\n  return t.setDate(t.getDate() - r), t.setHours(0, 0, 0, 0), t;\n}\nfunction Le(t) {\n  return t % 4 === 0 && t % 100 !== 0 || t % 400 === 0;\n}\nfunction yr(t, e = 1) {\n  t = h(t);\n  const n = t.getFullYear(), r = t.getMonth() + 1, o = t.getDate();\n  let i;\n  return r < 7 ? r !== 2 ? i = 30 + r % 2 : Le(n) ? i = 29 : i = 28 : i = 31 - r % 2, e = e % i, e < 0 && (e += i), o < e && t.setMonth(r - 1), t.setDate(e), t.setHours(0, 0, 0, 0), t;\n}\nfunction Mr(t) {\n  t = h(t);\n  const e = rt(t);\n  return t.setDate(1), t.setHours(0, 0, 0, 0), t.setMonth((e - 1) * 3), t;\n}\nfunction Sr(t, e = 0) {\n  e = e % 11, e < 0 && (e += 11), t = h(t);\n  const n = t.getMonth(), r = (n < e ? 11 : 0) + n - e;\n  return t.setMonth(t.getMonth() - r), t.setDate(1), t.setHours(0, 0, 0, 0), t;\n}\nfunction ut(t, e) {\n  return t = h(t), e = h(e), e.getTime() - t.getTime();\n}\nfunction He(t, e) {\n  const n = ut(t, e) / ye;\n  return n > 0 ? Math.floor(n) : Math.ceil(n);\n}\nfunction Pe(t, e) {\n  const n = ut(t, e) / Me;\n  return n > 0 ? Math.floor(n) : Math.ceil(n);\n}\nfunction Be(t, e) {\n  const n = ut(t, e) / Se;\n  return n > 0 ? Math.floor(n) : Math.ceil(n);\n}\nfunction Ue(t, e) {\n  return t = wt(t), e = wt(e), (e.getTime() - t.getTime()) / Ee;\n}\nfunction wr(t, e, n = 0) {\n  return t = Et(t, n), e = Et(e, n), (e.getTime() - t.getTime()) / Fe;\n}\nfunction Ye(t, e) {\n  t = h(t), e = h(e);\n  const n = e.getFullYear() - t.getFullYear(), r = e.getMonth() - t.getMonth();\n  return n * 12 + r;\n}\nfunction Er(t, e) {\n  t = h(t), e = h(e);\n  const n = e.getFullYear() - t.getFullYear(), r = rt(e) - rt(t);\n  return n * 4 + r;\n}\nfunction We(t, e) {\n  return t = h(t), e = h(e), e.getFullYear() - t.getFullYear();\n}\nfunction Ge(t, e) {\n  t = h(t), e = h(e);\n  const n = t.getTime() - e.getTime();\n  return n < 0 ? -1 : n > 0 ? 1 : n;\n}\nfunction k(t, e) {\n  return -Ge(t, e);\n}\nfunction Nr(t, e) {\n  return t = yt(t), e = yt(e), He(t, e);\n}\nfunction Ar(t, e) {\n  return t = Mt(t), e = Mt(e), Pe(t, e);\n}\nfunction Fr(t, e) {\n  return t = St(t), e = St(e), Be(t, e);\n}\nfunction ze(t, e) {\n  const n = k(t, e), r = Math.abs(Ue(t, e));\n  t = h(t), t.setDate(t.getDate() + n * r);\n  const o = k(t, e) === -n;\n  return n * (r - (o ? 1 : 0));\n}\nfunction Tr(t, e) {\n  const n = ze(t, e) / ct;\n  return n > 0 ? Math.floor(n) : Math.ceil(n);\n}\nfunction qe(t, e) {\n  const n = k(t, e), r = Math.abs(Ye(t, e));\n  t = h(t), t.setMonth(t.getMonth() + n * r);\n  const o = k(t, e) === -n;\n  return n * (r - (o ? 1 : 0));\n}\nfunction Or(t, e) {\n  const n = qe(t, e) / 3;\n  return n > 0 ? Math.floor(n) : Math.ceil(n);\n}\nfunction $r(t, e) {\n  const n = k(t, e), r = Math.abs(We(t, e));\n  t = h(t), t.setFullYear(t.getFullYear() + n * r);\n  const o = k(t, e) === -n;\n  return n * (r - (o ? 1 : 0));\n}\nfunction je(t, e = {}) {\n  if (t == null || typeof t != \"object\")\n    return t;\n  const { cloneObject: n = ot } = e, r = {}, o = [\n    {\n      parent: r,\n      prop: \"root\",\n      data: t\n    }\n  ], i = /* @__PURE__ */ new WeakMap(), s = [], c = [];\n  for (; o.length; ) {\n    const { parent: a, prop: f, data: u } = o.pop();\n    if (!a)\n      continue;\n    const d = ie(u);\n    if (d === \"Date\") {\n      a[f] = new Date(u);\n      continue;\n    }\n    if (d !== \"Array\") {\n      const l = n(d, u);\n      if (l != null) {\n        a[f] = l;\n        continue;\n      }\n    }\n    const g = a[f] = d === \"Array\" || d === \"Set\" || d === \"Map\" ? [] : {};\n    if (d === \"Set\" || d === \"Map\") {\n      let l = 0;\n      if (d === \"Set\") {\n        for (const p of u)\n          i.has(p) ? g[l] = i.get(p) : p !== null && typeof p == \"object\" ? o.push({\n            parent: g,\n            prop: l,\n            data: p\n          }) : g[l] = p, ++l;\n        s.push({ parent: a, prop: f });\n      } else {\n        for (const p of u) {\n          const b = [];\n          l = 0;\n          for (const m of p)\n            i.has(m) ? b[l] = i.get(m) : m !== null && typeof m == \"object\" ? o.push({\n              parent: b,\n              prop: l,\n              data: m\n            }) : b[l] = m, ++l;\n          g.push(b);\n        }\n        c.push({ parent: a, prop: f });\n      }\n    } else\n      for (const l of Object.keys(u)) {\n        const p = u[l];\n        i.has(p) ? g[l] = i.get(p) : p !== null && typeof p == \"object\" ? o.push({\n          parent: g,\n          prop: l,\n          data: p\n        }) : g[l] = p;\n      }\n    i.set(u, g);\n  }\n  for (const { parent: a, prop: f } of s)\n    a[f] = new Set(a[f]);\n  for (const { parent: a, prop: f } of c)\n    a[f] = new Map(a[f]);\n  return r.root;\n}\nconst Ke = \"This object was destroyed, do not use it anywhere\", Qe = () => !0;\nfunction Rr(t, e = Ke) {\n  const n = () => {\n    throw new Error(e);\n  };\n  Object.keys(t).forEach((r) => {\n    typeof t[r] == \"function\" ? t[r] = n.bind(t) : t[r] = null;\n  }), Object.getOwnPropertyNames(t.constructor.prototype).forEach((r) => {\n    r !== \"constructor\" && typeof t[r] == \"function\" && (t[r] = n.bind(t));\n  }), t.isDestroyed = Qe;\n}\nconst Xe = y && (\"ontouchstart\" in window || Ze() > 0), _r = Xe ? \"pointerdown\" : \"click\";\nfunction Ze() {\n  return typeof navigator < \"u\" && (navigator.maxTouchPoints || navigator.msMaxTouchPoints) || 0;\n}\nfunction kr(t, e, n = window.Event) {\n  const { type: r, bubbles: o = !1, cancelable: i = !1, ...s } = e;\n  if (!w(r) || r === \"\")\n    return !1;\n  let c;\n  return w(n) ? c = new n(r, { bubbles: o, cancelable: i }) : (c = document.createEvent(\"HTMLEvents\"), c.initEvent(r, o, i)), Object.assign(c, s), t.dispatchEvent(c);\n}\nconst Ve = [\n  \"button\",\n  \"[href]:not(.disabled)\",\n  \"input\",\n  \"select\",\n  \"textarea\",\n  \"[tabindex]\",\n  \"[contenteditable]\"\n].map((t) => `${t}:not(:disabled):not([disabled])`).join(\", \");\nfunction Z(t) {\n  return !!t && t.nodeType === 1;\n}\nfunction ve(t) {\n  return Z(t) ? t : document.body;\n}\nfunction Je(t, e) {\n  return !y || !t ? [] : Array.from(ve(e).querySelectorAll(t));\n}\nfunction Cr(t) {\n  if (!y)\n    return !1;\n  const e = document.activeElement;\n  return !Z(t) || !e ? !1 : t === e || Qt(e, t);\n}\nfunction Qt(t, e) {\n  if (!t || !e)\n    return !1;\n  const n = e.__transferElement;\n  return e.contains(t) || !!n && (n === t || n.contains(t));\n}\nfunction tn(t) {\n  if (!y || !Z(t) || !t.parentNode || !Qt(t, document.body) || t.style.display === \"none\")\n    return !0;\n  const e = t.getBoundingClientRect();\n  return !(e && e.width > 0 && e.height > 0);\n}\nfunction en(t) {\n  return !tn(t);\n}\nfunction nn(t) {\n  return !Z(t) || t.hasAttribute(\"disabled\") && t.getAttribute(\"disabled\") !== \"false\" || t.disabled;\n}\nfunction xr(t, e = !1) {\n  const n = e ? () => !1 : nn;\n  return Je(Ve, t).filter(\n    (r) => en(r) && r.tabIndex > -1 && !n(r)\n  );\n}\nfunction rn(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.paddingLeft) + parseFloat(e.paddingRight) || 0;\n}\nfunction Dr(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.paddingTop) + parseFloat(e.paddingBottom) || 0;\n}\nfunction Ir(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.marginLeft) + parseFloat(e.marginRight) || 0;\n}\nfunction Lr(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.marginTop) + parseFloat(e.marginBottom) || 0;\n}\nfunction Hr(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.borderLeftWidth) + parseFloat(e.borderRightWidth) || 0;\n}\nfunction Pr(t) {\n  if (!y || !t)\n    return 0;\n  const e = getComputedStyle(t);\n  return parseFloat(e.borderTopWidth) + parseFloat(e.borderBottomWidth) || 0;\n}\nfunction Br(t) {\n  if (!y || !t)\n    return 0;\n  const e = document.createRange();\n  e.setStart(t, 0), e.setEnd(t, t.childNodes.length);\n  const n = e.getBoundingClientRect().width, r = rn(t);\n  return n + r;\n}\nfunction Ur(t) {\n  return pe(t, !0) ? `${me(t)}px` : String(t).trim();\n}\nconst on = /[\"'&<>]/;\nfunction Yr(t) {\n  const e = \"\" + t, n = on.exec(e);\n  if (!n)\n    return e;\n  let r = \"\", o, i, s = 0;\n  for (i = n.index; i < e.length; i++) {\n    switch (e.charCodeAt(i)) {\n      case 34:\n        o = \"&quot;\";\n        break;\n      case 38:\n        o = \"&amp;\";\n        break;\n      case 39:\n        o = \"&#39;\";\n        break;\n      case 60:\n        o = \"&lt;\";\n        break;\n      case 62:\n        o = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    s !== i && (r += e.substring(s, i)), s = i + 1, r += o;\n  }\n  return s !== i ? r + e.substring(s, i) : r;\n}\nfunction Wr() {\n  const t = /* @__PURE__ */ new Map();\n  return {\n    on(e, n) {\n      const r = t.get(e);\n      (r == null ? void 0 : r.add(n)) || t.set(e, /* @__PURE__ */ new Set([n]));\n    },\n    off(e, n) {\n      const r = t.get(e);\n      r && r.delete(n);\n    },\n    clear(e) {\n      const n = t.get(e);\n      n && n.clear();\n    },\n    clearAll() {\n      t.clear();\n    },\n    emit(e, ...n) {\n      const r = t.get(e);\n      r && r.forEach((o) => {\n        o(...n);\n      });\n    }\n  };\n}\nfunction lt(t, e, n) {\n  t && !e.has(t) && (n(t), e.add(t));\n}\nconst sn = /* @__PURE__ */ new Set();\nfunction Gr(t, e = console.info) {\n  lt(t, sn, e);\n}\nconst cn = /* @__PURE__ */ new Set();\nfunction zr(t, e = console.warn) {\n  lt(t, cn, e);\n}\nconst an = /* @__PURE__ */ new Set();\nfunction qr(t, e = console.warn) {\n  lt(t, an, e);\n}\nconst dt = y ? requestAnimationFrame : (t) => {\n  setTimeout(t, 16);\n};\nfunction jr(t, e = 16) {\n  if (typeof t != \"function\")\n    return ot;\n  const n = (...i) => {\n    t(...i);\n  };\n  if (e <= 0)\n    return Xt(n);\n  let r = 0, o;\n  return function(...i) {\n    const s = Date.now(), c = s - r;\n    clearTimeout(o), c >= e ? (r = s, n(...i)) : o = setTimeout(\n      () => {\n        r = Date.now(), n(...i);\n      },\n      Math.max(0, e - c)\n    );\n  };\n}\nfunction Kr(t, e = 100) {\n  if (typeof t != \"function\")\n    return ot;\n  const n = (...o) => {\n    t(...o);\n  };\n  if (e <= 0)\n    return Xt(n);\n  let r;\n  return function(...o) {\n    clearTimeout(r), r = setTimeout(() => {\n      n(...o);\n    }, e);\n  };\n}\nfunction Xt(t) {\n  if (typeof t != \"function\")\n    return t;\n  let e = !1, n, r;\n  return function(...o) {\n    return n = o, e || (e = !0, r = Promise.resolve().then(() => (e = !1, r = void 0, t(...n)))), r;\n  };\n}\nfunction Qr(t) {\n  if (typeof t != \"function\")\n    return t;\n  let e = !1, n, r;\n  return function(...o) {\n    return n = o, e || (e = !0, r = new Promise(\n      (i) => dt(() => {\n        e = !1, r = void 0, i(t(...n));\n      })\n    )), r;\n  };\n}\nconst x = /* @__PURE__ */ new Set(), Zt = /* @__PURE__ */ new WeakMap();\nfunction fn() {\n  x.forEach((t) => {\n    t(...Zt.get(t));\n  }), x.clear();\n}\nfunction Xr(t, ...e) {\n  if (typeof t != \"function\")\n    return t;\n  Zt.set(t, e), !x.has(t) && (x.add(t), x.size === 1 && Promise.resolve().then(fn));\n}\nconst D = /* @__PURE__ */ new Set(), Vt = /* @__PURE__ */ new WeakMap();\nfunction un() {\n  D.forEach((t) => {\n    t(...Vt.get(t));\n  }), D.clear();\n}\nfunction Zr(t, ...e) {\n  if (typeof t != \"function\")\n    return t;\n  Vt.set(t, e), !D.has(t) && (D.add(t), D.size === 1 && dt(un));\n}\nasync function Vr(t, e, n) {\n  const r = [], o = [];\n  for (const i of e) {\n    const s = Promise.resolve().then(() => n(i, e));\n    if (r.push(s), t <= e.length) {\n      const c = s.then(() => o.splice(o.indexOf(c), 1));\n      o.push(c), o.length >= t && await Promise.race(o);\n    }\n  }\n  return Promise.all(r);\n}\nlet et = null;\nfunction vr() {\n  if (!y)\n    return !0;\n  if (et === null) {\n    const t = document.createElement(\"div\");\n    t.style.display = \"flex\", t.style.flexDirection = \"column\", t.style.rowGap = \"1px\", t.appendChild(document.createElement(\"div\")), t.appendChild(document.createElement(\"div\")), document.body.appendChild(t), et = t.scrollHeight === 1, document.body.removeChild(t);\n  }\n  return et;\n}\nlet nt = null;\nfunction Jr() {\n  return y ? (nt === null && (nt = \"loading\" in document.createElement(\"img\")), nt) : !0;\n}\nfunction to(t) {\n  return Array.isArray(t) ? t : [t];\n}\nfunction eo(t, ...e) {\n  return Ft(t) ? t(...e) : t;\n}\nfunction no(t) {\n  return t.replace(/[\\\\/]+/g, \"/\");\n}\nfunction ro(t) {\n  return t[t.length - 1];\n}\nfunction oo(t, e, n = (o) => o, r = !1) {\n  const o = r ? /* @__PURE__ */ new Map() : {};\n  if (!w(e))\n    return o;\n  const i = r ? (c, a) => o.set(c, a) : (c, a) => o[c] = a, s = Ft(e) ? e : (c) => c[e];\n  return t.forEach((c) => {\n    const a = s(c);\n    w(a) && i(a, n(c));\n  }), o;\n}\nfunction io(t, e, n = !1) {\n  let r = -1;\n  return n || typeof e != \"function\" ? r = t.findIndex((o) => o === e) : r = t.findIndex(e), ~r ? t.splice(r, 1)[0] : null;\n}\nfunction so(t, e = []) {\n  (typeof e == \"string\" || typeof e == \"function\") && (e = [e]);\n  const n = e.length, r = {};\n  for (const o of t) {\n    let i;\n    for (let s = 0; s < n; ++s) {\n      const c = s === n - 1, a = e[s], f = typeof a == \"function\" ? a(o) : o[a];\n      i ? (i[f] || (i[f] = c ? [] : {}), i = i[f]) : (r[f] || (r[f] = c ? [] : {}), i = r[f]);\n    }\n    i.push(o);\n  }\n  return r;\n}\nfunction co(t, e = {}) {\n  const {\n    keyField: n = \"id\",\n    childField: r = \"children\",\n    parentField: o = \"parent\",\n    rootId: i = null\n  } = e, s = w(i) && i !== \"\", c = [], a = /* @__PURE__ */ new Map();\n  for (let f = 0, u = t.length; f < u; ++f) {\n    const d = t[f], g = d[n];\n    if (!(s ? g === i : !w(g)))\n      if (a.has(g) ? d[r] = a.get(g) : (d[r] = [], a.set(g, d[r])), d[o] && (!s || d[o] !== i)) {\n        const l = d[o];\n        a.has(l) || a.set(l, []), a.get(l).push(d);\n      } else\n        c.push(d);\n  }\n  return c;\n}\nfunction ao(t, e = {}) {\n  const {\n    keyField: n = \"id\",\n    childField: r = \"children\",\n    parentField: o = \"parent\",\n    rootId: i = null,\n    depthFirst: s = !1,\n    injectId: c = !0,\n    buildId: a = (m) => m,\n    filter: f = oe,\n    cascaded: u = !1,\n    forceInject: d = !1\n  } = e;\n  let g = 1;\n  const l = w(i) && i !== \"\", p = [], b = [...t];\n  for (; b.length; ) {\n    const m = b.shift(), V = m[r], v = Array.isArray(V) && V.length ? V : [];\n    c && (d || !m[n]) && (m[n] = a(g++));\n    const vt = m[n];\n    c && o && (l ? m[o] === i : !m[o]) && (m[o] = i);\n    const ht = f(m);\n    if (ht && p.push(m), ht || !u) {\n      for (let J = 0, Jt = v.length; J < Jt; ++J) {\n        const gt = v[J];\n        c && o && (gt[o] = vt), !s && b.push(gt);\n      }\n      s && b.unshift(...v);\n    }\n  }\n  return p;\n}\nfunction fo(t, e, n = {}) {\n  const { childField: r = \"children\", depthFirst: o = !1 } = n, i = [...t.map((s) => ({ item: s, depth: 0, parent: null }))];\n  for (; i.length; ) {\n    const { item: s, depth: c, parent: a } = i.shift(), f = s[r];\n    e(s, c, a), W(f) && i[o ? \"unshift\" : \"push\"](\n      ...Array.from(f).map((u) => ({ item: u, depth: c + 1, parent: s }))\n    );\n  }\n}\nfunction uo(t, e, n = {}) {\n  const { childField: r = \"children\", depthFirst: o = !1, clearChildren: i = !0 } = n, s = [], c = [...t.map((a) => ({ item: a, depth: 0, parent: null, result: s }))];\n  for (; c.length; ) {\n    const { item: a, depth: f, parent: u, result: d } = c.shift(), g = a[r], l = e(a, f, u) ?? {};\n    i && (l[r] = []), d.push(l), W(g) && Array.from(g).length && (l[r] = [], c[o ? \"unshift\" : \"push\"](\n      ...Array.from(g).map((b) => ({\n        item: b,\n        depth: f + 1,\n        parent: a,\n        result: l[r]\n      }))\n    ));\n  }\n  return s;\n}\nfunction lo(t, e, n = {}) {\n  const {\n    childField: r = \"children\",\n    leafOnly: o = !1,\n    isLeaf: i = (c) => !W(c[r])\n  } = n, s = (c, a, f) => c.map((u) => ({ ...u })).filter((u) => {\n    const d = u[r], g = i(u), l = W(d) && Array.from(d);\n    if (o && !g) {\n      if (l && l.length) {\n        const b = s(l, a + 1, u);\n        return u[r] = b, !!b.length;\n      }\n      return !1;\n    }\n    const p = e(u, a, f);\n    if (g)\n      return p;\n    if (!o && p)\n      return !0;\n    if (l && l.length) {\n      const b = s(l, a + 1, u);\n      return u[r] = b, !!b.length;\n    }\n    return p;\n  });\n  return s(t, 0, null);\n}\nconst Nt = (t, e) => Number.isNaN(Number(t) - Number(e)) ? String(t).localeCompare(e) : t - e;\nfunction ho(t, e) {\n  if (!t.sort || Y(e) && !e.key || !e.length)\n    return t;\n  const n = Array.from(t);\n  Array.isArray(e) || (e = [e]);\n  const r = e.map(\n    (o) => typeof o == \"string\" ? {\n      key: o,\n      method: Nt,\n      type: \"asc\"\n    } : o\n  ).map((o) => (typeof o.accessor != \"function\" && (o.accessor = (i) => i[o.key]), typeof o.method != \"function\" && (o.method = Nt), o.params = Array.isArray(o.params) ? o.params : [], o));\n  return n.sort((o, i) => {\n    let s = 0;\n    for (const c of r) {\n      const { method: a, type: f, accessor: u, params: d } = c, g = f === \"desc\", l = a(u(o, ...d), u(i, ...d));\n      if (s = g ? -l : l, s)\n        break;\n    }\n    return s;\n  }), n;\n}\nfunction go(t, e, n = !0) {\n  t = n ? je(t) : t;\n  const r = [\n    {\n      source: t,\n      target: e\n    }\n  ];\n  for (; r.length; ) {\n    const { source: o, target: i } = r.pop();\n    Object.keys(i).forEach((s) => {\n      Y(i[s]) ? (Y(o[s]) || (o[s] = {}), r.push({\n        source: o[s],\n        target: i[s]\n      })) : Array.isArray(i[s]) ? (Array.isArray(o[s]) || (o[s] = []), r.push({\n        source: o[s],\n        target: i[s]\n      })) : o[s] = i[s];\n    });\n  }\n  return t;\n}\nfunction po(t) {\n  t = Array.from(t);\n  let e = !1;\n  const n = () => {\n    var r;\n    e || ((r = t.shift()) == null || r(), t.length && dt(n));\n  };\n  return n(), () => e = !0;\n}\nfunction ln(t) {\n  const e = t.match(/[A-Z]+/);\n  return e && e[0] === t;\n}\nconst dn = /\\B([A-Z])(?=[^A-Z_-])/g;\nfunction mo(t) {\n  return t.replace(dn, \"-$1\").toLowerCase();\n}\nfunction hn(t) {\n  return t = t.trim().replace(/\\s+/g, \"-\"), t = t.replace(/-+(\\w)/g, (e, n) => n ? n.toUpperCase() : \"\"), (t.charAt(0).toLocaleUpperCase() + t.slice(1)).replace(\n    /[^\\w]/g,\n    \"\"\n  );\n}\nfunction bo(t) {\n  const e = hn(t);\n  return ln(e) ? e.toLocaleLowerCase() : e.charAt(0).toLowerCase() + e.slice(1);\n}\nexport {\n  _r as CLICK_TYPE,\n  fe as COLOR_NAMES,\n  zt as DAY_ON_HOURS,\n  ir as DAY_ON_MILLISECONDS,\n  Ee as DAY_ON_MILLS,\n  we as DAY_ON_MINUTES,\n  qt as DAY_ON_SECONDS,\n  Ct as HEX_REG_3,\n  xt as HEX_REG_4,\n  Dt as HEX_REG_6,\n  It as HEX_REG_8,\n  or as HOUR_ON_MILLISECONDS,\n  Se as HOUR_ON_MILLS,\n  X as HOUR_ON_MINUTES,\n  Gt as HOUR_ON_SECONDS,\n  Rt as HSLA_REG,\n  $t as HSL_REG,\n  kt as HSVA_REG,\n  _t as HSV_REG,\n  rr as MINUTE_ON_MILLISECONDS,\n  Me as MINUTE_ON_MILLS,\n  C as MINUTE_ON_SECONDS,\n  G as NAMED_COLORS,\n  Kt as QUARTER_ON_MONTHS,\n  Ot as RGBA_REG,\n  Tt as RGB_REG,\n  A as SECOND_ON_MILLISECONDS,\n  ye as SECOND_ON_MILLS,\n  Xe as USE_TOUCH,\n  ct as WEEK_ON_DAYS,\n  Ne as WEEK_ON_HOURS,\n  sr as WEEK_ON_MILLISECONDS,\n  Fe as WEEK_ON_MILLS,\n  Ae as WEEK_ON_MINUTES,\n  jt as WEEK_ON_SECONDS,\n  Oe as YEAR_ON_MONTHS,\n  Te as YEAR_ON_QUARTERS,\n  at as addDays,\n  ur as addHalfDays,\n  Ie as addHours,\n  Ce as addMilliseconds,\n  De as addMinutes,\n  ft as addMonths,\n  dr as addQuarters,\n  xe as addSeconds,\n  lr as addWeeks,\n  hr as addYears,\n  Un as adjustAlpha,\n  Zn as boundRange,\n  co as buildTree,\n  eo as callIfFunc,\n  Ge as compareAsc,\n  k as compareDesc,\n  Qt as contains,\n  qn as createBITree,\n  Wr as createEventEmitter,\n  Kr as debounce,\n  Qr as debounceFrame,\n  Xt as debounceMinor,\n  Dn as decide,\n  E as decimalLength,\n  je as deepClone,\n  Rr as destroyObject,\n  Ue as differenceDays,\n  ze as differenceFullDays,\n  Fr as differenceFullHours,\n  Ar as differenceFullMinutes,\n  qe as differenceFullMonths,\n  Or as differenceFullQuarters,\n  Nr as differenceFullSeconds,\n  Tr as differenceFullWeeks,\n  $r as differenceFullYears,\n  Be as differenceHours,\n  ut as differenceMilliseconds,\n  Pe as differenceMinutes,\n  Ye as differenceMonths,\n  Er as differenceQuarters,\n  He as differenceSeconds,\n  wr as differenceWeeks,\n  We as differenceYears,\n  jn as digitLength,\n  kr as dispatchEvent,\n  nr as divide,\n  N as doubleDigits,\n  br as endOfDay,\n  to as ensureArray,\n  qr as errorOnce,\n  Yr as escapeHtml,\n  lo as filterTree,\n  ao as flatTree,\n  cr as format,\n  vn as formatByteSize,\n  fr as getChineseWeek,\n  ro as getLast,\n  mr as getLastSunday,\n  rt as getQuarter,\n  Br as getRangeWidth,\n  ar as getTime,\n  ie as getType,\n  Hr as getXBorder,\n  Ir as getXMargin,\n  rn as getXPadding,\n  Pr as getYBorder,\n  Lr as getYMargin,\n  Dr as getYPadding,\n  so as groupByProps,\n  pn as has,\n  le as hslToHsv,\n  Lt as hslToRgb,\n  Pn as hsvToHsl,\n  de as hsvToRgb,\n  Gr as infoOnce,\n  B as is,\n  Nn as isArray,\n  En as isBigInt,\n  yn as isBoolean,\n  y as isClient,\n  Ln as isColor,\n  On as isDate,\n  w as isDefined,\n  nn as isDisabled,\n  _n as isElement,\n  Rn as isEmpty,\n  Sn as isFalse,\n  Cr as isFocusIn,\n  Ft as isFunction,\n  tn as isHidden,\n  gn as isIOS,\n  W as isIterable,\n  Le as isLeapYear,\n  Tn as isMap,\n  re as isNaN,\n  ne as isNull,\n  mn as isNumber,\n  Y as isObject,\n  An as isPromise,\n  $n as isRegExp,\n  Fn as isSet,\n  bn as isString,\n  wn as isSymbol,\n  Mn as isTrue,\n  pe as isValidNumber,\n  en as isVisible,\n  Vn as leaveNumber,\n  oo as listToMap,\n  uo as mapTree,\n  go as mergeObjects,\n  er as minus,\n  Bn as mixColor,\n  Qn as multipleFixed,\n  Zr as nextFrameOnce,\n  Xr as nextTickOnce,\n  ot as noop,\n  R as normalizeAlpha,\n  z as normalizeHsl,\n  q as normalizeHsv,\n  no as normalizePath,\n  _ as normalizeRgb,\n  ge as numberRE,\n  be as padStartZeros,\n  Hn as parseColor,\n  T as parseColorToRgba,\n  ue as parseStringColor,\n  tr as plus,\n  Je as queryAll,\n  xr as queryTabables,\n  dt as raf,\n  Jn as random,\n  Yn as randomColor,\n  Wn as randomHardColor,\n  Bt as randomPreferColor,\n  Gn as randomSoftColor,\n  xn as randomString,\n  Cn as range,\n  gr as rangeDate,\n  pr as rangeMonth,\n  io as removeArrayItem,\n  it as rgbToHex,\n  Ht as rgbToHsl,\n  Pt as rgbToHsv,\n  st as rgbaToHex,\n  Xn as round,\n  Vr as runParallel,\n  po as runQueueFrame,\n  Kn as segmentNumber,\n  ho as sortByProps,\n  wt as startOfDay,\n  St as startOfHour,\n  Mt as startOfMinute,\n  yr as startOfMonth,\n  Mr as startOfQuarter,\n  yt as startOfSecond,\n  Et as startOfWeek,\n  Sr as startOfYear,\n  vr as supportFlexGap,\n  Jr as supportImgLoading,\n  jr as throttle,\n  P as times,\n  bo as toCamelCase,\n  hn as toCapitalCase,\n  Ur as toCssSize,\n  h as toDate,\n  kn as toFalse,\n  Yt as toFixed,\n  zn as toGrayScale,\n  mo as toKebabCase,\n  me as toNumber,\n  Wt as toPrecision,\n  oe as toTrue,\n  oo as transformListToMap,\n  co as transformTree,\n  fo as walkTree,\n  zr as warnOnce,\n  In as writeClipboard\n};\n//# sourceMappingURL=index.mjs.map\n","import type { InjectionKey } from 'vue'\r\nimport type { EventEmitter } from '@vexip-ui/utils'\r\nimport type { LayoutItem, Layout, LayoutInstance } from './types'\r\n\r\nexport const LAYOUT_KEY = Symbol('LAYOUT_KEY') as InjectionKey<LayoutInstance>\r\nexport const EMITTER_KEY = Symbol('EMITTER_KEY') as InjectionKey<EventEmitter>\r\n\r\n/**\r\n * Return the bottom coordinate of the layout.\r\n *\r\n * @param layout Layout array.\r\n * @return Bottom coordinate.\r\n */\r\nexport function bottom(layout: Layout): number {\r\n  let max = 0\r\n  let bottomY\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    bottomY = layout[i].y + layout[i].h\r\n    if (bottomY > max) max = bottomY\r\n  }\r\n  return max\r\n}\r\n\r\nexport function cloneLayout(layout: Layout): Layout {\r\n  const newLayout = Array(layout.length)\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    newLayout[i] = cloneLayoutItem(layout[i])\r\n  }\r\n  return newLayout\r\n}\r\n\r\n// Fast path to cloning, since this is monomorphic\r\nexport function cloneLayoutItem(layoutItem: LayoutItem): LayoutItem {\r\n  // return JSON.parse(JSON.stringify(layoutItem))\r\n  return { ...layoutItem }\r\n}\r\n\r\n/**\r\n * Given two layoutitems, check if they collide.\r\n *\r\n * @return True if colliding.\r\n */\r\nexport function collides(l1: LayoutItem, l2: LayoutItem): boolean {\r\n  if (l1 === l2) return false // same element\r\n  if (l1.x + l1.w <= l2.x) return false // l1 is left of l2\r\n  if (l1.x >= l2.x + l2.w) return false // l1 is right of l2\r\n  if (l1.y + l1.h <= l2.y) return false // l1 is above l2\r\n  if (l1.y >= l2.y + l2.h) return false // l1 is below l2\r\n  return true // boxes overlap\r\n}\r\n\r\n/**\r\n * Given a layout, compact it. This involves going down each y coordinate and removing gaps\r\n * between items.\r\n *\r\n * @param  layout Layout.\r\n * @param  verticalCompact Whether or not to compact the layout vertically.\r\n * @param minPositions\r\n * @return Compacted Layout.\r\n */\r\nexport function compact(layout: Layout, verticalCompact?: boolean, minPositions?: any): Layout {\r\n  // Statics go in the compareWith array right away so items flow around them.\r\n  const compareWith = getStatics(layout)\r\n  // We go through the items by row and column.\r\n  const sorted = sortLayoutItemsByRowCol(layout)\r\n  // Holding for new items.\r\n  const out: Layout = Array(layout.length)\r\n\r\n  for (let i = 0, len = sorted.length; i < len; i++) {\r\n    let l = sorted[i]\r\n\r\n    // Don't move static elements\r\n    if (!l.static) {\r\n      l = compactItem(compareWith, l, verticalCompact, minPositions)\r\n\r\n      // Add to comparison array. We only collide with items before this one.\r\n      // Statics are already in this array.\r\n      compareWith.push(l)\r\n    }\r\n\r\n    // Add to output array to make sure they still come out in the right order.\r\n    out[layout.indexOf(l)] = l\r\n\r\n    // Clear moved flag, if it exists.\r\n    l.moved = false\r\n  }\r\n\r\n  return out\r\n}\r\n\r\n/**\r\n * Compact an item in the layout.\r\n */\r\nexport function compactItem(\r\n  compareWith: Layout,\r\n  l: LayoutItem,\r\n  verticalCompact?: boolean,\r\n  minPositions?: any\r\n): LayoutItem {\r\n  if (verticalCompact) {\r\n    // Move the element up as far as it can go without colliding.\r\n    while (l.y > 0 && !getFirstCollision(compareWith, l)) {\r\n      l.y--\r\n    }\r\n  } else if (minPositions) {\r\n    const minY = minPositions[l.i].y\r\n    while (l.y > minY && !getFirstCollision(compareWith, l)) {\r\n      l.y--\r\n    }\r\n  }\r\n\r\n  // Move it down, and keep moving it down if it's colliding.\r\n  let collides\r\n  while ((collides = getFirstCollision(compareWith, l))) {\r\n    l.y = collides.y + collides.h\r\n  }\r\n  return l\r\n}\r\n\r\n/**\r\n * Given a layout, make sure all elements fit within its bounds.\r\n *\r\n * @param  layout Layout array.\r\n * @param  bounds Number of columns.\r\n */\r\nexport function correctBounds(layout: Layout, bounds: { cols: number }): Layout {\r\n  const collidesWith = getStatics(layout)\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    const l = layout[i]\r\n    // Overflows right\r\n    if (l.x + l.w > bounds.cols) l.x = bounds.cols - l.w\r\n    // Overflows left\r\n    if (l.x < 0) {\r\n      l.x = 0\r\n      l.w = bounds.cols\r\n    }\r\n    if (!l.static) collidesWith.push(l)\r\n    else {\r\n      // If this is static and collides with other statics, we must move it down.\r\n      // We have to do something nicer than just letting them overlap.\r\n      while (getFirstCollision(collidesWith, l)) {\r\n        l.y++\r\n      }\r\n    }\r\n  }\r\n  return layout\r\n}\r\n\r\n/**\r\n * Get a layout item by ID. Used so we can override later on if necessary.\r\n *\r\n * @param    layout Layout array.\r\n * @param   id     ID\r\n * @return     Item at ID.\r\n */\r\nexport function getLayoutItem(layout: Layout, id: number | string): LayoutItem | undefined {\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    if (layout[i].i === id) return layout[i]\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the first item this layout collides with.\r\n * It doesn't appear to matter which order we approach this from, although\r\n * perhaps that is the wrong thing to do.\r\n *\r\n * @param  {Object} layoutItem Layout item.\r\n * @return {Object|undefined}  A colliding layout item, or undefined.\r\n */\r\nexport function getFirstCollision(layout: Layout, layoutItem: LayoutItem): LayoutItem | undefined {\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    if (collides(layout[i], layoutItem)) return layout[i]\r\n  }\r\n}\r\n\r\nexport function getAllCollisions(layout: Layout, layoutItem: LayoutItem): Array<LayoutItem> {\r\n  return layout.filter(l => collides(l, layoutItem))\r\n}\r\n\r\n/**\r\n * Get all static elements.\r\n * @param layout Array of layout objects.\r\n * @return  Array of static layout items..\r\n */\r\nexport function getStatics(layout: Layout): Array<LayoutItem> {\r\n  return layout.filter(l => l.static)\r\n}\r\n\r\n/**\r\n * Move an element. Responsible for doing cascading movements of other elements.\r\n *\r\n * @param        layout Full layout to modify.\r\n * @param   layoutItem      element to move.\r\n * @param       x    X position in grid units.\r\n * @param       y    Y position in grid units.\r\n * @param      isUserAction If true, designates that the item we're moving is\r\n *                                     being dragged/resized by th euser.\r\n */\r\nexport function moveElement(\r\n  layout: Layout,\r\n  layoutItem: LayoutItem,\r\n  x?: number,\r\n  y?: number,\r\n  isUserAction = false,\r\n  preventCollision = false\r\n): Layout {\r\n  if (layoutItem.static) return layout\r\n\r\n  const oldX = layoutItem.x\r\n  const oldY = layoutItem.y\r\n\r\n  const movingUp = y && layoutItem.y > y\r\n  // This is quite a bit faster than extending the object\r\n  if (typeof x === 'number') layoutItem.x = x\r\n  if (typeof y === 'number') layoutItem.y = y\r\n  layoutItem.moved = true\r\n\r\n  // If this collides with anything, move it.\r\n  // When doing this comparison, we have to sort the items we compare with\r\n  // to ensure, in the case of multiple collisions, that we're getting the\r\n  // nearest collision.\r\n  let sorted = sortLayoutItemsByRowCol(layout)\r\n  if (movingUp) sorted = sorted.reverse()\r\n  const collisions = getAllCollisions(sorted, layoutItem)\r\n\r\n  if (preventCollision && collisions.length) {\r\n    layoutItem.x = oldX\r\n    layoutItem.y = oldY\r\n    layoutItem.moved = false\r\n    return layout\r\n  }\r\n\r\n  // Move each item that collides away from this element.\r\n  for (let i = 0, len = collisions.length; i < len; i++) {\r\n    const collision = collisions[i]\r\n\r\n    // Short circuit so we can't infinite loop\r\n    if (collision.moved) continue\r\n\r\n    // This makes it feel a bit more precise by waiting to swap for just a bit when moving up.\r\n    if (layoutItem.y > collision.y && layoutItem.y - collision.y > collision.h / 4) continue\r\n\r\n    // Don't move static items - we have to move *this* element away\r\n    if (collision.static) {\r\n      layout = moveElementAwayFromCollision(layout, collision, layoutItem, isUserAction)\r\n    } else {\r\n      layout = moveElementAwayFromCollision(layout, layoutItem, collision, isUserAction)\r\n    }\r\n  }\r\n\r\n  return layout\r\n}\r\n\r\n/**\r\n * This is where the magic needs to happen - given a collision, move an element away from the collision.\r\n * We attempt to move it up if there's room, otherwise it goes below.\r\n *\r\n * @param   layout            Full layout to modify.\r\n * @param   collidesWith Layout item we're colliding with.\r\n * @param   itemToMove   Layout item we're moving.\r\n * @param  isUserAction  If true, designates that the item we're moving is being dragged/resized\r\n *                                   by the user.\r\n */\r\nexport function moveElementAwayFromCollision(\r\n  layout: Layout,\r\n  collidesWith: LayoutItem,\r\n  itemToMove: LayoutItem,\r\n  isUserAction?: boolean\r\n): Layout {\r\n  const preventCollision = false // we're already colliding\r\n  // If there is enough space above the collision to put this element, move it there.\r\n  // We only do this on the main collision as this can get funky in cascades and cause\r\n  // unwanted swapping behavior.\r\n  if (isUserAction) {\r\n    // Make a mock item so we don't modify the item here, only modify in moveElement.\r\n    const fakeItem: LayoutItem = {\r\n      x: itemToMove.x,\r\n      y: itemToMove.y,\r\n      w: itemToMove.w,\r\n      h: itemToMove.h,\r\n      i: '-1'\r\n    }\r\n    fakeItem.y = Math.max(collidesWith.y - itemToMove.h, 0)\r\n    if (!getFirstCollision(layout, fakeItem)) {\r\n      return moveElement(layout, itemToMove, undefined, fakeItem.y, preventCollision)\r\n    }\r\n  }\r\n\r\n  // Previously this was optimized to move below the collision directly, but this can cause problems\r\n  // with cascading moves, as an item may actually leapflog a collision and cause a reversal in order.\r\n  return moveElement(layout, itemToMove, undefined, itemToMove.y + 1, preventCollision)\r\n}\r\n\r\n/**\r\n * Helper to convert a number to a percentage string.\r\n *\r\n * @param   num Any number\r\n * @return      That number as a percentage.\r\n */\r\nexport function perc(num: number): string {\r\n  return num * 100 + '%'\r\n}\r\n\r\nexport function setTransform(top: number, left: number, width: number, height: number) {\r\n  // Replace unitless items with px\r\n  const translate = 'translate3d(' + left + 'px,' + top + 'px, 0)'\r\n  return {\r\n    transform: translate,\r\n    WebkitTransform: translate,\r\n    MozTransform: translate,\r\n    msTransform: translate,\r\n    OTransform: translate,\r\n    width: width + 'px',\r\n    height: height + 'px',\r\n    position: 'absolute'\r\n  }\r\n}\r\n/**\r\n * Just like the setTransform method, but instead it will return a negative value of right.\r\n *\r\n * @param top\r\n * @param right\r\n * @param width\r\n * @param height\r\n * @returns {{transform: string, WebkitTransform: string, MozTransform: string, msTransform: string, OTransform: string, width: string, height: string, position: string}}\r\n */\r\nexport function setTransformRtl(top: number, right: number, width: number, height: number) {\r\n  // Replace unitless items with px\r\n  const translate = 'translate3d(' + right * -1 + 'px,' + top + 'px, 0)'\r\n  return {\r\n    transform: translate,\r\n    WebkitTransform: translate,\r\n    MozTransform: translate,\r\n    msTransform: translate,\r\n    OTransform: translate,\r\n    width: width + 'px',\r\n    height: height + 'px',\r\n    position: 'absolute'\r\n  }\r\n}\r\n\r\nexport function setTopLeft(top: number, left: number, width: number, height: number) {\r\n  return {\r\n    top: top + 'px',\r\n    left: left + 'px',\r\n    width: width + 'px',\r\n    height: height + 'px',\r\n    position: 'absolute'\r\n  }\r\n}\r\n/**\r\n * Just like the setTopLeft method, but instead, it will return a right property instead of left.\r\n *\r\n * @param top\r\n * @param right\r\n * @param width\r\n * @param height\r\n * @returns position style\r\n */\r\nexport function setTopRight(top: number, right: number, width: number, height: number) {\r\n  return {\r\n    top: top + 'px',\r\n    right: right + 'px',\r\n    width: width + 'px',\r\n    height: height + 'px',\r\n    position: 'absolute'\r\n  }\r\n}\r\n\r\n/**\r\n * Get layout items sorted from top left to right and down.\r\n *\r\n * @return Layout, sorted static items first.\r\n */\r\nexport function sortLayoutItemsByRowCol(layout: Layout): Layout {\r\n  return Array.from(layout).sort(function (a, b) {\r\n    if (a.y === b.y && a.x === b.x) {\r\n      return 0\r\n    }\r\n\r\n    if (a.y > b.y || (a.y === b.y && a.x > b.x)) {\r\n      return 1\r\n    }\r\n\r\n    return -1\r\n  })\r\n}\r\n\r\n/**\r\n * Validate a layout. Throws errors.\r\n *\r\n * @param layout Array of layout items.\r\n * @param contextName Context name for errors.\r\n * @throw Validation error.\r\n */\r\nexport function validateLayout(layout: Layout, contextName?: string): void {\r\n  contextName = contextName || 'Layout'\r\n  const subProps = ['x', 'y', 'w', 'h']\r\n  const keyArr = []\r\n  if (!Array.isArray(layout)) throw new Error(contextName + ' must be an array!')\r\n  for (let i = 0, len = layout.length; i < len; i++) {\r\n    const item = layout[i]\r\n    for (let j = 0; j < subProps.length; j++) {\r\n      if (typeof (item as any)[subProps[j]] !== 'number') {\r\n        throw new Error(\r\n          'VueGridLayout: ' + contextName + '[' + i + '].' + subProps[j] + ' must be a number!'\r\n        )\r\n      }\r\n    }\r\n\r\n    if (item.i === undefined || item.i === null) {\r\n      throw new Error('VueGridLayout: ' + contextName + '[' + i + '].i cannot be null!')\r\n    }\r\n\r\n    if (typeof item.i !== 'number' && typeof item.i !== 'string') {\r\n      throw new Error('VueGridLayout: ' + contextName + '[' + i + '].i must be a string or number!')\r\n    }\r\n\r\n    if (keyArr.indexOf(item.i) >= 0) {\r\n      throw new Error('VueGridLayout: ' + contextName + '[' + i + '].i must be unique!')\r\n    }\r\n    keyArr.push(item.i)\r\n\r\n    if (item.static !== undefined && typeof item.static !== 'boolean') {\r\n      throw new Error('VueGridLayout: ' + contextName + '[' + i + '].static must be a boolean!')\r\n    }\r\n  }\r\n}\r\n\r\n// Flow can't really figure this out, so we just use Object\r\nexport function autoBindHandlers(\r\n  el: Record<string, (...args: any[]) => any>,\r\n  fns: Array<string>\r\n): void {\r\n  fns.forEach(key => (el[key] = el[key].bind(el)))\r\n}\r\n\r\n/**\r\n * Convert a JS object to CSS string. Similar to React's output of CSS.\r\n * @param obj\r\n * @returns\r\n */\r\nexport function createMarkup(obj: Record<string, any>) {\r\n  const keys = Object.keys(obj)\r\n  if (!keys.length) return ''\r\n  let i\r\n  const len = keys.length\r\n  let result = ''\r\n\r\n  for (i = 0; i < len; i++) {\r\n    const key = keys[i]\r\n    const val = obj[key]\r\n    result += hyphenate(key) + ':' + addPx(key, val) + ';'\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n/* The following list is defined in React's core */\r\nexport const IS_UNITLESS: Record<string, boolean> = {\r\n  animationIterationCount: true,\r\n  boxFlex: true,\r\n  boxFlexGroup: true,\r\n  boxOrdinalGroup: true,\r\n  columnCount: true,\r\n  flex: true,\r\n  flexGrow: true,\r\n  flexPositive: true,\r\n  flexShrink: true,\r\n  flexNegative: true,\r\n  flexOrder: true,\r\n  gridRow: true,\r\n  gridColumn: true,\r\n  fontWeight: true,\r\n  lineClamp: true,\r\n  lineHeight: true,\r\n  opacity: true,\r\n  order: true,\r\n  orphans: true,\r\n  tabSize: true,\r\n  widows: true,\r\n  zIndex: true,\r\n  zoom: true,\r\n\r\n  // SVG-related properties\r\n  fillOpacity: true,\r\n  stopOpacity: true,\r\n  strokeDashoffset: true,\r\n  strokeOpacity: true,\r\n  strokeWidth: true\r\n}\r\n\r\n/**\r\n * Will add px to the end of style values which are Numbers.\r\n * @param name\r\n * @param value\r\n * @returns {*}\r\n */\r\nexport function addPx(name: string, value: number | string) {\r\n  if (typeof value === 'number' && !IS_UNITLESS[name]) {\r\n    return value + 'px'\r\n  } else {\r\n    return value\r\n  }\r\n}\r\n\r\nexport const hyphenateRE = /([a-z\\d])([A-Z])/g\r\n\r\n/**\r\n * Hyphenate a camelCase string.\r\n *\r\n * @param  str\r\n * @return\r\n */\r\nexport function hyphenate(str: string) {\r\n  return str.replace(hyphenateRE, '$1-$2').toLowerCase()\r\n}\r\n\r\nexport function findItemInArray(array: any[], property: string, value: any) {\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (array[i][property] === value) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function findAndRemove(array: any[], property: string, value: any) {\r\n  array.forEach(function (result, index) {\r\n    if (result[property] === value) {\r\n      // Remove from array\r\n      array.splice(index, 1)\r\n    }\r\n  })\r\n}\r\n\r\nexport function useNameHelper(block: string, namespace = 'vgl') {\r\n  /**\r\n   * @returns `${namespace}-${block}`\r\n   */\r\n  const b = () => `${namespace}-${block}`\r\n  /**\r\n   * @returns `${namespace}-${block}__${element}`\r\n   */\r\n  const be = (element: string) => `${b()}__${element}`\r\n  /**\r\n   * @returns `${namespace}-${block}--${modifier}`\r\n   */\r\n  const bm = (modifier: string | number) => `${b()}--${modifier}`\r\n  /**\r\n   * @returns `${namespace}-${block}__${element}--${modifier}`\r\n   */\r\n  const bem = (element: string, modifier: string | number) => `${b()}__${element}--${modifier}`\r\n\r\n  return {\r\n    b,\r\n    be,\r\n    bm,\r\n    bem\r\n  }\r\n}\r\n","// Get {x, y} positions from event.\r\nexport function getControlPosition(e: MouseEvent) {\r\n  return offsetXYFromParentOf(e)\r\n}\r\n\r\n// Get from offsetParent\r\nexport function offsetXYFromParentOf(evt: MouseEvent) {\r\n  const offsetParent = (evt.target as HTMLElement)?.offsetParent || document.body\r\n  const offsetParentRect =\r\n    (evt as any).offsetParent === document.body\r\n      ? { left: 0, top: 0 }\r\n      : offsetParent.getBoundingClientRect()\r\n\r\n  const x = evt.clientX + offsetParent.scrollLeft - offsetParentRect.left\r\n  const y = evt.clientY + offsetParent.scrollTop - offsetParentRect.top\r\n\r\n  /* const x = Math.round(evt.clientX + offsetParent.scrollLeft - offsetParentRect.left);\r\n  const y = Math.round(evt.clientY + offsetParent.scrollTop - offsetParentRect.top); */\r\n\r\n  return { x, y }\r\n}\r\n\r\n// Create an data object exposed by <DraggableCore>'s events\r\nexport function createCoreData(lastX: number, lastY: number, x: number, y: number) {\r\n  // State changes are often (but not always!) async. We want the latest value.\r\n  const isStart = !isNum(lastX)\r\n\r\n  if (isStart) {\r\n    // If this is our first move, use the x and y as last coords.\r\n    return {\r\n      deltaX: 0,\r\n      deltaY: 0,\r\n      lastX: x,\r\n      lastY: y,\r\n      x,\r\n      y\r\n    }\r\n  } else {\r\n    // Otherwise calculate proper values.\r\n    return {\r\n      deltaX: x - lastX,\r\n      deltaY: y - lastY,\r\n      lastX,\r\n      lastY,\r\n      x,\r\n      y\r\n    }\r\n  }\r\n}\r\n\r\nfunction isNum(num: unknown): num is number {\r\n  return typeof num === 'number' && !Number.isNaN(num)\r\n}\r\n","import { cloneLayout, compact, correctBounds } from './common'\r\n\r\nimport type { Layout, Breakpoint, Breakpoints, ResponsiveLayout } from './types'\r\n\r\n/**\r\n * Given a width, find the highest breakpoint that matches is valid for it (width > breakpoint).\r\n *\r\n * @param   breakpoints Breakpoints object (e.g. {lg: 1200, md: 960, ...})\r\n * @param   width Screen width.\r\n * @return        Highest breakpoint that is less than width.\r\n */\r\nexport function getBreakpointFromWidth(breakpoints: Breakpoints, width: number): Breakpoint {\r\n  const sorted = sortBreakpoints(breakpoints)\r\n  let matching = sorted[0]\r\n  for (let i = 1, len = sorted.length; i < len; i++) {\r\n    const breakpointName = sorted[i]\r\n    if (width > breakpoints[breakpointName]) matching = breakpointName\r\n  }\r\n  return matching\r\n}\r\n\r\n/**\r\n * Given a breakpoint, get the # of cols set for it.\r\n * @param   breakpoint Breakpoint name.\r\n * @param   cols       Map of breakpoints to cols.\r\n * @return             Number of cols.\r\n */\r\nexport function getColsFromBreakpoint(breakpoint: Breakpoint, cols: Breakpoints): number {\r\n  if (!cols[breakpoint]) {\r\n    throw new Error('ResponsiveGridLayout: `cols` entry for breakpoint ' + breakpoint + ' is missing!')\r\n  }\r\n  return cols[breakpoint]\r\n}\r\n\r\n/**\r\n * Given existing layouts and a new breakpoint, find or generate a new layout.\r\n *\r\n * This finds the layout above the new one and generates from it, if it exists.\r\n *\r\n * @param  orgLayout     Original layout.\r\n * @param  layouts     Existing layouts.\r\n * @param  breakpoints All breakpoints.\r\n * @param  breakpoint New breakpoint.\r\n * @param  breakpoint Last breakpoint (for fallback).\r\n * @param  cols       Column count at new breakpoint.\r\n * @param  verticalCompact Whether or not to compact the layout\r\n *   vertically.\r\n * @return              New layout.\r\n */\r\nexport function findOrGenerateResponsiveLayout(orgLayout: Layout, layouts: ResponsiveLayout, breakpoints: Breakpoints,\r\n  breakpoint: Breakpoint, lastBreakpoint: Breakpoint,\r\n  cols: number, verticalCompact: boolean): Layout {\r\n  // If it already exists, just return it.\r\n  if (layouts[breakpoint]) return cloneLayout(layouts[breakpoint])\r\n  // Find or generate the next layout\r\n  let layout = orgLayout\r\n\r\n  const breakpointsSorted = sortBreakpoints(breakpoints)\r\n  const breakpointsAbove = breakpointsSorted.slice(breakpointsSorted.indexOf(breakpoint))\r\n  for (let i = 0, len = breakpointsAbove.length; i < len; i++) {\r\n    const b = breakpointsAbove[i]\r\n    if (layouts[b]) {\r\n      layout = layouts[b]\r\n      break\r\n    }\r\n  }\r\n  layout = cloneLayout(layout || []) // clone layout so we don't modify existing items\r\n  return compact(correctBounds(layout, { cols }), verticalCompact)\r\n}\r\n\r\nexport function generateResponsiveLayout(layout: Layout, breakpoints: Breakpoints,\r\n  breakpoint: Breakpoint, lastBreakpoint: Breakpoint,\r\n  cols: number, verticalCompact: boolean): Layout {\r\n  // If it already exists, just return it.\r\n  /* if (layouts[breakpoint]) return cloneLayout(layouts[breakpoint]);\r\n  // Find or generate the next layout\r\n  let layout = layouts[lastBreakpoint]; */\r\n  /* const breakpointsSorted = sortBreakpoints(breakpoints);\r\nconst breakpointsAbove = breakpointsSorted.slice(breakpointsSorted.indexOf(breakpoint));\r\nfor (let i = 0, len = breakpointsAbove.length; i < len; i++) {\r\n  const b = breakpointsAbove[i];\r\n  if (layouts[b]) {\r\n    layout = layouts[b];\r\n    break;\r\n  }\r\n} */\r\n  layout = cloneLayout(layout || []) // clone layout so we don't modify existing items\r\n  return compact(correctBounds(layout, { cols }), verticalCompact)\r\n}\r\n\r\n/**\r\n * Given breakpoints, return an array of breakpoints sorted by width. This is usually\r\n * e.g. ['xxs', 'xs', 'sm', ...]\r\n *\r\n * @param  breakpoints Key/value pair of breakpoint names to widths.\r\n * @return              Sorted breakpoints.\r\n */\r\nexport function sortBreakpoints(breakpoints: Breakpoints): Array<Breakpoint> {\r\n  const keys = Object.keys(breakpoints) as Array<Breakpoint>\r\n  return keys.sort((a, b) => breakpoints[a] - breakpoints[b])\r\n}\r\n","let currentDir: 'ltr' | 'rtl' | 'auto' = 'auto'\r\n\r\nfunction hasDocument() {\r\n  return typeof document !== 'undefined'\r\n}\r\n\r\nexport function getDocumentDir() {\r\n  if (!hasDocument()) {\r\n    return currentDir\r\n  }\r\n  const direction =\r\n    typeof document.dir !== 'undefined'\r\n      ? document.dir\r\n      : document.getElementsByTagName('html')[0].getAttribute('dir')\r\n  return direction\r\n}\r\n\r\nexport function setDocumentDir(dir: 'ltr' | 'rtl' | 'auto') {\r\n  if (!hasDocument()) {\r\n    currentDir = dir\r\n    return\r\n  }\r\n\r\n  const html = document.getElementsByTagName('html')[0]\r\n  html.setAttribute('dir', dir)\r\n}\r\n","/*\nCopyright (c) 2019 Daybrush\nname: framework-utils\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/framework-utils.git\nversion: 1.1.0\n*/\nfunction prefixNames(prefix) {\n  var classNames = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    classNames[_i - 1] = arguments[_i];\n  }\n\n  return classNames.map(function (className) {\n    return className.split(\" \").map(function (name) {\n      return name ? \"\" + prefix + name : \"\";\n    }).join(\" \");\n  }).join(\" \");\n}\nfunction prefixCSS(prefix, css) {\n  return css.replace(/([^}{]*){/gm, function (_, selector) {\n    return selector.replace(/\\.([^{,\\s\\d.]+)/g, \".\" + prefix + \"$1\") + \"{\";\n  });\n}\n/* react */\n\nfunction ref(target, name) {\n  return function (e) {\n    e && (target[name] = e);\n  };\n}\nfunction refs(target, name, i) {\n  return function (e) {\n    e && (target[name][i] = e);\n  };\n}\n/* Class Decorator */\n\nfunction Properties(properties, action) {\n  return function (component) {\n    var prototype = component.prototype;\n    properties.forEach(function (property) {\n      action(prototype, property);\n    });\n  };\n}\n/* Property Decorator */\n\nfunction withMethods(methods, duplicate) {\n  if (duplicate === void 0) {\n    duplicate = {};\n  }\n\n  return function (prototype, propertyName) {\n    methods.forEach(function (name) {\n      var methodName = duplicate[name] || name;\n\n      if (methodName in prototype) {\n        return;\n      }\n\n      prototype[methodName] = function () {\n        var _a;\n\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var result = (_a = this[propertyName])[name].apply(_a, args);\n\n        if (result === this[propertyName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n\nexport { Properties, prefixCSS, prefixNames, ref, refs, withMethods };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.13.0\n*/\n/**\n* @namespace\n* @name Consts\n*/\n/**\n* get string \"rgb\"\n* @memberof Color\n* @example\nimport {RGB} from \"@daybrush/utils\";\n\nconsole.log(RGB); // \"rgb\"\n*/\nvar RGB = \"rgb\";\n/**\n* get string \"rgba\"\n* @memberof Color\n* @example\nimport {RGBA} from \"@daybrush/utils\";\n\nconsole.log(RGBA); // \"rgba\"\n*/\nvar RGBA = \"rgba\";\n/**\n* get string \"hsl\"\n* @memberof Color\n* @example\nimport {HSL} from \"@daybrush/utils\";\n\nconsole.log(HSL); // \"hsl\"\n*/\nvar HSL = \"hsl\";\n/**\n* get string \"hsla\"\n* @memberof Color\n* @example\nimport {HSLA} from \"@daybrush/utils\";\n\nconsole.log(HSLA); // \"hsla\"\n*/\nvar HSLA = \"hsla\";\n/**\n* gets an array of color models.\n* @memberof Color\n* @example\nimport {COLOR_MODELS} from \"@daybrush/utils\";\n\nconsole.log(COLOR_MODELS); // [\"rgb\", \"rgba\", \"hsl\", \"hsla\"];\n*/\nvar COLOR_MODELS = [RGB, RGBA, HSL, HSLA];\n/**\n* get string \"function\"\n* @memberof Consts\n* @example\nimport {FUNCTION} from \"@daybrush/utils\";\n\nconsole.log(FUNCTION); // \"function\"\n*/\nvar FUNCTION = \"function\";\n/**\n* get string \"property\"\n* @memberof Consts\n* @example\nimport {PROPERTY} from \"@daybrush/utils\";\n\nconsole.log(PROPERTY); // \"property\"\n*/\nvar PROPERTY = \"property\";\n/**\n* get string \"array\"\n* @memberof Consts\n* @example\nimport {ARRAY} from \"@daybrush/utils\";\n\nconsole.log(ARRAY); // \"array\"\n*/\nvar ARRAY = \"array\";\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\nvar STRING = \"string\";\n/**\n* get string \"number\"\n* @memberof Consts\n* @example\nimport {NUMBER} from \"@daybrush/utils\";\n\nconsole.log(NUMBER); // \"number\"\n*/\nvar NUMBER = \"number\";\n/**\n* get string \"undefined\"\n* @memberof Consts\n* @example\nimport {UNDEFINED} from \"@daybrush/utils\";\n\nconsole.log(UNDEFINED); // \"undefined\"\n*/\nvar UNDEFINED = \"undefined\";\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar IS_WINDOW = typeof window !== UNDEFINED;\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @name document\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar doc = typeof document !== UNDEFINED && document; // FIXME: this type maybe false\nvar prefixes = [\"webkit\", \"ms\", \"moz\", \"o\"];\n/**\n * @namespace CrossBrowser\n */\n/**\n* Get a CSS property with a vendor prefix that supports cross browser.\n* @function\n* @param {string} property - A CSS property\n* @return {string} CSS property with cross-browser vendor prefix\n* @memberof CrossBrowser\n* @example\nimport {getCrossBrowserProperty} from \"@daybrush/utils\";\n\nconsole.log(getCrossBrowserProperty(\"transform\")); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\nconsole.log(getCrossBrowserProperty(\"filter\")); // \"filter\", \"-webkit-filter\"\n*/\nvar getCrossBrowserProperty = /*#__PURE__*/function (property) {\n  if (!doc) {\n    return \"\";\n  }\n  var styles = (doc.body || doc.documentElement).style;\n  var length = prefixes.length;\n  if (typeof styles[property] !== UNDEFINED) {\n    return property;\n  }\n  for (var i = 0; i < length; ++i) {\n    var name = \"-\" + prefixes[i] + \"-\" + property;\n    if (typeof styles[name] !== UNDEFINED) {\n      return name;\n    }\n  }\n  return \"\";\n};\n/**\n* get string \"transfrom\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {TRANSFORM} from \"@daybrush/utils\";\n\nconsole.log(TRANSFORM); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\n*/\nvar TRANSFORM = /*#__PURE__*/getCrossBrowserProperty(\"transform\");\n/**\n* get string \"filter\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {FILTER} from \"@daybrush/utils\";\n\nconsole.log(FILTER); // \"filter\", \"-ms-filter\", \"-webkit-filter\"\n*/\nvar FILTER = /*#__PURE__*/getCrossBrowserProperty(\"filter\");\n/**\n* get string \"animation\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {ANIMATION} from \"@daybrush/utils\";\n\nconsole.log(ANIMATION); // \"animation\", \"-ms-animation\", \"-webkit-animation\"\n*/\nvar ANIMATION = /*#__PURE__*/getCrossBrowserProperty(\"animation\");\n/**\n* get string \"keyframes\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {KEYFRAMES} from \"@daybrush/utils\";\n\nconsole.log(KEYFRAMES); // \"keyframes\", \"-ms-keyframes\", \"-webkit-keyframes\"\n*/\nvar KEYFRAMES = /*#__PURE__*/ANIMATION.replace(\"animation\", \"keyframes\");\nvar OPEN_CLOSED_CHARACTERS = [{\n  open: \"(\",\n  close: \")\"\n}, {\n  open: \"\\\"\",\n  close: \"\\\"\"\n}, {\n  open: \"'\",\n  close: \"'\"\n}, {\n  open: \"\\\\\\\"\",\n  close: \"\\\\\\\"\"\n}, {\n  open: \"\\\\'\",\n  close: \"\\\\'\"\n}];\nvar TINY_NUM = 0.0000001;\nvar REVERSE_TINY_NUM = 1 / TINY_NUM;\nvar DEFAULT_UNIT_PRESETS = {\n  \"cm\": function (pos) {\n    return pos * 96 / 2.54;\n  },\n  \"mm\": function (pos) {\n    return pos * 96 / 254;\n  },\n  \"in\": function (pos) {\n    return pos * 96;\n  },\n  \"pt\": function (pos) {\n    return pos * 96 / 72;\n  },\n  \"pc\": function (pos) {\n    return pos * 96 / 6;\n  },\n  \"%\": function (pos, size) {\n    return pos * size / 100;\n  },\n  \"vw\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerWidth;\n    }\n    return pos / 100 * size;\n  },\n  \"vh\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerHeight;\n    }\n    return pos / 100 * size;\n  },\n  \"vmax\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.max(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  },\n  \"vmin\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.min(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  }\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\n\n/**\n* @namespace\n* @name Utils\n*/\n/**\n * Returns the inner product of two numbers(`a1`, `a2`) by two criteria(`b1`, `b2`).\n * @memberof Utils\n * @param - The first number\n * @param - The second number\n * @param - The first number to base on the inner product\n * @param - The second number to base on the inner product\n * @return - Returns the inner product\nimport { dot } from \"@daybrush/utils\";\n\nconsole.log(dot(0, 15, 2, 3)); // 6\nconsole.log(dot(5, 15, 2, 3)); // 9\nconsole.log(dot(5, 15, 1, 1)); // 10\n */\nfunction dot(a1, a2, b1, b2) {\n  return (a1 * b2 + a2 * b1) / (b1 + b2);\n}\n/**\n* Check the type that the value is undefined.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {boolean} true if the type is correct, false otherwise\n* @example\nimport {isUndefined} from \"@daybrush/utils\";\n\nconsole.log(isUndefined(undefined)); // true\nconsole.log(isUndefined(\"\")); // false\nconsole.log(isUndefined(1)); // false\nconsole.log(isUndefined(null)); // false\n*/\nfunction isUndefined(value) {\n  return typeof value === UNDEFINED;\n}\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\nfunction isString(value) {\n  return typeof value === STRING;\n}\nfunction isNumber(value) {\n  return typeof value === NUMBER;\n}\n/**\n* Check the type that the value is function.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isFunction} from \"@daybrush/utils\";\n\nconsole.log(isFunction(function a() {})); // true\nconsole.log(isFunction(() => {})); // true\nconsole.log(isFunction(\"1234\")); // false\nconsole.log(isFunction(1)); // false\nconsole.log(isFunction(null)); // false\n*/\nfunction isFunction(value) {\n  return typeof value === FUNCTION;\n}\nfunction isEqualSeparator(character, separator) {\n  var isCharacterSpace = character === \"\" || character == \" \";\n  var isSeparatorSpace = separator === \"\" || separator == \" \";\n  return isSeparatorSpace && isCharacterSpace || character === separator;\n}\nfunction findOpen(openCharacter, texts, index, length, openCloseCharacters) {\n  var isIgnore = findIgnore(openCharacter, texts, index);\n  if (!isIgnore) {\n    return findClose(openCharacter, texts, index + 1, length, openCloseCharacters);\n  }\n  return index;\n}\nfunction findIgnore(character, texts, index) {\n  if (!character.ignore) {\n    return null;\n  }\n  var otherText = texts.slice(Math.max(index - 3, 0), index + 3).join(\"\");\n  return new RegExp(character.ignore).exec(otherText);\n}\nfunction findClose(closeCharacter, texts, index, length, openCloseCharacters) {\n  var _loop_1 = function (i) {\n    var character = texts[i].trim();\n    if (character === closeCharacter.close && !findIgnore(closeCharacter, texts, i)) {\n      return {\n        value: i\n      };\n    }\n    var nextIndex = i;\n    // re open\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n    }\n    if (nextIndex === -1) {\n      return out_i_1 = i, \"break\";\n    }\n    i = nextIndex;\n    out_i_1 = i;\n  };\n  var out_i_1;\n  for (var i = index; i < length; ++i) {\n    var state_1 = _loop_1(i);\n    i = out_i_1;\n    if (typeof state_1 === \"object\") return state_1.value;\n    if (state_1 === \"break\") break;\n  }\n  return -1;\n}\nfunction splitText(text, splitOptions) {\n  var _a = isString(splitOptions) ? {\n      separator: splitOptions\n    } : splitOptions,\n    _b = _a.separator,\n    separator = _b === void 0 ? \",\" : _b,\n    isSeparateFirst = _a.isSeparateFirst,\n    isSeparateOnlyOpenClose = _a.isSeparateOnlyOpenClose,\n    _c = _a.isSeparateOpenClose,\n    isSeparateOpenClose = _c === void 0 ? isSeparateOnlyOpenClose : _c,\n    _d = _a.openCloseCharacters,\n    openCloseCharacters = _d === void 0 ? OPEN_CLOSED_CHARACTERS : _d;\n  var openClosedText = openCloseCharacters.map(function (_a) {\n    var open = _a.open,\n      close = _a.close;\n    if (open === close) {\n      return open;\n    }\n    return open + \"|\" + close;\n  }).join(\"|\");\n  var regexText = \"(\\\\s*\" + separator + \"\\\\s*|\" + openClosedText + \"|\\\\s+)\";\n  var regex = new RegExp(regexText, \"g\");\n  var texts = text.split(regex).filter(function (chr) {\n    return chr && chr !== \"undefined\";\n  });\n  var length = texts.length;\n  var values = [];\n  var tempValues = [];\n  function resetTemp() {\n    if (tempValues.length) {\n      values.push(tempValues.join(\"\"));\n      tempValues = [];\n      return true;\n    }\n    return false;\n  }\n  var _loop_2 = function (i) {\n    var character = texts[i].trim();\n    var nextIndex = i;\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    var closeCharacter = find(openCloseCharacters, function (_a) {\n      var close = _a.close;\n      return close === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n      if (nextIndex !== -1 && isSeparateOpenClose) {\n        if (resetTemp() && isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        values.push(texts.slice(i, nextIndex + 1).join(\"\"));\n        i = nextIndex;\n        if (isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        return out_i_2 = i, \"continue\";\n      }\n    } else if (closeCharacter && !findIgnore(closeCharacter, texts, i)) {\n      var nextOpenCloseCharacters = __spreadArrays(openCloseCharacters);\n      nextOpenCloseCharacters.splice(openCloseCharacters.indexOf(closeCharacter), 1);\n      return {\n        value: splitText(text, {\n          separator: separator,\n          isSeparateFirst: isSeparateFirst,\n          isSeparateOnlyOpenClose: isSeparateOnlyOpenClose,\n          isSeparateOpenClose: isSeparateOpenClose,\n          openCloseCharacters: nextOpenCloseCharacters\n        })\n      };\n    } else if (isEqualSeparator(character, separator) && !isSeparateOnlyOpenClose) {\n      resetTemp();\n      if (isSeparateFirst) {\n        return out_i_2 = i, \"break\";\n      }\n      return out_i_2 = i, \"continue\";\n    }\n    if (nextIndex === -1) {\n      nextIndex = length - 1;\n    }\n    tempValues.push(texts.slice(i, nextIndex + 1).join(\"\"));\n    i = nextIndex;\n    out_i_2 = i;\n  };\n  var out_i_2;\n  for (var i = 0; i < length; ++i) {\n    var state_2 = _loop_2(i);\n    i = out_i_2;\n    if (typeof state_2 === \"object\") return state_2.value;\n    if (state_2 === \"break\") break;\n  }\n  if (tempValues.length) {\n    values.push(tempValues.join(\"\"));\n  }\n  return values;\n}\n/**\n* divide text by space.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {spliceSpace} from \"@daybrush/utils\";\n\nconsole.log(splitSpace(\"a b c d e f g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitSpace(\"'a,b' c 'd,e' f g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitSpace(text) {\n  // divide comma(space)\n  return splitText(text, \"\");\n}\n/**\n* divide text by comma.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {splitComma} from \"@daybrush/utils\";\n\nconsole.log(splitComma(\"a,b,c,d,e,f,g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitComma(\"'a,b',c,'d,e',f,g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitComma(text) {\n  // divide comma(,)\n  // \"[^\"]*\"|'[^']*'\n  return splitText(text, \",\");\n}\n/**\n* divide text by bracket \"(\", \")\".\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {object} divided texts\n* @example\nimport {splitBracket} from \"@daybrush/utils\";\n\nconsole.log(splitBracket(\"a(1, 2)\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"\"}\nconsole.log(splitBracket(\"a(1, 2)b\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"b\"}\n*/\nfunction splitBracket(text) {\n  var matches = /([^(]*)\\(([\\s\\S]*)\\)([\\s\\S]*)/g.exec(text);\n  if (!matches || matches.length < 4) {\n    return {};\n  } else {\n    return {\n      prefix: matches[1],\n      value: matches[2],\n      suffix: matches[3]\n    };\n  }\n}\n/**\n* divide text by number and unit.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {} divided texts\n* @example\nimport {splitUnit} from \"@daybrush/utils\";\n\nconsole.log(splitUnit(\"10px\"));\n// {prefix: \"\", value: 10, unit: \"px\"}\nconsole.log(splitUnit(\"-10px\"));\n// {prefix: \"\", value: -10, unit: \"px\"}\nconsole.log(splitUnit(\"a10%\"));\n// {prefix: \"a\", value: 10, unit: \"%\"}\n*/\nfunction splitUnit(text) {\n  var matches = /^([^\\d|e|\\-|\\+]*)((?:\\d|\\.|-|e-|e\\+)+)(\\S*)$/g.exec(text);\n  if (!matches) {\n    return {\n      prefix: \"\",\n      unit: \"\",\n      value: NaN\n    };\n  }\n  var prefix = matches[1];\n  var value = matches[2];\n  var unit = matches[3];\n  return {\n    prefix: prefix,\n    unit: unit,\n    value: parseFloat(value)\n  };\n}\n/**\n* transform strings to camel-case\n* @memberof Utils\n* @param {String} text - string\n* @return {String} camel-case string\n* @example\nimport {camelize} from \"@daybrush/utils\";\n\nconsole.log(camelize(\"transform-origin\")); // transformOrigin\nconsole.log(camelize(\"abcd_efg\")); // abcdEfg\nconsole.log(camelize(\"abcd efg\")); // abcdEfg\n*/\nfunction camelize(str) {\n  return str.replace(/[\\s-_]+([^\\s-_])/g, function (all, letter) {\n    return letter.toUpperCase();\n  });\n}\n/**\n* transform a camelized string into a lowercased string.\n* @memberof Utils\n* @param {string} text - a camel-cased string\n* @param {string} [separator=\"-\"] - a separator\n* @return {string}  a lowercased string\n* @example\nimport {decamelize} from \"@daybrush/utils\";\n\nconsole.log(decamelize(\"transformOrigin\")); // transform-origin\nconsole.log(decamelize(\"abcdEfg\", \"_\")); // abcd_efg\n*/\nfunction decamelize(str, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n  return str.replace(/([a-z])([A-Z])/g, function (all, letter, letter2) {\n    return \"\" + letter + separator + letter2.toLowerCase();\n  });\n}\n/**\n* transforms something in an array into an array.\n* @memberof Utils\n* @param - Array form\n* @return an array\n* @example\nimport {toArray} from \"@daybrush/utils\";\n\nconst arr1 = toArray(document.querySelectorAll(\".a\")); // Element[]\nconst arr2 = toArray(document.querySelectorAll<HTMLElement>(\".a\")); // HTMLElement[]\n*/\nfunction toArray(value) {\n  return [].slice.call(value);\n}\n/**\n* Date.now() method\n* @memberof CrossBrowser\n* @return {number} milliseconds\n* @example\nimport {now} from \"@daybrush/utils\";\n\nconsole.log(now()); // 12121324241(milliseconds)\n*/\nfunction now() {\n  return Date.now ? Date.now() : new Date().getTime();\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the reverse direction index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLastIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findLastIndex } from \"@daybrush/utils\";\n\nfindLastIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findLastIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = length - 1; i >= 0; --i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the value of the reverse direction element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLast` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction findLast(arr, callback, defalutValue) {\n  var index = findLastIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* Returns the value of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `find` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction find(arr, callback, defalutValue) {\n  var index = findIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* window.requestAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {FrameRequestCallback} callback - The function to call when it's time to update your animation for the next repaint.\n* @return {number} id\n* @example\nimport {requestAnimationFrame} from \"@daybrush/utils\";\n\nrequestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n*/\nvar requestAnimationFrame = /*#__PURE__*/function () {\n  var firstTime = now();\n  var raf = IS_WINDOW && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);\n  return raf ? raf.bind(window) : function (callback) {\n    var currTime = now();\n    var id = setTimeout(function () {\n      callback(currTime - firstTime);\n    }, 1000 / 60);\n    return id;\n  };\n}();\n/**\n* window.cancelAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {number} handle - the id obtained through requestAnimationFrame method\n* @return {void}\n* @example\nimport { requestAnimationFrame, cancelAnimationFrame } from \"@daybrush/utils\";\n\nconst id = requestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n\ncancelAnimationFrame(id);\n*/\nvar cancelAnimationFrame = /*#__PURE__*/function () {\n  var caf = IS_WINDOW && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);\n  return caf ? caf.bind(window) : function (handle) {\n    clearTimeout(handle);\n  };\n}();\n/**\n* @function\n* @memberof Utils\n*/\nfunction getKeys(obj) {\n  return Object.keys(obj);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getValues(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return obj[key];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getEntries(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return [key, obj[key]];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction sortOrders(keys, orders) {\n  if (orders === void 0) {\n    orders = [];\n  }\n  keys.sort(function (a, b) {\n    var index1 = orders.indexOf(a);\n    var index2 = orders.indexOf(b);\n    if (index2 === -1 && index1 === -1) {\n      return 0;\n    }\n    if (index1 === -1) {\n      return 1;\n    }\n    if (index2 === -1) {\n      return -1;\n    }\n    return index1 - index2;\n  });\n}\n/**\n* convert unit size to px size\n* @function\n* @memberof Utils\n*/\nfunction convertUnitSize(pos, size) {\n  var _a = splitUnit(pos),\n    value = _a.value,\n    unit = _a.unit;\n  if (isObject(size)) {\n    var sizeFunction = size[unit];\n    if (sizeFunction) {\n      if (isFunction(sizeFunction)) {\n        return sizeFunction(value);\n      } else if (DEFAULT_UNIT_PRESETS[unit]) {\n        return DEFAULT_UNIT_PRESETS[unit](value, sizeFunction);\n      }\n    }\n  } else if (unit === \"%\") {\n    return value * size / 100;\n  }\n  if (DEFAULT_UNIT_PRESETS[unit]) {\n    return DEFAULT_UNIT_PRESETS[unit](value);\n  }\n  return value;\n}\n/**\n* calculate between min, max\n* @function\n* @memberof Utils\n*/\nfunction between(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\nfunction checkBoundSize(targetSize, compareSize, isMax, ratio) {\n  if (ratio === void 0) {\n    ratio = targetSize[0] / targetSize[1];\n  }\n  return [[throttle(compareSize[0], TINY_NUM), throttle(compareSize[0] / ratio, TINY_NUM)], [throttle(compareSize[1] * ratio, TINY_NUM), throttle(compareSize[1], TINY_NUM)]].filter(function (size) {\n    return size.every(function (value, i) {\n      var defaultSize = compareSize[i];\n      var throttledSize = throttle(defaultSize, TINY_NUM);\n      return isMax ? value <= defaultSize || value <= throttledSize : value >= defaultSize || value >= throttledSize;\n    });\n  })[0] || targetSize;\n}\n/**\n* calculate bound size\n* @function\n* @memberof Utils\n*/\nfunction calculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return between(value, minSize[i], maxSize[i]);\n    });\n  }\n  var width = size[0],\n    height = size[1];\n  var ratio = keepRatio === true ? width / height : keepRatio;\n  // width : height = minWidth : minHeight;\n  var _a = checkBoundSize(size, minSize, false, ratio),\n    minWidth = _a[0],\n    minHeight = _a[1];\n  var _b = checkBoundSize(size, maxSize, true, ratio),\n    maxWidth = _b[0],\n    maxHeight = _b[1];\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n  return [width, height];\n}\n/**\n* Add all the numbers.\n* @function\n* @memberof Utils\n*/\nfunction sum(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return total;\n}\n/**\n* Average all numbers.\n* @function\n* @memberof Utils\n*/\nfunction average(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return length ? total / length : 0;\n}\n/**\n* Get the angle of two points. (0 <= rad < 359)\n* @function\n* @memberof Utils\n*/\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n/**\n* Get the average point of all points.\n* @function\n* @memberof Utils\n*/\nfunction getCenterPoint(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n/**\n* Gets the direction of the shape.\n* @function\n* @memberof Utils\n*/\nfunction getShapeDirection(points) {\n  var center = getCenterPoint(points);\n  var pos1Rad = getRad(center, points[0]);\n  var pos2Rad = getRad(center, points[1]);\n  return pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n}\n/**\n* Get the distance between two points.\n* @function\n* @memberof Utils\n*/\nfunction getDist(a, b) {\n  return Math.sqrt(Math.pow((b ? b[0] : 0) - a[0], 2) + Math.pow((b ? b[1] : 0) - a[1], 2));\n}\n/**\n* throttle number depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n  var reverseUnit = 1 / unit;\n  return Math.round(num / unit) / reverseUnit;\n}\n/**\n* throttle number array depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction counter(num) {\n  var nums = [];\n  for (var i = 0; i < num; ++i) {\n    nums.push(i);\n  }\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction replaceOnce(text, fromText, toText) {\n  var isOnce = false;\n  return text.replace(fromText, function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (isOnce) {\n      return args[0];\n    }\n    isOnce = true;\n    return isString(toText) ? toText : toText.apply(void 0, args);\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction deepFlat(arr) {\n  return arr.reduce(function (prev, cur) {\n    if (isArray(cur)) {\n      prev.push.apply(prev, deepFlat(cur));\n    } else {\n      prev.push(cur);\n    }\n    return prev;\n  }, []);\n}\n/**\n * @function\n * @memberof Utils\n */\nfunction pushSet(elements, element) {\n  if (elements.indexOf(element) === -1) {\n    elements.push(element);\n  }\n}\n\n/**\n* @namespace\n* @name Color\n*/\n/**\n* Remove the # from the hex color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} hex color\n* @example\nimport {cutHex} from \"@daybrush/utils\";\n\nconsole.log(cutHex(\"#000000\")) // \"000000\"\n*/\nfunction cutHex(hex) {\n  return hex.replace(\"#\", \"\");\n}\n/**\n* convert hex color to rgb color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} rgb color\n* @example\nimport {hexToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hexToRGBA(\"#00000005\"));\n// [0, 0, 0, 1]\nconsole.log(hexToRGBA(\"#201045\"));\n// [32, 16, 69, 1]\n*/\nfunction hexToRGBA(hex) {\n  var h = cutHex(hex);\n  var r = parseInt(h.substring(0, 2), 16);\n  var g = parseInt(h.substring(2, 4), 16);\n  var b = parseInt(h.substring(4, 6), 16);\n  var a = parseInt(h.substring(6, 8), 16) / 255;\n  if (isNaN(a)) {\n    a = 1;\n  }\n  return [r, g, b, a];\n}\n/**\n* convert 3(or 4)-digit hex color to 6(or 8)-digit hex color.\n* @memberof Color\n* @param {} hex - 3(or 4)-digit hex color\n* @return {} 6(or 8)-digit hex color\n* @example\nimport {toFullHex} from \"@daybrush/utils\";\n\nconsole.log(toFullHex(\"#123\")); // \"#112233\"\nconsole.log(toFullHex(\"#123a\")); // \"#112233aa\"\n*/\nfunction toFullHex(h) {\n  var r = h.charAt(1);\n  var g = h.charAt(2);\n  var b = h.charAt(3);\n  var a = h.charAt(4);\n  var arr = [\"#\", r, r, g, g, b, b, a, a];\n  return arr.join(\"\");\n}\n/**\n* convert hsl color to rgba color.\n* @memberof Color\n* @param {} hsl - hsl color(hue: 0 ~ 360, saturation: 0 ~ 1, lightness: 0 ~ 1, alpha: 0 ~ 1)\n* @return {} rgba color\n* @example\nimport {hslToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hslToRGBA([150, 0.5, 0.4]));\n// [51, 153, 102, 1]\n*/\nfunction hslToRGBA(hsl) {\n  var _a;\n  var h = hsl[0];\n  var s = hsl[1];\n  var l = hsl[2];\n  if (h < 0) {\n    h += Math.floor((Math.abs(h) + 360) / 360) * 360;\n  }\n  h %= 360;\n  var c = (1 - Math.abs(2 * l - 1)) * s;\n  var x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  var m = l - c / 2;\n  var rgb;\n  if (h < 60) {\n    rgb = [c, x, 0];\n  } else if (h < 120) {\n    rgb = [x, c, 0];\n  } else if (h < 180) {\n    rgb = [0, c, x];\n  } else if (h < 240) {\n    rgb = [0, x, c];\n  } else if (h < 300) {\n    rgb = [x, 0, c];\n  } else if (h < 360) {\n    rgb = [c, 0, x];\n  } else {\n    rgb = [0, 0, 0];\n  }\n  return [Math.round((rgb[0] + m) * 255), Math.round((rgb[1] + m) * 255), Math.round((rgb[2] + m) * 255), (_a = hsl[3]) !== null && _a !== void 0 ? _a : 1];\n}\n/**\n* convert string to rgba color.\n* @memberof Color\n* @param {} - 3-hex(#000), 4-hex(#0000) 6-hex(#000000), 8-hex(#00000000) or RGB(A), or HSL(A)\n* @return {} rgba color\n* @example\nimport {stringToRGBA} from \"@daybrush/utils\";\n\nconsole.log(stringToRGBA(\"#000000\")); // [0, 0, 0, 1]\nconsole.log(stringToRGBA(\"rgb(100, 100, 100)\")); // [100, 100, 100, 1]\nconsole.log(stringToRGBA(\"hsl(150, 0.5, 0.4)\")); // [51, 153, 102, 1]\n*/\nfunction stringToRGBA(color) {\n  if (color.charAt(0) === \"#\") {\n    if (color.length === 4 || color.length === 5) {\n      return hexToRGBA(toFullHex(color));\n    } else {\n      return hexToRGBA(color);\n    }\n  } else if (color.indexOf(\"(\") !== -1) {\n    // in bracket.\n    var _a = splitBracket(color),\n      prefix = _a.prefix,\n      value = _a.value;\n    if (!prefix || !value) {\n      return undefined;\n    }\n    var arr = splitComma(value);\n    var colorArr = [0, 0, 0, 1];\n    var length = arr.length;\n    switch (prefix) {\n      case RGB:\n      case RGBA:\n        for (var i = 0; i < length; ++i) {\n          colorArr[i] = parseFloat(arr[i]);\n        }\n        return colorArr;\n      case HSL:\n      case HSLA:\n        for (var i = 0; i < length; ++i) {\n          if (arr[i].indexOf(\"%\") !== -1) {\n            colorArr[i] = parseFloat(arr[i]) / 100;\n          } else {\n            colorArr[i] = parseFloat(arr[i]);\n          }\n        }\n        // hsl, hsla to rgba\n        return hslToRGBA(colorArr);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns all element descendants of node that\n * match selectors.\n */\n/**\n * Checks if the specified class value exists in the element's class attribute.\n * @memberof DOM\n * @param - A DOMString containing one or more selectors to match\n * @param - If multi is true, a DOMString containing one or more selectors to match against.\n * @example\nimport {$} from \"@daybrush/utils\";\n\nconsole.log($(\"div\")); // div element\nconsole.log($(\"div\", true)); // [div, div] elements\n*/\nfunction $(selectors, multi) {\n  if (!doc) {\n    return multi ? [] : null;\n  }\n  return multi ? doc.querySelectorAll(selectors) : doc.querySelector(selectors);\n}\n/**\n* Checks if the specified class value exists in the element's class attribute.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to search\n* @return {boolean} return false if the class is not found.\n* @example\nimport {hasClass} from \"@daybrush/utils\";\n\nconsole.log(hasClass(element, \"start\")); // true or false\n*/\nfunction hasClass(element, className) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n}\n/**\n* Add the specified class value. If these classe already exist in the element's class attribute they are ignored.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to add\n* @example\nimport {addClass} from \"@daybrush/utils\";\n\naddClass(element, \"start\");\n*/\nfunction addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    element.className += \" \" + className;\n  }\n}\n/**\n* Removes the specified class value.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to remove\n* @example\nimport {removeClass} from \"@daybrush/utils\";\n\nremoveClass(element, \"start\");\n*/\nfunction removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(reg, \" \");\n  }\n}\n/**\n* Gets the CSS properties from the element.\n* @memberof DOM\n* @param elements - elements\n* @param properites - the CSS properties\n* @return returns CSS properties and values.\n* @example\nimport {fromCSS} from \"@daybrush/utils\";\n\nconsole.log(fromCSS(element, [\"left\", \"opacity\", \"top\"])); // {\"left\": \"10px\", \"opacity\": 1, \"top\": \"10px\"}\n*/\nfunction fromCSS(elements, properties) {\n  if (!elements || !properties || !properties.length) {\n    return {};\n  }\n  var element;\n  if (elements instanceof Element) {\n    element = elements;\n  } else if (elements.length) {\n    element = elements[0];\n  } else {\n    return {};\n  }\n  var cssObject = {};\n  var styles = getWindow(element).getComputedStyle(element);\n  var length = properties.length;\n  for (var i = 0; i < length; ++i) {\n    cssObject[properties[i]] = styles[properties[i]];\n  }\n  return cssObject;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\nfunction getDocument(el) {\n  return (el === null || el === void 0 ? void 0 : el.ownerDocument) || doc;\n}\nfunction getDocumentElement(el) {\n  return getDocument(el).documentElement;\n}\nfunction getDocumentBody(el) {\n  return getDocument(el).body;\n}\nfunction getWindow(el) {\n  var _a;\n  return ((_a = el === null || el === void 0 ? void 0 : el.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || window;\n}\nfunction isWindow(val) {\n  return val && \"postMessage\" in val && \"blur\" in val && \"self\" in val;\n}\nfunction isNode(el) {\n  return isObject(el) && el.nodeName && el.nodeType && \"ownerDocument\" in el;\n}\n\nexport { RGB, RGBA, HSL, HSLA, COLOR_MODELS, FUNCTION, PROPERTY, ARRAY, OBJECT, STRING, NUMBER, UNDEFINED, IS_WINDOW, doc as document, getCrossBrowserProperty, TRANSFORM, FILTER, ANIMATION, KEYFRAMES, OPEN_CLOSED_CHARACTERS, TINY_NUM, REVERSE_TINY_NUM, DEFAULT_UNIT_PRESETS, cutHex, hexToRGBA, toFullHex, hslToRGBA, stringToRGBA, dot, isUndefined, isObject, isArray, isString, isNumber, isFunction, splitText, splitSpace, splitComma, splitBracket, splitUnit, camelize, decamelize, toArray, now, findIndex, findLastIndex, findLast, find, requestAnimationFrame, cancelAnimationFrame, getKeys, getValues, getEntries, sortOrders, convertUnitSize, between, checkBoundSize, calculateBoundSize, sum, average, getRad, getCenterPoint, getShapeDirection, getDist, throttle, throttleArray, counter, replaceOnce, flat, deepFlat, pushSet, $, hasClass, addClass, removeClass, fromCSS, addEvent, removeEvent, getDocument, getDocumentElement, getDocumentBody, getWindow, isWindow, isNode };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/list-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-list-differ\nversion: 1.0.1\n*/\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar PolyMap =\n/*#__PURE__*/\nfunction () {\n  function PolyMap() {\n    this.keys = [];\n    this.values = [];\n  }\n\n  var __proto = PolyMap.prototype;\n\n  __proto.get = function (key) {\n    return this.values[this.keys.indexOf(key)];\n  };\n\n  __proto.set = function (key, value) {\n    var keys = this.keys;\n    var values = this.values;\n    var prevIndex = keys.indexOf(key);\n    var index = prevIndex === -1 ? keys.length : prevIndex;\n    keys[index] = key;\n    values[index] = value;\n  };\n\n  return PolyMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar HashMap =\n/*#__PURE__*/\nfunction () {\n  function HashMap() {\n    this.object = {};\n  }\n\n  var __proto = HashMap.prototype;\n\n  __proto.get = function (key) {\n    return this.object[key];\n  };\n\n  __proto.set = function (key, value) {\n    this.object[key] = value;\n  };\n\n  return HashMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar SUPPORT_MAP = typeof Map === \"function\";\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar Link =\n/*#__PURE__*/\nfunction () {\n  function Link() {}\n\n  var __proto = Link.prototype;\n\n  __proto.connect = function (prevLink, nextLink) {\n    this.prev = prevLink;\n    this.next = nextLink;\n    prevLink && (prevLink.next = this);\n    nextLink && (nextLink.prev = this);\n  };\n\n  __proto.disconnect = function () {\n    // In double linked list, diconnect the interconnected relationship.\n    var prevLink = this.prev;\n    var nextLink = this.next;\n    prevLink && (prevLink.next = nextLink);\n    nextLink && (nextLink.prev = prevLink);\n  };\n\n  __proto.getIndex = function () {\n    var link = this;\n    var index = -1;\n\n    while (link) {\n      link = link.prev;\n      ++index;\n    }\n\n    return index;\n  };\n\n  return Link;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nfunction orderChanged(changed, fixed) {\n  // It is roughly in the order of these examples.\n  // 4, 6, 0, 2, 1, 3, 5, 7\n  var fromLinks = []; // 0, 1, 2, 3, 4, 5, 6, 7\n\n  var toLinks = [];\n  changed.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var link = new Link();\n    fromLinks[from] = link;\n    toLinks[to] = link;\n  }); // `fromLinks` are connected to each other by double linked list.\n\n  fromLinks.forEach(function (link, i) {\n    link.connect(fromLinks[i - 1]);\n  });\n  return changed.filter(function (_, i) {\n    return !fixed[i];\n  }).map(function (_a, i) {\n    var from = _a[0],\n        to = _a[1];\n\n    if (from === to) {\n      return [0, 0];\n    }\n\n    var fromLink = fromLinks[from];\n    var toLink = toLinks[to - 1];\n    var fromIndex = fromLink.getIndex(); // Disconnect the link connected to `fromLink`.\n\n    fromLink.disconnect(); // Connect `fromLink` to the right of `toLink`.\n\n    if (!toLink) {\n      fromLink.connect(undefined, fromLinks[0]);\n    } else {\n      fromLink.connect(toLink, toLink.next);\n    }\n\n    var toIndex = fromLink.getIndex();\n    return [fromIndex, toIndex];\n  });\n}\n\nvar Result =\n/*#__PURE__*/\nfunction () {\n  function Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed) {\n    this.prevList = prevList;\n    this.list = list;\n    this.added = added;\n    this.removed = removed;\n    this.changed = changed;\n    this.maintained = maintained;\n    this.changedBeforeAdded = changedBeforeAdded;\n    this.fixed = fixed;\n  }\n\n  var __proto = Result.prototype;\n  Object.defineProperty(__proto, \"ordered\", {\n    get: function () {\n      if (!this.cacheOrdered) {\n        this.caculateOrdered();\n      }\n\n      return this.cacheOrdered;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(__proto, \"pureChanged\", {\n    get: function () {\n      if (!this.cachePureChanged) {\n        this.caculateOrdered();\n      }\n\n      return this.cachePureChanged;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __proto.caculateOrdered = function () {\n    var ordered = orderChanged(this.changedBeforeAdded, this.fixed);\n    var changed = this.changed;\n    var pureChanged = [];\n    this.cacheOrdered = ordered.filter(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      var _b = changed[i],\n          fromBefore = _b[0],\n          toBefore = _b[1];\n\n      if (from !== to) {\n        pureChanged.push([fromBefore, toBefore]);\n        return true;\n      }\n    });\n    this.cachePureChanged = pureChanged;\n  };\n\n  return Result;\n}();\n\n/**\n *\n * @memberof eg.ListDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/list-differ\";\n * // script => eg.ListDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1], e => e);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list, findKeyCallback) {\n  var mapClass = SUPPORT_MAP ? Map : findKeyCallback ? HashMap : PolyMap;\n\n  var callback = findKeyCallback || function (e) {\n    return e;\n  };\n\n  var added = [];\n  var removed = [];\n  var maintained = [];\n  var prevKeys = prevList.map(callback);\n  var keys = list.map(callback);\n  var prevKeyMap = new mapClass();\n  var keyMap = new mapClass();\n  var changedBeforeAdded = [];\n  var fixed = [];\n  var removedMap = {};\n  var changed = [];\n  var addedCount = 0;\n  var removedCount = 0; // Add prevKeys and keys to the hashmap.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    prevKeyMap.set(key, prevListIndex);\n  });\n  keys.forEach(function (key, listIndex) {\n    keyMap.set(key, listIndex);\n  }); // Compare `prevKeys` and `keys` and add them to `removed` if they are not in `keys`.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    var listIndex = keyMap.get(key); // In prevList, but not in list, it is removed.\n\n    if (typeof listIndex === \"undefined\") {\n      ++removedCount;\n      removed.push(prevListIndex);\n    } else {\n      removedMap[listIndex] = removedCount;\n    }\n  }); // Compare `prevKeys` and `keys` and add them to `added` if they are not in `prevKeys`.\n\n  keys.forEach(function (key, listIndex) {\n    var prevListIndex = prevKeyMap.get(key); // In list, but not in prevList, it is added.\n\n    if (typeof prevListIndex === \"undefined\") {\n      added.push(listIndex);\n      ++addedCount;\n    } else {\n      maintained.push([prevListIndex, listIndex]);\n      removedCount = removedMap[listIndex] || 0;\n      changedBeforeAdded.push([prevListIndex - removedCount, listIndex - addedCount]);\n      fixed.push(listIndex === prevListIndex);\n\n      if (prevListIndex !== listIndex) {\n        changed.push([prevListIndex, listIndex]);\n      }\n    }\n  }); // Sort by ascending order of 'to(list's index).\n\n  removed.reverse();\n  return new Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed);\n}\n\n/**\n * A module that checks diff when values are added, removed, or changed in an array.\n * @ko 배열 또는 오브젝트에서 값이 추가되거나 삭제되거나 순서가 변경사항을 체크하는 모듈입니다.\n * @memberof eg\n */\n\nvar ListDiffer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param - Initializing Data Array. <ko> 초기 설정할 데이터 배열.</ko>\n   * @param - This callback function returns the key of the item. <ko> 아이템의 키를 반환하는 콜백 함수입니다.</ko>\n   * @example\n   * import ListDiffer from \"@egjs/list-differ\";\n   * // script => eg.ListDiffer\n   * const differ = new ListDiffer([0, 1, 2, 3, 4, 5], e => e);\n   * const result = differ.update([7, 8, 0, 4, 3, 6, 2, 1]);\n   * // List before update\n   * // [1, 2, 3, 4, 5]\n   * console.log(result.prevList);\n   * // Updated list\n   * // [4, 3, 6, 2, 1]\n   * console.log(result.list);\n   * // Index array of values added to `list`.\n   * // [0, 1, 5]\n   * console.log(result.added);\n   * // Index array of values removed in `prevList`.\n   * // [5]\n   * console.log(result.removed);\n   * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.changed);\n   * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n   * // [[4, 3], [3, 4], [2, 6]]\n   * console.log(result.pureChanged);\n   * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n   * // [[4, 1], [4, 2], [4, 3]]\n   * console.log(result.ordered);\n   * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.maintained);\n   */\n  function ListDiffer(list, findKeyCallback) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    this.findKeyCallback = findKeyCallback;\n    this.list = [].slice.call(list);\n  }\n  /**\n   * Update list.\n   * @ko 리스트를 업데이트를 합니다.\n   * @param - List to update <ko> 업데이트할 리스트 </ko>\n   * @return - Returns the results of an update from `prevList` to `list`.<ko> `prevList`에서 `list`로 업데이트한 결과를 반환한다. </ko>\n   */\n\n\n  var __proto = ListDiffer.prototype;\n\n  __proto.update = function (list) {\n    var newData = [].slice.call(list);\n    var result = diff(this.list, newData, this.findKeyCallback);\n    this.list = newData;\n    return result;\n  };\n\n  return ListDiffer;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ListDiffer;\nexport { diff };\n//# sourceMappingURL=list-differ.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: croact\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/croact.git\nversion: 1.0.4\n*/\nimport { isNode, isArray, isUndefined, getValues, find, isString, removeEvent, addEvent, getDocument, getKeys, decamelize, flat as flat$1, isNumber, pushSet, isFunction, getEntries } from '@daybrush/utils';\nimport { diff } from '@egjs/list-differ';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction fillKeys(keys) {\n  var index = 0;\n  return keys.map(function (key) {\n    return key == null ? \"$compat\".concat(++index) : \"\".concat(key);\n  });\n}\nfunction flat(arr) {\n  var arr2 = [];\n  arr.forEach(function (el) {\n    arr2 = arr2.concat(isArray(el) ? flat(el) : el);\n  });\n  return arr2;\n}\nfunction fillProps(props, defaultProps) {\n  if (!defaultProps) {\n    return props;\n  }\n  for (var name_1 in defaultProps) {\n    if (isUndefined(props[name_1])) {\n      props[name_1] = defaultProps[name_1];\n    }\n  }\n  return props;\n}\nfunction isDiff(a, b) {\n  if (a === b) {\n    return false;\n  }\n  for (var i in a) {\n    if (!(i in b)) {\n      return true;\n    }\n  }\n  for (var i in b) {\n    if (a[i] !== b[i]) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getAttributes(props) {\n  var className = props.className,\n    otherProps = __rest(props, [\"className\"]);\n  if (className != null) {\n    otherProps.class = className;\n  }\n  delete otherProps.style;\n  delete otherProps.children;\n  return otherProps;\n}\nfunction splitProps(props) {\n  var attributes = {};\n  var events = {};\n  for (var name_2 in props) {\n    if (name_2.indexOf(\"on\") === 0) {\n      events[name_2] = props[name_2];\n    } else {\n      attributes[name_2] = props[name_2];\n    }\n  }\n  return [attributes, events];\n}\nfunction findContainerNode(provider) {\n  if (!provider) {\n    return null;\n  }\n  var base = provider.b;\n  if (isNode(base)) {\n    return base;\n  }\n  return findContainerNode(provider.c);\n}\nfunction removeNode(node) {\n  var parentNode = node.parentNode;\n  if (parentNode) {\n    parentNode.removeChild(node);\n  }\n}\nfunction executeHooks(hooks) {\n  hooks.forEach(function (hook) {\n    hook();\n  });\n}\nfunction renderFunctionComponent() {\n  return this.constructor(this.props, this.context);\n}\n\nvar hooksIndex = 0;\nvar Provider = /*#__PURE__*/function () {\n  function Provider(\n  /**\n   * Type\n   */\n  t,\n  /**\n   * Depth\n   */\n  d,\n  /**\n   * Key\n   */\n  k,\n  /**\n   * index\n   */\n  i,\n  /**\n   * Container\n   */\n  c,\n  /**\n   * Ref\n   */\n  ref,\n  /**\n   * Props\n   */\n  ps) {\n    if (ps === void 0) {\n      ps = {};\n    }\n    this.t = t;\n    this.d = d;\n    this.k = k;\n    this.i = i;\n    this.c = c;\n    this.ref = ref;\n    this.ps = ps;\n    this.typ = \"prov\";\n    /**\n     * providers\n     */\n    this._ps = [];\n    /**\n     * Contexts\n     */\n    this._cs = {};\n    /**\n     * Whether to hydrate\n     */\n    this._hyd = null;\n    /**\n     * is self render\n     */\n    this._sel = false;\n  }\n  var __proto = Provider.prototype;\n  __proto.s = function () {\n    return true;\n  };\n  /**\n   * Update\n   */\n  __proto.u = function (hooks, contexts, nextElement, nextState, isForceUpdate) {\n    var self = this;\n    var currentDepth = self.d;\n    var scheduledContexts = getValues(contexts).filter(function (context) {\n      return context.$_req;\n    });\n    var scheduledSubs = flat(scheduledContexts.map(function (context) {\n      return context.$_subs;\n    }));\n    var isContextUpdate = find(scheduledSubs, function (provider) {\n      return provider.d === currentDepth;\n    });\n    if (self.b && !isString(nextElement) && !isForceUpdate && !self.s(nextElement.props, nextState) && !isContextUpdate) {\n      var nextChildSubs = scheduledSubs.reduce(function (childs, sub) {\n        var depth = sub.d;\n        if (childs[0]) {\n          if (childs[0].d === depth) {\n            childs.push(sub);\n          }\n        } else if (depth > currentDepth) {\n          childs.push(sub);\n        }\n        return childs;\n      }, []);\n      nextChildSubs.forEach(function (child) {\n        // provider.container!,\n        // [provider],\n        // [provider.original],\n        // hooks,\n        // provider._cs,\n        // { ...self.state, ...self.$_state },\n        // isForceUpdate,\n        renderProviders(child, child._ps, [child.o], hooks, contexts, true);\n      });\n      return false;\n    }\n    self.o = nextElement;\n    self.ss(nextState);\n    // render\n    var prevProps = self.ps;\n    if (!isString(nextElement)) {\n      self.ps = nextElement.props;\n      self.ref = nextElement.ref;\n    }\n    setCurrentInstance(this);\n    self.r(hooks, contexts, self.b ? prevProps : {}, nextState);\n    return true;\n  };\n  __proto.md = function () {\n    this.rr();\n  };\n  __proto.ss = function () {\n    return;\n  };\n  __proto.ud = function () {\n    this.rr();\n  };\n  /**\n   * register refs\n   */\n  __proto.rr = function () {\n    var self = this;\n    var ref = self.ref;\n    var fr = self.fr;\n    ref && ref(fr ? fr.current : self.b);\n  };\n  return Provider;\n}();\nfunction getCurrentInstance() {\n  return Object.__CROACT_CURRENT_INSTNACE__;\n}\nfunction getHooksIndex() {\n  return hooksIndex;\n}\nfunction setHooksInex(nextHooksIndex) {\n  hooksIndex = nextHooksIndex;\n}\nfunction setCurrentInstance(provider) {\n  Object.__CROACT_CURRENT_INSTNACE__ = provider;\n  hooksIndex = 0;\n  return provider;\n}\n\nvar Component = /*#__PURE__*/function () {\n  function Component(props, context) {\n    if (props === void 0) {\n      props = {};\n    }\n    this.props = props;\n    this.context = context;\n    this.state = {};\n    this.$_timer = 0;\n    this.$_state = {};\n    this.$_subs = [];\n    this.$_cs = {};\n  }\n  var __proto = Component.prototype;\n  __proto.render = function () {\n    return null;\n  };\n  __proto.shouldComponentUpdate = function (props, state) {\n    return this.props !== props || this.state !== state;\n  };\n  __proto.setState = function (state, callback, isForceUpdate) {\n    var self = this;\n    if (!self.$_timer) {\n      self.$_state = {};\n    }\n    clearTimeout(self.$_timer);\n    self.$_timer = 0;\n    self.$_state = __assign(__assign({}, self.$_state), state);\n    if (!isForceUpdate) {\n      self.$_timer = window.setTimeout(function () {\n        self.$_timer = 0;\n        self.$_setState(callback, isForceUpdate);\n      });\n    } else {\n      self.$_setState(callback, isForceUpdate);\n    }\n    return;\n  };\n  __proto.forceUpdate = function (callback) {\n    this.setState({}, callback, true);\n  };\n  __proto.componentDidMount = function () {};\n  __proto.componentDidUpdate = function (prevProps, prevState) {};\n  __proto.componentWillUnmount = function () {};\n  __proto.$_setState = function (callback, isForceUpdate) {\n    var hooks = [];\n    var provider = this.$_p;\n    var isUpdate = renderProviders(provider.c, [provider], [provider.o], hooks, provider._cs, __assign(__assign({}, this.state), this.$_state), isForceUpdate);\n    if (isUpdate) {\n      if (callback) {\n        hooks.push(callback);\n      }\n      executeHooks(hooks);\n      setCurrentInstance(null);\n    }\n  };\n  return Component;\n}();\nvar PureComponent = /*#__PURE__*/function (_super) {\n  __extends(PureComponent, _super);\n  function PureComponent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  var __proto = PureComponent.prototype;\n  __proto.shouldComponentUpdate = function (props, state) {\n    return isDiff(this.props, props) || isDiff(this.state, state);\n  };\n  return PureComponent;\n}(Component);\n\nfunction createRef(defaultValue) {\n  var refCallback = function (e) {\n    refCallback.current = e;\n  };\n  refCallback.current = defaultValue;\n  return refCallback;\n}\nfunction forwardRef(func) {\n  func._fr = true;\n  return func;\n}\n\nfunction createComponent(type, props, contextValue, self) {\n  var _a;\n  var base;\n  if ((_a = type === null || type === void 0 ? void 0 : type.prototype) === null || _a === void 0 ? void 0 : _a.render) {\n    base = new type(props, contextValue);\n  } else {\n    base = new Component(props, contextValue);\n    base.constructor = type;\n    if (type._fr) {\n      self.fr = createRef();\n      base.render = function () {\n        return this.constructor(this.props, self.fr);\n      };\n    } else {\n      base.render = renderFunctionComponent;\n    }\n  }\n  base.$_p = self;\n  return base;\n}\nvar ComponentProvider = /*#__PURE__*/function (_super) {\n  __extends(ComponentProvider, _super);\n  function ComponentProvider(type, depth, key, index, container, ref, props) {\n    if (props === void 0) {\n      props = {};\n    }\n    var _this = _super.call(this, type, depth, key, index, container, ref, fillProps(props, type.defaultProps)) || this;\n    _this.typ = \"comp\";\n    /**\n     * Update shift effects\n     */\n    _this._usefs = [];\n    /**\n     * Update effects\n     */\n    _this._uefs = [];\n    /**\n     * Destroy effects\n     */\n    _this._defs = [];\n    return _this;\n  }\n  var __proto = ComponentProvider.prototype;\n  __proto.s = function (nextProps, nextState) {\n    var base = this.b;\n    return base.shouldComponentUpdate(fillProps(nextProps, this.t.defaultProps), nextState || base.state) !== false;\n  };\n  __proto.r = function (hooks, contexts, prevProps) {\n    var _a, _b;\n    var self = this;\n    var type = self.t;\n    self.ps = fillProps(self.ps, self.t.defaultProps);\n    var props = self.ps;\n    var isMount = !self.b;\n    var contextType = type.contextType;\n    var base = self.b;\n    var contextValue = contextType === null || contextType === void 0 ? void 0 : contextType.get(self);\n    self._cs = contexts;\n    if (isMount) {\n      base = createComponent(type, props, contextValue, self);\n      self.b = base;\n    } else {\n      base.props = props;\n      base.context = contextValue;\n    }\n    var prevState = base.state;\n    self._usefs = [];\n    self._uefs = [];\n    var template = base.render();\n    if (((_b = (_a = template === null || template === void 0 ? void 0 : template.props) === null || _a === void 0 ? void 0 : _a.children) === null || _b === void 0 ? void 0 : _b.length) === 0) {\n      template.props.children = self.ps.children;\n    }\n    var nextContexts = __assign(__assign({}, contexts), base.$_cs);\n    renderProviders(self, self._ps, template ? [template] : [], hooks, nextContexts);\n    if (isMount) {\n      self._uefs.push(function () {\n        contextType === null || contextType === void 0 ? void 0 : contextType.register(self);\n        base.componentDidMount();\n      });\n    } else {\n      self._uefs.push(function () {\n        base.componentDidUpdate(prevProps, prevState);\n      });\n    }\n    hooks.push(function () {\n      self._usefs.forEach(function (ef) {\n        ef();\n      });\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n      self._defs = self._uefs.map(function (ef) {\n        return ef();\n      });\n    });\n  };\n  __proto.ss = function (nextState) {\n    var base = this.b;\n    if (!base || !nextState) {\n      return;\n    }\n    base.state = nextState;\n  };\n  __proto.un = function () {\n    var _a;\n    var self = this;\n    self._ps.forEach(function (provider) {\n      provider.un();\n    });\n    var type = self.t;\n    (_a = type.contextType) === null || _a === void 0 ? void 0 : _a.unregister(self);\n    clearTimeout(self.b.$_timer);\n    self._defs.forEach(function (def) {\n      def && def();\n    });\n    self.b.componentWillUnmount();\n  };\n  return ComponentProvider;\n}(Provider);\n\nfunction diffAttributes(attrs1, attrs2, el) {\n  var _a = diffObject(getAttributes(attrs1), getAttributes(attrs2)),\n    added = _a.added,\n    removed = _a.removed,\n    changed = _a.changed;\n  for (var name_1 in added) {\n    el.setAttribute(name_1, added[name_1]);\n  }\n  for (var name_2 in changed) {\n    el.setAttribute(name_2, changed[name_2][1]);\n  }\n  for (var name_3 in removed) {\n    el.removeAttribute(name_3);\n  }\n}\nfunction diffEvents(events1, events2, provier) {\n  var _a = diffObject(events1, events2),\n    added = _a.added,\n    removed = _a.removed;\n  for (var name_4 in removed) {\n    provier.e(name_4, true);\n  }\n  for (var name_5 in added) {\n    provier.e(name_5);\n  }\n}\nfunction diffObject(a, b) {\n  var keys1 = getKeys(a);\n  var keys2 = getKeys(b);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  var added = {};\n  var removed = {};\n  var changed = {};\n  result.added.forEach(function (index) {\n    var name = keys2[index];\n    added[name] = b[name];\n  });\n  result.removed.forEach(function (index) {\n    var name = keys1[index];\n    removed[name] = a[name];\n  });\n  result.maintained.forEach(function (_a) {\n    var index = _a[0];\n    var name = keys1[index];\n    var values = [a[name], b[name]];\n    if (a[name] !== b[name]) {\n      changed[name] = values;\n    }\n  });\n  return {\n    added: added,\n    removed: removed,\n    changed: changed\n  };\n}\nfunction diffStyle(style1, style2, el) {\n  var style = el.style;\n  var _a = diffObject(style1, style2),\n    added = _a.added,\n    removed = _a.removed,\n    changed = _a.changed;\n  for (var beforeName in added) {\n    var name_6 = decamelize(beforeName, \"-\");\n    style.setProperty(name_6, added[beforeName]);\n  }\n  for (var beforeName in changed) {\n    var name_7 = decamelize(beforeName, \"-\");\n    style.setProperty(name_7, changed[beforeName][1]);\n  }\n  for (var beforeName in removed) {\n    var name_8 = decamelize(beforeName, \"-\");\n    style.removeProperty(name_8);\n  }\n}\nfunction getNativeEventName(name) {\n  return name.replace(/^on/g, \"\").toLowerCase();\n}\nvar ElementProvider = /*#__PURE__*/function (_super) {\n  __extends(ElementProvider, _super);\n  function ElementProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.typ = \"elem\";\n    /**\n     * Events\n     */\n    _this._es = {};\n    /**\n     * is svg\n     */\n    _this._svg = false;\n    return _this;\n  }\n  var __proto = ElementProvider.prototype;\n  __proto.e = function (name, isRemove) {\n    var self = this;\n    var events = self._es;\n    var base = self.b;\n    var eventName = getNativeEventName(name);\n    if (isRemove) {\n      removeEvent(base, eventName, events[name]);\n      delete events[name];\n    } else {\n      events[name] = function (e) {\n        var _a, _b;\n        (_b = (_a = self.ps)[name]) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n      };\n      addEvent(base, eventName, events[name]);\n    }\n  };\n  __proto.s = function (nextProps) {\n    return isDiff(this.ps, nextProps);\n  };\n  __proto.r = function (hooks, contextValues, prevProps) {\n    var _a;\n    var self = this;\n    var isMount = !self.b;\n    var nextProps = self.ps;\n    if (isMount) {\n      var containerNode = findContainerNode(self.c);\n      var isSVG = false;\n      if (self._svg || self.t === \"svg\") {\n        isSVG = true;\n      } else {\n        isSVG = containerNode && containerNode.ownerSVGElement;\n      }\n      self._svg = isSVG;\n      var element = (_a = self._hyd) === null || _a === void 0 ? void 0 : _a.splice(0, 1)[0];\n      var type = self.t;\n      if (element) {\n        self._hyd = [].slice.call(element.children || []);\n      } else {\n        var doc = getDocument(containerNode);\n        if (isSVG) {\n          element = doc.createElementNS(\"http://www.w3.org/2000/svg\", type);\n        } else {\n          element = doc.createElement(type);\n        }\n      }\n      self.b = element;\n    }\n    renderProviders(self, self._ps, nextProps.children, hooks, contextValues);\n    var base = self.b;\n    var _b = splitProps(prevProps),\n      prevAttributes = _b[0],\n      prevEvents = _b[1];\n    var _c = splitProps(nextProps),\n      nextAttributes = _c[0],\n      nextEvents = _c[1];\n    diffAttributes(prevAttributes, nextAttributes, base);\n    diffEvents(prevEvents, nextEvents, self);\n    diffStyle(prevProps.style || {}, nextProps.style || {}, base);\n    hooks.push(function () {\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n    });\n    return true;\n  };\n  __proto.un = function () {\n    var self = this;\n    var events = self._es;\n    var base = self.b;\n    for (var name_9 in events) {\n      removeEvent(base, name_9, events[name_9]);\n    }\n    self._ps.forEach(function (provider) {\n      provider.un();\n    });\n    self._es = {};\n    if (!self._sel) {\n      removeNode(base);\n    }\n  };\n  return ElementProvider;\n}(Provider);\n\nfunction findDOMNode(comp) {\n  if (!comp || isNode(comp)) {\n    return comp;\n  }\n  var providers = comp.$_p._ps;\n  if (!providers.length) {\n    return null;\n  }\n  return findDOMNode(providers[0].b);\n}\nfunction findNodeProvider(provider) {\n  if (!provider) {\n    return;\n  }\n  if (provider.b && isNode(provider.b)) {\n    return provider;\n  }\n  var providers = provider._ps;\n  if (!providers.length) {\n    return null;\n  }\n  return findNodeProvider(providers[0]);\n}\nfunction createElement(type, props) {\n  var children = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n  var _a = props || {},\n    key = _a.key,\n    ref = _a.ref,\n    otherProps = __rest(_a, [\"key\", \"ref\"]);\n  return {\n    type: type,\n    key: key,\n    ref: ref,\n    props: __assign(__assign({}, otherProps), {\n      children: flat$1(children).filter(function (child) {\n        return child != null && child !== false;\n      })\n    })\n  };\n}\n\nvar ContainerProvider = /*#__PURE__*/function (_super) {\n  __extends(ContainerProvider, _super);\n  function ContainerProvider(base, depth) {\n    if (depth === void 0) {\n      depth = 0;\n    }\n    var _this = _super.call(this, \"container\", depth, \"container\", 0, null) || this;\n    _this.typ = \"container\";\n    _this.b = base;\n    return _this;\n  }\n  var __proto = ContainerProvider.prototype;\n  __proto.r = function () {\n    return true;\n  };\n  __proto.un = function () {\n    return;\n  };\n  return ContainerProvider;\n}(Provider);\nvar TextProvider = /*#__PURE__*/function (_super) {\n  __extends(TextProvider, _super);\n  function TextProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.typ = \"text\";\n    return _this;\n  }\n  var __proto = TextProvider.prototype;\n  __proto.r = function (hooks) {\n    var _a;\n    var self = this;\n    var isMount = !self.b;\n    if (isMount) {\n      var containerNode = findContainerNode(self.c);\n      var b = (_a = self._hyd) === null || _a === void 0 ? void 0 : _a.splice(0, 1)[0];\n      self.b = b || getDocument(containerNode).createTextNode(self.t.replace(\"text_\", \"\"));\n    }\n    hooks.push(function () {\n      if (isMount) {\n        self.md();\n      } else {\n        self.ud();\n      }\n    });\n    return true;\n  };\n  __proto.un = function () {\n    removeNode(this.b);\n  };\n  return TextProvider;\n}(Provider);\nfunction diffProviders(containerProvider, providers, children) {\n  var childrenKeys = children.map(function (p) {\n    return isString(p) ? null : p.key;\n  });\n  var keys1 = fillKeys(providers.map(function (p) {\n    return p.k;\n  }));\n  var keys2 = fillKeys(childrenKeys);\n  var result = diff(keys1, keys2, function (key) {\n    return key;\n  });\n  result.removed.forEach(function (index) {\n    providers.splice(index, 1)[0].un();\n  });\n  result.ordered.forEach(function (_a) {\n    var from = _a[0],\n      to = _a[1];\n    var childrenProvider = providers.splice(from, 1)[0];\n    providers.splice(to, 0, childrenProvider);\n    var el = findDOMNode(childrenProvider.b);\n    var next = findDOMNode(providers[to + 1] && providers[to + 1].b);\n    if (el) {\n      el.parentNode.insertBefore(el, next);\n    }\n  });\n  result.added.forEach(function (index) {\n    providers.splice(index, 0, createProvider(children[index], childrenKeys[index], index, containerProvider));\n  });\n  var changed = result.maintained.filter(function (_a) {\n    _a[0];\n      var to = _a[1];\n    var el = children[to];\n    var childProvider = providers[to];\n    var type = isString(el) ? \"text_\".concat(el) : el.type;\n    if (type !== childProvider.t) {\n      childProvider.un();\n      providers.splice(to, 1, createProvider(el, childrenKeys[to], to, containerProvider));\n      return true;\n    }\n    childProvider.i = to;\n    return false;\n  });\n  return __spreadArray(__spreadArray([], result.added, true), changed.map(function (_a) {\n    _a[0];\n      var to = _a[1];\n    return to;\n  }), true);\n}\n\nfunction getNextSibiling(provider, childProvider) {\n  var childProviders = provider._ps;\n  var length = childProviders.length;\n  for (var i = childProvider.i + 1; i < length; ++i) {\n    var el = findDOMNode(childProviders[i].b);\n    if (el) {\n      return el;\n    }\n  }\n  return null;\n}\nfunction createProvider(el, key, index, containerProvider) {\n  var depth = containerProvider.d + 1;\n  if (isString(el) || isNumber(el)) {\n    return new TextProvider(\"text_\".concat(el), depth, key, index, containerProvider, null, {});\n  }\n  var type = el.type;\n  var providerClass = typeof type === \"string\" ? ElementProvider : ComponentProvider;\n  return new providerClass(type, depth, key, index, containerProvider, el.ref, el.props);\n}\nfunction renderProviders(containerProvider, providers, children, updatedHooks, nextContexts, nextState, isForceUpdate) {\n  var result = diffProviders(containerProvider, providers, children);\n  var hyd = containerProvider._hyd;\n  var updated = providers.filter(function (childProvider, i) {\n    childProvider._hyd = hyd;\n    return childProvider.u(updatedHooks, nextContexts, children[i], nextState, isForceUpdate);\n  });\n  if (containerProvider.typ === \"container\" && containerProvider._sel) {\n    providers.forEach(function (provider) {\n      var nodeProvider = findNodeProvider(provider);\n      if (nodeProvider) {\n        nodeProvider._sel = true;\n      }\n    });\n  }\n  containerProvider._hyd = null;\n  var containerNode = findContainerNode(containerProvider);\n  if (containerNode) {\n    result.reverse().forEach(function (index) {\n      var childProvider = providers[index];\n      var el = findDOMNode(childProvider.b);\n      if (!el) {\n        return;\n      }\n      if (containerNode !== el && !el.parentNode) {\n        var nextElement = getNextSibiling(containerProvider, childProvider);\n        containerNode.insertBefore(el, nextElement);\n      }\n    });\n  }\n  return updated.length > 0;\n}\nfunction renderProvider(element, container, provider, contexts) {\n  if (provider === void 0) {\n    provider = container.__CROACT__;\n  }\n  if (contexts === void 0) {\n    contexts = {};\n  }\n  var isProvider = !!provider;\n  if (!provider) {\n    provider = new ContainerProvider(container);\n  }\n  var hooks = [];\n  renderProviders(provider, provider._ps, element ? [element] : [], hooks, contexts, undefined, undefined);\n  executeHooks(hooks);\n  setCurrentInstance(null);\n  if (!isProvider) {\n    container.__CROACT__ = provider;\n  }\n  return provider;\n}\nfunction render(element, container, callback) {\n  var provider = container.__CROACT__;\n  if (element && !provider) {\n    container.innerHTML = \"\";\n  }\n  renderProvider(element, container, provider);\n  callback && callback();\n}\nfunction renderSelf(element, self, containerProvider) {\n  if (!containerProvider && element) {\n    containerProvider = new ContainerProvider(self.parentElement);\n    containerProvider._hyd = [self];\n    containerProvider._sel = true;\n  }\n  renderProvider(element, self, containerProvider);\n  return containerProvider;\n}\n\nvar i  = 0;\nfunction createContext(defaultValue) {\n  var id = \"c\".concat(++i);\n  function Provider(props) {\n    var self = this;\n    if (!self.$_cs[id]) {\n      self.$_cs[id] = self;\n      var $_subs = [];\n      self.shouldComponentUpdate = function (nextProps) {\n        if (nextProps.value !== self.props.value) {\n          // request\n          self.$_req = true;\n        }\n      };\n      self.render = function () {\n        return self.props.children[0];\n      };\n      self.$_subs = $_subs;\n    }\n    return props.children[0];\n  }\n  function Consumer(props, contextValue) {\n    return props.children(contextValue);\n  }\n  function getContext(provider) {\n    return provider._cs[id];\n  }\n  var context = {\n    $_id: id,\n    $_dv: defaultValue,\n    Consumer: Consumer,\n    Provider: Provider,\n    get: function (provider) {\n      var _a, _b;\n      return (_b = (_a = getContext(provider)) === null || _a === void 0 ? void 0 : _a.props.value) !== null && _b !== void 0 ? _b : defaultValue;\n    },\n    register: function (provider) {\n      var mainComponent = getContext(provider);\n      if (mainComponent) {\n        pushSet(mainComponent.$_subs, provider);\n      }\n    },\n    unregister: function (provider) {\n      var mainComponent = getContext(provider);\n      if (mainComponent) {\n        var subs = mainComponent.$_subs;\n        var index = subs.indexOf(provider);\n        if (index > -1) {\n          subs.splice(index, 1);\n        }\n      }\n    }\n  };\n  Consumer.contextType = context;\n  return context;\n}\n\nvar Portal = /*#__PURE__*/function (_super) {\n  __extends(Portal, _super);\n  function Portal() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  var __proto = Portal.prototype;\n  __proto.componentDidMount = function () {\n    var self = this;\n    var _a = self.props,\n      element = _a.element,\n      container = _a.container;\n    var parentProvider = self.$_p;\n    self._pp = new ContainerProvider(container, parentProvider.d + 1);\n    renderProvider(element, container, self._pp, parentProvider._cs);\n  };\n  __proto.componentDidUpdate = function () {\n    var self = this;\n    var _a = self.props,\n      element = _a.element,\n      container = _a.container;\n    renderProvider(element, container, self._pp, self.$_p._cs);\n  };\n  __proto.componentWillUnmount = function () {\n    var self = this;\n    var container = self.props.container;\n    renderProvider(null, container, self._pp, self.$_p._cs);\n    this._pp = null;\n  };\n  return Portal;\n}(PureComponent);\nfunction createPortal(el, container) {\n  return createElement(Portal, {\n    element: el,\n    container: container\n  });\n}\n\nfunction _renderToString(node, parentContexts, self) {\n  if (node == null) {\n    return \"\";\n  }\n  if (isString(node) || isNumber(node) || isFunction(node)) {\n    return node;\n  }\n  var type = node.type,\n    props = node.props;\n  if (isString(type)) {\n    var stringProps_1 = {};\n    getEntries(props).forEach(function (_a) {\n      var name = _a[0],\n        value = _a[1];\n      if (name === \"style\") {\n        stringProps_1[name] = getEntries(value).map(function (_a) {\n          var styleName = _a[0],\n            styleValue = _a[1];\n          return \"\".concat(decamelize(styleName), \": \").concat(styleValue, \";\");\n        }).join(\"\");\n      } else if (name === \"children\") {\n        return;\n      } else if (!name.match(/^on[^a-z]/g)) {\n        stringProps_1[name] = \"\".concat(value);\n      }\n    });\n    var children = props.children.map(function (child) {\n      return _renderToString(child, parentContexts);\n    }).join(\"\");\n    if (self) {\n      return {\n        tagName: type,\n        props: stringProps_1,\n        children: children\n      };\n    }\n    var strings = __spreadArray([type], getEntries(stringProps_1).map(function (_a) {\n      var name = _a[0],\n        value = _a[1];\n      return \"\".concat(name, \"=\\\"\").concat(value.replace(/\"/g, \"\\\\\\\"\"), \"\\\"\");\n    }), true);\n    return \"<\".concat(strings.join(\" \"), \">\").concat(children, \"</\").concat(type, \">\");\n  } else if (isFunction(type)) {\n    var contextType = type.contextType;\n    var provider = {\n      b: null,\n      _hs: [],\n      _usefs: [],\n      _uefs: [],\n      _defs: [],\n      _cs: parentContexts\n    };\n    setCurrentInstance(provider);\n    var contextValue = contextType === null || contextType === void 0 ? void 0 : contextType.get(provider);\n    var base = createComponent(type, props, contextValue, {});\n    var nextContexts = __assign(__assign({}, parentContexts), base.$_cs);\n    provider.b = base;\n    return _renderToString(base.render(), nextContexts, self);\n  }\n  return \"\";\n}\nfunction renderToString(node) {\n  return _renderToString(node, {});\n}\nfunction renderSelfToString(node) {\n  return _renderToString(node, {}, true);\n}\n\nfunction checkHookInfo(info) {\n  var inst = getCurrentInstance();\n  var hooks = inst._hs || (inst._hs = []);\n  var index = getHooksIndex();\n  var prevHt = hooks[index];\n  setHooksInex(index + 1);\n  if (prevHt) {\n    if (!isDiff(prevHt.deps, info.deps)) {\n      prevHt.updated = false;\n      return prevHt;\n    }\n    hooks[index] = info;\n  } else {\n    hooks.push(info);\n  }\n  info.value = info.func();\n  info.updated = true;\n  return info;\n}\nfunction useMemo(defaultFunction, deps) {\n  var info = checkHookInfo({\n    func: defaultFunction,\n    deps: deps\n  });\n  return info.value;\n}\nfunction useRef(defaultValue) {\n  return useMemo(function () {\n    return createRef(defaultValue);\n  }, []);\n}\nfunction useContext(context) {\n  var inst = getCurrentInstance();\n  var contextId = context.$_id;\n  var contexts = inst._cs;\n  var providerComponent;\n  if (contextId in contexts) {\n    providerComponent = contexts[contextId];\n    providerComponent.props.value;\n  } else {\n    context.$_dv;\n  }\n  useEffect(function () {\n    context.register(inst);\n    return function () {\n      context.unregister(inst);\n    };\n  }, []);\n  return context.get(inst);\n}\nfunction useState(st) {\n  var inst = getCurrentInstance();\n  var index = getHooksIndex();\n  var comp = inst.b;\n  checkHookInfo({\n    func: function () {\n      comp.state[index] = isFunction(st) ? st() : st;\n    },\n    deps: []\n  });\n  return [comp.state[index], function (nextValue) {\n    var _a;\n    return comp.setState((_a = {}, _a[index] = nextValue, _a));\n  }];\n}\nfunction useEffect(effect, deps, unshift) {\n  var inst = getCurrentInstance();\n  var info = checkHookInfo({\n    func: function () {\n      return effect;\n    },\n    deps: deps\n  });\n  var effects = unshift ? inst._usefs : inst._uefs;\n  if (info.updated) {\n    effects.push(function () {\n      info.effect && info.effect();\n      info.effect = effect();\n      return info.effect;\n    });\n  } else {\n    effects.push(function () {\n      return info.effect;\n    });\n  }\n}\nfunction useImperativeHandle(ref, func, deps) {\n  useEffect(function () {\n    ref === null || ref === void 0 ? void 0 : ref(func());\n  }, deps, true);\n}\n\nvar version = \"simple-1.0.0\";\n\nexport { Component, ContainerProvider, PureComponent, createContext, createElement, createPortal, createRef, findDOMNode, findNodeProvider, forwardRef, render, renderSelf, renderSelfToString, renderToString, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState, version };\n//# sourceMappingURL=croact.esm.js.map\n","/*\nCopyright (c) 2015 NAVER Corp.\nname: @egjs/agent\nlicense: MIT\nauthor: NAVER Corp.\nrepository: git+https://github.com/naver/agent.git\nversion: 2.4.3\n*/\nfunction some(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return true;\n    }\n  }\n\n  return false;\n}\nfunction find(arr, callback) {\n  var length = arr.length;\n\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i)) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\nfunction getUserAgentString(agent) {\n  var userAgent = agent;\n\n  if (typeof userAgent === \"undefined\") {\n    if (typeof navigator === \"undefined\" || !navigator) {\n      return \"\";\n    }\n\n    userAgent = navigator.userAgent || \"\";\n  }\n\n  return userAgent.toLowerCase();\n}\nfunction execRegExp(pattern, text) {\n  try {\n    return new RegExp(pattern, \"g\").exec(text);\n  } catch (e) {\n    return null;\n  }\n}\nfunction hasUserAgentData() {\n  if (typeof navigator === \"undefined\" || !navigator || !navigator.userAgentData) {\n    return false;\n  }\n\n  var userAgentData = navigator.userAgentData;\n  var brands = userAgentData.brands || userAgentData.uaList;\n  return !!(brands && brands.length);\n}\nfunction findVersion(versionTest, userAgent) {\n  var result = execRegExp(\"(\" + versionTest + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))\", userAgent);\n  return result ? result[3] : \"\";\n}\nfunction convertVersion(text) {\n  return text.replace(/_/g, \".\");\n}\nfunction findPreset(presets, userAgent) {\n  var userPreset = null;\n  var version = \"-1\";\n  some(presets, function (preset) {\n    var result = execRegExp(\"(\" + preset.test + \")((?:\\\\/|\\\\s|:)([0-9|\\\\.|_]+))?\", userAgent);\n\n    if (!result || preset.brand) {\n      return false;\n    }\n\n    userPreset = preset;\n    version = result[3] || \"-1\";\n\n    if (preset.versionAlias) {\n      version = preset.versionAlias;\n    } else if (preset.versionTest) {\n      version = findVersion(preset.versionTest.toLowerCase(), userAgent) || version;\n    }\n\n    version = convertVersion(version);\n    return true;\n  });\n  return {\n    preset: userPreset,\n    version: version\n  };\n}\nfunction findPresetBrand(presets, brands) {\n  var brandInfo = {\n    brand: \"\",\n    version: \"-1\"\n  };\n  some(presets, function (preset) {\n    var result = findBrand(brands, preset);\n\n    if (!result) {\n      return false;\n    }\n\n    brandInfo.brand = preset.id;\n    brandInfo.version = preset.versionAlias || result.version;\n    return brandInfo.version !== \"-1\";\n  });\n  return brandInfo;\n}\nfunction findBrand(brands, preset) {\n  return find(brands, function (_a) {\n    var brand = _a.brand;\n    return execRegExp(\"\" + preset.test, brand.toLowerCase());\n  });\n}\n\nvar BROWSER_PRESETS = [{\n  test: \"phantomjs\",\n  id: \"phantomjs\"\n}, {\n  test: \"whale\",\n  id: \"whale\"\n}, {\n  test: \"edgios|edge|edg\",\n  id: \"edge\"\n}, {\n  test: \"msie|trident|windows phone\",\n  id: \"ie\",\n  versionTest: \"iemobile|msie|rv\"\n}, {\n  test: \"miuibrowser\",\n  id: \"miui browser\"\n}, {\n  test: \"samsungbrowser\",\n  id: \"samsung internet\"\n}, {\n  test: \"samsung\",\n  id: \"samsung internet\",\n  versionTest: \"version\"\n}, {\n  test: \"chrome|crios\",\n  id: \"chrome\"\n}, {\n  test: \"firefox|fxios\",\n  id: \"firefox\"\n}, {\n  test: \"android\",\n  id: \"android browser\",\n  versionTest: \"version\"\n}, {\n  test: \"safari|iphone|ipad|ipod\",\n  id: \"safari\",\n  versionTest: \"version\"\n}]; // chromium's engine(blink) is based on applewebkit 537.36.\n\nvar CHROMIUM_PRESETS = [{\n  test: \"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\\\schrome)\",\n  id: \"chrome\",\n  versionTest: \"chrome\"\n}, {\n  test: \"chromium\",\n  id: \"chrome\"\n}, {\n  test: \"whale\",\n  id: \"chrome\",\n  versionAlias: \"-1\",\n  brand: true\n}];\nvar WEBKIT_PRESETS = [{\n  test: \"applewebkit\",\n  id: \"webkit\",\n  versionTest: \"applewebkit|safari\"\n}];\nvar WEBVIEW_PRESETS = [{\n  test: \"(?=(iphone|ipad))(?!(.*version))\",\n  id: \"webview\"\n}, {\n  test: \"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))\",\n  id: \"webview\"\n}, {\n  // test webview\n  test: \"webview\",\n  id: \"webview\"\n}];\nvar OS_PRESETS = [{\n  test: \"windows phone\",\n  id: \"windows phone\"\n}, {\n  test: \"windows 2000\",\n  id: \"window\",\n  versionAlias: \"5.0\"\n}, {\n  test: \"windows nt\",\n  id: \"window\"\n}, {\n  test: \"win32|windows\",\n  id: \"window\"\n}, {\n  test: \"iphone|ipad|ipod\",\n  id: \"ios\",\n  versionTest: \"iphone os|cpu os\"\n}, {\n  test: \"macos|macintel|mac os x\",\n  id: \"mac\"\n}, {\n  test: \"android|linux armv81\",\n  id: \"android\"\n}, {\n  test: \"tizen\",\n  id: \"tizen\"\n}, {\n  test: \"webos|web0s\",\n  id: \"webos\"\n}];\n\nfunction isWebView(userAgent) {\n  return !!findPreset(WEBVIEW_PRESETS, userAgent).preset;\n}\nfunction getLegacyAgent(userAgent) {\n  var nextAgent = getUserAgentString(userAgent);\n  var isMobile = !!/mobi/g.exec(nextAgent);\n  var browser = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1,\n    webview: isWebView(nextAgent),\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webkit: false,\n    webkitVersion: \"-1\"\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n\n  var _a = findPreset(BROWSER_PRESETS, nextAgent),\n      browserPreset = _a.preset,\n      browserVersion = _a.version;\n\n  var _b = findPreset(OS_PRESETS, nextAgent),\n      osPreset = _b.preset,\n      osVersion = _b.version;\n\n  var chromiumPreset = findPreset(CHROMIUM_PRESETS, nextAgent);\n  browser.chromium = !!chromiumPreset.preset;\n  browser.chromiumVersion = chromiumPreset.version;\n\n  if (!browser.chromium) {\n    var webkitPreset = findPreset(WEBKIT_PRESETS, nextAgent);\n    browser.webkit = !!webkitPreset.preset;\n    browser.webkitVersion = webkitPreset.version;\n  }\n\n  if (osPreset) {\n    os.name = osPreset.id;\n    os.version = osVersion;\n    os.majorVersion = parseInt(osVersion, 10);\n  }\n\n  if (browserPreset) {\n    browser.name = browserPreset.id;\n    browser.version = browserVersion; // Early whale bugs\n\n    if (browser.webview && os.name === \"ios\" && browser.name !== \"safari\") {\n      browser.webview = false;\n    }\n  }\n\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: false\n  };\n}\n\nfunction getClientHintsAgent(osData) {\n  var userAgentData = navigator.userAgentData;\n  var brands = (userAgentData.uaList || userAgentData.brands).slice();\n  var fullVersionList = osData && osData.fullVersionList;\n  var isMobile = userAgentData.mobile || false;\n  var firstBrand = brands[0];\n  var platform = (osData && osData.platform || userAgentData.platform || navigator.platform).toLowerCase();\n  var browser = {\n    name: firstBrand.brand,\n    version: firstBrand.version,\n    majorVersion: -1,\n    webkit: false,\n    webkitVersion: \"-1\",\n    chromium: false,\n    chromiumVersion: \"-1\",\n    webview: !!findPresetBrand(WEBVIEW_PRESETS, brands).brand || isWebView(getUserAgentString())\n  };\n  var os = {\n    name: \"unknown\",\n    version: \"-1\",\n    majorVersion: -1\n  };\n  browser.webkit = !browser.chromium && some(WEBKIT_PRESETS, function (preset) {\n    return findBrand(brands, preset);\n  });\n  var chromiumBrand = findPresetBrand(CHROMIUM_PRESETS, brands);\n  browser.chromium = !!chromiumBrand.brand;\n  browser.chromiumVersion = chromiumBrand.version;\n\n  if (!browser.chromium) {\n    var webkitBrand = findPresetBrand(WEBKIT_PRESETS, brands);\n    browser.webkit = !!webkitBrand.brand;\n    browser.webkitVersion = webkitBrand.version;\n  }\n\n  var platfomResult = find(OS_PRESETS, function (preset) {\n    return new RegExp(\"\" + preset.test, \"g\").exec(platform);\n  });\n  os.name = platfomResult ? platfomResult.id : \"\";\n\n  if (osData) {\n    os.version = osData.platformVersion;\n  }\n\n  if (fullVersionList && fullVersionList.length) {\n    var browserBrandByFullVersionList = findPresetBrand(BROWSER_PRESETS, fullVersionList);\n    browser.name = browserBrandByFullVersionList.brand || browser.name;\n    browser.version = browserBrandByFullVersionList.version || browser.version;\n  } else {\n    var browserBrand = findPresetBrand(BROWSER_PRESETS, brands);\n    browser.name = browserBrand.brand || browser.name;\n    browser.version = browserBrand.brand && osData ? osData.uaFullVersion : browserBrand.version;\n  }\n\n  if (browser.webkit) {\n    os.name = isMobile ? \"ios\" : \"mac\";\n  }\n\n  if (os.name === \"ios\" && browser.webview) {\n    browser.version = \"-1\";\n  }\n\n  os.version = convertVersion(os.version);\n  browser.version = convertVersion(browser.version);\n  os.majorVersion = parseInt(os.version, 10);\n  browser.majorVersion = parseInt(browser.version, 10);\n  return {\n    browser: browser,\n    os: os,\n    isMobile: isMobile,\n    isHints: true\n  };\n}\n\n/**\n * @namespace eg.agent\n */\n\n/**\n* Extracts accuate browser and operating system information from the user agent string or client hints.\n* @ko 유저 에이전트 문자열 또는 client hints에서 정확한 브라우저와 운영체제 정보를 추출한다.\n* @function eg.agent#getAccurateAgent\n* @param - Callback function to get the accuate agent <ko>정확한 에이전트를 가져오기 위한 callback 함수</ko>\n* @return - get the accuate agent promise. If Promise are not supported, null is returned. <ko> 정확한 에이전트 promise를 가져온다. Promise를 지원 하지 않는 경우, null을 반환한다. </ko>\n* @example\nimport { getAccurateAgent } from \"@egjs/agent\";\n// eg.agent.getAccurateAgent()\ngetAccurateAgent().then(agent => {\n   const { os, browser, isMobile } = agent;\n});\ngetAccurateAgent(agent => {\n    const { os, browser, isMobile } = agent;\n});\n*/\n\nfunction getAccurateAgent(callback) {\n  if (hasUserAgentData()) {\n    return navigator.userAgentData.getHighEntropyValues([\"architecture\", \"model\", \"platform\", \"platformVersion\", \"uaFullVersion\", \"fullVersionList\"]).then(function (info) {\n      var agentInfo = getClientHintsAgent(info);\n      callback && callback(agentInfo);\n      return agentInfo;\n    });\n  }\n\n  callback && callback(agent());\n\n  if (typeof Promise === \"undefined\" || !Promise) {\n    return null;\n  }\n\n  return Promise.resolve(agent());\n}\n/**\n * Extracts browser and operating system information from the user agent string.\n * @ko 유저 에이전트 문자열에서 브라우저와 운영체제 정보를 추출한다.\n * @function eg.agent#agent\n * @param - user agent string to parse <ko>파싱할 유저에이전트 문자열</ko>\n * @return - agent Info <ko> 에이전트 정보 </ko>\n * @example\nimport agent from \"@egjs/agent\";\n// eg.agent();\nconst { os, browser, isMobile } = agent();\n */\n\nfunction agent(userAgent) {\n  if (typeof userAgent === \"undefined\" && hasUserAgentData()) {\n    return getClientHintsAgent();\n  } else {\n    return getLegacyAgent(userAgent);\n  }\n}\n\nexport default agent;\nexport { getAccurateAgent, getLegacyAgent };\n//# sourceMappingURL=agent.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: @scena/matrix\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/matrix\nversion: 1.1.1\n*/\nimport { throttle, TINY_NUM, average } from '@daybrush/utils';\n\nfunction add(matrix, inverseMatrix, startIndex, fromIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    matrix[x] += matrix[fromX] * k;\n    inverseMatrix[x] += inverseMatrix[fromX] * k;\n  }\n}\n\nfunction swap(matrix, inverseMatrix, startIndex, fromIndex, n) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    var v = matrix[x];\n    var iv = inverseMatrix[x];\n    matrix[x] = matrix[fromX];\n    matrix[fromX] = v;\n    inverseMatrix[x] = inverseMatrix[fromX];\n    inverseMatrix[fromX] = iv;\n  }\n}\n\nfunction divide(matrix, inverseMatrix, startIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    matrix[x] /= k;\n    inverseMatrix[x] /= k;\n  }\n}\n/**\n *\n * @namespace Matrix\n */\n\n/**\n * @memberof Matrix\n */\n\n\nfunction ignoreDimension(matrix, m, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n\n  for (var i = 0; i < n; ++i) {\n    newMatrix[i * n + m - 1] = 0;\n    newMatrix[(m - 1) * n + i] = 0;\n  }\n\n  newMatrix[(m - 1) * (n + 1)] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction invert(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n  var inverseMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n; ++i) {\n    // diagonal\n    var identityIndex = n * i + i;\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // newMatrix[identityIndex] = 0;\n      for (var j = i + 1; j < n; ++j) {\n        if (newMatrix[n * i + j]) {\n          swap(newMatrix, inverseMatrix, i, j, n);\n          break;\n        }\n      }\n    }\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // no inverse matrix\n      return [];\n    }\n\n    divide(newMatrix, inverseMatrix, i, n, newMatrix[identityIndex]);\n\n    for (var j = 0; j < n; ++j) {\n      var targetStartIndex = j;\n      var targetIndex = j + i * n;\n      var target = newMatrix[targetIndex];\n\n      if (!throttle(target, TINY_NUM) || i === j) {\n        continue;\n      }\n\n      add(newMatrix, inverseMatrix, targetStartIndex, i, n, -target);\n    }\n  }\n\n  return inverseMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction transpose(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = [];\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < n; ++j) {\n      newMatrix[j * n + i] = matrix[n * i + j];\n    }\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction getOrigin(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var originMatrix = [];\n  var w = matrix[n * n - 1];\n\n  for (var i = 0; i < n - 1; ++i) {\n    originMatrix[i] = matrix[n * (n - 1) + i] / w;\n  }\n\n  originMatrix[n - 1] = 0;\n  return originMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction fromTranslation(pos, n) {\n  var newMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n - 1; ++i) {\n    newMatrix[n * (n - 1) + i] = pos[i] || 0;\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertPositionMatrix(matrix, n) {\n  var newMatrix = matrix.slice();\n\n  for (var i = matrix.length; i < n - 1; ++i) {\n    newMatrix[i] = 0;\n  }\n\n  newMatrix[n - 1] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertDimension(matrix, n, m) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  } // n < m\n\n\n  if (n === m) {\n    return matrix;\n  }\n\n  var newMatrix = createIdentityMatrix(m);\n  var length = Math.min(n, m);\n\n  for (var i = 0; i < length - 1; ++i) {\n    for (var j = 0; j < length - 1; ++j) {\n      newMatrix[i * m + j] = matrix[i * n + j];\n    }\n\n    newMatrix[(i + 1) * m - 1] = matrix[(i + 1) * n - 1];\n    newMatrix[(m - 1) * m + i] = matrix[(n - 1) * n + i];\n  }\n\n  newMatrix[m * m - 1] = matrix[n * n - 1];\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiplies(n) {\n  var matrixes = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    matrixes[_i - 1] = arguments[_i];\n  }\n\n  var m = createIdentityMatrix(n);\n  matrixes.forEach(function (matrix) {\n    m = multiply(m, matrix, n);\n  });\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiply(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = []; // 1 y: n\n  // 1 x: m\n  // 2 x: m\n  // 2 y: k\n  // n * m X m * k\n\n  var m = matrix.length / n;\n  var k = matrix2.length / m;\n\n  if (!m) {\n    return matrix2;\n  } else if (!k) {\n    return matrix;\n  }\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < k; ++j) {\n      newMatrix[j * n + i] = 0;\n\n      for (var l = 0; l < m; ++l) {\n        // m1 x: m(l), y: n(i)\n        // m2 x: k(j):  y: m(l)\n        // nw x: n(i), y: k(j)\n        newMatrix[j * n + i] += matrix[l * n + i] * matrix2[j * m + l];\n      }\n    }\n  } // n * k\n\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction plus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] + pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction minus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] - pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertCSStoMatrix(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 6;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], 0, a[2], a[3], 0, a[4], a[5], 1];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertMatrixtoCSS(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 9;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], a[3], a[4], a[6], a[7]];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction calculate(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = matrix2.length;\n  }\n\n  var result = multiply(matrix, matrix2, n);\n  var k = result[n - 1];\n  return result.map(function (v) {\n    return v / k;\n  });\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateX3d(matrix, rad) {\n  return multiply(matrix, [1, 0, 0, 0, 0, Math.cos(rad), Math.sin(rad), 0, 0, -Math.sin(rad), Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateY3d(matrix, rad) {\n  return multiply(matrix, [Math.cos(rad), 0, -Math.sin(rad), 0, 0, 1, 0, 0, Math.sin(rad), 0, Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateZ3d(matrix, rad) {\n  return multiply(matrix, createRotateMatrix(rad, 4));\n}\n/**\n * @memberof Matrix\n */\n\nfunction scale3d(matrix, _a) {\n  var _b = _a[0],\n      sx = _b === void 0 ? 1 : _b,\n      _c = _a[1],\n      sy = _c === void 0 ? 1 : _c,\n      _d = _a[2],\n      sz = _d === void 0 ? 1 : _d;\n  return multiply(matrix, [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotate(pos, rad) {\n  return calculate(createRotateMatrix(rad, 3), convertPositionMatrix(pos, 3));\n}\n/**\n * @memberof Matrix\n */\n\nfunction translate3d(matrix, _a) {\n  var _b = _a[0],\n      tx = _b === void 0 ? 0 : _b,\n      _c = _a[1],\n      ty = _c === void 0 ? 0 : _c,\n      _d = _a[2],\n      tz = _d === void 0 ? 0 : _d;\n  return multiply(matrix, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction matrix3d(matrix1, matrix2) {\n  return multiply(matrix1, matrix2, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction createRotateMatrix(rad, n) {\n  var cos = Math.cos(rad);\n  var sin = Math.sin(rad);\n  var m = createIdentityMatrix(n); // cos -sin\n  // sin cos\n\n  m[0] = cos;\n  m[1] = sin;\n  m[n] = -sin;\n  m[n + 1] = cos;\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createIdentityMatrix(n) {\n  var length = n * n;\n  var matrix = [];\n\n  for (var i = 0; i < length; ++i) {\n    matrix[i] = i % (n + 1) ? 0 : 1;\n  }\n\n  return matrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createScaleMatrix(scale, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(scale.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[(n + 1) * i] = scale[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createOriginMatrix(origin, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(origin.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[n * (n - 1) + i] = origin[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createWarpMatrix(pos0, pos1, pos2, pos3, nextPos0, nextPos1, nextPos2, nextPos3) {\n  var x0 = pos0[0],\n      y0 = pos0[1];\n  var x1 = pos1[0],\n      y1 = pos1[1];\n  var x2 = pos2[0],\n      y2 = pos2[1];\n  var x3 = pos3[0],\n      y3 = pos3[1];\n  var u0 = nextPos0[0],\n      v0 = nextPos0[1];\n  var u1 = nextPos1[0],\n      v1 = nextPos1[1];\n  var u2 = nextPos2[0],\n      v2 = nextPos2[1];\n  var u3 = nextPos3[0],\n      v3 = nextPos3[1];\n  var matrix = [x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, -u0 * x0, -v0 * x0, -u1 * x1, -v1 * x1, -u2 * x2, -v2 * x2, -u3 * x3, -v3 * x3, -u0 * y0, -v0 * y0, -u1 * y1, -v1 * y1, -u2 * y2, -v2 * y2, -u3 * y3, -v3 * y3];\n  var inverseMatrix = invert(matrix, 8);\n\n  if (!inverseMatrix.length) {\n    return [];\n  }\n\n  var h = multiply(inverseMatrix, [u0, v0, u1, v1, u2, v2, u3, v3], 8);\n  h[8] = 1;\n  return convertDimension(transpose(h), 3, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction getCenter(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n\nexport { calculate, convertCSStoMatrix, convertDimension, convertMatrixtoCSS, convertPositionMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, createScaleMatrix, createWarpMatrix, fromTranslation, getCenter, getOrigin, ignoreDimension, invert, matrix3d, minus, multiplies, multiply, plus, rotate, rotateX3d, rotateY3d, rotateZ3d, scale3d, translate3d, transpose };\n//# sourceMappingURL=matrix.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-to-mat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-to-mat.git\nversion: 1.1.0\n*/\nimport { isArray, splitSpace, splitBracket, isObject, splitComma, convertUnitSize, splitUnit } from '@daybrush/utils';\nimport { calculate, matrix3d, invert, translate3d, scale3d, rotateZ3d, rotateX3d, rotateY3d } from '@scena/matrix';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createMatrix() {\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1,\n    ];\n}\nfunction parseMat(transform, size) {\n    if (size === void 0) { size = 0; }\n    return toMat(parse(transform, size));\n}\nfunction getElementMatrix(el) {\n    return parseMat(getComputedStyle(el).transform);\n}\nfunction calculateMatrixDist(matrix, pos) {\n    var res = calculate(matrix, [pos[0], pos[1] || 0, pos[2] || 0, 1], 4);\n    var w = res[3] || 1;\n    return [\n        res[0] / w,\n        res[1] / w,\n        res[2] / w,\n    ];\n}\nfunction getDistElementMatrix(el, container) {\n    if (container === void 0) { container = document.body; }\n    var target = el;\n    var matrix = createMatrix();\n    while (target) {\n        var transform = getComputedStyle(target).transform;\n        matrix = matrix3d(parseMat(transform), matrix);\n        if (target === container) {\n            break;\n        }\n        target = target.parentElement;\n    }\n    matrix = invert(matrix, 4);\n    matrix[12] = 0;\n    matrix[13] = 0;\n    matrix[14] = 0;\n    return matrix;\n}\nfunction toMat(matrixInfos) {\n    var target = createMatrix();\n    matrixInfos.forEach(function (info) {\n        var matrixFunction = info.matrixFunction, functionValue = info.functionValue;\n        if (!matrixFunction) {\n            return;\n        }\n        target = matrixFunction(target, functionValue);\n    });\n    return target;\n}\nfunction parse(transform, size) {\n    if (size === void 0) { size = 0; }\n    var transforms = isArray(transform) ? transform : splitSpace(transform);\n    return transforms.map(function (t) {\n        var _a = splitBracket(t), name = _a.prefix, value = _a.value;\n        var matrixFunction = null;\n        var functionName = name;\n        var functionValue = \"\";\n        if (name === \"translate\" || name === \"translateX\" || name === \"translate3d\") {\n            var nextSize_1 = isObject(size) ? __assign(__assign({}, size), { \"o%\": size[\"%\"] }) : {\n                \"%\": size,\n                \"o%\": size,\n            };\n            var _b = splitComma(value).map(function (v, i) {\n                if (i === 0 && \"x%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"x%\"];\n                }\n                else if (i === 1 && \"y%\" in nextSize_1) {\n                    nextSize_1[\"%\"] = size[\"y%\"];\n                }\n                else {\n                    nextSize_1[\"%\"] = size[\"o%\"];\n                }\n                return convertUnitSize(v, nextSize_1);\n            }), posX = _b[0], _c = _b[1], posY = _c === void 0 ? 0 : _c, _d = _b[2], posZ = _d === void 0 ? 0 : _d;\n            matrixFunction = translate3d;\n            functionValue = [posX, posY, posZ];\n        }\n        else if (name === \"translateY\") {\n            var nextSize = isObject(size) ? __assign({ \"%\": size[\"y%\"] }, size) : {\n                \"%\": size,\n            };\n            var posY = convertUnitSize(value, nextSize);\n            matrixFunction = translate3d;\n            functionValue = [0, posY, 0];\n        }\n        else if (name === \"translateZ\") {\n            var posZ = parseFloat(value);\n            matrixFunction = translate3d;\n            functionValue = [0, 0, posZ];\n        }\n        else if (name === \"scale\" || name === \"scale3d\") {\n            var _e = splitComma(value).map(function (v) { return parseFloat(v); }), sx = _e[0], _f = _e[1], sy = _f === void 0 ? sx : _f, _g = _e[2], sz = _g === void 0 ? 1 : _g;\n            matrixFunction = scale3d;\n            functionValue = [sx, sy, sz];\n        }\n        else if (name === \"scaleX\") {\n            var sx = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [sx, 1, 1];\n        }\n        else if (name === \"scaleY\") {\n            var sy = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, sy, 1];\n        }\n        else if (name === \"scaleZ\") {\n            var sz = parseFloat(value);\n            matrixFunction = scale3d;\n            functionValue = [1, 1, sz];\n        }\n        else if (name === \"rotate\" || name === \"rotateZ\" || name === \"rotateX\" || name === \"rotateY\") {\n            var _h = splitUnit(value), unit = _h.unit, unitValue = _h.value;\n            var rad = unit === \"rad\" ? unitValue : unitValue * Math.PI / 180;\n            if (name === \"rotate\" || name === \"rotateZ\") {\n                functionName = \"rotateZ\";\n                matrixFunction = rotateZ3d;\n            }\n            else if (name === \"rotateX\") {\n                matrixFunction = rotateX3d;\n            }\n            else if (name === \"rotateY\") {\n                matrixFunction = rotateY3d;\n            }\n            functionValue = rad;\n        }\n        else if (name === \"matrix3d\") {\n            matrixFunction = matrix3d;\n            functionValue = splitComma(value).map(function (v) { return parseFloat(v); });\n        }\n        else if (name === \"matrix\") {\n            var m = splitComma(value).map(function (v) { return parseFloat(v); });\n            matrixFunction = matrix3d;\n            functionValue = [\n                m[0], m[1], 0, 0,\n                m[2], m[3], 0, 0,\n                0, 0, 1, 0,\n                m[4], m[5], 0, 1,\n            ];\n        }\n        else {\n            functionName = \"\";\n        }\n        return {\n            name: name,\n            functionName: functionName,\n            value: value,\n            matrixFunction: matrixFunction,\n            functionValue: functionValue,\n        };\n    });\n}\n\nexport { calculateMatrixDist, createMatrix, getDistElementMatrix, getElementMatrix, parse, parseMat, toMat };\n//# sourceMappingURL=css-to-mat.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/children-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-children-differ\nversion: 1.0.1\n*/\nimport ListDiffer, { diff as diff$1 } from '@egjs/list-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar findKeyCallback = typeof Map === \"function\" ? undefined : function () {\n  var childrenCount = 0;\n  return function (el) {\n    return el.__DIFF_KEY__ || (el.__DIFF_KEY__ = ++childrenCount);\n  };\n}();\n\n/**\n * A module that checks diff when child are added, removed, or changed .\n * @ko 자식 노드들에서 자식 노드가 추가되거나 삭제되거나 순서가 변경된 사항을 체크하는 모듈입니다.\n * @memberof eg\n * @extends eg.ListDiffer\n */\n\nvar ChildrenDiffer =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ChildrenDiffer, _super);\n  /**\n   * @param - Initializing Children <ko> 초기 설정할 자식 노드들</ko>\n   */\n\n\n  function ChildrenDiffer(list) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    return _super.call(this, list, findKeyCallback) || this;\n  }\n\n  return ChildrenDiffer;\n}(ListDiffer);\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n/**\n *\n * @memberof eg.ChildrenDiffer\n * @static\n * @function\n * @param - Previous List <ko> 이전 목록 </ko>\n * @param - List to Update <ko> 업데이트 할 목록 </ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList`와 `list`의 다른 점을 반환한다.</ko>\n * @example\n * import { diff } from \"@egjs/children-differ\";\n * // script => eg.ChildrenDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1]);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list) {\n  return diff$1(prevList, list, findKeyCallback);\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ChildrenDiffer;\nexport { diff };\n//# sourceMappingURL=children-differ.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\nimport { isObject, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nexport default EventEmitter;\n//# sourceMappingURL=event-emitter.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/dragscroll\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/dragscroll.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { now, isString, isFunction } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction getDefaultScrollPosition(e) {\n  var container = e.container;\n  if (container === document.body) {\n    return [container.scrollLeft || document.documentElement.scrollLeft, container.scrollTop || document.documentElement.scrollTop];\n  }\n  return [container.scrollLeft, container.scrollTop];\n}\nfunction checkDefaultScrollEvent(container, callback) {\n  container.addEventListener(\"scroll\", callback);\n  return function () {\n    container.removeEventListener(\"scroll\", callback);\n  };\n}\nfunction getContainerElement(container) {\n  if (!container) {\n    return null;\n  } else if (isString(container)) {\n    return document.querySelector(container);\n  }\n  if (isFunction(container)) {\n    return container();\n  } else if (container instanceof Element) {\n    return container;\n  } else if (\"current\" in container) {\n    return container.current;\n  } else if (\"value\" in container) {\n    return container.value;\n  }\n}\n/**\n * @sort 1\n */\nvar DragScroll = /*#__PURE__*/function (_super) {\n  __extends(DragScroll, _super);\n  function DragScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._startRect = null;\n    _this._startPos = [];\n    _this._prevTime = 0;\n    _this._timer = 0;\n    _this._prevScrollPos = [0, 0];\n    _this._isWait = false;\n    _this._flag = false;\n    _this._currentOptions = null;\n    _this._lock = false;\n    _this._unregister = null;\n    _this._onScroll = function () {\n      var options = _this._currentOptions;\n      if (_this._lock || !options) {\n        return;\n      }\n      _this.emit(\"scrollDrag\", {\n        next: function (inputEvent) {\n          _this.checkScroll({\n            container: options.container,\n            inputEvent: inputEvent\n          });\n        }\n      });\n    };\n    return _this;\n  }\n  /**\n   */\n  var __proto = DragScroll.prototype;\n  __proto.dragStart = function (e, options) {\n    var container = getContainerElement(options.container);\n    if (!container) {\n      this._flag = false;\n      return;\n    }\n    var top = 0;\n    var left = 0;\n    var width = 0;\n    var height = 0;\n    if (container === document.body) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    } else {\n      var rect = container.getBoundingClientRect();\n      top = rect.top;\n      left = rect.left;\n      width = rect.width;\n      height = rect.height;\n    }\n    this._flag = true;\n    this._startPos = [e.clientX, e.clientY];\n    this._startRect = {\n      top: top,\n      left: left,\n      width: width,\n      height: height\n    };\n    this._prevScrollPos = this._getScrollPosition([0, 0], options);\n    this._currentOptions = options;\n    this._registerScrollEvent(options);\n  };\n  __proto.drag = function (e, options) {\n    clearTimeout(this._timer);\n    if (!this._flag) {\n      return;\n    }\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var _a = options.threshold,\n      threshold = _a === void 0 ? 0 : _a;\n    var _b = this,\n      _startRect = _b._startRect,\n      _startPos = _b._startPos;\n    this._currentOptions = options;\n    var direction = [0, 0];\n    if (_startRect.top > clientY - threshold) {\n      if (_startPos[1] > _startRect.top || clientY < _startPos[1]) {\n        direction[1] = -1;\n      }\n    } else if (_startRect.top + _startRect.height < clientY + threshold) {\n      if (_startPos[1] < _startRect.top + _startRect.height || clientY > _startPos[1]) {\n        direction[1] = 1;\n      }\n    }\n    if (_startRect.left > clientX - threshold) {\n      if (_startPos[0] > _startRect.left || clientX < _startPos[0]) {\n        direction[0] = -1;\n      }\n    } else if (_startRect.left + _startRect.width < clientX + threshold) {\n      if (_startPos[0] < _startRect.left + _startRect.width || clientX > _startPos[0]) {\n        direction[0] = 1;\n      }\n    }\n    if (!direction[0] && !direction[1]) {\n      return false;\n    }\n    return this._continueDrag(__assign(__assign({}, options), {\n      direction: direction,\n      inputEvent: e,\n      isDrag: true\n    }));\n  };\n  /**\n   */\n  __proto.checkScroll = function (options) {\n    var _this = this;\n    if (this._isWait) {\n      return false;\n    }\n    var _a = options.prevScrollPos,\n      prevScrollPos = _a === void 0 ? this._prevScrollPos : _a,\n      direction = options.direction,\n      _b = options.throttleTime,\n      throttleTime = _b === void 0 ? 0 : _b,\n      inputEvent = options.inputEvent,\n      isDrag = options.isDrag;\n    var nextScrollPos = this._getScrollPosition(direction || [0, 0], options);\n    var offsetX = nextScrollPos[0] - prevScrollPos[0];\n    var offsetY = nextScrollPos[1] - prevScrollPos[1];\n    var nextDirection = direction || [offsetX ? Math.abs(offsetX) / offsetX : 0, offsetY ? Math.abs(offsetY) / offsetY : 0];\n    this._prevScrollPos = nextScrollPos;\n    this._lock = false;\n    if (!offsetX && !offsetY) {\n      return false;\n    }\n    /**\n     * @event DragScroll#move\n     */\n    this.emit(\"move\", {\n      offsetX: nextDirection[0] ? offsetX : 0,\n      offsetY: nextDirection[1] ? offsetY : 0,\n      inputEvent: inputEvent\n    });\n    if (throttleTime && isDrag) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, throttleTime);\n    }\n    return true;\n  };\n  /**\n   *\n   */\n  __proto.dragEnd = function () {\n    this._flag = false;\n    this._lock = false;\n    clearTimeout(this._timer);\n    this._unregisterScrollEvent();\n  };\n  __proto._getScrollPosition = function (direction, options) {\n    var container = options.container,\n      _a = options.getScrollPosition,\n      getScrollPosition = _a === void 0 ? getDefaultScrollPosition : _a;\n    return getScrollPosition({\n      container: getContainerElement(container),\n      direction: direction\n    });\n  };\n  __proto._continueDrag = function (options) {\n    var _this = this;\n    var _a;\n    var container = options.container,\n      direction = options.direction,\n      throttleTime = options.throttleTime,\n      useScroll = options.useScroll,\n      isDrag = options.isDrag,\n      inputEvent = options.inputEvent;\n    if (!this._flag || isDrag && this._isWait) {\n      return;\n    }\n    var nowTime = now();\n    var distTime = Math.max(throttleTime + this._prevTime - nowTime, 0);\n    if (distTime > 0) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, distTime);\n      return false;\n    }\n    this._prevTime = nowTime;\n    var prevScrollPos = this._getScrollPosition(direction, options);\n    this._prevScrollPos = prevScrollPos;\n    if (isDrag) {\n      this._isWait = true;\n    }\n    // unregister native scroll event\n    if (!useScroll) {\n      this._lock = true;\n    }\n    var param = {\n      container: getContainerElement(container),\n      direction: direction,\n      inputEvent: inputEvent\n    };\n    (_a = options.requestScroll) === null || _a === void 0 ? void 0 : _a.call(options, param);\n    /**\n     * @event DragScroll#scroll\n     */\n    this.emit(\"scroll\", param);\n    this._isWait = false;\n    return useScroll || this.checkScroll(__assign(__assign({}, options), {\n      prevScrollPos: prevScrollPos,\n      direction: direction,\n      inputEvent: inputEvent\n    }));\n  };\n  __proto._registerScrollEvent = function (options) {\n    this._unregisterScrollEvent();\n    var checkScrollEvent = options.checkScrollEvent;\n    if (!checkScrollEvent) {\n      return;\n    }\n    var callback = checkScrollEvent === true ? checkDefaultScrollEvent : checkScrollEvent;\n    var container = getContainerElement(options.container);\n    if (checkScrollEvent === true && (container === document.body || container === document.documentElement)) {\n      this._unregister = checkDefaultScrollEvent(window, this._onScroll);\n    } else {\n      this._unregister = callback(container, this._onScroll);\n    }\n  };\n  __proto._unregisterScrollEvent = function () {\n    var _a;\n    (_a = this._unregister) === null || _a === void 0 ? void 0 : _a.call(this);\n    this._unregister = null;\n  };\n  return DragScroll;\n}(EventEmitter);\n\nexport default DragScroll;\n//# sourceMappingURL=dragscroll.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: overlap-area\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/overlap-area.git\nversion: 1.1.0\n*/\nimport { throttle, TINY_NUM, sum, find, getDist, getShapeDirection, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction tinyThrottle(num) {\n  return throttle(num, TINY_NUM);\n}\nfunction isSameConstants(linearConstants1, linearConstants2) {\n  return linearConstants1.every(function (v, i) {\n    return tinyThrottle(v - linearConstants2[i]) === 0;\n  });\n}\nfunction isSamePoint(point1, point2) {\n  return !tinyThrottle(point1[0] - point2[0]) && !tinyThrottle(point1[1] - point2[1]);\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, current) {\n    prev.push.apply(prev, current);\n    return prev;\n  }, []);\n}\n\n/**\n * @namespace OverlapArea\n */\n\n/**\n * Gets the size of a shape (polygon) made of points.\n * @memberof OverlapArea\n */\n\nfunction getAreaSize(points) {\n  if (points.length < 3) {\n    return 0;\n  }\n\n  return Math.abs(sum(points.map(function (point, i) {\n    var nextPoint = points[i + 1] || points[0];\n    return point[0] * nextPoint[1] - nextPoint[0] * point[1];\n  }))) / 2;\n}\n/**\n * Get points that fit the rect,\n * @memberof OverlapArea\n */\n\nfunction fitPoints(points, rect) {\n  var width = rect.width,\n      height = rect.height,\n      left = rect.left,\n      top = rect.top;\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY;\n\n  var ratioX = width / (maxX - minX);\n  var ratioY = height / (maxY - minY);\n  return points.map(function (point) {\n    return [left + (point[0] - minX) * ratioX, top + (point[1] - minY) * ratioY];\n  });\n}\n/**\n * Get the minimum and maximum points of the points.\n * @memberof OverlapArea\n */\n\nfunction getMinMaxs(points) {\n  var xs = points.map(function (point) {\n    return point[0];\n  });\n  var ys = points.map(function (point) {\n    return point[1];\n  });\n  return {\n    minX: Math.min.apply(Math, xs),\n    minY: Math.min.apply(Math, ys),\n    maxX: Math.max.apply(Math, xs),\n    maxY: Math.max.apply(Math, ys)\n  };\n}\n/**\n * Whether the point is in shape\n * @param - point pos\n * @param - shape points\n * @param - whether to check except line\n * @memberof OverlapArea\n */\n\nfunction isInside(pos, points, excludeLine) {\n  var x = pos[0],\n      y = pos[1];\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      maxX = _a.maxX;\n\n  var xLine = [[minX, y], [maxX, y]];\n  var xLinearConstants = getLinearConstants(xLine[0], xLine[1]);\n  var lines = convertLines(points);\n  var intersectionPosInfos = [];\n  lines.forEach(function (line) {\n    var linearConstants = getLinearConstants(line[0], line[1]);\n    var standardPoint = line[0];\n\n    if (isSameConstants(xLinearConstants, linearConstants)) {\n      intersectionPosInfos.push({\n        pos: pos,\n        line: line,\n        type: \"line\"\n      });\n    } else {\n      var xPoints = getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants, linearConstants), [xLine, line]);\n      xPoints.forEach(function (point) {\n        if (line.some(function (linePoint) {\n          return isSamePoint(linePoint, point);\n        })) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"point\"\n          });\n        } else if (tinyThrottle(standardPoint[1] - y) !== 0) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"intersection\"\n          });\n        }\n      });\n    }\n  });\n\n  if (!excludeLine) {\n    // on line\n    if (find(intersectionPosInfos, function (p) {\n      return p[0] === x;\n    })) {\n      return true;\n    }\n  }\n\n  var intersectionCount = 0;\n  var xMap = {};\n  intersectionPosInfos.forEach(function (_a) {\n    var pos = _a.pos,\n        type = _a.type,\n        line = _a.line;\n\n    if (pos[0] > x) {\n      return;\n    }\n\n    if (type === \"intersection\") {\n      ++intersectionCount;\n    } else if (type === \"line\") {\n      return;\n    } else if (type === \"point\") {\n      var point = find(line, function (linePoint) {\n        return linePoint[1] !== y;\n      });\n      var prevValue = xMap[pos[0]];\n      var nextValue = point[1] > y ? 1 : -1;\n\n      if (!prevValue) {\n        xMap[pos[0]] = nextValue;\n      } else if (prevValue !== nextValue) {\n        ++intersectionCount;\n      }\n    }\n  });\n  return intersectionCount % 2 === 1;\n}\n/**\n * Get distance from point to constants. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getDistanceFromPointToConstants(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / (a * a + b * b);\n}\n/**\n * Get the coefficient of the linear function. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getLinearConstants(point1, point2) {\n  var x1 = point1[0],\n      y1 = point1[1];\n  var x2 = point2[0],\n      y2 = point2[1]; // ax + by + c = 0\n  // [a, b, c]\n\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    if (dy) {\n      // -x + 1 = 0\n      a = -1;\n      c = x1;\n    }\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -y1;\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = -a * x1 - y1;\n  }\n\n  return [a, b, c];\n}\n/**\n * Get intersection points with linear functions.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPointsByConstants(linearConstants1, linearConstants2) {\n  var a1 = linearConstants1[0],\n      b1 = linearConstants1[1],\n      c1 = linearConstants1[2];\n  var a2 = linearConstants2[0],\n      b2 = linearConstants2[1],\n      c2 = linearConstants2[2];\n  var isZeroA = a1 === 0 && a2 === 0;\n  var isZeroB = b1 === 0 && b2 === 0;\n  var results = [];\n\n  if (isZeroA && isZeroB) {\n    return [];\n  } else if (isZeroA) {\n    // b1 * y + c1 = 0\n    // b2 * y + c2 = 0\n    var y1 = -c1 / b1;\n    var y2 = -c2 / b2;\n\n    if (y1 !== y2) {\n      return [];\n    } else {\n      return [[-Infinity, y1], [Infinity, y1]];\n    }\n  } else if (isZeroB) {\n    // a1 * x + c1 = 0\n    // a2 * x + c2 = 0\n    var x1 = -c1 / a1;\n    var x2 = -c2 / a2;\n\n    if (x1 !== x2) {\n      return [];\n    } else {\n      return [[x1, -Infinity], [x1, Infinity]];\n    }\n  } else if (a1 === 0) {\n    // b1 * y + c1 = 0\n    // y = - c1 / b1;\n    // a2 * x + b2 * y + c2 = 0\n    var y = -c1 / b1;\n    var x = -(b2 * y + c2) / a2;\n    results = [[x, y]];\n  } else if (a2 === 0) {\n    // b2 * y + c2 = 0\n    // y = - c2 / b2;\n    // a1 * x + b1 * y + c1 = 0\n    var y = -c2 / b2;\n    var x = -(b1 * y + c1) / a1;\n    results = [[x, y]];\n  } else if (b1 === 0) {\n    // a1 * x + c1 = 0\n    // x = - c1 / a1;\n    // a2 * x + b2 * y + c2 = 0\n    var x = -c1 / a1;\n    var y = -(a2 * x + c2) / b2;\n    results = [[x, y]];\n  } else if (b2 === 0) {\n    // a2 * x + c2 = 0\n    // x = - c2 / a2;\n    // a1 * x + b1 * y + c1 = 0\n    var x = -c2 / a2;\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  } else {\n    // a1 * x + b1 * y + c1 = 0\n    // a2 * x + b2 * y + c2 = 0\n    // b2 * a1 * x + b2 * b1 * y + b2 * c1 = 0\n    // b1 * a2 * x + b1 * b2 * y + b1 * c2 = 0\n    // (b2 * a1 - b1 * a2)  * x = (b1 * c2 - b2 * c1)\n    var x = (b1 * c2 - b2 * c1) / (b2 * a1 - b1 * a2);\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  }\n\n  return results.map(function (result) {\n    return [result[0], result[1]];\n  });\n}\n/**\n * Get intersection points to the two lines.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPoints(line1, line2, isLimit) {\n  var points = getIntersectionPointsByConstants(getLinearConstants(line1[0], line1[1]), getLinearConstants(line2[0], line2[1]));\n\n  if (isLimit) {\n    return getPointsOnLines(points, [line1, line2]);\n  }\n\n  return points;\n}\nfunction isPointOnLine(pos, line) {\n  var linearConstants = getLinearConstants(line[0], line[1]);\n  return tinyThrottle(getDistanceFromPointToConstants(linearConstants, pos)) === 0;\n}\n/**\n * Get the points on the lines (between two points).\n * @memberof OverlapArea\n */\n\nfunction getPointsOnLines(points, lines) {\n  var minMaxs = lines.map(function (line) {\n    return [0, 1].map(function (order) {\n      return [Math.min(line[0][order], line[1][order]), Math.max(line[0][order], line[1][order])];\n    });\n  });\n  var results = [];\n\n  if (points.length === 2) {\n    var _a = points[0],\n        x = _a[0],\n        y = _a[1];\n\n    if (!tinyThrottle(x - points[1][0])) {\n      /// Math.max(minY1, minY2)\n      var top = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var bottom = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][1];\n      }));\n\n      if (tinyThrottle(top - bottom) > 0) {\n        return [];\n      }\n\n      results = [[x, top], [x, bottom]];\n    } else if (!tinyThrottle(y - points[1][1])) {\n      /// Math.max(minY1, minY2)\n      var left = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var right = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][1];\n      }));\n\n      if (tinyThrottle(left - right) > 0) {\n        return [];\n      }\n\n      results = [[left, y], [right, y]];\n    }\n  }\n\n  if (!results.length) {\n    results = points.filter(function (point) {\n      var pointX = point[0],\n          pointY = point[1];\n      return minMaxs.every(function (minMax) {\n        return 0 <= tinyThrottle(pointX - minMax[0][0]) && 0 <= tinyThrottle(minMax[0][1] - pointX) && 0 <= tinyThrottle(pointY - minMax[1][0]) && 0 <= tinyThrottle(minMax[1][1] - pointY);\n      });\n    });\n  }\n\n  return results.map(function (result) {\n    return [tinyThrottle(result[0]), tinyThrottle(result[1])];\n  });\n}\n/**\n* Convert two points into lines.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction convertLines(points) {\n  return __spreadArrays(points.slice(1), [points[0]]).map(function (point, i) {\n    return [points[i], point];\n  });\n}\n\nfunction getOverlapPointInfos(points1, points2) {\n  var targetPoints1 = points1.slice();\n  var targetPoints2 = points2.slice();\n\n  if (getShapeDirection(targetPoints1) === -1) {\n    targetPoints1.reverse();\n  }\n\n  if (getShapeDirection(targetPoints2) === -1) {\n    targetPoints2.reverse();\n  }\n\n  var lines1 = convertLines(targetPoints1);\n  var lines2 = convertLines(targetPoints2);\n  var linearConstantsList1 = lines1.map(function (line1) {\n    return getLinearConstants(line1[0], line1[1]);\n  });\n  var linearConstantsList2 = lines2.map(function (line2) {\n    return getLinearConstants(line2[0], line2[1]);\n  });\n  var overlapInfos = [];\n  linearConstantsList1.forEach(function (linearConstants1, i) {\n    var line1 = lines1[i];\n    var linePointInfos = [];\n    linearConstantsList2.forEach(function (linearConstants2, j) {\n      var intersectionPoints = getIntersectionPointsByConstants(linearConstants1, linearConstants2);\n      var points = getPointsOnLines(intersectionPoints, [line1, lines2[j]]);\n      linePointInfos.push.apply(linePointInfos, points.map(function (pos) {\n        return {\n          index1: i,\n          index2: j,\n          pos: pos,\n          type: \"intersection\"\n        };\n      }));\n    });\n    linePointInfos.sort(function (a, b) {\n      return getDist(line1[0], a.pos) - getDist(line1[0], b.pos);\n    });\n    overlapInfos.push.apply(overlapInfos, linePointInfos);\n\n    if (isInside(line1[1], targetPoints2)) {\n      overlapInfos.push({\n        index1: i,\n        index2: -1,\n        pos: line1[1],\n        type: \"inside\"\n      });\n    }\n  });\n  lines2.forEach(function (line2, i) {\n    if (!isInside(line2[1], targetPoints1)) {\n      return;\n    }\n\n    var isNext = false;\n    var index = findIndex(overlapInfos, function (_a) {\n      var index2 = _a.index2;\n\n      if (index2 === i) {\n        isNext = true;\n        return false;\n      }\n\n      if (isNext) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (index === -1) {\n      isNext = false;\n      index = findIndex(overlapInfos, function (_a) {\n        var index1 = _a.index1,\n            index2 = _a.index2;\n\n        if (index1 === -1 && index2 + 1 === i) {\n          isNext = true;\n          return false;\n        }\n\n        if (isNext) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    if (index === -1) {\n      overlapInfos.push({\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    } else {\n      overlapInfos.splice(index, 0, {\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    }\n  });\n  var pointMap = {};\n  return overlapInfos.filter(function (_a) {\n    var pos = _a.pos;\n    var key = pos[0] + \"x\" + pos[1];\n\n    if (pointMap[key]) {\n      return false;\n    }\n\n    pointMap[key] = true;\n    return true;\n  });\n}\n/**\n* Get the points of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapPoints(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  return infos.map(function (_a) {\n    var pos = _a.pos;\n    return pos;\n  });\n}\n\nfunction isConnectedLine(line) {\n  var _a = line[0],\n      prevIndex1 = _a.index1,\n      prevIndex2 = _a.index2,\n      _b = line[1],\n      nextIndex1 = _b.index1,\n      nextIndex2 = _b.index2;\n\n  if (prevIndex1 !== -1) {\n    // same line\n    if (prevIndex1 === nextIndex1) {\n      return true;\n    }\n\n    if (prevIndex1 + 1 === nextIndex1) {\n      return true;\n    }\n  }\n\n  if (prevIndex2 !== -1) {\n    // same line\n    if (prevIndex2 === nextIndex2) {\n      return true;\n    }\n\n    if (prevIndex2 + 1 === nextIndex2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n* Get the areas of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapAreas(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  var areas = [];\n  var area;\n  getOverlapPointInfos(points1, points2).forEach(function (info, i, arr) {\n    if (i === 0 || !isConnectedLine([arr[i - 1], info])) {\n      area = [info];\n      areas.push(area);\n    } else {\n      area.push(info);\n    }\n  });\n  return areas.map(function (area) {\n    return area.map(function (_a) {\n      var pos = _a.pos;\n      return pos;\n    });\n  });\n}\n\nfunction findReversedAreas(points1, points2, index, areas) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (areas === void 0) {\n    areas = [];\n  }\n\n  var isFirst = areas.length === 0;\n  var length = points1.length;\n  var nextIndex = points1[index] ? index : 0;\n\n  var nextPoints1 = __spreadArrays(points1.slice(nextIndex), points1.slice(0, nextIndex));\n\n  var _loop_1 = function (i) {\n    var point1 = nextPoints1[i];\n\n    if (find(points2, function (point2) {\n      return point2[0] === point1[0] && point2[1] === point1[1];\n    })) {\n      return \"continue\";\n    }\n\n    if (areas.some(function (nextArea) {\n      return find(nextArea, function (areaPoint) {\n        return areaPoint[0] === point1[0] && areaPoint[1] === point1[1];\n      });\n    })) {\n      if (isFirst) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n    }\n\n    var nextArea = void 0;\n\n    if (isFirst) {\n      nextArea = [];\n      areas.push(nextArea);\n    } else {\n      nextArea = areas[areas.length - 1];\n    }\n\n    nextArea.push(point1);\n    var line = [point1, points1[index + 1] || points1[0]];\n    var nextPoint2 = points2.filter(function (point2) {\n      return isPointOnLine(point2, line);\n    }).sort(function (a, b) {\n      return getDist(point1, a) - getDist(point1, b);\n    })[0];\n\n    if (!nextPoint2) {\n      findReversedAreas(nextPoints1, points2, i + 1, areas);\n      return \"break\";\n    } else {\n      var point2Index = points2.indexOf(nextPoint2);\n      findReversedAreas(points2, points1, point2Index, areas);\n\n      if (!isFirst) {\n        return \"break\";\n      }\n    }\n  };\n\n  for (var i = 0; i < length; ++i) {\n    var state_1 = _loop_1(i);\n\n    if (state_1 === \"break\") break;\n  }\n\n  return areas;\n}\n\nfunction findConnectedAreas(points1, points2) {\n  return findReversedAreas(points1, __spreadArrays(points2).reverse());\n}\n/**\n* Get non-overlapping areas of two shapes based on points1.\n* @memberof OverlapArea\n*/\n\nfunction getUnoverlapAreas(points1, points2) {\n  if (!points2.length) {\n    return [__spreadArrays(points1)];\n  }\n\n  var overlapAreas = getOverlapAreas(points1, points2);\n  var unoverlapAreas = [points1];\n  overlapAreas.forEach(function (overlapArea) {\n    var nextOverlapArea = __spreadArrays(overlapArea).reverse();\n\n    unoverlapAreas = flat(unoverlapAreas.map(function (area) {\n      var connectedAreas = findReversedAreas(area, nextOverlapArea);\n      var firstConnectedArea = connectedAreas[0];\n\n      if (connectedAreas.length === 1 && nextOverlapArea.every(function (point) {\n        return firstConnectedArea.indexOf(point) === -1;\n      })) {\n        var lastPoint_1 = firstConnectedArea[firstConnectedArea.length - 1];\n\n        var firstPoint = __spreadArrays(nextOverlapArea).sort(function (a, b) {\n          return getDist(lastPoint_1, a) - getDist(lastPoint_1, b);\n        })[0];\n\n        var firstIndex = nextOverlapArea.indexOf(firstPoint);\n        firstConnectedArea.push.apply(firstConnectedArea, __spreadArrays(nextOverlapArea.slice(firstIndex), nextOverlapArea.slice(0, firstIndex), [nextOverlapArea[firstIndex], lastPoint_1]));\n      }\n\n      return connectedAreas;\n    }));\n  });\n  return unoverlapAreas;\n}\n/**\n* Gets the size of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction getOverlapSize(points1, points2) {\n  var points = getOverlapPoints(points1, points2);\n  return getAreaSize(points);\n}\n\nexport { convertLines, findConnectedAreas, fitPoints, getAreaSize, getDistanceFromPointToConstants, getIntersectionPoints, getIntersectionPointsByConstants, getLinearConstants, getMinMaxs, getOverlapAreas, getOverlapPoints, getOverlapSize, getPointsOnLines, getUnoverlapAreas, isInside, isPointOnLine };\n//# sourceMappingURL=overlap-area.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.19.4\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now, isWindow, getWindow } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction getRad(pos1, pos2) {\n    var distX = pos2[0] - pos1[0];\n    var distY = pos2[1] - pos1[1];\n    var rad = Math.atan2(distY, distX);\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n    return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n    if (!e) {\n        return [];\n    }\n    if (e.touches) {\n        return getClients(e.touches);\n    }\n    else {\n        return [getClient(e)];\n    }\n}\nfunction isMouseEvent(e) {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n    var length = startClients.length;\n    var _a = getAverageClient(clients, length), clientX = _a.clientX, clientY = _a.clientY, originalClientX = _a.originalClientX, originalClientY = _a.originalClientY;\n    var _b = getAverageClient(prevClients, length), prevX = _b.clientX, prevY = _b.clientY;\n    var _c = getAverageClient(startClients, length), startX = _c.clientX, startY = _c.clientY;\n    var deltaX = clientX - prevX;\n    var deltaY = clientY - prevY;\n    var distX = clientX - startX;\n    var distY = clientY - startY;\n    return {\n        clientX: originalClientX,\n        clientY: originalClientY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        distX: distX,\n        distY: distY,\n    };\n}\nfunction getDist(clients) {\n    return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n    var length = Math.min(touches.length, 2);\n    var clients = [];\n    for (var i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nfunction getClient(e) {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nfunction getAverageClient(clients, length) {\n    if (length === void 0) { length = clients.length; }\n    var sumClient = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    var minLength = Math.min(clients.length, length);\n    for (var i = 0; i < minLength; ++i) {\n        var client = clients[i];\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\n\nvar ClientStore = /*#__PURE__*/ (function () {\n    function ClientStore(clients) {\n        this.prevClients = [];\n        this.startClients = [];\n        this.movement = 0;\n        this.length = 0;\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    ClientStore.prototype.getAngle = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients);\n    };\n    ClientStore.prototype.getRotation = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    };\n    ClientStore.prototype.getPosition = function (clients, isAdd) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n        var deltaX = position.deltaX, deltaY = position.deltaY;\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n        return position;\n    };\n    ClientStore.prototype.getPositions = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var prevClients = this.prevClients;\n        var startClients = this.startClients;\n        var minLength = Math.min(this.length, prevClients.length);\n        var positions = [];\n        for (var i = 0; i < minLength; ++i) {\n            positions[i] = getPosition([clients[i]], [prevClients[i]], [startClients[i]]);\n        }\n        return positions;\n    };\n    ClientStore.prototype.getMovement = function (clients) {\n        var movement = this.movement;\n        if (!clients) {\n            return movement;\n        }\n        var currentClient = getAverageClient(clients, this.length);\n        var prevClient = getAverageClient(this.prevClients, this.length);\n        var deltaX = currentClient.clientX - prevClient.clientX;\n        var deltaY = currentClient.clientY - prevClient.clientY;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    };\n    ClientStore.prototype.getDistance = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients);\n    };\n    ClientStore.prototype.getScale = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients) / getDist(this.startClients);\n    };\n    ClientStore.prototype.move = function (deltaX, deltaY) {\n        this.startClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    };\n    return ClientStore;\n}());\n\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/ (function (_super) {\n    __extends(Gesto, _super);\n    /**\n     *\n     */\n    function Gesto(targets, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {};\n        _this.flag = false;\n        _this.pinchFlag = false;\n        _this.data = {};\n        _this.isDrag = false;\n        _this.isPinch = false;\n        _this.clientStores = [];\n        _this.targets = [];\n        _this.prevTime = 0;\n        _this.doubleFlag = false;\n        _this._useMouse = false;\n        _this._useTouch = false;\n        _this._useDrag = false;\n        _this._dragFlag = false;\n        _this._isTrusted = false;\n        _this._isMouseEvent = false;\n        _this._isSecondaryButton = false;\n        _this._preventMouseEvent = false;\n        _this._prevInputEvent = null;\n        _this._isDragAPI = false;\n        _this._isIdle = true;\n        _this._preventMouseEventId = 0;\n        _this._window = window;\n        _this.onDragStart = function (e, isTrusted) {\n            if (isTrusted === void 0) { isTrusted = true; }\n            if (!_this.flag && e.cancelable === false) {\n                return;\n            }\n            var isDragAPI = e.type.indexOf(\"drag\") >= -1;\n            if (_this.flag && isDragAPI) {\n                return;\n            }\n            _this._isDragAPI = true;\n            var _a = _this.options, container = _a.container, pinchOutside = _a.pinchOutside, preventWheelClick = _a.preventWheelClick, preventRightClick = _a.preventRightClick, preventDefault = _a.preventDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var useTouch = _this._useTouch;\n            var isDragStart = !_this.flag;\n            _this._isSecondaryButton = e.which === 3 || e.button === 2;\n            if ((preventWheelClick && (e.which === 2 || e.button === 1))\n                || (preventRightClick && (e.which === 3 || e.button === 2))) {\n                _this.stop();\n                return false;\n            }\n            if (isDragStart) {\n                var activeElement = _this._window.document.activeElement;\n                var target = e.target;\n                if (target) {\n                    var tagName = target.tagName.toLowerCase();\n                    var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                    var hasContentEditable = target.isContentEditable;\n                    if (hasInput || hasContentEditable) {\n                        if (checkInput || (!dragFocusedInput && activeElement === target)) {\n                            // force false or already focused.\n                            return false;\n                        }\n                        // no focus\n                        if (activeElement && (activeElement === target\n                            || (hasContentEditable && activeElement.isContentEditable && activeElement.contains(target)))) {\n                            if (dragFocusedInput) {\n                                target.blur();\n                            }\n                            else {\n                                return false;\n                            }\n                        }\n                    }\n                    else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                        var activeTagName = activeElement.tagName.toLowerCase();\n                        if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                            activeElement.blur();\n                        }\n                    }\n                    if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                        addEvent(_this._window, \"click\", _this._onClick, true);\n                    }\n                }\n                _this.clientStores = [new ClientStore(getEventClients(e))];\n                _this._isIdle = false;\n                _this.flag = true;\n                _this.isDrag = false;\n                _this._isTrusted = isTrusted;\n                _this._dragFlag = true;\n                _this._prevInputEvent = e;\n                _this.data = {};\n                _this.doubleFlag = now() - _this.prevTime < 200;\n                _this._isMouseEvent = isMouseEvent(e);\n                if (!_this._isMouseEvent && _this._preventMouseEvent) {\n                    _this._allowMouseEvent();\n                }\n                var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({ data: _this.data, datas: _this.data, inputEvent: e, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, isTrusted: isTrusted, isDouble: _this.doubleFlag }, _this.getCurrentStore().getPosition()), { preventDefault: function () {\n                        e.preventDefault();\n                    }, preventDrag: function () {\n                        _this._dragFlag = false;\n                    } }));\n                if (result === false) {\n                    _this.stop();\n                }\n                if (_this._isMouseEvent && _this.flag && preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            if (!_this.flag) {\n                return false;\n            }\n            var timer = 0;\n            if (isDragStart) {\n                _this._attchDragEvent();\n                // wait pinch\n                if (useTouch && pinchOutside) {\n                    timer = setTimeout(function () {\n                        addEvent(container, \"touchstart\", _this.onDragStart, {\n                            passive: false\n                        });\n                    });\n                }\n            }\n            else if (useTouch && pinchOutside) {\n                // pinch is occured\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.flag && isMultiTouch(e)) {\n                clearTimeout(timer);\n                if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                    return;\n                }\n                if (!_this.pinchFlag) {\n                    _this.onPinchStart(e);\n                }\n            }\n        };\n        _this.onDrag = function (e, isScroll) {\n            if (!_this.flag) {\n                return;\n            }\n            var preventDefault = _this.options.preventDefault;\n            if (!_this._isMouseEvent && preventDefault) {\n                e.preventDefault();\n            }\n            _this._prevInputEvent = e;\n            var clients = getEventClients(e);\n            var result = _this.moveClients(clients, e, false);\n            if (_this._dragFlag) {\n                if (_this.pinchFlag || result.deltaX || result.deltaY) {\n                    var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), { isScroll: !!isScroll, inputEvent: e }));\n                    if (dragResult === false) {\n                        _this.stop();\n                        return;\n                    }\n                }\n                if (_this.pinchFlag) {\n                    _this.onPinch(e, clients);\n                }\n            }\n            _this.getCurrentStore().getPosition(clients, true);\n        };\n        _this.onDragEnd = function (e) {\n            if (!_this.flag) {\n                return;\n            }\n            var _a = _this.options, pinchOutside = _a.pinchOutside, container = _a.container, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isDrag = _this.isDrag;\n            if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n                requestAnimationFrame(function () {\n                    _this._allowClickEvent();\n                });\n            }\n            if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n                _this._allowClickEvent();\n            }\n            if (_this._useTouch && pinchOutside) {\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.pinchFlag) {\n                _this.onPinchEnd(e);\n            }\n            var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n            var clientsLength = clients.length;\n            if (clientsLength === 0 || !_this.options.keepDragging) {\n                _this.flag = false;\n            }\n            else {\n                _this._addStore(new ClientStore(clients));\n            }\n            var position = _this._getPosition();\n            var currentTime = now();\n            var isDouble = !isDrag && _this.doubleFlag;\n            _this._prevInputEvent = null;\n            _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n            if (!_this.flag) {\n                _this._dettachDragEvent();\n                _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({ data: _this.data, datas: _this.data, isDouble: isDouble, isDrag: isDrag, isClick: !isDrag, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, inputEvent: e, isTrusted: _this._isTrusted }, position));\n                _this.clientStores = [];\n                if (!_this._isMouseEvent) {\n                    _this._preventMouseEvent = true;\n                    // Prevent the problem of touch event and mouse event occurring simultaneously\n                    clearTimeout(_this._preventMouseEventId);\n                    _this._preventMouseEventId = setTimeout(function () {\n                        _this._preventMouseEvent = false;\n                    }, 200);\n                }\n                _this._isIdle = true;\n            }\n        };\n        _this.onBlur = function () {\n            _this.onDragEnd();\n        };\n        _this._allowClickEvent = function () {\n            removeEvent(_this._window, \"click\", _this._onClick, true);\n        };\n        _this._onClick = function (e) {\n            _this._allowClickEvent();\n            _this._allowMouseEvent();\n            var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n            if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n                return;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        _this._onContextMenu = function (e) {\n            var options = _this.options;\n            if (!options.preventRightClick) {\n                e.preventDefault();\n            }\n            else {\n                _this.onDragEnd(e);\n            }\n        };\n        _this._passCallback = function () { };\n        var elements = [].concat(targets);\n        var firstTarget = elements[0];\n        _this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n        _this.options = __assign({ checkInput: false, container: firstTarget && !(\"document\" in firstTarget) ? getWindow(firstTarget) : firstTarget, preventRightClick: true, preventWheelClick: true, preventClickEventOnDragStart: false, preventClickEventOnDrag: false, preventClickEventByCondition: null, preventDefault: true, checkWindowBlur: false, keepDragging: false, pinchThreshold: 0, events: [\"touch\", \"mouse\"] }, options);\n        var _a = _this.options, container = _a.container, events = _a.events, checkWindowBlur = _a.checkWindowBlur;\n        _this._useDrag = events.indexOf(\"drag\") > -1;\n        _this._useTouch = events.indexOf(\"touch\") > -1;\n        _this._useMouse = events.indexOf(\"mouse\") > -1;\n        _this.targets = elements;\n        if (_this._useDrag) {\n            elements.forEach(function (el) {\n                addEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (_this._useMouse) {\n            elements.forEach(function (el) {\n                addEvent(el, \"mousedown\", _this.onDragStart);\n                addEvent(el, \"mousemove\", _this._passCallback);\n            });\n            addEvent(container, \"contextmenu\", _this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(getWindow(), \"blur\", _this.onBlur);\n        }\n        if (_this._useTouch) {\n            var passive_1 = {\n                passive: false,\n            };\n            elements.forEach(function (el) {\n                addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n                addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n            });\n        }\n        return _this;\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    Gesto.prototype.stop = function () {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._isIdle = true;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n        this._isDragAPI = false;\n    };\n    /**\n     * The total moved distance\n     */\n    Gesto.prototype.getMovement = function (clients) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n            return prev + cur.movement;\n        }, 0);\n    };\n    /**\n     * Whether to drag\n     */\n    Gesto.prototype.isDragging = function () {\n        return this.isDrag;\n    };\n    /**\n     * Whether the operation of gesto is finished and is in idle state\n     */\n    Gesto.prototype.isIdle = function () {\n        return this._isIdle;\n    };\n    /**\n     * Whether to start drag\n     */\n    Gesto.prototype.isFlag = function () {\n        return this.flag;\n    };\n    /**\n     * Whether to start pinch\n     */\n    Gesto.prototype.isPinchFlag = function () {\n        return this.pinchFlag;\n    };\n    /**\n     * Whether to start double click\n     */\n    Gesto.prototype.isDoubleFlag = function () {\n        return this.doubleFlag;\n    };\n    /**\n     * Whether to pinch\n     */\n    Gesto.prototype.isPinching = function () {\n        return this.isPinch;\n    };\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n        if (isCallDrag === void 0) { isCallDrag = true; }\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    };\n    /**\n     * Create a virtual drag event.\n     */\n    Gesto.prototype.move = function (_a, inputEvent) {\n        var deltaX = _a[0], deltaY = _a[1];\n        var store = this.getCurrentStore();\n        var nextClients = store.prevClients;\n        return this.moveClients(nextClients.map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY;\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    };\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    Gesto.prototype.triggerDragStart = function (e) {\n        this.onDragStart(e, false);\n    };\n    /**\n     * Set the event data while dragging.\n     */\n    Gesto.prototype.setEventData = function (data) {\n        var currentData = this.data;\n        for (var name_1 in data) {\n            currentData[name_1] = data[name_1];\n        }\n        return this;\n    };\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    Gesto.prototype.setEventDatas = function (data) {\n        return this.setEventData(data);\n    };\n    /**\n     * Get the current event state while dragging.\n     */\n    Gesto.prototype.getCurrentEvent = function (inputEvent) {\n        if (inputEvent === void 0) { inputEvent = this._prevInputEvent; }\n        return __assign(__assign({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, inputEvent: inputEvent });\n    };\n    /**\n     * Get & Set the event data while dragging.\n     */\n    Gesto.prototype.getEventData = function () {\n        return this.data;\n    };\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    Gesto.prototype.getEventDatas = function () {\n        return this.data;\n    };\n    /**\n     * Unset Gesto\n     */\n    Gesto.prototype.unset = function () {\n        var _this = this;\n        var targets = this.targets;\n        var container = this.options.container;\n        this.off();\n        removeEvent(this._window, \"blur\", this.onBlur);\n        if (this._useDrag) {\n            targets.forEach(function (el) {\n                removeEvent(el, \"dragstart\", _this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"mousedown\", _this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this._useTouch) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"touchstart\", _this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    Gesto.prototype.onPinchStart = function (e) {\n        var _this = this;\n        var pinchThreshold = this.options.pinchThreshold;\n        if (this.isDrag && this.getMovement() > pinchThreshold) {\n            return;\n        }\n        var store = new ClientStore(getEventClients(e));\n        this.pinchFlag = true;\n        this._addStore(store);\n        var result = this.emit(\"pinchStart\", __assign(__assign({ data: this.data, datas: this.data, angle: store.getAngle(), touches: this.getCurrentStore().getPositions() }, store.getPosition()), { inputEvent: e, isTrusted: this._isTrusted, preventDefault: function () {\n                e.preventDefault();\n            }, preventDrag: function () {\n                _this._dragFlag = false;\n            } }));\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    };\n    Gesto.prototype.onPinch = function (e, clients) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n        var store = this.getCurrentStore();\n        this.isPinch = true;\n        this.emit(\"pinch\", __assign(__assign({ data: this.data, datas: this.data, movement: this.getMovement(clients), angle: store.getAngle(clients), rotation: store.getRotation(clients), touches: store.getPositions(clients), scale: store.getScale(clients), distance: store.getDistance(clients) }, store.getPosition(clients)), { inputEvent: e, isTrusted: this._isTrusted }));\n    };\n    Gesto.prototype.onPinchEnd = function (e) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        var isPinch = this.isPinch;\n        this.isPinch = false;\n        this.pinchFlag = false;\n        var store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", __assign(__assign({ data: this.data, datas: this.data, isPinch: isPinch, touches: store.getPositions() }, store.getPosition()), { inputEvent: e }));\n    };\n    Gesto.prototype.getCurrentStore = function () {\n        return this.clientStores[0];\n    };\n    Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n        var position = this._getPosition(clients, isAdd);\n        var isPrevDrag = this.isDrag;\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        var isFirstDrag = false;\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n        return __assign(__assign({ data: this.data, datas: this.data }, position), { movement: this.getMovement(clients), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: inputEvent, isTrusted: this._isTrusted, isFirstDrag: isFirstDrag });\n    };\n    Gesto.prototype._addStore = function (store) {\n        this.clientStores.splice(0, 0, store);\n    };\n    Gesto.prototype._getPosition = function (clients, isAdd) {\n        var store = this.getCurrentStore();\n        var position = store.getPosition(clients, isAdd);\n        var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n            var storePosition = cur.getPosition();\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position), distX = _a.distX, distY = _a.distY;\n        return __assign(__assign({}, position), { distX: distX, distY: distY });\n    };\n    Gesto.prototype._attchDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        var passive = {\n            passive: false\n        };\n        if (this._isDragAPI) {\n            addEvent(container, \"dragover\", this.onDrag, passive);\n            addEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(win, \"touchend\", this.onDragEnd, passive);\n            addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    Gesto.prototype._dettachDragEvent = function () {\n        var win = this._window;\n        var container = this.options.container;\n        if (this._isDragAPI) {\n            removeEvent(container, \"dragover\", this.onDrag);\n            removeEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(win, \"mouseup\", this.onDragEnd);\n        }\n        if (this._useTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(win, \"touchend\", this.onDragEnd);\n            removeEvent(win, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    Gesto.prototype._allowMouseEvent = function () {\n        this._preventMouseEvent = false;\n        clearTimeout(this._preventMouseEventId);\n    };\n    return Gesto;\n}(EventEmitter));\n\nexport { Gesto as default };\n//# sourceMappingURL=gesto.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.8\n*/\nimport { getDocument, splitComma } from '@daybrush/utils';\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nvar stringHash = hash;\n\nfunction getHash(str) {\n  return stringHash(str).toString(36);\n}\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n  return;\n}\nfunction replaceStyle(className, css, options) {\n  if (options.original) {\n    return css;\n  }\n  return css.replace(/([^};{\\s}][^};{]*|^\\s*){/mg, function (_, selector) {\n    var trimmedSelector = selector.trim();\n    return (trimmedSelector ? splitComma(trimmedSelector) : [\"\"]).map(function (subSelector) {\n      var trimmedSubSelector = subSelector.trim();\n      if (trimmedSubSelector.indexOf(\"@\") === 0) {\n        return trimmedSubSelector;\n      } else if (trimmedSubSelector.indexOf(\":global\") > -1) {\n        return trimmedSubSelector.replace(/\\:global/g, \"\");\n      } else if (trimmedSubSelector.indexOf(\":host\") > -1) {\n        return \"\".concat(trimmedSubSelector.replace(/\\:host/g, \".\".concat(className)));\n      } else if (trimmedSubSelector) {\n        return \".\".concat(className, \" \").concat(trimmedSubSelector);\n      } else {\n        return \".\".concat(className);\n      }\n    }).join(\", \") + \" {\";\n  });\n}\nfunction injectStyle(className, css, options, el, shadowRoot) {\n  var doc = getDocument(el);\n  var style = doc.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-styled-id\", className);\n  style.setAttribute(\"data-styled-count\", \"1\");\n  if (options.nonce) {\n    style.setAttribute(\"nonce\", options.nonce);\n  }\n  style.innerHTML = replaceStyle(className, css, options);\n  (shadowRoot || doc.head || doc.body).appendChild(style);\n  return style;\n}\n\n/**\n * Create an styled object that can be defined and inserted into the css.\n * @param - css styles\n */\nfunction styled(css) {\n  var injectClassName = \"rCS\" + getHash(css);\n  return {\n    className: injectClassName,\n    inject: function (el, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      var shadowRoot = getShadowRoot(el);\n      var styleElement = (shadowRoot || el.ownerDocument || document).querySelector(\"style[data-styled-id=\\\"\".concat(injectClassName, \"\\\"]\"));\n      if (!styleElement) {\n        styleElement = injectStyle(injectClassName, css, options, el, shadowRoot);\n      } else {\n        var count = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n        styleElement.setAttribute(\"data-styled-count\", \"\".concat(count + 1));\n      }\n      return {\n        destroy: function () {\n          var _a;\n          var injectCount = parseFloat(styleElement.getAttribute(\"data-styled-count\")) || 0;\n          if (injectCount <= 1) {\n            if (styleElement.remove) {\n              styleElement.remove();\n            } else {\n              (_a = styleElement.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(styleElement);\n            }\n            styleElement = null;\n          } else {\n            styleElement.setAttribute(\"data-styled-count\", \"\".concat(injectCount - 1));\n          }\n        }\n      };\n    }\n  };\n}\n\nexport default styled;\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: croact-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.1.9\n*/\nimport cssStyled from 'css-styled';\nimport { version, createElement, forwardRef, useRef, useImperativeHandle, useEffect, Component } from 'croact';\nimport { ref } from 'framework-utils';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/css-styled/tree/master/packages/react-css-styled\nversion: 1.1.9\n*/\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nvar StyledElement = /*#__PURE__*/function (_super) {\n  __extends(StyledElement, _super);\n  function StyledElement() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.injectResult = null;\n    _this.tag = \"div\";\n    return _this;\n  }\n  var __proto = StyledElement.prototype;\n  __proto.render = function () {\n    var _a = this.props,\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      cspNonce = _a.cspNonce,\n      portalContainer = _a.portalContainer,\n      attributes = __rest(_a, [\"className\", \"cspNonce\", \"portalContainer\"]);\n    var cssId = this.injector.className;\n    var Tag = this.tag;\n    var portalAttributes = {};\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n    return createElement(Tag, __assign(__assign({\n      \"ref\": ref(this, \"element\"),\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, portalAttributes), attributes));\n  };\n  __proto.componentDidMount = function () {\n    this.injectResult = this.injector.inject(this.element, {\n      nonce: this.props.cspNonce\n    });\n  };\n  __proto.componentWillUnmount = function () {\n    this.injectResult.destroy();\n    this.injectResult = null;\n  };\n  __proto.getElement = function () {\n    return this.element;\n  };\n  return StyledElement;\n}(Component);\nfunction defaultStyled(tag, css) {\n  var injector = cssStyled(css);\n  return /*#__PURE__*/function (_super) {\n    __extends(Styled, _super);\n    function Styled() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n      _this.injector = injector;\n      _this.tag = tag;\n      return _this;\n    }\n    return Styled;\n  }(StyledElement);\n}\nfunction styled(Tag, css) {\n  var injector = cssStyled(css);\n  var cssId = injector.className;\n  return forwardRef(function (props, ref) {\n    var _a = props.className,\n      className = _a === void 0 ? \"\" : _a,\n      cspNonce = props.cspNonce,\n      attributes = __rest(props, [\"className\", \"cspNonce\"]);\n    var targetRef = useRef();\n    useImperativeHandle(ref, function () {\n      return targetRef.current;\n    }, []);\n    useEffect(function () {\n      var injectResult = injector.inject(targetRef.current, {\n        nonce: props.cspNonce\n      });\n      return function () {\n        injectResult.destroy();\n      };\n    }, []);\n    return createElement(Tag, __assign({\n      \"ref\": targetRef,\n      \"data-styled-id\": cssId,\n      \"className\": \"\".concat(className, \" \").concat(cssId)\n    }, attributes));\n  });\n}\n\nexport default defaultStyled;\nexport { StyledElement, styled };\n","/*\nCopyright (c) 2019 Daybrush\nname: croact-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/croact-moveable\nversion: 0.9.0\n*/\nimport getAgent from '@egjs/agent';\nimport { prefixNames, prefixCSS, ref, withMethods, refs } from 'framework-utils';\nimport { getRad, throttle, throttleArray, isString, calculateBoundSize, getKeys, isArray, hasClass, getDist as getDist$1, isObject, decamelize, convertUnitSize, pushSet, find, findIndex, splitSpace, isNumber, isNode, isFunction, isWindow, counter, dot, addClass, requestAnimationFrame, splitBracket, splitComma, splitUnit, cancelAnimationFrame, removeClass, getWindow, TINY_NUM as TINY_NUM$1, flat as flat$1, isUndefined, getDocumentBody, between, getDocumentElement, average } from '@daybrush/utils';\nimport { plus, minus, convertDimension, calculate, convertPositionMatrix, ignoreDimension, invert, createIdentityMatrix, createWarpMatrix, multiply, fromTranslation, createRotateMatrix, getOrigin, rotate, multiplies, createOriginMatrix, convertMatrixtoCSS, createScaleMatrix, convertCSStoMatrix } from '@scena/matrix';\nimport { parseMat, parse, toMat, calculateMatrixDist } from 'css-to-mat';\nimport ChildrenDiffer, { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport { getMinMaxs, fitPoints, getOverlapSize, getAreaSize, isInside, getIntersectionPointsByConstants } from 'overlap-area';\nimport * as React from 'croact';\nimport { createElement } from 'croact';\nimport Gesto from 'gesto';\nimport { styled } from 'croact-css-styled';\nimport EventEmitter from '@scena/event-emitter';\nimport { diff as diff$1 } from '@egjs/list-differ';\n\n/*\nCopyright (c) 2019 Daybrush\nname: react-moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/react-moveable\nversion: 0.56.0\n*/\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction makeAble(name, able) {\r\n    return __assign({ events: [], props: [], name: name }, able);\r\n}\n\nvar DIRECTIONS4 = [\"n\", \"w\", \"s\", \"e\"];\r\nvar DIRECTIONS = [\"n\", \"w\", \"s\", \"e\", \"nw\", \"ne\", \"sw\", \"se\"];\r\nfunction getSVGCursor(scale, degree) {\r\n    return \"data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"\".concat(32 * scale, \"px\\\" height=\\\"\").concat(32 * scale, \"px\\\" viewBox=\\\"0 0 32 32\\\" ><path d=\\\"M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"1.2\\\" fill=\\\"black\\\" stroke=\\\"white\\\" style=\\\"transform:rotate(\").concat(degree, \"deg);transform-origin: 16px 16px\\\"></path></svg>\");\r\n}\r\nfunction getCursorCSS(degree) {\r\n    var x1 = getSVGCursor(1, degree);\r\n    // const x2 = getSVGCursor(2, degree);\r\n    var degree45 = (Math.round(degree / 45) * 45) % 180;\r\n    var defaultCursor = \"ns-resize\";\r\n    if (degree45 === 135) {\r\n        defaultCursor = \"nwse-resize\";\r\n    }\r\n    else if (degree45 === 45) {\r\n        defaultCursor = \"nesw-resize\";\r\n    }\r\n    else if (degree45 === 90) {\r\n        defaultCursor = \"ew-resize\";\r\n    }\r\n    // tslint:disable-next-line: max-line-length\r\n    return \"cursor:\".concat(defaultCursor, \";cursor: url('\").concat(x1, \"') 16 16, \").concat(defaultCursor, \";\");\r\n}\r\nvar agent = getAgent();\r\nvar IS_WEBKIT = agent.browser.webkit;\r\nvar IS_WEBKIT605 = IS_WEBKIT && (function () {\r\n    var navi = typeof window === \"undefined\" ? { userAgent: \"\" } : window.navigator;\r\n    var res = /applewebkit\\/([^\\s]+)/g.exec(navi.userAgent.toLowerCase());\r\n    return res ? parseFloat(res[1]) < 605 : false;\r\n})();\r\nvar browserName = agent.browser.name;\r\nvar browserVersion = parseInt(agent.browser.version, 10);\r\nvar IS_CHROME = browserName === \"chrome\";\r\nvar IS_CHROMIUM = agent.browser.chromium;\r\nvar chromiumVersion = parseInt(agent.browser.chromiumVersion, 10) || 0;\r\nvar IS_CHROMIUM109 = (IS_CHROME && browserVersion >= 109)\r\n    || (IS_CHROMIUM && chromiumVersion >= 109);\r\nvar IS_FIREFOX = browserName === \"firefox\";\r\nvar IS_SAFARI_ABOVE15 = parseInt(agent.browser.webkitVersion, 10) >= 612\r\n    || browserVersion >= 15;\r\nvar PREFIX = \"moveable-\";\r\nvar directionCSS = DIRECTIONS.map(function (dir) {\r\n    var top = \"\";\r\n    var left = \"\";\r\n    var originX = \"center\";\r\n    var originY = \"center\";\r\n    var offset = \"calc(var(--moveable-control-padding, 20) * -1px)\";\r\n    if (dir.indexOf(\"n\") > -1) {\r\n        top = \"top: \".concat(offset, \";\");\r\n        originY = \"bottom\";\r\n    }\r\n    if (dir.indexOf(\"s\") > -1) {\r\n        top = \"top: 0px;\";\r\n        originY = \"top\";\r\n    }\r\n    if (dir.indexOf(\"w\") > -1) {\r\n        left = \"left: \".concat(offset, \";\");\r\n        originX = \"right\";\r\n    }\r\n    if (dir.indexOf(\"e\") > -1) {\r\n        left = \"left: 0px;\";\r\n        originX = \"left\";\r\n    }\r\n    return \".around-control[data-direction*=\\\"\".concat(dir, \"\\\"] {\\n        \").concat(left).concat(top, \"\\n        transform-origin: \").concat(originX, \" \").concat(originY, \";\\n    }\");\r\n}).join(\"\\n\");\r\nvar MOVEABLE_CSS = \"\\n{\\nposition: absolute;\\nwidth: 1px;\\nheight: 1px;\\nleft: 0;\\ntop: 0;\\nz-index: 3000;\\n--moveable-color: #4af;\\n--zoom: 1;\\n--zoompx: 1px;\\n--moveable-line-padding: 0;\\n--moveable-control-padding: 0;\\nwill-change: transform;\\noutline: 1px solid transparent;\\n}\\n.control-box {\\nz-index: 0;\\n}\\n.line, .control {\\nposition: absolute;\\nleft: 0;\\ntop: 0;\\nwill-change: transform;\\n}\\n.control {\\nwidth: 14px;\\nheight: 14px;\\nborder-radius: 50%;\\nborder: 2px solid #fff;\\nbox-sizing: border-box;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\nmargin-top: -7px;\\nmargin-left: -7px;\\nborder: 2px solid #fff;\\nz-index: 10;\\n}\\n.around-control {\\nposition: absolute;\\nwill-change: transform;\\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\\nheight: calc(var(--moveable-control-padding, 20) * 1px);\\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\\nbox-sizing: border-box;\\nbackground: transparent;\\nz-index: 8;\\ncursor: alias;\\ntransform-origin: center center;\\n}\\n\".concat(directionCSS, \"\\n.padding {\\nposition: absolute;\\ntop: 0px;\\nleft: 0px;\\nwidth: 100px;\\nheight: 100px;\\ntransform-origin: 0 0;\\n}\\n.line {\\nwidth: 1px;\\nheight: 1px;\\nbackground: #4af;\\nbackground: var(--moveable-color);\\ntransform-origin: 0px 50%;\\n}\\n.line.edge {\\nz-index: 1;\\nbackground: transparent;\\n}\\n.line.dashed {\\nbox-sizing: border-box;\\nbackground: transparent;\\n}\\n.line.dashed.horizontal {\\nborder-top: 1px dashed #4af;\\nborder-top-color: #4af;\\nborder-top-color: var(--moveable-color);\\n}\\n.line.dashed.vertical {\\nborder-left: 1px dashed #4af;\\nborder-left-color: #4af;\\nborder-left-color: var(--moveable-color);\\n}\\n.line.vertical {\\ntransform: translateX(-50%);\\n}\\n.line.horizontal {\\ntransform: translateY(-50%);\\n}\\n.line.vertical.bold {\\nwidth: 2px;\\n}\\n.line.horizontal.bold {\\nheight: 2px;\\n}\\n\\n.control.origin {\\nborder-color: #f55;\\nbackground: #fff;\\nwidth: 12px;\\nheight: 12px;\\nmargin-top: -6px;\\nmargin-left: -6px;\\npointer-events: none;\\n}\\n\").concat([0, 15, 30, 45, 60, 75, 90, 105, 120, 135, 150, 165].map(function (degree) { return \"\\n.direction[data-rotation=\\\"\".concat(degree, \"\\\"], :global .view-control-rotation\").concat(degree, \" {\\n\").concat(getCursorCSS(degree), \"\\n}\\n\"); }).join(\"\\n\"), \"\\n\\n.line.direction:before {\\ncontent: \\\"\\\";\\nposition: absolute;\\nwidth: 100%;\\nheight: calc(var(--moveable-line-padding, 0) * 1px);\\nbottom: 0;\\nleft: 0;\\n}\\n.group {\\nz-index: -1;\\n}\\n.area {\\nposition: absolute;\\n}\\n.area-pieces {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\ndisplay: none;\\n}\\n.area.avoid, .area.pass {\\npointer-events: none;\\n}\\n.area.avoid+.area-pieces {\\ndisplay: block;\\n}\\n.area-piece {\\nposition: absolute;\\n}\\n\\n\").concat(IS_WEBKIT605 ? \":global svg *:before {\\ncontent:\\\"\\\";\\ntransform-origin: inherit;\\n}\" : \"\", \"\\n\");\r\nvar NEARBY_POS = [\r\n    [0, 1, 2],\r\n    [1, 0, 3],\r\n    [2, 0, 3],\r\n    [3, 1, 2],\r\n];\r\nvar FLOAT_POINT_NUM = 0.0001;\r\nvar TINY_NUM = 0.0000001;\r\nvar MIN_SCALE = 0.000000001;\r\nvar MAX_NUM = Math.pow(10, 10);\r\nvar MIN_NUM = -MAX_NUM;\r\nvar DIRECTION_REGION_TO_DIRECTION = {\r\n    n: [0, -1],\r\n    e: [1, 0],\r\n    s: [0, 1],\r\n    w: [-1, 0],\r\n    nw: [-1, -1],\r\n    ne: [1, -1],\r\n    sw: [-1, 1],\r\n    se: [1, 1],\r\n};\r\nvar DIRECTION_INDEXES = {\r\n    n: [0, 1],\r\n    e: [1, 3],\r\n    s: [3, 2],\r\n    w: [2, 0],\r\n    nw: [0],\r\n    ne: [1],\r\n    sw: [2],\r\n    se: [3],\r\n};\r\nvar DIRECTION_ROTATIONS = {\r\n    n: 0,\r\n    s: 180,\r\n    w: 270,\r\n    e: 90,\r\n    nw: 315,\r\n    ne: 45,\r\n    sw: 225,\r\n    se: 135,\r\n};\r\nvar MOVEABLE_METHODS = [\r\n    \"isMoveableElement\",\r\n    \"updateRect\",\r\n    \"updateTarget\",\r\n    \"destroy\",\r\n    \"dragStart\",\r\n    \"isInside\",\r\n    \"hitTest\",\r\n    \"setState\",\r\n    \"getRect\",\r\n    \"request\",\r\n    \"isDragging\",\r\n    \"getManager\",\r\n    \"forceUpdate\",\r\n    \"waitToChangeTarget\",\r\n    \"updateSelectors\",\r\n    \"getTargets\",\r\n    \"stopDrag\",\r\n    \"getControlBoxElement\",\r\n    \"getMoveables\",\r\n    \"getDragElement\",\r\n];\n\nfunction setCustomDrag(e, state, delta, isPinch, isConvert, ableName) {\r\n    var _a, _b;\r\n    if (ableName === void 0) { ableName = \"draggable\"; }\r\n    var result = (_b = (_a = state.gestos[ableName]) === null || _a === void 0 ? void 0 : _a.move(delta, e.inputEvent)) !== null && _b !== void 0 ? _b : {};\r\n    var datas = result.originalDatas || result.datas;\r\n    var ableDatas = datas[ableName] || (datas[ableName] = {});\r\n    return __assign(__assign({}, (isConvert ? convertDragDist(state, result) : result)), { isPinch: !!isPinch, parentEvent: true, datas: ableDatas, originalDatas: e.originalDatas });\r\n}\r\nvar CustomGesto = /*#__PURE__*/ (function () {\r\n    function CustomGesto(ableName) {\r\n        var _a;\r\n        if (ableName === void 0) { ableName = \"draggable\"; }\r\n        this.ableName = ableName;\r\n        this.prevX = 0;\r\n        this.prevY = 0;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        this.datas = {\r\n            draggable: {},\r\n        };\r\n        this.datas = (_a = {},\r\n            _a[ableName] = {},\r\n            _a);\r\n    }\r\n    CustomGesto.prototype.dragStart = function (client, e) {\r\n        this.isDrag = false;\r\n        this.isFlag = false;\r\n        var originalDatas = e.originalDatas;\r\n        this.datas = originalDatas;\r\n        if (!originalDatas[this.ableName]) {\r\n            originalDatas[this.ableName] = {};\r\n        }\r\n        return __assign(__assign({}, this.move(client, e.inputEvent)), { type: \"dragstart\" });\r\n    };\r\n    CustomGesto.prototype.drag = function (client, inputEvent) {\r\n        return this.move([\r\n            client[0] - this.prevX,\r\n            client[1] - this.prevY,\r\n        ], inputEvent);\r\n    };\r\n    CustomGesto.prototype.move = function (delta, inputEvent) {\r\n        var clientX;\r\n        var clientY;\r\n        var isFirstDrag = false;\r\n        if (!this.isFlag) {\r\n            this.prevX = delta[0];\r\n            this.prevY = delta[1];\r\n            this.startX = delta[0];\r\n            this.startY = delta[1];\r\n            clientX = delta[0];\r\n            clientY = delta[1];\r\n            this.isFlag = true;\r\n        }\r\n        else {\r\n            var isPrevDrag = this.isDrag;\r\n            clientX = this.prevX + delta[0];\r\n            clientY = this.prevY + delta[1];\r\n            if (delta[0] || delta[1]) {\r\n                this.isDrag = true;\r\n            }\r\n            if (!isPrevDrag && this.isDrag) {\r\n                isFirstDrag = true;\r\n            }\r\n        }\r\n        this.prevX = clientX;\r\n        this.prevY = clientY;\r\n        return {\r\n            type: \"drag\",\r\n            clientX: clientX,\r\n            clientY: clientY,\r\n            inputEvent: inputEvent,\r\n            isFirstDrag: isFirstDrag,\r\n            isDrag: this.isDrag,\r\n            distX: clientX - this.startX,\r\n            distY: clientY - this.startY,\r\n            deltaX: delta[0],\r\n            deltaY: delta[1],\r\n            datas: this.datas[this.ableName],\r\n            originalDatas: this.datas,\r\n            parentEvent: true,\r\n            parentGesto: this,\r\n        };\r\n    };\r\n    return CustomGesto;\r\n}());\n\nfunction calculateElementPosition(matrix, origin, width, height) {\r\n    var is3d = matrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var _a = __read(poses, 4), _b = __read(_a[0], 2), x1 = _b[0], y1 = _b[1], _c = __read(_a[1], 2), x2 = _c[0], y2 = _c[1], _d = __read(_a[2], 2), x3 = _d[0], y3 = _d[1], _e = __read(_a[3], 2), x4 = _e[0], y4 = _e[1];\r\n    var _f = __read(calculatePosition(matrix, origin, n), 2), originX = _f[0], originY = _f[1];\r\n    var left = Math.min(x1, x2, x3, x4);\r\n    var top = Math.min(y1, y2, y3, y4);\r\n    var right = Math.max(x1, x2, x3, x4);\r\n    var bottom = Math.max(y1, y2, y3, y4);\r\n    x1 = (x1 - left) || 0;\r\n    x2 = (x2 - left) || 0;\r\n    x3 = (x3 - left) || 0;\r\n    x4 = (x4 - left) || 0;\r\n    y1 = (y1 - top) || 0;\r\n    y2 = (y2 - top) || 0;\r\n    y3 = (y3 - top) || 0;\r\n    y4 = (y4 - top) || 0;\r\n    originX = (originX - left) || 0;\r\n    originY = (originY - top) || 0;\r\n    var sx = matrix[0];\r\n    var sy = matrix[n + 1];\r\n    var direction = sign(sx * sy);\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        origin: [originX, originY],\r\n        pos1: [x1, y1],\r\n        pos2: [x2, y2],\r\n        pos3: [x3, y3],\r\n        pos4: [x4, y4],\r\n        direction: direction,\r\n    };\r\n}\n\nfunction calculatePointerDist(moveable, e) {\r\n    var clientX = e.clientX, clientY = e.clientY, datas = e.datas;\r\n    var _a = moveable.state, moveableClientRect = _a.moveableClientRect, rootMatrix = _a.rootMatrix, is3d = _a.is3d, pos1 = _a.pos1;\r\n    var left = moveableClientRect.left, top = moveableClientRect.top;\r\n    var n = is3d ? 4 : 3;\r\n    var _b = __read(minus(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), pos1), 2), posX = _b[0], posY = _b[1];\r\n    var _c = __read(getDragDist({ datas: datas, distX: posX, distY: posY }), 2), distX = _c[0], distY = _c[1];\r\n    return [distX, distY];\r\n}\r\nfunction setDragStart(moveable, _a) {\r\n    var datas = _a.datas;\r\n    var _b = moveable.state, allMatrix = _b.allMatrix, beforeMatrix = _b.beforeMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, origin = _b.origin, offsetMatrix = _b.offsetMatrix, targetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    datas.is3d = is3d;\r\n    datas.matrix = allMatrix;\r\n    datas.targetMatrix = targetMatrix;\r\n    datas.beforeMatrix = beforeMatrix;\r\n    datas.offsetMatrix = offsetMatrix;\r\n    datas.transformOrigin = transformOrigin;\r\n    datas.inverseMatrix = invert(allMatrix, n);\r\n    datas.inverseBeforeMatrix = invert(beforeMatrix, n);\r\n    datas.absoluteOrigin = convertPositionMatrix(plus([left, top], origin), n);\r\n    datas.startDragBeforeDist = calculate(datas.inverseBeforeMatrix, datas.absoluteOrigin, n);\r\n    datas.startDragDist = calculate(datas.inverseMatrix, datas.absoluteOrigin, n);\r\n}\r\nfunction getTransformDirection(e) {\r\n    return calculateElementPosition(e.datas.beforeTransform, [50, 50], 100, 100).direction;\r\n}\r\nfunction resolveTransformEvent(moveable, event, functionName) {\r\n    var datas = event.datas, originalDatas = event.originalDatas.beforeRenderable;\r\n    var index = datas.transformIndex;\r\n    var nextTransforms = originalDatas.nextTransforms;\r\n    var length = nextTransforms.length;\r\n    var nextTransformAppendedIndexes = originalDatas.nextTransformAppendedIndexes;\r\n    var nextIndex = -1;\r\n    if (index === -1) {\r\n        // translate => rotate => scale\r\n        if (functionName === \"translate\") {\r\n            nextIndex = 0;\r\n        }\r\n        else if (functionName === \"rotate\") {\r\n            nextIndex = findIndex(nextTransforms, function (text) { return text.match(/scale\\(/g); });\r\n        }\r\n        if (nextIndex === -1) {\r\n            nextIndex = nextTransforms.length;\r\n        }\r\n        datas.transformIndex = nextIndex;\r\n    }\r\n    else if (find(nextTransformAppendedIndexes, function (info) { return info.index === index && info.functionName === functionName; })) {\r\n        nextIndex = index;\r\n    }\r\n    else {\r\n        nextIndex = index + nextTransformAppendedIndexes.filter(function (info) { return info.index < index; }).length;\r\n    }\r\n    var result = convertTransformInfo(nextTransforms, moveable.state, nextIndex);\r\n    var targetFunction = result.targetFunction;\r\n    var matFunctionName = functionName === \"rotate\" ? \"rotateZ\" : functionName;\r\n    datas.beforeFunctionTexts = result.beforeFunctionTexts;\r\n    datas.afterFunctionTexts = result.afterFunctionTexts;\r\n    datas.beforeTransform = result.beforeFunctionMatrix;\r\n    datas.beforeTransform2 = result.beforeFunctionMatrix2;\r\n    datas.targetTansform = result.targetFunctionMatrix;\r\n    datas.afterTransform = result.afterFunctionMatrix;\r\n    datas.afterTransform2 = result.afterFunctionMatrix2;\r\n    datas.targetAllTransform = result.allFunctionMatrix;\r\n    if (targetFunction.functionName === matFunctionName) {\r\n        datas.afterFunctionTexts.splice(0, 1);\r\n        datas.isAppendTransform = false;\r\n    }\r\n    else if (length > nextIndex) {\r\n        datas.isAppendTransform = true;\r\n        originalDatas.nextTransformAppendedIndexes = __spreadArray(__spreadArray([], __read(nextTransformAppendedIndexes), false), [{\r\n                functionName: functionName,\r\n                index: nextIndex,\r\n                isAppend: true,\r\n            }], false);\r\n    }\r\n}\r\nfunction convertTransformFormat(datas, value, dist) {\r\n    return \"\".concat(datas.beforeFunctionTexts.join(\" \"), \" \").concat(datas.isAppendTransform ? dist : value, \" \").concat(datas.afterFunctionTexts.join(\" \"));\r\n}\r\nfunction getTransformDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var _b = __read(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), 2), bx = _b[0], by = _b[1];\r\n    // B * [tx, ty] * A = [bx, by] * targetMatrix;\r\n    // [tx, ty] = B-1 * [bx, by] * targetMatrix * A-1 * [0, 0];\r\n    var res = getTransfromMatrix(datas, fromTranslation([bx, by], 4));\r\n    return calculate(res, convertPositionMatrix([0, 0, 0], 4), 4);\r\n}\r\nfunction getTransfromMatrix(datas, targetMatrix, isAfter) {\r\n    var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform, beforeTransform2 = datas.beforeTransform2, afterTransform2 = datas.afterTransform2, targetAllTransform = datas.targetAllTransform;\r\n    // B * afterTargetMatrix * A = (targetMatrix * targetAllTransform)\r\n    // afterTargetMatrix = B-1 * targetMatrix * targetAllTransform * A-1\r\n    // nextTargetMatrix = (targetMatrix * targetAllTransform)\r\n    var nextTargetMatrix = isAfter\r\n        ? multiply(targetAllTransform, targetMatrix, 4)\r\n        : multiply(targetMatrix, targetAllTransform, 4);\r\n    // res1 = B-1 * nextTargetMatrix\r\n    var res1 = multiply(invert(isAfter ? beforeTransform2 : beforeTransform, 4), nextTargetMatrix, 4);\r\n    // res3 = res2 * A-1\r\n    var afterTargetMatrix = multiply(res1, invert(isAfter ? afterTransform2 : afterTransform, 4), 4);\r\n    return afterTargetMatrix;\r\n}\r\nfunction getBeforeDragDist(_a) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    // TT = BT\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    // ABS_ORIGIN * [distX, distY] = BM * (ORIGIN + [tx, ty])\r\n    // BM -1 * ABS_ORIGIN * [distX, distY] - ORIGIN = [tx, ty]\r\n    return minus(calculate(inverseBeforeMatrix, plus(absoluteOrigin, [distX, distY]), n), startDragBeforeDist);\r\n}\r\nfunction getDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var inverseBeforeMatrix = datas.inverseBeforeMatrix, inverseMatrix = datas.inverseMatrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? inverseBeforeMatrix : inverseMatrix, plus(absoluteOrigin, [distX, distY]), n), isBefore ? startDragBeforeDist : startDragDist);\r\n}\r\nfunction getInverseDragDist(_a, isBefore) {\r\n    var datas = _a.datas, distX = _a.distX, distY = _a.distY;\r\n    var beforeMatrix = datas.beforeMatrix, matrix = datas.matrix, is3d = datas.is3d, startDragBeforeDist = datas.startDragBeforeDist, startDragDist = datas.startDragDist, absoluteOrigin = datas.absoluteOrigin;\r\n    var n = is3d ? 4 : 3;\r\n    return minus(calculate(isBefore ? beforeMatrix : matrix, plus(isBefore ? startDragBeforeDist : startDragDist, [distX, distY]), n), absoluteOrigin);\r\n}\r\nfunction calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin) {\r\n    if (prevWidth === void 0) { prevWidth = width; }\r\n    if (prevHeight === void 0) { prevHeight = height; }\r\n    if (prevOrigin === void 0) { prevOrigin = [0, 0]; }\r\n    if (!transformOrigin) {\r\n        return prevOrigin;\r\n    }\r\n    return transformOrigin.map(function (pos, i) {\r\n        var _a = splitUnit(pos), value = _a.value, unit = _a.unit;\r\n        var prevSize = (i ? prevHeight : prevWidth);\r\n        var size = (i ? height : width);\r\n        if (pos === \"%\" || isNaN(value)) {\r\n            // no value but %\r\n            var measureRatio = prevSize ? prevOrigin[i] / prevSize : 0;\r\n            return size * measureRatio;\r\n        }\r\n        else if (unit !== \"%\") {\r\n            return value;\r\n        }\r\n        return size * value / 100;\r\n    });\r\n}\r\nfunction getPosIndexesByDirection(direction) {\r\n    var indexes = [];\r\n    if (direction[1] >= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(3);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(2);\r\n        }\r\n    }\r\n    if (direction[1] <= 0) {\r\n        if (direction[0] >= 0) {\r\n            indexes.push(1);\r\n        }\r\n        if (direction[0] <= 0) {\r\n            indexes.push(0);\r\n        }\r\n    }\r\n    return indexes;\r\n}\r\nfunction getPosesByDirection(poses, direction) {\r\n    /*\r\n    [-1, -1](pos1)       [0, -1](pos1,pos2)       [1, -1](pos2)\r\n    [-1, 0](pos1, pos3)                           [1, 0](pos2, pos4)\r\n    [-1, 1](pos3)        [0, 1](pos3, pos4)       [1, 1](pos4)\r\n    */\r\n    return getPosIndexesByDirection(direction).map(function (index) { return poses[index]; });\r\n}\r\nfunction getPosBySingleDirection(poses, direction) {\r\n    var ratio = (direction + 1) / 2;\r\n    return [\r\n        dot(poses[0][0], poses[1][0], ratio, 1 - ratio),\r\n        dot(poses[0][1], poses[1][1], ratio, 1 - ratio),\r\n    ];\r\n}\r\nfunction getPosByDirection(poses, direction) {\r\n    var top = getPosBySingleDirection([poses[0], poses[1]], direction[0]);\r\n    var bottom = getPosBySingleDirection([poses[2], poses[3]], direction[0]);\r\n    return getPosBySingleDirection([top, bottom], direction[1]);\r\n}\r\nfunction getDist(startPos, matrix, width, height, n, fixedDirection) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    var fixedPos = getPosByDirection(poses, fixedDirection);\r\n    var distX = startPos[0] - fixedPos[0];\r\n    var distY = startPos[1] - fixedPos[1];\r\n    return [distX, distY];\r\n}\r\nfunction getNextMatrix(offsetMatrix, targetMatrix, origin, n) {\r\n    return multiply(offsetMatrix, getAbsoluteMatrix(targetMatrix, n, origin), n);\r\n}\r\nfunction getNextTransformMatrix(state, datas, transform, isAllTransform) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var targetTransform;\r\n    if (isString(transform)) {\r\n        var beforeTransform = datas.beforeTransform, afterTransform = datas.afterTransform;\r\n        if (isAllTransform) {\r\n            targetTransform = convertDimension(parseMat(transform), 4, n);\r\n        }\r\n        else {\r\n            targetTransform = convertDimension(multiply(multiply(beforeTransform, parseMat([transform]), 4), afterTransform, 4), 4, n);\r\n        }\r\n    }\r\n    else {\r\n        targetTransform = transform;\r\n    }\r\n    return getNextMatrix(offsetMatrix, targetTransform, transformOrigin, n);\r\n}\r\nfunction scaleMatrix(state, scale) {\r\n    var transformOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, targetMatrix = state.targetMatrix, targetAllTransform = state.targetAllTransform;\r\n    var n = is3d ? 4 : 3;\r\n    return getNextMatrix(offsetMatrix, multiply(targetAllTransform || targetMatrix, createScaleMatrix(scale, n), n), transformOrigin, n);\r\n}\r\nfunction fillTransformStartEvent(moveable, e) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    return {\r\n        setTransform: function (transform, index) {\r\n            if (index === void 0) { index = -1; }\r\n            originalDatas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n        setTransformIndex: function (index) {\r\n            setTransformIndex(moveable, e, index);\r\n        },\r\n    };\r\n}\r\nfunction setDefaultTransformIndex(moveable, e, property) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var startTransforms = originalDatas.startTransforms;\r\n    setTransformIndex(moveable, e, findIndex(startTransforms, function (func) { return func.indexOf(\"\".concat(property, \"(\")) === 0; }));\r\n}\r\nfunction setTransformIndex(moveable, e, index) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    var datas = e.datas;\r\n    datas.transformIndex = index;\r\n    if (index === -1) {\r\n        return;\r\n    }\r\n    var transform = originalDatas.startTransforms[index];\r\n    if (!transform) {\r\n        return;\r\n    }\r\n    var state = moveable.state;\r\n    var info = parse([transform], {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    datas.startValue = info[0].functionValue;\r\n}\r\nfunction fillOriginalTransform(e, transform) {\r\n    var originalDatas = getBeforeRenderableDatas(e);\r\n    originalDatas.nextTransforms = splitSpace(transform);\r\n    // originalDatas.nextTargetMatrix = parseMat(transform);\r\n}\r\nfunction getBeforeRenderableDatas(e) {\r\n    return e.originalDatas.beforeRenderable;\r\n}\r\nfunction getNextTransforms(e) {\r\n    var originalDatas = e.originalDatas.beforeRenderable;\r\n    return originalDatas.nextTransforms;\r\n}\r\nfunction getNextTransformText(e) {\r\n    return (getNextTransforms(e) || []).join(\" \");\r\n}\r\nfunction getNextStyle(e) {\r\n    return getBeforeRenderableDatas(e).nextStyle;\r\n}\r\nfunction fillTransformEvent(moveable, nextTransform, delta, isPinch, e) {\r\n    fillOriginalTransform(e, nextTransform);\r\n    var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, delta, isPinch, false));\r\n    var afterTransform = drag ? drag.transform : nextTransform;\r\n    return __assign(__assign({ transform: nextTransform, drag: drag }, fillCSSObject({\r\n        transform: afterTransform,\r\n    }, e)), { afterTransform: afterTransform });\r\n}\r\nfunction getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform) {\r\n    var nextMatrix = getNextTransformMatrix(moveable.state, datas, transform, isAllTransform);\r\n    var nextFixedPosition = getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix);\r\n    return nextFixedPosition;\r\n}\r\nfunction getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var nextFixedPosition = getTranslateFixedPosition(moveable, transform, fixedDirection, fixedOffset, datas, isAllTransform);\r\n    var state = moveable.state;\r\n    var left = state.left, top = state.top;\r\n    var groupable = moveable.props.groupable;\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var dist = minus(fixedPosition, nextFixedPosition);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getScaleDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform) {\r\n    var dist = getTranslateDist(moveable, transform, fixedDirection, fixedPosition, fixedOffset, datas, isAllTransform);\r\n    return dist;\r\n}\r\nfunction getDirectionByPos(pos, width, height) {\r\n    return [\r\n        width ? -1 + pos[0] / (width / 2) : 0,\r\n        height ? -1 + pos[1] / (height / 2) : 0,\r\n    ];\r\n}\r\nfunction getDirectionOffset(moveable, fixedDirection, fixedOffset, nextMatrix) {\r\n    if (nextMatrix === void 0) { nextMatrix = moveable.state.allMatrix; }\r\n    var _a = moveable.state, width = _a.width, height = _a.height, is3d = _a.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedOffsetPosition = [\r\n        width / 2 * (1 + fixedDirection[0]) + fixedOffset[0],\r\n        height / 2 * (1 + fixedDirection[1]) + fixedOffset[1],\r\n    ];\r\n    return calculatePosition(nextMatrix, fixedOffsetPosition, n);\r\n}\r\nfunction getRotateDist(moveable, rotateDist, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var fixedPosition = datas.fixedPosition;\r\n    var fixedOffset = datas.fixedOffset;\r\n    return getTranslateDist(moveable, \"rotate(\".concat(rotateDist, \"deg)\"), fixedDirection, fixedPosition, fixedOffset, datas);\r\n}\r\nfunction getResizeDist(moveable, width, height, fixedPosition, transformOrigin, datas) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var prevOrigin = state.transformOrigin, offsetMatrix = state.offsetMatrix, is3d = state.is3d, prevWidth = state.width, prevHeight = state.height, left = state.left, top = state.top;\r\n    var fixedDirection = datas.fixedDirection;\r\n    var targetMatrix = datas.nextTargetMatrix || state.targetMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    var nextOrigin = calculateTransformOrigin(transformOrigin, width, height, prevWidth, prevHeight, prevOrigin);\r\n    var groupLeft = groupable ? left : 0;\r\n    var groupTop = groupable ? top : 0;\r\n    var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, nextOrigin, n);\r\n    var dist = getDist(fixedPosition, nextMatrix, width, height, n, fixedDirection);\r\n    return minus(dist, [groupLeft, groupTop]);\r\n}\r\nfunction getAbsolutePosition(moveable, direction) {\r\n    return getPosByDirection(getAbsolutePosesByState(moveable.state), direction);\r\n}\n\nfunction getGestoData(moveable, ableName) {\r\n    var targetGesto = moveable.targetGesto;\r\n    var controlGesto = moveable.controlGesto;\r\n    var data;\r\n    if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n        data = targetGesto.getEventData()[ableName];\r\n    }\r\n    if (!data && (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())) {\r\n        data = controlGesto.getEventData()[ableName];\r\n    }\r\n    return data || {};\r\n}\n\nfunction getShadowRoot(parentElement) {\r\n    if (parentElement && parentElement.getRootNode) {\r\n        var rootNode = parentElement.getRootNode();\r\n        if (rootNode.nodeType === 11) {\r\n            return rootNode;\r\n        }\r\n    }\r\n    return;\r\n}\r\nfunction getIndividualTransforms(getStyle) {\r\n    var scale = getStyle(\"scale\");\r\n    var rotate = getStyle(\"rotate\");\r\n    var translate = getStyle(\"translate\");\r\n    var individualTransforms = [];\r\n    if (translate && translate !== \"0px\" && translate !== \"none\") {\r\n        individualTransforms.push(\"translate(\".concat(translate.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    if (rotate && rotate !== \"1\" && rotate !== \"none\") {\r\n        individualTransforms.push(\"rotate(\".concat(rotate, \")\"));\r\n    }\r\n    if (scale && scale !== \"1\" && scale !== \"none\") {\r\n        individualTransforms.push(\"scale(\".concat(scale.split(/\\s+/).join(\",\"), \")\"));\r\n    }\r\n    return individualTransforms;\r\n}\r\nfunction getMatrixStackInfo(target, container, checkContainer) {\r\n    var el = target;\r\n    var matrixes = [];\r\n    var documentElement = getDocumentElement(target) || getDocumentBody(target);\r\n    var requestEnd = !checkContainer && target === container || target === documentElement;\r\n    var isEnd = requestEnd;\r\n    var is3d = false;\r\n    var n = 3;\r\n    var transformOrigin;\r\n    var targetTransformOrigin;\r\n    var targetMatrix;\r\n    var hasFixed = false;\r\n    var offsetContainer = getOffsetInfo(container, container, true).offsetParent;\r\n    var zoom = 1;\r\n    while (el && !isEnd) {\r\n        isEnd = requestEnd;\r\n        var getStyle = getCachedStyle(el);\r\n        var position = getStyle(\"position\");\r\n        var transform = getElementTransform(el);\r\n        var isFixed = position === \"fixed\";\r\n        var individualTransforms = getIndividualTransforms(getStyle);\r\n        var matrix = convertCSStoMatrix(getTransformMatrix(transform));\r\n        var offsetParent = void 0;\r\n        var isOffsetEnd = false;\r\n        var isStatic = false;\r\n        var parentClientLeft = 0;\r\n        var parentClientTop = 0;\r\n        var fixedClientLeft = 0;\r\n        var fixedClientTop = 0;\r\n        var fixedInfo = {\r\n            hasTransform: false,\r\n            fixedContainer: null,\r\n        };\r\n        if (isFixed) {\r\n            hasFixed = true;\r\n            fixedInfo = getPositionFixedInfo(el);\r\n            offsetContainer = fixedInfo.fixedContainer;\r\n        }\r\n        // convert 3 to 4\r\n        var length_1 = matrix.length;\r\n        if (!is3d && (length_1 === 16 || individualTransforms.length)) {\r\n            is3d = true;\r\n            n = 4;\r\n            convert3DMatrixes(matrixes);\r\n            if (targetMatrix) {\r\n                targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n            }\r\n        }\r\n        if (is3d && length_1 === 9) {\r\n            matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n        var _a = getOffsetPosInfo(el, target), tagName = _a.tagName, hasOffset = _a.hasOffset, isSVG = _a.isSVG, origin_1 = _a.origin, targetOrigin = _a.targetOrigin, offsetPos = _a.offset;\r\n        var _b = __read(offsetPos, 2), offsetLeft = _b[0], offsetTop = _b[1];\r\n        // no target with svg\r\n        if (tagName === \"svg\" && !el.ownerSVGElement && targetMatrix) {\r\n            // scale matrix for svg's SVGElements.\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getSVGMatrix(el, n),\r\n            });\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n        }\r\n        var targetZoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        if (isFixed) {\r\n            offsetParent = fixedInfo.fixedContainer;\r\n            isOffsetEnd = true;\r\n        }\r\n        else {\r\n            var offsetInfo = getOffsetInfo(el, container, false, true, getStyle);\r\n            var offsetZoom = offsetInfo.offsetZoom;\r\n            offsetParent = offsetInfo.offsetParent;\r\n            isOffsetEnd = offsetInfo.isEnd;\r\n            isStatic = offsetInfo.isStatic;\r\n            zoom *= offsetZoom;\r\n            if ((offsetInfo.isCustomElement || offsetZoom !== 1) && isStatic) {\r\n                offsetLeft -= offsetParent.offsetLeft;\r\n                offsetTop -= offsetParent.offsetTop;\r\n            }\r\n            else if (IS_FIREFOX || IS_CHROMIUM109) {\r\n                var parentSlotElement = offsetInfo.parentSlotElement;\r\n                if (parentSlotElement) {\r\n                    var customOffsetParent = offsetParent;\r\n                    var customOffsetLeft = 0;\r\n                    var customOffsetTop = 0;\r\n                    while (customOffsetParent) {\r\n                        if (!getShadowRoot(customOffsetParent)) {\r\n                            break;\r\n                        }\r\n                        customOffsetLeft += customOffsetParent.offsetLeft;\r\n                        customOffsetTop += customOffsetParent.offsetTop;\r\n                        customOffsetParent = customOffsetParent.offsetParent;\r\n                    }\r\n                    offsetLeft -= customOffsetLeft;\r\n                    offsetTop -= customOffsetTop;\r\n                }\r\n            }\r\n        }\r\n        if (IS_WEBKIT && !IS_SAFARI_ABOVE15\r\n            && hasOffset && !isSVG && isStatic\r\n            && (position === \"relative\" || position === \"static\")) {\r\n            offsetLeft -= offsetParent.offsetLeft;\r\n            offsetTop -= offsetParent.offsetTop;\r\n            requestEnd = requestEnd || isOffsetEnd;\r\n        }\r\n        if (isFixed) {\r\n            if (hasOffset && fixedInfo.hasTransform) {\r\n                // border\r\n                fixedClientLeft = offsetParent.clientLeft;\r\n                fixedClientTop = offsetParent.clientTop;\r\n            }\r\n        }\r\n        else {\r\n            if (hasOffset && offsetContainer !== offsetParent) {\r\n                // border\r\n                parentClientLeft = offsetParent.clientLeft;\r\n                parentClientTop = offsetParent.clientTop;\r\n            }\r\n            if (hasOffset && offsetParent === documentElement) {\r\n                var margin = getBodyOffset(el, false);\r\n                offsetLeft += margin[0];\r\n                offsetTop += margin[1];\r\n            }\r\n        }\r\n        matrixes.push({\r\n            type: \"target\",\r\n            target: el,\r\n            matrix: getAbsoluteMatrix(matrix, n, origin_1),\r\n        });\r\n        if (individualTransforms.length) {\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createIdentityMatrix(n),\r\n            });\r\n            matrixes.push({\r\n                type: \"target\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(parseMat(individualTransforms), n, origin_1),\r\n            });\r\n        }\r\n        if (hasOffset) {\r\n            var isElementTarget = el === target;\r\n            var scrollLeft = isElementTarget ? 0 : el.scrollLeft;\r\n            var scrollTop = isElementTarget ? 0 : el.scrollTop;\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                matrix: createOriginMatrix([\r\n                    offsetLeft - scrollLeft + parentClientLeft - fixedClientLeft,\r\n                    offsetTop - scrollTop + parentClientTop - fixedClientTop,\r\n                ], n),\r\n            });\r\n        }\r\n        else {\r\n            // svg\r\n            matrixes.push({\r\n                type: \"offset\",\r\n                target: el,\r\n                origin: origin_1,\r\n            });\r\n        }\r\n        // transform으로 계산되지 않는 zoom을 위한 (0, 0) 을 기준 matrix 추가.\r\n        if (targetZoom !== 1) {\r\n            matrixes.push({\r\n                type: \"zoom\",\r\n                target: el,\r\n                matrix: getAbsoluteMatrix(createScaleMatrix([targetZoom, targetZoom], n), n, [0, 0]),\r\n            });\r\n        }\r\n        if (!targetMatrix) {\r\n            targetMatrix = matrix;\r\n        }\r\n        if (!transformOrigin) {\r\n            transformOrigin = origin_1;\r\n        }\r\n        if (!targetTransformOrigin) {\r\n            targetTransformOrigin = targetOrigin;\r\n        }\r\n        if (isEnd || isFixed) {\r\n            break;\r\n        }\r\n        else {\r\n            el = offsetParent;\r\n            requestEnd = isOffsetEnd;\r\n        }\r\n        if (!checkContainer || el === documentElement) {\r\n            isEnd = requestEnd;\r\n        }\r\n    }\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(n);\r\n    }\r\n    if (!transformOrigin) {\r\n        transformOrigin = [0, 0];\r\n    }\r\n    if (!targetTransformOrigin) {\r\n        targetTransformOrigin = [0, 0];\r\n    }\r\n    return {\r\n        zoom: zoom,\r\n        offsetContainer: offsetContainer,\r\n        matrixes: matrixes,\r\n        targetMatrix: targetMatrix,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetTransformOrigin,\r\n        is3d: is3d,\r\n        hasFixed: hasFixed,\r\n    };\r\n}\n\nvar cacheStyleMap = null;\r\nvar clientRectStyleMap = null;\r\nvar matrixContainerInfos = null;\r\nfunction setStoreCache(useCache) {\r\n    if (useCache) {\r\n        if (window.Map) {\r\n            cacheStyleMap = new Map();\r\n            clientRectStyleMap = new Map();\r\n        }\r\n        matrixContainerInfos = [];\r\n    }\r\n    else {\r\n        cacheStyleMap = null;\r\n        matrixContainerInfos = null;\r\n        clientRectStyleMap = null;\r\n    }\r\n}\r\nfunction getCachedClientRect(el) {\r\n    var clientRect = clientRectStyleMap === null || clientRectStyleMap === void 0 ? void 0 : clientRectStyleMap.get(el);\r\n    if (clientRect) {\r\n        return clientRect;\r\n    }\r\n    var nextClientRect = getClientRect(el, true);\r\n    if (clientRectStyleMap) {\r\n        clientRectStyleMap.set(el, nextClientRect);\r\n    }\r\n    return nextClientRect;\r\n}\r\nfunction getCachedMatrixContainerInfo(target, container) {\r\n    if (matrixContainerInfos) {\r\n        var result_1 = find(matrixContainerInfos, function (info) { return info[0][0] == target && info[0][1] == container; });\r\n        if (result_1) {\r\n            return result_1[1];\r\n        }\r\n    }\r\n    var result = getMatrixStackInfo(target, container, true);\r\n    if (matrixContainerInfos) {\r\n        matrixContainerInfos.push([[target, container], result]);\r\n    }\r\n    return result;\r\n}\r\nfunction getCachedStyle(element) {\r\n    var cache = cacheStyleMap === null || cacheStyleMap === void 0 ? void 0 : cacheStyleMap.get(element);\r\n    if (!cache) {\r\n        var nextStyle_1 = getWindow(element).getComputedStyle(element);\r\n        if (!cacheStyleMap) {\r\n            return function (property) {\r\n                return nextStyle_1[property];\r\n            };\r\n        }\r\n        cache = {\r\n            style: nextStyle_1,\r\n            cached: {},\r\n        };\r\n        cacheStyleMap.set(element, cache);\r\n    }\r\n    var cached = cache.cached;\r\n    var style = cache.style;\r\n    return function (property) {\r\n        if (!(property in cached)) {\r\n            cached[property] = style[property];\r\n        }\r\n        return cached[property];\r\n    };\r\n}\n\nfunction fillChildEvents(moveable, name, e) {\r\n    var datas = e.originalDatas;\r\n    datas.groupable = datas.groupable || {};\r\n    var groupableDatas = datas.groupable;\r\n    groupableDatas.childDatas = groupableDatas.childDatas || [];\r\n    var childDatas = groupableDatas.childDatas;\r\n    return moveable.moveables.map(function (_, i) {\r\n        childDatas[i] = childDatas[i] || {};\r\n        childDatas[i][name] = childDatas[i][name] || {};\r\n        return __assign(__assign({}, e), { isRequestChild: true, datas: childDatas[i][name], originalDatas: childDatas[i] });\r\n    });\r\n}\r\nfunction triggerChildGesto(moveable, able, type, delta, e, isConvert, ableName) {\r\n    var isStart = !!type.match(/Start$/g);\r\n    var isEnd = !!type.match(/End$/g);\r\n    var isPinch = e.isPinch;\r\n    var datas = e.datas;\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childEvents = [];\r\n    var eventParams = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var state = childMoveable.state;\r\n        var gestos = state.gestos;\r\n        var childEvent = ev;\r\n        if (isStart) {\r\n            childEvent = new CustomGesto(ableName).dragStart(delta, ev);\r\n            childEvents.push(childEvent);\r\n        }\r\n        else {\r\n            if (!gestos[ableName]) {\r\n                gestos[ableName] = datas.childGestos[i];\r\n            }\r\n            if (!gestos[ableName]) {\r\n                return;\r\n            }\r\n            childEvent = setCustomDrag(ev, state, delta, isPinch, isConvert, ableName);\r\n            childEvents.push(childEvent);\r\n        }\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        if (isEnd) {\r\n            gestos[ableName] = null;\r\n        }\r\n        return result;\r\n    });\r\n    if (isStart) {\r\n        datas.childGestos = moveables.map(function (child) { return child.state.gestos[ableName]; });\r\n    }\r\n    return {\r\n        eventParams: eventParams,\r\n        childEvents: childEvents,\r\n    };\r\n}\r\nfunction triggerChildAbles(moveable, able, type, e, eachEvent, callback) {\r\n    if (eachEvent === void 0) { eachEvent = function (_, ev) { return ev; }; }\r\n    var isEnd = !!type.match(/End$/g);\r\n    var events = fillChildEvents(moveable, able.name, e);\r\n    var moveables = moveable.moveables;\r\n    var childs = events.map(function (ev, i) {\r\n        var childMoveable = moveables[i];\r\n        var childEvent = ev;\r\n        childEvent = eachEvent(childMoveable, ev);\r\n        var result = able[type](childMoveable, __assign(__assign({}, childEvent), { parentFlag: true }));\r\n        result && callback && callback(childMoveable, ev, result, i);\r\n        if (isEnd) {\r\n            childMoveable.state.gestos = {};\r\n        }\r\n        return result;\r\n    });\r\n    return childs;\r\n}\r\nfunction startChildDist(moveable, child, parentDatas, childEvent) {\r\n    var fixedDirection = parentDatas.fixedDirection;\r\n    var fixedPosition = parentDatas.fixedPosition;\r\n    var startPositions = childEvent.datas.startPositions || getAbsolutePosesByState(child.state);\r\n    var pos = getPosByDirection(startPositions, fixedDirection);\r\n    var _a = __read(calculate(createRotateMatrix(-moveable.rotation / 180 * Math.PI, 3), [pos[0] - fixedPosition[0], pos[1] - fixedPosition[1], 1], 3), 2), originalX = _a[0], originalY = _a[1];\r\n    childEvent.datas.originalX = originalX;\r\n    childEvent.datas.originalY = originalY;\r\n    return childEvent;\r\n}\n\nfunction renderDirectionControlsByInfos(moveable, ableName, renderDirections, React) {\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var zoom = getProps(moveable.props, ableName).zoom;\r\n    var degRotation = absDegree(rotationRad / Math.PI * 180);\r\n    var directionMap = {};\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    renderDirections.forEach(function (_a) {\r\n        var dir = _a.dir;\r\n        directionMap[dir] = true;\r\n    });\r\n    var directionSign = sign(direction);\r\n    return renderDirections.map(function (_a) {\r\n        var data = _a.data, classNames = _a.classNames, dir = _a.dir;\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes || !directionMap[dir]) {\r\n            return null;\r\n        }\r\n        renderDirectionMap[dir] = true;\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var dataAttrs = {};\r\n        getKeys(data).forEach(function (name) {\r\n            dataAttrs[\"data-\".concat(name)] = data[name];\r\n        });\r\n        return (React.createElement(\"div\", __assign({ className: prefix.apply(void 0, __spreadArray([\"control\", \"direction\", dir, ableName], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir }, dataAttrs, { key: \"direction-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) })));\r\n    });\r\n}\r\nfunction renderDirectionControls(moveable, defaultDirections, ableName, React) {\r\n    var _a = getProps(moveable.props, ableName), _b = _a.renderDirections, directions = _b === void 0 ? defaultDirections : _b, displayAroundControls = _a.displayAroundControls;\r\n    if (!directions) {\r\n        return [];\r\n    }\r\n    var renderDirections = directions === true ? DIRECTIONS : directions;\r\n    return __spreadArray(__spreadArray([], __read((displayAroundControls ? renderAroundControls(moveable, React, ableName, renderDirections) : [])), false), __read(renderDirectionControlsByInfos(moveable, ableName, renderDirections.map(function (dir) {\r\n        return {\r\n            data: {},\r\n            classNames: [],\r\n            dir: dir,\r\n        };\r\n    }), React)), false);\r\n}\r\nfunction renderLine(React, direction, pos1, pos2, zoom, key) {\r\n    var classNames = [];\r\n    for (var _i = 6; _i < arguments.length; _i++) {\r\n        classNames[_i - 6] = arguments[_i];\r\n    }\r\n    var rad = getRad(pos1, pos2);\r\n    var rotation = direction ? (throttle(rad / Math.PI * 180, 15)) % 180 : -1;\r\n    return React.createElement(\"div\", { key: \"line-\".concat(key), className: prefix.apply(void 0, __spreadArray([\"line\", \"direction\", direction ? \"edge\" : \"\", direction], __read(classNames), false)), \"data-rotation\": rotation, \"data-line-key\": key, \"data-direction\": direction, style: getLineStyle(pos1, pos2, zoom, rad) });\r\n}\r\nfunction renderEdgeLines(React, ableName, edge, poses, zoom) {\r\n    var directions = edge === true ? DIRECTIONS4 : edge;\r\n    return directions.map(function (direction, i) {\r\n        var _a = __read(DIRECTION_INDEXES[direction], 2), index1 = _a[0], index2 = _a[1];\r\n        if (index2 == null) {\r\n            return;\r\n        }\r\n        return renderLine(React, direction, poses[index1], poses[index2], zoom, \"\".concat(ableName, \"Edge\").concat(i), ableName);\r\n    }).filter(Boolean);\r\n}\r\nfunction getRenderDirections(ableName) {\r\n    return function (moveable, React) {\r\n        var edge = getProps(moveable.props, ableName).edge;\r\n        if (edge && (edge === true || edge.length)) {\r\n            return __spreadArray(__spreadArray([], __read(renderEdgeLines(React, ableName, edge, moveable.getState().renderPoses, moveable.props.zoom)), false), __read(renderDiagonalDirections(moveable, ableName, React)), false);\r\n        }\r\n        return renderAllDirections(moveable, ableName, React);\r\n    };\r\n}\r\nfunction renderAllDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, DIRECTIONS, ableName, React);\r\n}\r\nfunction renderDiagonalDirections(moveable, ableName, React) {\r\n    return renderDirectionControls(moveable, [\"nw\", \"ne\", \"sw\", \"se\"], ableName, React);\r\n}\r\nfunction renderAroundControls(moveable, React, ableName, renderDirections) {\r\n    var renderState = moveable.renderState;\r\n    if (!renderState.renderDirectionMap) {\r\n        renderState.renderDirectionMap = {};\r\n    }\r\n    var _a = moveable.getState(), renderPoses = _a.renderPoses, rotationRad = _a.rotation, direction = _a.direction;\r\n    var renderDirectionMap = renderState.renderDirectionMap;\r\n    var zoom = moveable.props.zoom;\r\n    var directionSign = sign(direction);\r\n    var degRotation = rotationRad / Math.PI * 180;\r\n    return (renderDirections || getKeys(renderDirectionMap)).map(function (dir) {\r\n        var indexes = DIRECTION_INDEXES[dir];\r\n        if (!indexes) {\r\n            return null;\r\n        }\r\n        var directionRotation = (throttle(degRotation, 15) + directionSign * DIRECTION_ROTATIONS[dir] + 720) % 180;\r\n        var classNames = [\"around-control\"];\r\n        if (ableName) {\r\n            classNames.push(\"direction\", ableName);\r\n        }\r\n        return (React.createElement(\"div\", { className: prefix.apply(void 0, __spreadArray([], __read(classNames), false)), \"data-rotation\": directionRotation, \"data-direction\": dir, key: \"direction-around-\".concat(dir), style: getControlTransform.apply(void 0, __spreadArray([rotationRad, zoom], __read(indexes.map(function (index) { return renderPoses[index]; })), false)) }));\r\n    });\r\n}\n\nfunction checkBoundPoses(bounds, verticalPoses, horizontalPoses) {\r\n    var _a = bounds || {}, _b = _a.position, position = _b === void 0 ? \"client\" : _b, _c = _a.left, left = _c === void 0 ? -Infinity : _c, _d = _a.top, top = _d === void 0 ? -Infinity : _d, _e = _a.right, right = _e === void 0 ? Infinity : _e, _f = _a.bottom, bottom = _f === void 0 ? Infinity : _f;\r\n    var nextBounds = {\r\n        position: position,\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n    };\r\n    return {\r\n        vertical: checkBounds(nextBounds, verticalPoses, true),\r\n        horizontal: checkBounds(nextBounds, horizontalPoses, false),\r\n    };\r\n}\r\nfunction getBounds(moveable, externalBounds) {\r\n    var _a = moveable.state, _b = _a.containerClientRect, containerHeight = _b.clientHeight, containerWidth = _b.clientWidth, clientLeft = _b.clientLeft, clientTop = _b.clientTop, _c = _a.snapOffset, snapOffsetLeft = _c.left, snapOffsetTop = _c.top, snapOffsetRight = _c.right, snapOffsetBottom = _c.bottom;\r\n    var bounds = externalBounds || moveable.props.bounds || {};\r\n    var position = bounds.position || \"client\";\r\n    var isCSS = position === \"css\";\r\n    var _d = bounds.left, left = _d === void 0 ? -Infinity : _d, _e = bounds.top, top = _e === void 0 ? -Infinity : _e;\r\n    var _f = bounds.right, right = _f === void 0 ? isCSS ? -Infinity : Infinity : _f, _g = bounds.bottom, bottom = _g === void 0 ? isCSS ? -Infinity : Infinity : _g;\r\n    if (isCSS) {\r\n        right = containerWidth + snapOffsetRight - snapOffsetLeft - right;\r\n        bottom = containerHeight + snapOffsetBottom - snapOffsetTop - bottom;\r\n    }\r\n    return {\r\n        left: left + snapOffsetLeft - clientLeft,\r\n        right: right + snapOffsetLeft - clientLeft,\r\n        top: top + snapOffsetTop - clientTop,\r\n        bottom: bottom + snapOffsetTop - clientTop,\r\n    };\r\n}\r\nfunction checkBoundKeepRatio(moveable, startPos, endPos) {\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var _b = __read(endPos, 2), endX = _b[0], endY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    var verticalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isBound: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    else if (dx === 0) {\r\n        if (isBottom) {\r\n            if (bottom < endY) {\r\n                horizontalInfo.pos = bottom;\r\n                horizontalInfo.offset = endY - bottom;\r\n            }\r\n        }\r\n        else {\r\n            if (top > endY) {\r\n                horizontalInfo.pos = top;\r\n                horizontalInfo.offset = endY - top;\r\n            }\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isRight) {\r\n            if (right < endX) {\r\n                verticalInfo.pos = right;\r\n                verticalInfo.offset = endX - right;\r\n            }\r\n        }\r\n        else {\r\n            if (left > endX) {\r\n                verticalInfo.pos = left;\r\n                verticalInfo.offset = endX - left;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isBound = false;\r\n        if (isRight && right <= endX) {\r\n            y = a * right + b;\r\n            x = right;\r\n            isBound = true;\r\n        }\r\n        else if (!isRight && endX <= left) {\r\n            y = a * left + b;\r\n            x = left;\r\n            isBound = true;\r\n        }\r\n        if (isBound) {\r\n            if (y < top || y > bottom) {\r\n                isBound = false;\r\n            }\r\n        }\r\n        if (!isBound) {\r\n            if (isBottom && bottom <= endY) {\r\n                y = bottom;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n            else if (!isBottom && endY <= top) {\r\n                y = top;\r\n                x = (y - b) / a;\r\n                isBound = true;\r\n            }\r\n        }\r\n        if (isBound) {\r\n            verticalInfo.isBound = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isBound = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction checkBounds(bounds, poses, isVertical) {\r\n    // 0   [100 - 200]  300\r\n    var startBoundPos = bounds[isVertical ? \"left\" : \"top\"];\r\n    var endBoundPos = bounds[isVertical ? \"right\" : \"bottom\"];\r\n    // 450\r\n    var minPos = Math.min.apply(Math, __spreadArray([], __read(poses), false));\r\n    var maxPos = Math.max.apply(Math, __spreadArray([], __read(poses), false));\r\n    var boundInfos = [];\r\n    if (startBoundPos + 1 > minPos) {\r\n        boundInfos.push({\r\n            direction: \"start\",\r\n            isBound: true,\r\n            offset: minPos - startBoundPos,\r\n            pos: startBoundPos,\r\n        });\r\n    }\r\n    if (endBoundPos - 1 < maxPos) {\r\n        boundInfos.push({\r\n            direction: \"end\",\r\n            isBound: true,\r\n            offset: maxPos - endBoundPos,\r\n            pos: endBoundPos,\r\n        });\r\n    }\r\n    if (!boundInfos.length) {\r\n        boundInfos.push({\r\n            isBound: false,\r\n            offset: 0,\r\n            pos: 0,\r\n        });\r\n    }\r\n    return boundInfos.sort(function (a, b) { return abs(b.offset) - abs(a.offset); });\r\n}\r\nfunction isBoundRotate$1(relativePoses, boundRect, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return nextPoses.some(function (pos) {\r\n        return (pos[0] < boundRect.left && abs(pos[0] - boundRect.left) > 0.1)\r\n            || (pos[0] > boundRect.right && abs(pos[0] - boundRect.right) > 0.1)\r\n            || (pos[1] < boundRect.top && abs(pos[1] - boundRect.top) > 0.1)\r\n            || (pos[1] > boundRect.bottom && abs(pos[1] - boundRect.bottom) > 0.1);\r\n    });\r\n}\r\nfunction boundRotate(vec, boundPos, index) {\r\n    var r = getDistSize(vec);\r\n    var nextPos = Math.sqrt(r * r - boundPos * boundPos) || 0;\r\n    return [nextPos, -nextPos].sort(function (a, b) {\r\n        return abs(a - vec[index ? 0 : 1]) - abs(b - vec[index ? 0 : 1]);\r\n    }).map(function (pos) {\r\n        return getRad([0, 0], index ? [pos, boundPos] : [boundPos, pos]);\r\n    });\r\n}\r\nfunction checkRotateBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    if (!moveable.props.bounds) {\r\n        return [];\r\n    }\r\n    var rad = rotation * Math.PI / 180;\r\n    var _a = getBounds(moveable), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = right - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = bottom - origin[1];\r\n    var boundRect = {\r\n        left: relativeLeft,\r\n        top: relativeTop,\r\n        right: relativeRight,\r\n        bottom: relativeBottom,\r\n    };\r\n    if (!isBoundRotate$1(nextPoses, boundRect, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    [\r\n        [relativeLeft, 0],\r\n        [relativeRight, 0],\r\n        [relativeTop, 1],\r\n        [relativeBottom, 1],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 2), boundPos = _b[0], index = _b[1];\r\n        nextPoses.forEach(function (nextPos) {\r\n            var relativeRad1 = getRad([0, 0], nextPos);\r\n            result.push.apply(result, __spreadArray([], __read(boundRotate(nextPos, boundPos, index)\r\n                .map(function (relativeRad2) { return rad + relativeRad2 - relativeRad1; })\r\n                .filter(function (nextRad) { return !isBoundRotate$1(prevPoses, boundRect, nextRad); })\r\n                .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n        });\r\n    });\r\n    return result;\r\n}\n\nvar VERTICAL_NAMES = [\"left\", \"right\", \"center\"];\r\nvar HORIZONTAL_NAMES = [\"top\", \"bottom\", \"middle\"];\r\nvar SNAP_SKIP_NAMES_MAP = {\r\n    \"left\": \"start\",\r\n    \"right\": \"end\",\r\n    \"center\": \"center\",\r\n    \"top\": \"start\",\r\n    \"bottom\": \"end\",\r\n    \"middle\": \"center\",\r\n};\r\nvar VERTICAL_NAMES_MAP = {\r\n    start: \"left\",\r\n    end: \"right\",\r\n    center: \"center\",\r\n};\r\nvar HORIZONTAL_NAMES_MAP = {\r\n    start: \"top\",\r\n    end: \"bottom\",\r\n    center: \"middle\",\r\n};\r\nfunction getInitialBounds() {\r\n    return {\r\n        left: false,\r\n        top: false,\r\n        right: false,\r\n        bottom: false,\r\n    };\r\n}\r\nfunction hasGuidelines(moveable, ableName) {\r\n    var _a = moveable.props, snappable = _a.snappable, bounds = _a.bounds, innerBounds = _a.innerBounds, verticalGuidelines = _a.verticalGuidelines, horizontalGuidelines = _a.horizontalGuidelines, snapGridWidth = _a.snapGridWidth, snapGridHeight = _a.snapGridHeight, _b = moveable.state, guidelines = _b.guidelines, enableSnap = _b.enableSnap;\r\n    if (!snappable ||\r\n        !enableSnap ||\r\n        (ableName && snappable !== true && snappable.indexOf(ableName) < 0)) {\r\n        return false;\r\n    }\r\n    if (snapGridWidth ||\r\n        snapGridHeight ||\r\n        bounds ||\r\n        innerBounds ||\r\n        (guidelines && guidelines.length) ||\r\n        (verticalGuidelines && verticalGuidelines.length) ||\r\n        (horizontalGuidelines && horizontalGuidelines.length)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction getSnapDirections(snapDirections) {\r\n    if (snapDirections === false) {\r\n        return {};\r\n    }\r\n    else if (snapDirections === true || !snapDirections) {\r\n        return { left: true, right: true, top: true, bottom: true };\r\n    }\r\n    return snapDirections;\r\n}\r\nfunction mapSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapDirections = getSnapDirections(snapDirections);\r\n    var nextSnapPoses = {};\r\n    for (var name_1 in nextSnapDirections) {\r\n        if (name_1 in snapPoses && nextSnapDirections[name_1]) {\r\n            nextSnapPoses[name_1] = snapPoses[name_1];\r\n        }\r\n    }\r\n    return nextSnapPoses;\r\n}\r\nfunction splitSnapDirectionPoses(snapDirections, snapPoses) {\r\n    var nextSnapPoses = mapSnapDirectionPoses(snapDirections, snapPoses);\r\n    var horizontalNames = HORIZONTAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    var verticalNames = VERTICAL_NAMES.filter(function (name) { return name in nextSnapPoses; });\r\n    return {\r\n        horizontalNames: horizontalNames,\r\n        verticalNames: verticalNames,\r\n        horizontal: horizontalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n        vertical: verticalNames.map(function (name) { return nextSnapPoses[name]; }),\r\n    };\r\n}\r\nfunction calculateContainerPos(rootMatrix, containerRect, n) {\r\n    var clientPos = calculatePosition(rootMatrix, [containerRect.clientLeft, containerRect.clientTop], n);\r\n    return [\r\n        containerRect.left + clientPos[0],\r\n        containerRect.top + clientPos[1],\r\n    ];\r\n}\r\nfunction solveLineConstants(_a) {\r\n    var _b = __read(_a, 2), point1 = _b[0], point2 = _b[1];\r\n    var dx = point2[0] - point1[0];\r\n    var dy = point2[1] - point1[1];\r\n    if (Math.abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (Math.abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    // b > 0\r\n    // ax + by + c = 0\r\n    var a = 0;\r\n    var b = 0;\r\n    var c = 0;\r\n    if (!dx) {\r\n        // -x + 1 = 0\r\n        a = -1;\r\n        c = point1[0];\r\n    }\r\n    else if (!dy) {\r\n        // y - 1 = 0\r\n        b = 1;\r\n        c = -point1[1];\r\n    }\r\n    else {\r\n        // y = -a(x - x1) + y1\r\n        // ax + y + a * x1 - y1 = 0\r\n        a = -dy / dx;\r\n        b = 1;\r\n        c = a * point1[0] - point1[1];\r\n    }\r\n    return [a, b, c].map(function (v) { return throttle(v, TINY_NUM$1); });\r\n}\n\nvar NAME_snapRotationThreshold = \"snapRotationThreshold\";\r\nvar NAME_snapRotationDegrees = \"snapRotationDegrees\";\r\nvar NAME_snapHorizontalThreshold = \"snapHorizontalThreshold\";\r\nvar NAME_snapVerticalThreshold = \"snapVerticalThreshold\";\n\nfunction checkMoveableSnapPoses(moveable, posesX, posesY, dirXs, dirYs, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var _a;\r\n    if (dirXs === void 0) { dirXs = []; }\r\n    if (dirYs === void 0) { dirYs = []; }\r\n    var props = moveable.props;\r\n    var snapThresholdMultiples = ((_a = moveable.state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) || [1, 1];\r\n    var snapHorizontalThreshold = selectValue(customSnapHorizontalThreshold, props[NAME_snapHorizontalThreshold], 5);\r\n    var snapVerticalThreshold = selectValue(customSnapVerticalThreshold, props[NAME_snapVerticalThreshold], 5);\r\n    return checkSnapPoses(moveable.state.guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, snapThresholdMultiples);\r\n}\r\nfunction checkSnapPoses(guidelines, posesX, posesY, dirXs, dirYs, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    return {\r\n        vertical: checkSnap(guidelines, \"vertical\", posesX, snapVerticalThreshold * multiples[0], dirXs),\r\n        horizontal: checkSnap(guidelines, \"horizontal\", posesY, snapHorizontalThreshold * multiples[1], dirYs),\r\n    };\r\n}\r\nfunction checkSnapKeepRatio(moveable, startPos, endPos) {\r\n    var _a = __read(endPos, 2), endX = _a[0], endY = _a[1];\r\n    var _b = __read(startPos, 2), startX = _b[0], startY = _b[1];\r\n    var _c = __read(minus(endPos, startPos), 2), dx = _c[0], dy = _c[1];\r\n    var isBottom = dy > 0;\r\n    var isRight = dx > 0;\r\n    dx = getTinyDist(dx);\r\n    dy = getTinyDist(dy);\r\n    var verticalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    var horizontalInfo = {\r\n        isSnap: false,\r\n        offset: 0,\r\n        pos: 0,\r\n    };\r\n    if (dx === 0 && dy === 0) {\r\n        return {\r\n            vertical: verticalInfo,\r\n            horizontal: horizontalInfo,\r\n        };\r\n    }\r\n    var _d = checkMoveableSnapPoses(moveable, dx ? [endX] : [], dy ? [endY] : [], [], [], undefined, undefined), verticalSnapInfo = _d.vertical, horizontalSnapInfo = _d.horizontal;\r\n    verticalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isRight ? pos >= startX : pos <= startX;\r\n    });\r\n    horizontalSnapInfo.posInfos.filter(function (_a) {\r\n        var pos = _a.pos;\r\n        return isBottom ? pos >= startY : pos <= startY;\r\n    });\r\n    verticalSnapInfo.isSnap = verticalSnapInfo.posInfos.length > 0;\r\n    horizontalSnapInfo.isSnap = horizontalSnapInfo.posInfos.length > 0;\r\n    var _e = getNearestSnapGuidelineInfo(verticalSnapInfo), isVerticalSnap = _e.isSnap, verticalGuideline = _e.guideline;\r\n    var _f = getNearestSnapGuidelineInfo(horizontalSnapInfo), isHorizontalSnap = _f.isSnap, horizontalGuideline = _f.guideline;\r\n    var horizontalPos = isHorizontalSnap ? horizontalGuideline.pos[1] : 0;\r\n    var verticalPos = isVerticalSnap ? verticalGuideline.pos[0] : 0;\r\n    if (dx === 0) {\r\n        if (isHorizontalSnap) {\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = horizontalGuideline.pos[1];\r\n            horizontalInfo.offset = endY - horizontalInfo.pos;\r\n        }\r\n    }\r\n    else if (dy === 0) {\r\n        if (isVerticalSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = verticalPos;\r\n            verticalInfo.offset = endX - verticalPos;\r\n        }\r\n    }\r\n    else {\r\n        // y - y1 = a * (x - x1)\r\n        var a = dy / dx;\r\n        var b = endPos[1] - a * endX;\r\n        var y = 0;\r\n        var x = 0;\r\n        var isSnap = false;\r\n        if (isVerticalSnap) {\r\n            x = verticalPos;\r\n            y = a * x + b;\r\n            isSnap = true;\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            y = horizontalPos;\r\n            x = (y - b) / a;\r\n            isSnap = true;\r\n        }\r\n        if (isSnap) {\r\n            verticalInfo.isSnap = true;\r\n            verticalInfo.pos = x;\r\n            verticalInfo.offset = endX - x;\r\n            horizontalInfo.isSnap = true;\r\n            horizontalInfo.pos = y;\r\n            horizontalInfo.offset = endY - y;\r\n        }\r\n    }\r\n    return {\r\n        vertical: verticalInfo,\r\n        horizontal: horizontalInfo,\r\n    };\r\n}\r\nfunction getStringDirection(dir) {\r\n    var stringDirection = \"\";\r\n    if (dir === -1 || dir === \"top\" || dir === \"left\") {\r\n        stringDirection = \"start\";\r\n    }\r\n    else if (dir === 0 || dir === \"center\" || dir === \"middle\") {\r\n        stringDirection = \"center\";\r\n    }\r\n    else if (dir === 1 || dir === \"right\" || dir === \"bottom\") {\r\n        stringDirection = \"end\";\r\n    }\r\n    return stringDirection;\r\n}\r\nfunction checkSnaps(moveable, rect, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var poses = splitSnapDirectionPoses(moveable.props.snapDirections, rect);\r\n    var result = checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, poses.verticalNames.map(function (name) { return getStringDirection(name); }), poses.horizontalNames.map(function (name) { return getStringDirection(name); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var horizontalDirection = getStringDirection(poses.horizontalNames[result.horizontal.index]);\r\n    var verticalDirection = getStringDirection(poses.verticalNames[result.vertical.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction getNearestSnapGuidelineInfo(snapInfo) {\r\n    var isSnap = snapInfo.isSnap;\r\n    if (!isSnap) {\r\n        return {\r\n            isSnap: false,\r\n            offset: 0,\r\n            dist: -1,\r\n            pos: 0,\r\n            guideline: null,\r\n        };\r\n    }\r\n    var posInfo = snapInfo.posInfos[0];\r\n    var guidelineInfo = posInfo.guidelineInfos[0];\r\n    var offset = guidelineInfo.offset;\r\n    var dist = guidelineInfo.dist;\r\n    var guideline = guidelineInfo.guideline;\r\n    return {\r\n        isSnap: isSnap,\r\n        offset: offset,\r\n        dist: dist,\r\n        pos: posInfo.pos,\r\n        guideline: guideline,\r\n    };\r\n}\r\nfunction checkSnap(guidelines, targetType, targetPoses, snapThreshold, dirs) {\r\n    var _a, _b;\r\n    if (dirs === void 0) { dirs = []; }\r\n    if (!guidelines || !guidelines.length) {\r\n        return {\r\n            isSnap: false,\r\n            index: -1,\r\n            direction: \"\",\r\n            posInfos: [],\r\n        };\r\n    }\r\n    var isVertical = targetType === \"vertical\";\r\n    var posType = isVertical ? 0 : 1;\r\n    var snapPosInfos = targetPoses.map(function (targetPos, index) {\r\n        var direction = dirs[index] || \"\";\r\n        var guidelineInfos = guidelines.map(function (guideline) {\r\n            var pos = guideline.pos;\r\n            var offset = targetPos - pos[posType];\r\n            return {\r\n                offset: offset,\r\n                dist: abs(offset),\r\n                guideline: guideline,\r\n                direction: direction,\r\n            };\r\n        }).filter(function (_a) {\r\n            var guideline = _a.guideline, dist = _a.dist;\r\n            var type = guideline.type;\r\n            if (type !== targetType\r\n                || dist > snapThreshold) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }).sort(function (a, b) { return a.dist - b.dist; });\r\n        return {\r\n            pos: targetPos,\r\n            index: index,\r\n            guidelineInfos: guidelineInfos,\r\n            direction: direction,\r\n        };\r\n    }).filter(function (snapPosInfo) {\r\n        return snapPosInfo.guidelineInfos.length > 0;\r\n    }).sort(function (a, b) {\r\n        return a.guidelineInfos[0].dist - b.guidelineInfos[0].dist;\r\n    });\r\n    var isSnap = snapPosInfos.length > 0;\r\n    return {\r\n        isSnap: isSnap,\r\n        index: isSnap ? snapPosInfos[0].index : -1,\r\n        direction: (_b = (_a = snapPosInfos[0]) === null || _a === void 0 ? void 0 : _a.direction) !== null && _b !== void 0 ? _b : \"\",\r\n        posInfos: snapPosInfos,\r\n    };\r\n}\r\nfunction getSnapInfosByDirection(moveable, \r\n// pos1 pos2 pos3 pos4\r\nposes, snapDirection, customSnapVerticalThreshold, customSnapHorizontalThreshold) {\r\n    var dirs = [];\r\n    if (snapDirection[0] && snapDirection[1]) {\r\n        dirs = [\r\n            snapDirection,\r\n            [-snapDirection[0], snapDirection[1]],\r\n            [snapDirection[0], -snapDirection[1]],\r\n        ];\r\n    }\r\n    else if (!snapDirection[0] && !snapDirection[1]) {\r\n        [\r\n            [-1, -1],\r\n            [1, -1],\r\n            [1, 1],\r\n            [-1, 1],\r\n        ].forEach(function (dir, i, arr) {\r\n            var nextDir = (arr[i + 1] || arr[0]);\r\n            dirs.push(dir);\r\n            dirs.push([\r\n                (dir[0] + nextDir[0]) / 2,\r\n                (dir[1] + nextDir[1]) / 2,\r\n            ]);\r\n        });\r\n    }\r\n    else {\r\n        if (moveable.props.keepRatio) {\r\n            dirs.push([-1, -1], [-1, 1], [1, -1], [1, 1], snapDirection);\r\n        }\r\n        else {\r\n            dirs.push.apply(dirs, __spreadArray([], __read(getPosesByDirection([\r\n                [-1, -1],\r\n                [1, -1],\r\n                [-1, -1],\r\n                [1, 1],\r\n            ], snapDirection)), false));\r\n            if (dirs.length > 1) {\r\n                dirs.push([\r\n                    (dirs[0][0] + dirs[1][0]) / 2,\r\n                    (dirs[0][1] + dirs[1][1]) / 2,\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    var nextPoses = dirs.map(function (dir) { return getPosByDirection(poses, dir); });\r\n    var xs = nextPoses.map(function (pos) { return pos[0]; });\r\n    var ys = nextPoses.map(function (pos) { return pos[1]; });\r\n    var result = checkMoveableSnapPoses(moveable, xs, ys, dirs.map(function (dir) { return getStringDirection(dir[0]); }), dirs.map(function (dir) { return getStringDirection(dir[1]); }), customSnapVerticalThreshold, customSnapHorizontalThreshold);\r\n    var verticalDirection = getStringDirection(dirs.map(function (dir) { return dir[0]; })[result.vertical.index]);\r\n    var horizontalDirection = getStringDirection(dirs.map(function (dir) { return dir[1]; })[result.horizontal.index]);\r\n    return {\r\n        vertical: __assign(__assign({}, result.vertical), { direction: verticalDirection }),\r\n        horizontal: __assign(__assign({}, result.horizontal), { direction: horizontalDirection }),\r\n    };\r\n}\r\nfunction checkSnapBoundPriority(a, b) {\r\n    var aDist = abs(a.offset);\r\n    var bDist = abs(b.offset);\r\n    if (a.isBound && b.isBound) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isBound) {\r\n        return -1;\r\n    }\r\n    else if (b.isBound) {\r\n        return 1;\r\n    }\r\n    else if (a.isSnap && b.isSnap) {\r\n        return bDist - aDist;\r\n    }\r\n    else if (a.isSnap) {\r\n        return -1;\r\n    }\r\n    else if (b.isSnap) {\r\n        return 1;\r\n    }\r\n    else if (aDist < TINY_NUM) {\r\n        return 1;\r\n    }\r\n    else if (bDist < TINY_NUM) {\r\n        return -1;\r\n    }\r\n    return aDist - bDist;\r\n}\r\nfunction getNearOffsetInfo(offsets, index) {\r\n    return offsets.slice().sort(function (a, b) {\r\n        var aSign = a.sign[index];\r\n        var bSign = b.sign[index];\r\n        var aOffset = a.offset[index];\r\n        var bOffset = b.offset[index];\r\n        // -1 The positions of a and b do not change.\r\n        // 1 The positions of a and b are reversed.\r\n        if (!aSign) {\r\n            return 1;\r\n        }\r\n        else if (!bSign) {\r\n            return -1;\r\n        }\r\n        return checkSnapBoundPriority({ isBound: a.isBound, isSnap: a.isSnap, offset: aOffset }, { isBound: b.isBound, isSnap: b.isSnap, offset: bOffset });\r\n    })[0];\r\n}\r\nfunction getCheckSnapDirections(direction, fixedDirection, keepRatio) {\r\n    var directions = [];\r\n    // const fixedDirection = [-direction[0], -direction[1]];\r\n    if (keepRatio) {\r\n        if (abs(fixedDirection[0]) !== 1 || abs(fixedDirection[1]) !== 1) {\r\n            directions.push([fixedDirection, [-1, -1]], [fixedDirection, [-1, 1]], [fixedDirection, [1, -1]], [fixedDirection, [1, 1]]);\r\n        }\r\n        else {\r\n            directions.push([fixedDirection, [direction[0], -direction[1]]], [fixedDirection, [-direction[0], direction[1]]]);\r\n        }\r\n        directions.push([fixedDirection, direction]);\r\n    }\r\n    else {\r\n        if ((direction[0] && direction[1]) || (!direction[0] && !direction[1])) {\r\n            var endDirection_1 = direction[0] ? direction : [1, 1];\r\n            [1, -1].forEach(function (signX) {\r\n                [1, -1].forEach(function (signY) {\r\n                    var nextDirection = [signX * endDirection_1[0], signY * endDirection_1[1]];\r\n                    if (fixedDirection[0] === nextDirection[0]\r\n                        && fixedDirection[1] === nextDirection[1]) {\r\n                        return;\r\n                    }\r\n                    directions.push([fixedDirection, nextDirection]);\r\n                });\r\n            });\r\n        }\r\n        else if (direction[0]) {\r\n            var signs = abs(fixedDirection[0]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [fixedDirection[0], -1],\r\n                    [sign * direction[0], -1],\r\n                ], [\r\n                    [fixedDirection[0], 0],\r\n                    [sign * direction[0], 0],\r\n                ], [\r\n                    [fixedDirection[0], 1],\r\n                    [sign * direction[0], 1],\r\n                ]);\r\n            });\r\n        }\r\n        else if (direction[1]) {\r\n            var signs = abs(fixedDirection[1]) === 1 ? [1] : [1, -1];\r\n            signs.forEach(function (sign) {\r\n                directions.push([\r\n                    [-1, fixedDirection[1]],\r\n                    [-1, sign * direction[1]],\r\n                ], [\r\n                    [0, fixedDirection[1]],\r\n                    [0, sign * direction[1]],\r\n                ], [\r\n                    [1, fixedDirection[1]],\r\n                    [1, sign * direction[1]],\r\n                ]);\r\n            });\r\n        }\r\n    }\r\n    return directions;\r\n}\n\nfunction isStartLine(dot, line) {\r\n    // l    o     => true\r\n    // o    l    => false\r\n    var cx = average([line[0][0], line[1][0]]);\r\n    var cy = average([line[0][1], line[1][1]]);\r\n    return {\r\n        vertical: cx <= dot[0],\r\n        horizontal: cy <= dot[1],\r\n    };\r\n}\r\nfunction hitTestLine(dot, _a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM) {\r\n        dy = 0;\r\n    }\r\n    var test1;\r\n    var test2;\r\n    if (!dx) {\r\n        test1 = pos1[0];\r\n        test2 = dot[0];\r\n    }\r\n    else if (!dy) {\r\n        test1 = pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    else {\r\n        var a = dy / dx;\r\n        // y = a * (x - pos1) + pos1\r\n        test1 = a * (dot[0] - pos1[0]) + pos1[1];\r\n        test2 = dot[1];\r\n    }\r\n    return test1 - test2;\r\n}\r\nfunction isSameStartLine(dots, line, centerSign, error) {\r\n    if (error === void 0) { error = TINY_NUM; }\r\n    return dots.every(function (dot) {\r\n        var value = hitTestLine(dot, line);\r\n        var sign = value <= 0;\r\n        return sign === centerSign || abs(value) <= error;\r\n    });\r\n}\r\nfunction checkInnerBoundDot(pos, start, end, isStart, threshold) {\r\n    if (threshold === void 0) { threshold = 0; }\r\n    if ((isStart && start - threshold <= pos)\r\n        || (!isStart && pos <= end + threshold)) {\r\n        // false 402 565 602 => 37 ([0, 37])\r\n        // true 400 524.9712603540036 600 => 124 ([124, 0])\r\n        // true 400 410 600 => 10 ([10, 0])\r\n        return {\r\n            isBound: true,\r\n            offset: isStart ? start - pos : end - pos,\r\n        };\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction checkInnerBound(moveable, _a) {\r\n    var line = _a.line, centerSign = _a.centerSign, verticalSign = _a.verticalSign, horizontalSign = _a.horizontalSign, lineConstants = _a.lineConstants;\r\n    var bounds = moveable.props.innerBounds;\r\n    if (!bounds) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    if (isSameStartLine([\r\n        [left, top],\r\n        [left + width, top],\r\n        [left, top + height],\r\n        [left + width, top + height],\r\n    ], line, centerSign)) {\r\n        return {\r\n            isAllBound: false,\r\n            isBound: false,\r\n            isVerticalBound: false,\r\n            isHorizontalBound: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    // test vertical\r\n    var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, verticalSign);\r\n    var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, verticalSign);\r\n    // test horizontal\r\n    var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, horizontalSign);\r\n    var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, horizontalSign);\r\n    var isAllVerticalBound = topBoundInfo.isBound && bottomBoundInfo.isBound;\r\n    var isVerticalBound = topBoundInfo.isBound || bottomBoundInfo.isBound;\r\n    var isAllHorizontalBound = leftBoundInfo.isBound && rightBoundInfo.isBound;\r\n    var isHorizontalBound = leftBoundInfo.isBound || rightBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(topBoundInfo.offset, bottomBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(leftBoundInfo.offset, rightBoundInfo.offset);\r\n    var offset = [0, 0];\r\n    var isBound = false;\r\n    var isAllBound = false;\r\n    if (abs(horizontalOffset) < abs(verticalOffset)) {\r\n        offset = [verticalOffset, 0];\r\n        isBound = isVerticalBound;\r\n        isAllBound = isAllVerticalBound;\r\n    }\r\n    else {\r\n        offset = [0, horizontalOffset];\r\n        isBound = isHorizontalBound;\r\n        isAllBound = isAllHorizontalBound;\r\n    }\r\n    return {\r\n        isAllBound: isAllBound,\r\n        isVerticalBound: isVerticalBound,\r\n        isHorizontalBound: isHorizontalBound,\r\n        isBound: isBound,\r\n        offset: offset,\r\n    };\r\n}\r\nfunction checkLineBoundCollision(line, _a, boundLine, isStart, threshold, isRender) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    var dot1 = line[0];\r\n    // const dot2 = line[1];\r\n    var boundDot1 = boundLine[0];\r\n    var boundDot2 = boundLine[1];\r\n    // const dy1 = getTinyDist(dot2[1] - dot1[1]);\r\n    // const dx1 = getTinyDist(dot2[0] - dot1[0]);\r\n    var dy2 = getTinyDist(boundDot2[1] - boundDot1[1]);\r\n    var dx2 = getTinyDist(boundDot2[0] - boundDot1[0]);\r\n    var hasDx = b;\r\n    var hasDy = a;\r\n    var slope = -a / b;\r\n    // lineConstants\r\n    // ax + by + c = 0\r\n    // dx2 or dy2 is zero\r\n    if (!dx2) {\r\n        // vertical\r\n        // by + c = 0\r\n        if (isRender && !hasDy) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDx) {\r\n            // ax + by + c = 0\r\n            // const y = dy1 ? dy1 / dx1 * (boundDot1[0] - dot1[0]) + dot1[1] : dot1[1];\r\n            var y = slope * (boundDot1[0] - dot1[0]) + dot1[1];\r\n            // boundDot1[1] <= y  <= boundDot2[1]\r\n            return checkInnerBoundDot(y, boundDot1[1], boundDot2[1], isStart, threshold);\r\n        }\r\n        else {\r\n            // ax + c = 0\r\n            var offset = boundDot1[0] - dot1[0];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    else if (!dy2) {\r\n        // horizontal\r\n        if (isRender && !hasDx) {\r\n            // 90deg\r\n            return {\r\n                isBound: false,\r\n                offset: 0,\r\n            };\r\n        }\r\n        else if (hasDy) {\r\n            // y = a * (x - x1) + y1\r\n            // x = (y - y1) / a + x1\r\n            // const a = dy1 / dx1;\r\n            // const x = dx1 ? (boundDot1[1] - dot1[1]) / a + dot1[0] : dot1[0];\r\n            var x = (boundDot1[1] - dot1[1]) / slope + dot1[0];\r\n            // boundDot1[0] <= x && x <= boundDot2[0]\r\n            return checkInnerBoundDot(x, boundDot1[0], boundDot2[0], isStart, threshold);\r\n        }\r\n        else {\r\n            var offset = boundDot1[1] - dot1[1];\r\n            var isBound = abs(offset) <= (threshold || 0);\r\n            return {\r\n                isBound: isBound,\r\n                offset: isBound ? offset : 0,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isBound: false,\r\n        offset: 0,\r\n    };\r\n}\r\nfunction getInnerBoundInfo(moveable, lineInfos, datas) {\r\n    return lineInfos.map(function (info) {\r\n        var _a = checkInnerBound(moveable, info), isBound = _a.isBound, offset = _a.offset, isVerticalBound = _a.isVerticalBound, isHorizontalBound = _a.isHorizontalBound;\r\n        var multiple = info.multiple;\r\n        var sizeOffset = getDragDist({\r\n            datas: datas,\r\n            distX: offset[0],\r\n            distY: offset[1],\r\n        }).map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isBound,\r\n            isVerticalBound: isVerticalBound,\r\n            isHorizontalBound: isHorizontalBound,\r\n            isSnap: false,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getInnerBoundDragInfo(moveable, poses, datas) {\r\n    var _a;\r\n    var lines = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false).map(function (info) {\r\n        return __assign(__assign({}, info), { multiple: info.multiple.map(function (dir) { return abs(dir) * 2; }) });\r\n    });\r\n    var innerBoundInfo = getInnerBoundInfo(moveable, lines, datas);\r\n    var widthOffsetInfo = getNearOffsetInfo(innerBoundInfo, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(innerBoundInfo, 1);\r\n    var verticalOffset = 0;\r\n    var horizontalOffset = 0;\r\n    var isVerticalBound = widthOffsetInfo.isVerticalBound || heightOffsetInfo.isVerticalBound;\r\n    var isHorizontalBound = widthOffsetInfo.isHorizontalBound || heightOffsetInfo.isHorizontalBound;\r\n    if (isVerticalBound || isHorizontalBound) {\r\n        _a = __read(getInverseDragDist({\r\n            datas: datas,\r\n            distX: -widthOffsetInfo.offset[0],\r\n            distY: -heightOffsetInfo.offset[1],\r\n        }), 2), verticalOffset = _a[0], horizontalOffset = _a[1];\r\n    }\r\n    return {\r\n        vertical: {\r\n            isBound: isVerticalBound,\r\n            offset: verticalOffset,\r\n        },\r\n        horizontal: {\r\n            isBound: isHorizontalBound,\r\n            offset: horizontalOffset,\r\n        },\r\n    };\r\n}\r\nfunction getCheckSnapLineDirections(direction, keepRatio) {\r\n    var lineDirections = [];\r\n    var x = direction[0];\r\n    var y = direction[1];\r\n    if (x && y) {\r\n        lineDirections.push([[0, y * 2], direction, [-x, y]], [[x * 2, 0], direction, [x, -y]]);\r\n    }\r\n    else if (x) {\r\n        // vertcal\r\n        lineDirections.push([[x * 2, 0], [x, 1], [x, -1]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[0, -1], [x, -1], [-x, -1]], [[0, 1], [x, 1], [-x, 1]]);\r\n        }\r\n    }\r\n    else if (y) {\r\n        // horizontal\r\n        lineDirections.push([[0, y * 2], [1, y], [-1, y]]);\r\n        if (keepRatio) {\r\n            lineDirections.push([[-1, 0], [-1, y], [-1, -y]], [[1, 0], [1, y], [1, -y]]);\r\n        }\r\n    }\r\n    else {\r\n        // [0, 0] to all direction\r\n        lineDirections.push([[-1, 0], [-1, -1], [-1, 1]], [[1, 0], [1, -1], [1, 1]], [[0, -1], [-1, -1], [1, -1]], [[0, 1], [-1, 1], [1, 1]]);\r\n    }\r\n    return lineDirections;\r\n}\r\nfunction getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio) {\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    var virtualPoses = calculatePoses(allMatrix, 100, 100, is3d ? 4 : 3);\r\n    var center = getPosByDirection(virtualPoses, [0, 0]);\r\n    return getCheckSnapLineDirections(direction, keepRatio).map(function (_a) {\r\n        var _b = __read(_a, 3), multiple = _b[0], dir1 = _b[1], dir2 = _b[2];\r\n        var virtualLine = [\r\n            getPosByDirection(virtualPoses, dir1),\r\n            getPosByDirection(virtualPoses, dir2),\r\n        ];\r\n        var lineConstants = solveLineConstants(virtualLine);\r\n        var _c = isStartLine(center, virtualLine), verticalSign = _c.vertical, horizontalSign = _c.horizontal;\r\n        var centerSign = hitTestLine(center, virtualLine) <= 0;\r\n        return {\r\n            multiple: multiple,\r\n            centerSign: centerSign,\r\n            verticalSign: verticalSign,\r\n            horizontalSign: horizontalSign,\r\n            lineConstants: lineConstants,\r\n            line: [\r\n                getPosByDirection(poses, dir1),\r\n                getPosByDirection(poses, dir2),\r\n            ],\r\n        };\r\n    });\r\n}\r\nfunction isBoundRotate(relativePoses, boundDots, center, rad) {\r\n    var nextPoses = rad ? relativePoses.map(function (pos) { return rotate(pos, rad); }) : relativePoses;\r\n    return [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].some(function (line) {\r\n        var centerSign = hitTestLine(center, line) <= 0;\r\n        return !isSameStartLine(boundDots, line, centerSign);\r\n    });\r\n}\r\nfunction getDistPointLine(_a) {\r\n    // x = 0, y = 0\r\n    // d = (ax + by + c) / root(a2 + b2)\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return abs(pos1[0]);\r\n    }\r\n    if (!dy) {\r\n        return abs(pos1[1]);\r\n    }\r\n    // y - y1 = a(x - x1)\r\n    // 0 = ax -y + -a * x1 + y1\r\n    var a = dy / dx;\r\n    return abs((-a * pos1[0] + pos1[1]) / Math.sqrt(Math.pow(a, 2) + 1));\r\n}\r\nfunction solveReverseLine(_a) {\r\n    var _b = __read(_a, 2), pos1 = _b[0], pos2 = _b[1];\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (!dx) {\r\n        return [pos1[0], 0];\r\n    }\r\n    if (!dy) {\r\n        return [0, pos1[1]];\r\n    }\r\n    var a = dy / dx;\r\n    // y - y1 = a (x  - x1)\r\n    // y = ax - a * x1 + y1\r\n    var b = -a * pos1[0] + pos1[1];\r\n    // y = ax + b = -1/a x\r\n    // x = -b / (a + 1 / a)\r\n    // y = b / (1 + 1 / a^2)\r\n    return [\r\n        -b / (a + 1 / a),\r\n        b / ((a * a) + 1),\r\n    ];\r\n}\r\nfunction checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin, rotation) {\r\n    var bounds = moveable.props.innerBounds;\r\n    var rad = rotation * Math.PI / 180;\r\n    if (!bounds) {\r\n        return [];\r\n    }\r\n    var left = bounds.left, top = bounds.top, width = bounds.width, height = bounds.height;\r\n    var relativeLeft = left - origin[0];\r\n    var relativeRight = left + width - origin[0];\r\n    var relativeTop = top - origin[1];\r\n    var relativeBottom = top + height - origin[1];\r\n    var dots = [\r\n        [relativeLeft, relativeTop],\r\n        [relativeRight, relativeTop],\r\n        [relativeLeft, relativeBottom],\r\n        [relativeRight, relativeBottom],\r\n    ];\r\n    var center = getPosByDirection(nextPoses, [0, 0]);\r\n    if (!isBoundRotate(nextPoses, dots, center, 0)) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var dotInfos = dots.map(function (dot) { return [\r\n        getDistSize(dot),\r\n        getRad([0, 0], dot),\r\n    ]; });\r\n    [\r\n        [nextPoses[0], nextPoses[1]],\r\n        [nextPoses[1], nextPoses[3]],\r\n        [nextPoses[3], nextPoses[2]],\r\n        [nextPoses[2], nextPoses[0]],\r\n    ].forEach(function (line) {\r\n        var lineRad = getRad([0, 0], solveReverseLine(line));\r\n        var lineDist = getDistPointLine(line);\r\n        result.push.apply(result, __spreadArray([], __read(dotInfos\r\n            .filter(function (_a) {\r\n            var _b = __read(_a, 1), dotDist = _b[0];\r\n            return dotDist && lineDist <= dotDist;\r\n        })\r\n            .map(function (_a) {\r\n            var _b = __read(_a, 2), dotDist = _b[0], dotRad = _b[1];\r\n            var distRad = Math.acos(dotDist ? lineDist / dotDist : 0);\r\n            var nextRad1 = dotRad + distRad;\r\n            var nextRad2 = dotRad - distRad;\r\n            return [\r\n                rad + nextRad1 - lineRad,\r\n                rad + nextRad2 - lineRad,\r\n            ];\r\n        })\r\n            .reduce(function (prev, cur) {\r\n            prev.push.apply(prev, __spreadArray([], __read(cur), false));\r\n            return prev;\r\n        }, [])\r\n            .filter(function (nextRad) { return !isBoundRotate(prevPoses, dots, center, nextRad); })\r\n            .map(function (nextRad) { return throttle(nextRad * 180 / Math.PI, TINY_NUM); })), false));\r\n    });\r\n    return result;\r\n}\r\nfunction checkInnerBoundPoses(moveable) {\r\n    var innerBounds = moveable.props.innerBounds;\r\n    var boundMap = getInitialBounds();\r\n    if (!innerBounds) {\r\n        return {\r\n            boundMap: boundMap,\r\n            vertical: [],\r\n            horizontal: [],\r\n        };\r\n    }\r\n    var _a = moveable.getRect(), pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    var poses = [pos1, pos2, pos3, pos4];\r\n    var center = getPosByDirection(poses, [0, 0]);\r\n    var left = innerBounds.left, top = innerBounds.top, width = innerBounds.width, height = innerBounds.height;\r\n    var leftLine = [[left, top], [left, top + height]];\r\n    var topLine = [[left, top], [left + width, top]];\r\n    var rightLine = [[left + width, top], [left + width, top + height]];\r\n    var bottomLine = [[left, top + height], [left + width, top + height]];\r\n    var lineInfos = getCheckInnerBoundLineInfos(moveable, poses, [0, 0], false);\r\n    var horizontalPoses = [];\r\n    var verticalPoses = [];\r\n    lineInfos.forEach(function (lineInfo) {\r\n        var line = lineInfo.line, lineConstants = lineInfo.lineConstants;\r\n        var _a = isStartLine(center, line), isHorizontalStart = _a.horizontal, isVerticalStart = _a.vertical;\r\n        // test vertical\r\n        var topBoundInfo = checkLineBoundCollision(line, lineConstants, topLine, isVerticalStart, 1, true);\r\n        var bottomBoundInfo = checkLineBoundCollision(line, lineConstants, bottomLine, isVerticalStart, 1, true);\r\n        // test horizontal\r\n        var leftBoundInfo = checkLineBoundCollision(line, lineConstants, leftLine, isHorizontalStart, 1, true);\r\n        var rightBoundInfo = checkLineBoundCollision(line, lineConstants, rightLine, isHorizontalStart, 1, true);\r\n        if (topBoundInfo.isBound && !boundMap.top) {\r\n            horizontalPoses.push(top);\r\n            boundMap.top = true;\r\n        }\r\n        if (bottomBoundInfo.isBound && !boundMap.bottom) {\r\n            horizontalPoses.push(top + height);\r\n            boundMap.bottom = true;\r\n        }\r\n        if (leftBoundInfo.isBound && !boundMap.left) {\r\n            verticalPoses.push(left);\r\n            boundMap.left = true;\r\n        }\r\n        if (rightBoundInfo.isBound && !boundMap.right) {\r\n            verticalPoses.push(left + width);\r\n            boundMap.right = true;\r\n        }\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        horizontal: horizontalPoses,\r\n        vertical: verticalPoses,\r\n    };\r\n}\n\nfunction solveEquation(pos1, pos2, snapOffset, isVertical) {\r\n    var dx = pos2[0] - pos1[0];\r\n    var dy = pos2[1] - pos1[1];\r\n    if (abs(dx) < TINY_NUM$1) {\r\n        dx = 0;\r\n    }\r\n    if (abs(dy) < TINY_NUM$1) {\r\n        dy = 0;\r\n    }\r\n    if (!dx) {\r\n        // y = 0 * x + b\r\n        // only horizontal\r\n        if (!isVertical) {\r\n            return [0, snapOffset];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    if (!dy) {\r\n        // only vertical\r\n        if (isVertical) {\r\n            return [snapOffset, 0];\r\n        }\r\n        return [0, 0];\r\n    }\r\n    // y = ax + b\r\n    var a = dy / dx;\r\n    var b = pos1[1] - a * pos1[0];\r\n    if (isVertical) {\r\n        // y = a * x + b\r\n        var y = a * (pos2[0] + snapOffset) + b;\r\n        return [snapOffset, y - pos2[1]];\r\n    }\r\n    else {\r\n        // x = (y - b) / a\r\n        var x = (pos2[1] + snapOffset - b) / a;\r\n        return [x - pos2[0], snapOffset];\r\n    }\r\n}\r\nfunction solveNextOffset(pos1, pos2, offset, isVertical, datas) {\r\n    var sizeOffset = solveEquation(pos1, pos2, offset, isVertical);\r\n    if (!sizeOffset) {\r\n        return {\r\n            isOutside: false,\r\n            offset: [0, 0],\r\n        };\r\n    }\r\n    var size = getDist$1(pos1, pos2);\r\n    var dist1 = getDist$1(sizeOffset, pos1);\r\n    var dist2 = getDist$1(sizeOffset, pos2);\r\n    var isOutside = dist1 > size || dist2 > size;\r\n    var _a = __read(getDragDist({\r\n        datas: datas,\r\n        distX: sizeOffset[0],\r\n        distY: sizeOffset[1],\r\n    }), 2), widthOffset = _a[0], heightOffset = _a[1];\r\n    return {\r\n        offset: [widthOffset, heightOffset],\r\n        isOutside: isOutside,\r\n    };\r\n}\r\nfunction getSnapBound(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return getNearestSnapGuidelineInfo(snapInfo).offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkThrottleDragRotate(throttleDragRotate, _a, _b, _c, _d) {\r\n    var _e = __read(_a, 2), distX = _e[0], distY = _e[1];\r\n    var _f = __read(_b, 2), isVerticalBound = _f[0], isHorizontalBound = _f[1];\r\n    var _g = __read(_c, 2), isVerticalSnap = _g[0], isHorizontalSnap = _g[1];\r\n    var _h = __read(_d, 2), verticalOffset = _h[0], horizontalOffset = _h[1];\r\n    var offsetX = -verticalOffset;\r\n    var offsetY = -horizontalOffset;\r\n    if (throttleDragRotate && distX && distY) {\r\n        offsetX = 0;\r\n        offsetY = 0;\r\n        var adjustPoses = [];\r\n        if (isVerticalBound && isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalBound) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalBound) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        else if (isVerticalSnap && isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset], [verticalOffset, 0]);\r\n        }\r\n        else if (isVerticalSnap) {\r\n            adjustPoses.push([verticalOffset, 0]);\r\n        }\r\n        else if (isHorizontalSnap) {\r\n            adjustPoses.push([0, horizontalOffset]);\r\n        }\r\n        if (adjustPoses.length) {\r\n            adjustPoses.sort(function (a, b) {\r\n                return (getDistSize(minus([distX, distY], a)) -\r\n                    getDistSize(minus([distX, distY], b)));\r\n            });\r\n            var adjustPos = adjustPoses[0];\r\n            if (adjustPos[0] && abs(distX) > TINY_NUM$1) {\r\n                offsetX = -adjustPos[0];\r\n                offsetY =\r\n                    (distY * abs(distX + offsetX)) / abs(distX) -\r\n                        distY;\r\n            }\r\n            else if (adjustPos[1] && abs(distY) > TINY_NUM$1) {\r\n                var prevDistY = distY;\r\n                offsetY = -adjustPos[1];\r\n                offsetX =\r\n                    (distX * abs(distY + offsetY)) / abs(prevDistY) -\r\n                        distX;\r\n            }\r\n            if (throttleDragRotate && isHorizontalBound && isVerticalBound) {\r\n                if (abs(offsetX) > TINY_NUM$1 &&\r\n                    abs(offsetX) < abs(verticalOffset)) {\r\n                    var scale = abs(verticalOffset) / abs(offsetX);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else if (abs(offsetY) > TINY_NUM$1 &&\r\n                    abs(offsetY) < abs(horizontalOffset)) {\r\n                    var scale = abs(horizontalOffset) / abs(offsetY);\r\n                    offsetX *= scale;\r\n                    offsetY *= scale;\r\n                }\r\n                else {\r\n                    offsetX = maxOffset(-verticalOffset, offsetX);\r\n                    offsetY = maxOffset(-horizontalOffset, offsetY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        offsetX = distX || isVerticalBound ? -verticalOffset : 0;\r\n        offsetY = distY || isHorizontalBound ? -horizontalOffset : 0;\r\n    }\r\n    return [offsetX, offsetY];\r\n}\r\nfunction checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, ignoreSnap, datas) {\r\n    if (!hasGuidelines(moveable, \"draggable\")) {\r\n        return [\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n            {\r\n                isSnap: false,\r\n                isBound: false,\r\n                offset: 0,\r\n            },\r\n        ];\r\n    }\r\n    var poses = getAbsolutePoses(datas.absolutePoses, [distX, distY]);\r\n    var _a = getRect(poses), left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\r\n    var boundPoses = {\r\n        horizontal: poses.map(function (pos) { return pos[1]; }),\r\n        vertical: poses.map(function (pos) { return pos[0]; }),\r\n    };\r\n    var snapDirections = getSnapDirections(moveable.props.snapDirections);\r\n    var snapPoses = splitSnapDirectionPoses(snapDirections, {\r\n        left: left,\r\n        right: right,\r\n        top: top,\r\n        bottom: bottom,\r\n        center: (left + right) / 2,\r\n        middle: (top + bottom) / 2,\r\n    });\r\n    var _b = checkMoveableSnapBounds(moveable, ignoreSnap, snapPoses, boundPoses), verticalSnapBoundInfo = _b.vertical, horizontalSnapBoundInfo = _b.horizontal;\r\n    var _c = getInnerBoundDragInfo(moveable, poses, datas), verticalInnerBoundInfo = _c.vertical, horizontalInnerBoundInfo = _c.horizontal;\r\n    var isVerticalSnap = verticalSnapBoundInfo.isSnap;\r\n    var isHorizontalSnap = horizontalSnapBoundInfo.isSnap;\r\n    var isVerticalBound = verticalSnapBoundInfo.isBound || verticalInnerBoundInfo.isBound;\r\n    var isHorizontalBound = horizontalSnapBoundInfo.isBound || horizontalInnerBoundInfo.isBound;\r\n    var verticalOffset = maxOffset(verticalSnapBoundInfo.offset, verticalInnerBoundInfo.offset);\r\n    var horizontalOffset = maxOffset(horizontalSnapBoundInfo.offset, horizontalInnerBoundInfo.offset);\r\n    var _d = __read(checkThrottleDragRotate(throttleDragRotate, [distX, distY], [isVerticalBound, isHorizontalBound], [isVerticalSnap, isHorizontalSnap], [verticalOffset, horizontalOffset]), 2), offsetX = _d[0], offsetY = _d[1];\r\n    return [\r\n        {\r\n            isBound: isVerticalBound,\r\n            isSnap: isVerticalSnap,\r\n            offset: offsetX,\r\n        },\r\n        {\r\n            isBound: isHorizontalBound,\r\n            isSnap: isHorizontalSnap,\r\n            offset: offsetY,\r\n        },\r\n    ];\r\n}\r\nfunction checkMoveableSnapBounds(moveable, ignoreSnap, poses, boundPoses) {\r\n    if (boundPoses === void 0) { boundPoses = poses; }\r\n    var _a = checkBoundPoses(getBounds(moveable), boundPoses.vertical, boundPoses.horizontal), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    var _b = ignoreSnap ? {\r\n        horizontal: { isSnap: false, index: -1 },\r\n        vertical: { isSnap: false, index: -1 },\r\n    } : checkMoveableSnapPoses(moveable, poses.vertical, poses.horizontal, undefined, undefined, undefined, undefined), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapBounds(guideines, bounds, posesX, posesY, snapHorizontalThreshold, snapVerticalThreshold, multiples) {\r\n    if (multiples === void 0) { multiples = [1, 1]; }\r\n    var _a = checkBoundPoses(bounds, posesX, posesY), horizontalBoundInfos = _a.horizontal, verticalBoundInfos = _a.vertical;\r\n    // options.isRequest ? {\r\n    //     horizontal: { isSnap: false, index: -1 } as SnapInfo,\r\n    //     vertical: { isSnap: false, index: -1 } as SnapInfo,\r\n    // } :\r\n    var _b = checkSnapPoses(guideines, posesX, posesY, [], [], snapHorizontalThreshold, snapVerticalThreshold, multiples), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBound(horizontalBoundInfos[0], horizontalSnapInfo);\r\n    var verticalOffset = getSnapBound(verticalBoundInfos[0], verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfos[0].isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            snapIndex: horizontalSnapInfo.index,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n            bounds: horizontalBoundInfos,\r\n            snap: horizontalSnapInfo,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfos[0].isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            snapIndex: verticalSnapInfo.index,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n            bounds: verticalBoundInfos,\r\n            snap: verticalSnapInfo,\r\n        },\r\n    };\r\n}\r\nfunction checkSnapRightLine(startPos, endPos, snapBoundInfo, keepRatio) {\r\n    var rad = (getRad(startPos, endPos) / Math.PI) * 180;\r\n    var _a = snapBoundInfo.vertical, isVerticalBound = _a.isBound, isVerticalSnap = _a.isSnap, verticalDist = _a.dist, _b = snapBoundInfo.horizontal, isHorizontalBound = _b.isBound, isHorizontalSnap = _b.isSnap, horizontalDist = _b.dist;\r\n    var rad180 = rad % 180;\r\n    var isHorizontalLine = rad180 < 3 || rad180 > 177;\r\n    var isVerticalLine = rad180 > 87 && rad180 < 93;\r\n    if (horizontalDist < verticalDist) {\r\n        if (isVerticalBound ||\r\n            (isVerticalSnap &&\r\n                !isVerticalLine &&\r\n                (!keepRatio || !isHorizontalLine))) {\r\n            return \"vertical\";\r\n        }\r\n    }\r\n    if (isHorizontalBound ||\r\n        (isHorizontalSnap &&\r\n            !isHorizontalLine &&\r\n            (!keepRatio || !isVerticalLine))) {\r\n        return \"horizontal\";\r\n    }\r\n    return \"\";\r\n}\r\nfunction getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas) {\r\n    return directions.map(function (_a) {\r\n        var _b = __read(_a, 2), startDirection = _b[0], endDirection = _b[1];\r\n        var otherStartPos = getPosByDirection(poses, startDirection);\r\n        var otherEndPos = getPosByDirection(poses, endDirection);\r\n        var snapBoundInfo = keepRatio\r\n            ? checkSnapBoundsKeepRatio(moveable, otherStartPos, otherEndPos, isRequest)\r\n            : checkMoveableSnapBounds(moveable, isRequest, {\r\n                vertical: [otherEndPos[0]],\r\n                horizontal: [otherEndPos[1]],\r\n            });\r\n        var _c = snapBoundInfo.horizontal, \r\n        // dist: otherHorizontalDist,\r\n        otherHorizontalOffset = _c.offset, isOtherHorizontalBound = _c.isBound, isOtherHorizontalSnap = _c.isSnap, _d = snapBoundInfo.vertical, \r\n        // dist: otherVerticalDist,\r\n        otherVerticalOffset = _d.offset, isOtherVerticalBound = _d.isBound, isOtherVerticalSnap = _d.isSnap;\r\n        var multiple = minus(endDirection, startDirection);\r\n        if (!otherVerticalOffset && !otherHorizontalOffset) {\r\n            return {\r\n                isBound: isOtherVerticalBound || isOtherHorizontalBound,\r\n                isSnap: isOtherVerticalSnap || isOtherHorizontalSnap,\r\n                sign: multiple,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var snapLine = checkSnapRightLine(otherStartPos, otherEndPos, snapBoundInfo, keepRatio);\r\n        if (!snapLine) {\r\n            return {\r\n                sign: multiple,\r\n                isBound: false,\r\n                isSnap: false,\r\n                offset: [0, 0],\r\n            };\r\n        }\r\n        var isVertical = snapLine === \"vertical\";\r\n        var sizeOffset = [0, 0];\r\n        if (!keepRatio\r\n            && abs(endDirection[0]) === 1\r\n            && abs(endDirection[1]) === 1\r\n            && startDirection[0] !== endDirection[0]\r\n            && startDirection[1] !== endDirection[1]) {\r\n            sizeOffset = getDragDist({\r\n                datas: datas,\r\n                distX: -otherVerticalOffset,\r\n                distY: -otherHorizontalOffset,\r\n            });\r\n        }\r\n        else {\r\n            sizeOffset = solveNextOffset(otherStartPos, otherEndPos, -(isVertical ? otherVerticalOffset : otherHorizontalOffset), isVertical, datas).offset;\r\n        }\r\n        sizeOffset = sizeOffset.map(function (size, i) { return size * (multiple[i] ? 2 / multiple[i] : 0); });\r\n        return {\r\n            sign: multiple,\r\n            isBound: isVertical ? isOtherVerticalBound : isOtherHorizontalBound,\r\n            isSnap: isVertical ? isOtherVerticalSnap : isOtherHorizontalSnap,\r\n            offset: sizeOffset,\r\n        };\r\n    });\r\n}\r\nfunction getSnapBoundOffset(boundInfo, snapInfo) {\r\n    if (boundInfo.isBound) {\r\n        return boundInfo.offset;\r\n    }\r\n    else if (snapInfo.isSnap) {\r\n        return snapInfo.offset;\r\n    }\r\n    return 0;\r\n}\r\nfunction checkSnapBoundsKeepRatio(moveable, startPos, endPos, isRequest) {\r\n    var _a = checkBoundKeepRatio(moveable, startPos, endPos), horizontalBoundInfo = _a.horizontal, verticalBoundInfo = _a.vertical;\r\n    var _b = isRequest ? {\r\n        horizontal: { isSnap: false },\r\n        vertical: { isSnap: false },\r\n    } : checkSnapKeepRatio(moveable, startPos, endPos), horizontalSnapInfo = _b.horizontal, verticalSnapInfo = _b.vertical;\r\n    var horizontalOffset = getSnapBoundOffset(horizontalBoundInfo, horizontalSnapInfo);\r\n    var verticalOffset = getSnapBoundOffset(verticalBoundInfo, verticalSnapInfo);\r\n    var horizontalDist = abs(horizontalOffset);\r\n    var verticalDist = abs(verticalOffset);\r\n    return {\r\n        horizontal: {\r\n            isBound: horizontalBoundInfo.isBound,\r\n            isSnap: horizontalSnapInfo.isSnap,\r\n            offset: horizontalOffset,\r\n            dist: horizontalDist,\r\n        },\r\n        vertical: {\r\n            isBound: verticalBoundInfo.isBound,\r\n            isSnap: verticalSnapInfo.isSnap,\r\n            offset: verticalOffset,\r\n            dist: verticalDist,\r\n        },\r\n    };\r\n}\r\nfunction checkMaxBounds(moveable, poses, direction, fixedPosition, datas) {\r\n    var fixedDirection = [-direction[0], -direction[1]];\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var bounds = moveable.props.bounds;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    if (bounds) {\r\n        var directions = [\r\n            [direction[0], -direction[1]],\r\n            [-direction[0], direction[1]],\r\n        ];\r\n        var _b = bounds.left, left_1 = _b === void 0 ? -Infinity : _b, _c = bounds.top, top_1 = _c === void 0 ? -Infinity : _c, _d = bounds.right, right_1 = _d === void 0 ? Infinity : _d, _e = bounds.bottom, bottom_1 = _e === void 0 ? Infinity : _e;\r\n        directions.forEach(function (otherDirection) {\r\n            var isCheckVertical = otherDirection[0] !== fixedDirection[0];\r\n            var isCheckHorizontal = otherDirection[1] !== fixedDirection[1];\r\n            var otherPos = getPosByDirection(poses, otherDirection);\r\n            var deg = (getRad(fixedPosition, otherPos) * 360) / Math.PI;\r\n            if (isCheckHorizontal) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 360) < 2 || abs(deg - 180) < 2) {\r\n                    nextOtherPos[1] = fixedPosition[1];\r\n                }\r\n                var _a = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[1] < otherPos[1] ? bottom_1 : top_1) -\r\n                    otherPos[1], false, datas), _b = __read(_a.offset, 2), heightOffset = _b[1], isHeightOutside = _a.isOutside;\r\n                if (!isNaN(heightOffset)) {\r\n                    maxHeight = height + (isHeightOutside ? 1 : -1) * abs(heightOffset);\r\n                }\r\n            }\r\n            if (isCheckVertical) {\r\n                var nextOtherPos = otherPos.slice();\r\n                if (abs(deg - 90) < 2 || abs(deg - 270) < 2) {\r\n                    nextOtherPos[0] = fixedPosition[0];\r\n                }\r\n                var _c = solveNextOffset(fixedPosition, nextOtherPos, (fixedPosition[0] < otherPos[0] ? right_1 : left_1) - otherPos[0], true, datas), _d = __read(_c.offset, 1), widthOffset = _d[0], isWidthOutside = _c.isOutside;\r\n                if (!isNaN(widthOffset)) {\r\n                    maxWidth = width + (isWidthOutside ? 1 : -1) * abs(widthOffset);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return {\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n    };\r\n}\n\n/**\r\n * @namespace Draggable\r\n * @memberof Moveable\r\n * @description Draggable refers to the ability to drag and move targets.\r\n */\r\nvar Draggable = {\r\n    name: \"draggable\",\r\n    props: [\r\n        \"draggable\",\r\n        \"throttleDrag\",\r\n        \"throttleDragRotate\",\r\n        \"hideThrottleDragRotateLine\",\r\n        \"startDragRotate\",\r\n        \"edgeDraggable\",\r\n    ],\r\n    events: [\r\n        \"dragStart\",\r\n        \"drag\",\r\n        \"dragEnd\",\r\n        \"dragGroupStart\",\r\n        \"dragGroup\",\r\n        \"dragGroupEnd\",\r\n    ],\r\n    requestStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"left\", \"top\", \"right\", \"bottom\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, hideThrottleDragRotateLine = _a.hideThrottleDragRotateLine, throttleDragRotate = _a.throttleDragRotate, zoom = _a.zoom;\r\n        var _b = moveable.getState(), dragInfo = _b.dragInfo, beforeOrigin = _b.beforeOrigin;\r\n        if (hideThrottleDragRotateLine || !throttleDragRotate || !dragInfo) {\r\n            return [];\r\n        }\r\n        var dist = dragInfo.dist;\r\n        if (!dist[0] && !dist[1]) {\r\n            return [];\r\n        }\r\n        var width = getDistSize(dist);\r\n        var rad = getRad(dist, [0, 0]);\r\n        return [React.createElement(\"div\", { className: prefix(\"line\", \"horizontal\", \"dragline\", \"dashed\"), key: \"dragRotateGuideline\", style: {\r\n                    width: \"\".concat(width, \"px\"),\r\n                    transform: \"translate(\".concat(beforeOrigin[0], \"px, \").concat(beforeOrigin[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                } })];\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentGesto = e.parentGesto;\r\n        var state = moveable.state;\r\n        var gestos = state.gestos, style = state.style;\r\n        if (gestos.draggable) {\r\n            return false;\r\n        }\r\n        gestos.draggable = parentGesto || moveable.targetGesto;\r\n        datas.datas = {};\r\n        datas.left = parseFloat(style.left || \"\") || 0;\r\n        datas.top = parseFloat(style.top || \"\") || 0;\r\n        datas.bottom = parseFloat(style.bottom || \"\") || 0;\r\n        datas.right = parseFloat(style.right || \"\") || 0;\r\n        datas.startValue = [0, 0];\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"translate\");\r\n        startCheckSnapDrag(moveable, datas);\r\n        datas.prevDist = [0, 0];\r\n        datas.prevBeforeDist = [0, 0];\r\n        datas.isDrag = false;\r\n        datas.deltaOffset = [0, 0];\r\n        var params = fillParams(moveable, e, __assign({ set: function (translate) {\r\n                datas.startValue = translate;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = parentEvent || triggerEvent(moveable, \"onDragStart\", params);\r\n        if (result !== false) {\r\n            datas.isDrag = true;\r\n            moveable.state.dragInfo = {\r\n                startRect: moveable.getRect(),\r\n                dist: [0, 0],\r\n            };\r\n        }\r\n        else {\r\n            gestos.draggable = null;\r\n            datas.isPinch = false;\r\n        }\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"translate\");\r\n        var datas = e.datas, parentEvent = e.parentEvent, parentFlag = e.parentFlag, isPinch = e.isPinch, deltaOffset = e.deltaOffset, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentThrottleDrag = e.parentThrottleDrag;\r\n        var distX = e.distX, distY = e.distY;\r\n        var isDrag = datas.isDrag, prevDist = datas.prevDist, prevBeforeDist = datas.prevBeforeDist, startValue = datas.startValue;\r\n        if (!isDrag) {\r\n            return;\r\n        }\r\n        if (deltaOffset) {\r\n            distX += deltaOffset[0];\r\n            distY += deltaOffset[1];\r\n        }\r\n        var props = moveable.props;\r\n        var parentMoveable = props.parentMoveable;\r\n        var throttleDrag = isGroup ? 0 : (props.throttleDrag || parentThrottleDrag || 0);\r\n        var throttleDragRotate = parentEvent ? 0 : (props.throttleDragRotate || 0);\r\n        var dragRotateRad = 0;\r\n        var isVerticalSnap = false;\r\n        var isVerticalBound = false;\r\n        var isHorizontalSnap = false;\r\n        var isHorizontalBound = false;\r\n        if (!parentEvent && throttleDragRotate > 0 && (distX || distY)) {\r\n            var startDragRotate = props.startDragRotate || 0;\r\n            var deg = throttle(startDragRotate + getRad([0, 0], [distX, distY]) * 180 / Math.PI, throttleDragRotate)\r\n                - startDragRotate;\r\n            var ry = distY * Math.abs(Math.cos((deg - 90) / 180 * Math.PI));\r\n            var rx = distX * Math.abs(Math.cos(deg / 180 * Math.PI));\r\n            var r = getDistSize([rx, ry]);\r\n            dragRotateRad = deg * Math.PI / 180;\r\n            distX = r * Math.cos(dragRotateRad);\r\n            distY = r * Math.sin(dragRotateRad);\r\n        }\r\n        if (!isPinch && !parentEvent && !parentFlag) {\r\n            var _a = __read(checkSnapBoundsDrag(moveable, distX, distY, throttleDragRotate, (!useSnap && isRequest) || deltaOffset, datas), 2), verticalInfo = _a[0], horizontalInfo = _a[1];\r\n            isVerticalSnap = verticalInfo.isSnap;\r\n            isVerticalBound = verticalInfo.isBound;\r\n            isHorizontalSnap = horizontalInfo.isSnap;\r\n            isHorizontalBound = horizontalInfo.isBound;\r\n            var verticalOffset = verticalInfo.offset;\r\n            var horizontalOffset = horizontalInfo.offset;\r\n            distX += verticalOffset;\r\n            distY += horizontalOffset;\r\n        }\r\n        var beforeTranslate = plus(getBeforeDragDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        var translate = plus(getTransformDist({ datas: datas, distX: distX, distY: distY }), startValue);\r\n        throttleArray(translate, TINY_NUM);\r\n        throttleArray(beforeTranslate, TINY_NUM);\r\n        if (!throttleDragRotate) {\r\n            if (!isVerticalSnap && !isVerticalBound) {\r\n                translate[0] = throttle(translate[0], throttleDrag);\r\n                beforeTranslate[0] = throttle(beforeTranslate[0], throttleDrag);\r\n            }\r\n            if (!isHorizontalSnap && !isHorizontalBound) {\r\n                translate[1] = throttle(translate[1], throttleDrag);\r\n                beforeTranslate[1] = throttle(beforeTranslate[1], throttleDrag);\r\n            }\r\n        }\r\n        var beforeDist = minus(beforeTranslate, startValue);\r\n        var dist = minus(translate, startValue);\r\n        var delta = minus(dist, prevDist);\r\n        var beforeDelta = minus(beforeDist, prevBeforeDist);\r\n        datas.prevDist = dist;\r\n        datas.prevBeforeDist = beforeDist;\r\n        datas.passDelta = delta; //distX - (datas.passDistX || 0);\r\n        // datas.passDeltaY = distY - (datas.passDistY || 0);\r\n        datas.passDist = dist; //distX;\r\n        // datas.passDistY = distY;\r\n        var left = datas.left + beforeDist[0];\r\n        var top = datas.top + beforeDist[1];\r\n        var right = datas.right - beforeDist[0];\r\n        var bottom = datas.bottom - beforeDist[1];\r\n        var nextTransform = convertTransformFormat(datas, \"translate(\".concat(translate[0], \"px, \").concat(translate[1], \"px)\"), \"translate(\".concat(dist[0], \"px, \").concat(dist[1], \"px)\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        moveable.state.dragInfo.dist = parentEvent ? [0, 0] : dist;\r\n        if (!parentEvent && !parentMoveable && delta.every(function (num) { return !num; }) && beforeDelta.some(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var _b = moveable.state, width = _b.width, height = _b.height;\r\n        var params = fillParams(moveable, e, __assign({ transform: nextTransform, dist: dist, delta: delta, translate: translate, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeTranslate: beforeTranslate, left: left, top: top, right: right, bottom: bottom, width: width, height: height, isPinch: isPinch }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onDrag\", params);\r\n        return params;\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var deltaOffset = datas.deltaOffset;\r\n        if (deltaOffset[0] || deltaOffset[1]) {\r\n            datas.deltaOffset = [0, 0];\r\n            return this.drag(moveable, __assign(__assign({}, e), { deltaOffset: deltaOffset }));\r\n        }\r\n        return false;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var parentEvent = e.parentEvent, datas = e.datas;\r\n        moveable.state.dragInfo = null;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        datas.isDrag = false;\r\n        var param = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onDragEnd\", param);\r\n        return param;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _a, _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY;\r\n        var params = this.dragStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var _c = triggerChildGesto(moveable, this, \"dragStart\", [\r\n            clientX || 0,\r\n            clientY || 0,\r\n        ], e, false, \"draggable\"), childEvents = _c.childEvents, eventParams = _c.eventParams;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: eventParams });\r\n        var result = triggerEvent(moveable, \"onDragGroupStart\", nextParams);\r\n        datas.isDrag = result !== false;\r\n        // find data.startValue and based on first child moveable\r\n        var startValue = (_b = (_a = childEvents[0]) === null || _a === void 0 ? void 0 : _a.datas.startValue) !== null && _b !== void 0 ? _b : [0, 0];\r\n        datas.throttleOffset = [startValue[0] % 1, startValue[1] % 1];\r\n        return datas.isDrag ? params : false;\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        var params = this.drag(moveable, __assign(__assign({}, e), { parentThrottleDrag: moveable.props.throttleDrag }));\r\n        var passDelta = e.datas.passDelta;\r\n        var eventParams = triggerChildGesto(moveable, this, \"drag\", passDelta, e, false, \"draggable\").eventParams;\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: eventParams }, params);\r\n        triggerEvent(moveable, \"onDragGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isDrag) {\r\n            return;\r\n        }\r\n        this.dragEnd(moveable, e);\r\n        var eventParams = triggerChildGesto(moveable, this, \"dragEnd\", [0, 0], e, false, \"draggable\").eventParams;\r\n        triggerEvent(moveable, \"onDragGroupEnd\", fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: eventParams,\r\n        }));\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Draggable#request\r\n     * @param {object} [e] - the draggable's request parameter\r\n     * @param {number} [e.x] - x position\r\n     * @param {number} [e.y] - y position\r\n     * @param {number} [e.deltaX] - X number to move\r\n     * @param {number} [e.deltaY] - Y number to move\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"draggable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * // Use Absolute Value\r\n     * moveable.request(\"draggable\", { x: 200, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 220, y: 100 });\r\n     * moveable.request(\"draggable\", { x: 240, y: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: false,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return { datas: datas, useSnap: useSnap };\r\n            },\r\n            request: function (e) {\r\n                if (\"x\" in e) {\r\n                    distX = e.x - rect.left;\r\n                }\r\n                else if (\"deltaX\" in e) {\r\n                    distX += e.deltaX;\r\n                }\r\n                if (\"y\" in e) {\r\n                    distY = e.y - rect.top;\r\n                }\r\n                else if (\"deltaY\" in e) {\r\n                    distY += e.deltaY;\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, useSnap: useSnap };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.draggable = null;\r\n        moveable.state.dragInfo = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be dragged. (default: false)\r\n * @name Moveable.Draggable#draggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.draggable = true;\r\n */\r\n/**\r\n * throttle of x, y when drag.\r\n * @name Moveable.Draggable#throttleDrag\r\n * @default 0\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleDrag = 1;\r\n */\r\n/**\r\n* throttle of angle of x, y when drag.\r\n* @name Moveable.Draggable#throttleDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* moveable.throttleDragRotate = 45;\r\n*/\r\n/**\r\n* start angle of throttleDragRotate of x, y when drag.\r\n* @name Moveable.Draggable#startDragRotate\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body);\r\n*\r\n* // 45, 135, 225, 315\r\n* moveable.throttleDragRotate = 90;\r\n* moveable.startDragRotate = 45;\r\n*/\r\n/**\r\n * When the drag starts, the dragStart event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragStart\r\n * @param {Moveable.Draggable.OnDragStart} - Parameters for the dragStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When dragging, the drag event is called.\r\n * @memberof Moveable.Draggable\r\n * @event drag\r\n * @param {Moveable.Draggable.OnDrag} - Parameters for the drag event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"drag\", ({ target, transform }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the drag finishes, the dragEnd event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragEnd\r\n * @param {Moveable.Draggable.OnDragEnd} - Parameters for the dragEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { draggable: true });\r\n * moveable.on(\"dragEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group drag starts, the `dragGroupStart` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroupStart\r\n* @param {Moveable.Draggable.OnDragGroupStart} - Parameters for the `dragGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroupStart\", ({ targets }) => {\r\n*     console.log(\"onDragGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group drag, the `dragGroup` event is called.\r\n* @memberof Moveable.Draggable\r\n* @event dragGroup\r\n* @param {Moveable.Draggable.OnDragGroup} - Parameters for the `dragGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     draggable: true\r\n* });\r\n* moveable.on(\"dragGroup\", ({ targets, events }) => {\r\n*     console.log(\"onDragGroup\", targets);\r\n*     events.forEach(ev => {\r\n*          // drag event\r\n*          console.log(\"onDrag left, top\", ev.left, ev.top);\r\n*          // ev.target!.style.left = `${ev.left}px`;\r\n*          // ev.target!.style.top = `${ev.top}px`;\r\n*          console.log(\"onDrag translate\", ev.dist);\r\n*          ev.target!.style.transform = ev.transform;)\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group drag finishes, the `dragGroupEnd` event is called.\r\n * @memberof Moveable.Draggable\r\n * @event dragGroupEnd\r\n * @param {Moveable.Draggable.OnDragGroupEnd} - Parameters for the `dragGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     draggable: true\r\n * });\r\n * moveable.on(\"dragGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onDragGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getFixedDirectionInfo(startPositions, fixedDirection) {\r\n    var fixedPosition = getPosByDirection(startPositions, fixedDirection);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedDirectionInfo(state, fixedDirection) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var nextFixedOffset = [\r\n        width / 2 * (1 + fixedDirection[0]),\r\n        height / 2 * (1 + fixedDirection[1]),\r\n    ];\r\n    var fixedPosition = calculatePosition(allMatrix, nextFixedOffset, n);\r\n    var fixedOffset = [0, 0];\r\n    return {\r\n        fixedPosition: fixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\r\nfunction getOffsetFixedPositionInfo(state, offsetFixedPosition) {\r\n    // for start\r\n    var allMatrix = state.allMatrix, is3d = state.is3d, width = state.width, height = state.height;\r\n    var n = is3d ? 4 : 3;\r\n    var fixedDirection = getDirectionByPos(offsetFixedPosition, width, height);\r\n    var nextFixedPosition = calculatePosition(allMatrix, offsetFixedPosition, n);\r\n    var fixedOffset = [\r\n        width ? 0 : offsetFixedPosition[0],\r\n        height ? 0 : offsetFixedPosition[1],\r\n    ];\r\n    return {\r\n        fixedPosition: nextFixedPosition,\r\n        fixedDirection: fixedDirection,\r\n        fixedOffset: fixedOffset,\r\n    };\r\n}\n\n/**\r\n * @namespace Resizable\r\n * @memberof Moveable\r\n * @description Resizable indicates whether the target's width and height can be increased or decreased.\r\n */\r\nvar directionCondition$2 = getDirectionCondition(\"resizable\");\r\nvar Resizable = {\r\n    name: \"resizable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"resizable\",\r\n        \"throttleResize\",\r\n        \"renderDirections\",\r\n        \"displayAroundControls\",\r\n        \"keepRatio\",\r\n        \"resizeFormat\",\r\n        \"keepRatioFinally\",\r\n        \"edge\",\r\n        \"checkResizableError\",\r\n    ],\r\n    events: [\r\n        \"resizeStart\",\r\n        \"beforeResize\",\r\n        \"resize\",\r\n        \"resizeEnd\",\r\n        \"resizeGroupStart\",\r\n        \"beforeResizeGroup\",\r\n        \"resizeGroup\",\r\n        \"resizeGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"resizable\"),\r\n    dragControlCondition: directionCondition$2,\r\n    viewClassName: getDirectionViewClassName(\"resizable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var inputEvent = e.inputEvent, isPinch = e.isPinch, isGroup = e.isGroup, parentDirection = e.parentDirection, parentGesto = e.parentGesto, datas = e.datas, parentFixedDirection = e.parentFixedDirection, parentEvent = e.parentEvent;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var state = moveable.state;\r\n        var target = state.target, width = state.width, height = state.height, gestos = state.gestos;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (gestos.resizable) {\r\n            return false;\r\n        }\r\n        gestos.resizable = parentGesto || moveable.controlGesto;\r\n        !isPinch && setDragStart(moveable, e);\r\n        datas.datas = {};\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.prevWidth = 0;\r\n        datas.prevHeight = 0;\r\n        datas.minSize = [0, 0];\r\n        datas.startWidth = state.inlineCSSWidth || state.cssWidth;\r\n        datas.startHeight = state.inlineCSSHeight || state.cssHeight;\r\n        datas.maxSize = [Infinity, Infinity];\r\n        if (!isGroup) {\r\n            datas.minSize = [\r\n                state.minOffsetWidth,\r\n                state.minOffsetHeight,\r\n            ];\r\n            datas.maxSize = [\r\n                state.maxOffsetWidth,\r\n                state.maxOffsetHeight,\r\n            ];\r\n        }\r\n        var transformOrigin = moveable.props.transformOrigin || \"% %\";\r\n        datas.transformOrigin = transformOrigin && isString(transformOrigin)\r\n            ? transformOrigin.split(\" \")\r\n            : transformOrigin;\r\n        datas.startOffsetMatrix = state.offsetMatrix;\r\n        datas.startTransformOrigin = state.transformOrigin;\r\n        datas.isWidth = (_a = e === null || e === void 0 ? void 0 : e.parentIsWidth) !== null && _a !== void 0 ? _a : ((!direction[0] && !direction[1]) || direction[0] || !direction[1]);\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setFixedPosition(fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        function setMin(minSize) {\r\n            datas.minSize = [\r\n                convertUnitSize(\"\".concat(minSize[0]), 0) || 0,\r\n                convertUnitSize(\"\".concat(minSize[1]), 0) || 0,\r\n            ];\r\n        }\r\n        function setMax(maxSize) {\r\n            var nextMaxSize = [\r\n                maxSize[0] || Infinity,\r\n                maxSize[1] || Infinity,\r\n            ];\r\n            if (!isNumber(nextMaxSize[0]) || isFinite(nextMaxSize[0])) {\r\n                nextMaxSize[0] = convertUnitSize(\"\".concat(nextMaxSize[0]), 0) || Infinity;\r\n            }\r\n            if (!isNumber(nextMaxSize[1]) || isFinite(nextMaxSize[1])) {\r\n                nextMaxSize[1] = convertUnitSize(\"\".concat(nextMaxSize[1]), 0) || Infinity;\r\n            }\r\n            datas.maxSize = nextMaxSize;\r\n        }\r\n        setRatio(width / height);\r\n        setFixedDirection(parentFixedDirection || [-direction[0], -direction[1]]);\r\n        datas.setFixedDirection = setFixedDirection;\r\n        datas.setFixedPosition = setFixedPosition;\r\n        datas.setMin = setMin;\r\n        datas.setMax = setMax;\r\n        var params = fillParams(moveable, e, {\r\n            direction: direction,\r\n            startRatio: datas.ratio,\r\n            set: function (_a) {\r\n                var _b = __read(_a, 2), startWidth = _b[0], startHeight = _b[1];\r\n                datas.startWidth = startWidth;\r\n                datas.startHeight = startHeight;\r\n            },\r\n            setMin: setMin,\r\n            setMax: setMax,\r\n            setRatio: setRatio,\r\n            setFixedDirection: setFixedDirection,\r\n            setFixedPosition: setFixedPosition,\r\n            setOrigin: function (origin) {\r\n                datas.transformOrigin = origin;\r\n            },\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = parentEvent || triggerEvent(moveable, \"onResizeStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        datas.startFixedPosition = datas.fixedPosition;\r\n        if (result !== false) {\r\n            datas.isResize = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a;\r\n        var datas = e.datas, parentFlag = e.parentFlag, isPinch = e.isPinch, parentKeepRatio = e.parentKeepRatio, dragClient = e.dragClient, parentDist = e.parentDist, useSnap = e.useSnap, isRequest = e.isRequest, isGroup = e.isGroup, parentEvent = e.parentEvent, resolveMatrix = e.resolveMatrix;\r\n        var isResize = datas.isResize, transformOrigin = datas.transformOrigin, startWidth = datas.startWidth, startHeight = datas.startHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight, minSize = datas.minSize, maxSize = datas.maxSize, ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isWidth = datas.isWidth;\r\n        if (!isResize) {\r\n            return;\r\n        }\r\n        if (resolveMatrix) {\r\n            var is3d = moveable.state.is3d;\r\n            var startOffsetMatrix = datas.startOffsetMatrix, startTransformOrigin = datas.startTransformOrigin;\r\n            var n = is3d ? 4 : 3;\r\n            var targetMatrix = parseMat(getNextTransforms(e));\r\n            var targetN = Math.sqrt(targetMatrix.length);\r\n            if (n !== targetN) {\r\n                targetMatrix = convertDimension(targetMatrix, targetN, n);\r\n            }\r\n            var nextAllMatrix = getNextMatrix(startOffsetMatrix, targetMatrix, startTransformOrigin, n);\r\n            var poses = calculatePoses(nextAllMatrix, startOffsetWidth, startOffsetHeight, n);\r\n            datas.startPositions = poses;\r\n            datas.nextTargetMatrix = targetMatrix;\r\n            datas.nextAllMatrix = nextAllMatrix;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        var resizeFormat = props.resizeFormat, _b = props.throttleResize, throttleResize = _b === void 0 ? parentFlag ? 0 : 1 : _b, parentMoveable = props.parentMoveable, keepRatioFinally = props.keepRatioFinally;\r\n        var direction = datas.direction;\r\n        var sizeDirection = direction;\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        function getNextBoundingSize() {\r\n            var fixedDirection = datas.fixedDirection;\r\n            var nextSize = getOffsetSizeDist(sizeDirection, keepRatio, datas, e);\r\n            distWidth = nextSize.distWidth;\r\n            distHeight = nextSize.distHeight;\r\n            var nextWidth = (sizeDirection[0] - fixedDirection[0]) || keepRatio\r\n                ? Math.max(startOffsetWidth + distWidth, TINY_NUM) : startOffsetWidth;\r\n            var nextHeight = (sizeDirection[1] - fixedDirection[1]) || keepRatio\r\n                ? Math.max(startOffsetHeight + distHeight, TINY_NUM) : startOffsetHeight;\r\n            if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n                // startOffsetWidth : startOffsetHeight = nextWidth : nextHeight\r\n                if (isWidth) {\r\n                    nextHeight = nextWidth / ratio;\r\n                }\r\n                else {\r\n                    nextWidth = nextHeight * ratio;\r\n                }\r\n            }\r\n            return [nextWidth, nextHeight];\r\n        }\r\n        var _c = __read(getNextBoundingSize(), 2), boundingWidth = _c[0], boundingHeight = _c[1];\r\n        if (!parentEvent) {\r\n            datas.setFixedDirection(datas.fixedDirection);\r\n            triggerEvent(moveable, \"onBeforeResize\", fillParams(moveable, e, {\r\n                startFixedDirection: datas.startFixedDirection,\r\n                startFixedPosition: datas.startFixedPosition,\r\n                setFixedDirection: function (nextFixedDirection) {\r\n                    var _a;\r\n                    datas.setFixedDirection(nextFixedDirection);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                setFixedPosition: function (nextFixedPosition) {\r\n                    var _a;\r\n                    datas.setFixedPosition(nextFixedPosition);\r\n                    _a = __read(getNextBoundingSize(), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                    return [boundingWidth, boundingHeight];\r\n                },\r\n                boundingWidth: boundingWidth,\r\n                boundingHeight: boundingHeight,\r\n                setSize: function (size) {\r\n                    var _a;\r\n                    _a = __read(size, 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n                },\r\n            }, true));\r\n        }\r\n        var fixedPosition = dragClient;\r\n        if (!dragClient) {\r\n            if (!parentFlag && isPinch) {\r\n                fixedPosition = getAbsolutePosition(moveable, [0, 0]);\r\n            }\r\n            else {\r\n                fixedPosition = datas.fixedPosition;\r\n            }\r\n        }\r\n        var snapDist = [0, 0];\r\n        if (!isPinch) {\r\n            snapDist = checkSnapResize(moveable, boundingWidth, boundingHeight, direction, fixedPosition, !useSnap && isRequest, datas);\r\n        }\r\n        if (parentDist) {\r\n            !parentDist[0] && (snapDist[0] = 0);\r\n            !parentDist[1] && (snapDist[1] = 0);\r\n        }\r\n        function computeSize() {\r\n            var _a;\r\n            if (resizeFormat) {\r\n                _a = __read(resizeFormat([boundingWidth, boundingHeight]), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n            }\r\n            boundingWidth = throttle(boundingWidth, throttleResize);\r\n            boundingHeight = throttle(boundingHeight, throttleResize);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (abs(snapDist[0]) > abs(snapDist[1])) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // pre-compute before maintaining the ratio\r\n                computeSize();\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                boundingWidth += snapDist[0];\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                boundingHeight += snapDist[1];\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        else {\r\n            boundingWidth += snapDist[0];\r\n            boundingHeight += snapDist[1];\r\n            boundingWidth = Math.max(0, boundingWidth);\r\n            boundingHeight = Math.max(0, boundingHeight);\r\n        }\r\n        _a = __read(calculateBoundSize([boundingWidth, boundingHeight], minSize, maxSize, keepRatio ? ratio : false), 2), boundingWidth = _a[0], boundingHeight = _a[1];\r\n        computeSize();\r\n        if (keepRatio && (isGroup || keepRatioFinally)) {\r\n            if (isWidth) {\r\n                boundingHeight = boundingWidth / ratio;\r\n            }\r\n            else {\r\n                boundingWidth = boundingHeight * ratio;\r\n            }\r\n        }\r\n        distWidth = boundingWidth - startOffsetWidth;\r\n        distHeight = boundingHeight - startOffsetHeight;\r\n        var delta = [distWidth - prevWidth, distHeight - prevHeight];\r\n        datas.prevWidth = distWidth;\r\n        datas.prevHeight = distHeight;\r\n        var inverseDelta = getResizeDist(moveable, boundingWidth, boundingHeight, fixedPosition, transformOrigin, datas);\r\n        if (!parentMoveable && delta.every(function (num) { return !num; }) && inverseDelta.every(function (num) { return !num; })) {\r\n            return;\r\n        }\r\n        var drag = Draggable.drag(moveable, setCustomDrag(e, moveable.state, inverseDelta, !!isPinch, false, \"draggable\"));\r\n        var transform = drag.transform;\r\n        var nextWidth = startWidth + distWidth;\r\n        var nextHeight = startHeight + distHeight;\r\n        var params = fillParams(moveable, e, __assign({ width: nextWidth, height: nextHeight, offsetWidth: Math.round(boundingWidth), offsetHeight: Math.round(boundingHeight), startRatio: ratio, boundingWidth: boundingWidth, boundingHeight: boundingHeight, direction: direction, dist: [distWidth, distHeight], delta: delta, isPinch: !!isPinch, drag: drag }, fillAfterTransform({\r\n            style: {\r\n                width: \"\".concat(nextWidth, \"px\"),\r\n                height: \"\".concat(nextHeight, \"px\"),\r\n            },\r\n            transform: transform,\r\n        }, drag, e)));\r\n        !parentEvent && triggerEvent(moveable, \"onResize\", params);\r\n        return params;\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var isResize = datas.isResize, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, prevWidth = datas.prevWidth, prevHeight = datas.prevHeight;\r\n        if (!isResize || moveable.props.checkResizableError === false) {\r\n            return;\r\n        }\r\n        var _a = moveable.state, width = _a.width, height = _a.height;\r\n        var errorWidth = width - (startOffsetWidth + prevWidth);\r\n        var errorHeight = height - (startOffsetHeight + prevHeight);\r\n        var isErrorWidth = abs(errorWidth) > 3;\r\n        var isErrorHeight = abs(errorHeight) > 3;\r\n        if (isErrorWidth) {\r\n            datas.startWidth += errorWidth;\r\n            datas.startOffsetWidth += errorWidth;\r\n            datas.prevWidth += errorWidth;\r\n        }\r\n        if (isErrorHeight) {\r\n            datas.startHeight += errorHeight;\r\n            datas.startOffsetHeight += errorHeight;\r\n            datas.prevHeight += errorHeight;\r\n        }\r\n        if (isErrorWidth || isErrorHeight) {\r\n            return this.dragControl(moveable, e);\r\n        }\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, parentEvent = e.parentEvent;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        datas.isResize = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        !parentEvent && triggerEvent(moveable, \"onResizeEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: directionCondition$2,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        var parentStartOffsetWidth = datas.startOffsetWidth, parentStartOffsetHeight = datas.startOffsetHeight;\r\n        function updateGroupMin() {\r\n            var originalMinSize = datas.minSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMinSize = _a.minSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMinWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMinSize[0] / childStartOffsetWidth : 0);\r\n                var parentMinHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMinSize[1] / childStartOffsetHeight : 0);\r\n                originalMinSize[0] = Math.max(originalMinSize[0], parentMinWidth);\r\n                originalMinSize[1] = Math.max(originalMinSize[1], parentMinHeight);\r\n            });\r\n        }\r\n        function updateGroupMax() {\r\n            var originalMaxSize = datas.maxSize;\r\n            originalEvents.forEach(function (ev) {\r\n                var _a = ev.datas, childMaxSize = _a.maxSize, childStartOffsetWidth = _a.startOffsetWidth, childStartOffsetHeight = _a.startOffsetHeight;\r\n                var parentMaxWidth = parentStartOffsetWidth\r\n                    * (childStartOffsetWidth ? childMaxSize[0] / childStartOffsetWidth : 0);\r\n                var parentMaxHeight = parentStartOffsetHeight\r\n                    * (childStartOffsetHeight ? childMaxSize[1] / childStartOffsetHeight : 0);\r\n                originalMaxSize[0] = Math.min(originalMaxSize[0], parentMaxWidth);\r\n                originalMaxSize[1] = Math.min(originalMaxSize[1], parentMaxHeight);\r\n            });\r\n        }\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        updateGroupMin();\r\n        updateGroupMax();\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events.map(function (ev) {\r\n                return __assign(__assign({}, ev), { setMin: function (minSize) {\r\n                        ev.setMin(minSize);\r\n                        updateGroupMin();\r\n                    }, setMax: function (maxSize) {\r\n                        ev.setMax(maxSize);\r\n                        updateGroupMax();\r\n                    } });\r\n            }), setFixedDirection: setFixedDirection, setMin: function (minSize) {\r\n                params.setMin(minSize);\r\n                updateGroupMin();\r\n            }, setMax: function (maxSize) {\r\n                params.setMax(maxSize);\r\n                updateGroupMax();\r\n            } });\r\n        var result = triggerEvent(moveable, \"onResizeGroupStart\", nextParams);\r\n        datas.isResize = result !== false;\r\n        return datas.isResize ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        var props = getProps(moveable.props, \"resizable\");\r\n        catchEvent(moveable, \"onBeforeResize\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeResizeGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, __assign(__assign({}, e), { isGroup: true }));\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var boundingWidth = params.boundingWidth, boundingHeight = params.boundingHeight, dist = params.dist;\r\n        var keepRatio = props.keepRatio;\r\n        var parentScale = [\r\n            boundingWidth / (boundingWidth - dist[0]),\r\n            boundingHeight / (boundingHeight - dist[1]),\r\n        ];\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * parentScale[0],\r\n                ev.datas.originalY * parentScale[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: parentScale, dragClient: plus(fixedPosition, [clientX, clientY]), parentKeepRatio: keepRatio });\r\n        });\r\n        var nextParams = __assign({ targets: props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onResizeGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isResize) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onResizeGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Resizable#request\r\n     * @param {Moveable.Resizable.ResizableRequestParam} e - the Resizable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * // Use Relative Value\r\n     * moveable.request(\"resizable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"resizable\");\r\n     *\r\n     * // request\r\n     * // Use Relative Value\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // Use Absolute Value\r\n     * moveable.request(\"resizable\", { offsetWidth: 100, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 110, offsetHeight: 100 });\r\n     * moveable.request(\"resizable\", { offsetWidth: 120, offsetHeight: 100 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        var rect = moveable.getRect();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                var _a;\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    parentIsWidth: (_a = e === null || e === void 0 ? void 0 : e.horizontal) !== null && _a !== void 0 ? _a : true,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                if (\"offsetWidth\" in e) {\r\n                    distWidth = e.offsetWidth - rect.offsetWidth;\r\n                }\r\n                else if (\"deltaWidth\" in e) {\r\n                    distWidth += e.deltaWidth;\r\n                }\r\n                if (\"offsetHeight\" in e) {\r\n                    distHeight = e.offsetHeight - rect.offsetHeight;\r\n                }\r\n                else if (\"deltaHeight\" in e) {\r\n                    distHeight += e.deltaHeight;\r\n                }\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.gestos.resizable = null;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be resized.\r\n * @name Moveable.Resizable#resizable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     resizable: false,\r\n * });\r\n *\r\n * moveable.resizable = true;\r\n */\r\n/**\r\n * throttle of width, height when resize. If throttleResize is set to less than 1, the target may shake.\r\n * @name Moveable.Resizable#throttleResize\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   throttleResize: 1,\r\n * });\r\n *\r\n * moveable.throttleResize = 0;\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height.\r\n * @name Moveable.Resizable#keepRatio\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * Set directions to show the control box.\r\n * @name Moveable.Resizable#renderDirections\r\n * @default [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"]\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * Function to convert size for resize\r\n * @name Moveable.Resizable#resizeFormat\r\n * @default oneself\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   resizable: true,\r\n *   resizeFormat: v => v,\r\n * });\r\n *\r\n * moveable.resizeFormat = (size: number[]) => ([Math.trunc(size[0]), Math.trunc(size[1])];\r\n */\r\n/**\r\n * When the resize starts, the resizeStart event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeStart\r\n * @param {Moveable.Resizable.OnResizeStart} - Parameters for the resizeStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When resizing, `beforeResize` is called before `resize` occurs. In `beforeResize`, you can get and set the pre-value before resizing.\r\n * @memberof Moveable.Resizable\r\n * @event beforeResize\r\n * @param {Moveable.Resizable.OnBeforeResize} - Parameters for the `beforeResize` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"beforeResize\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"resize\", ({ target, width, height, drag }) => {\r\n *     target.style.width = `${width}px`;\r\n *     target.style.height = `${height}px`;\r\n *     target.style.transform = drag.transform;\r\n * });\r\n */\r\n/**\r\n * When resizing, the resize event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resize\r\n * @param {Moveable.Resizable.OnResize} - Parameters for the resize event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resize\", ({ target, width, height }) => {\r\n *     target.style.width = `${e.width}px`;\r\n *     target.style.height = `${e.height}px`;\r\n * });\r\n */\r\n/**\r\n * When the resize finishes, the resizeEnd event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeEnd\r\n * @param {Moveable.Resizable.OnResizeEnd} - Parameters for the resizeEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { resizable: true });\r\n * moveable.on(\"resizeEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group resize starts, the `resizeGroupStart` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroupStart\r\n* @param {Moveable.Resizable.OnResizeGroupStart} - Parameters for the `resizeGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroupStart\", ({ targets }) => {\r\n*     console.log(\"onResizeGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group resize, the `resizeGroup` event is called.\r\n* @memberof Moveable.Resizable\r\n* @event resizeGroup\r\n* @param {Moveable.Resizable.onResizeGroup} - Parameters for the `resizeGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     resizable: true\r\n* });\r\n* moveable.on(\"resizeGroup\", ({ targets, events }) => {\r\n*     console.log(\"onResizeGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const offset = [\r\n*             direction[0] < 0 ? -ev.delta[0] : 0,\r\n*             direction[1] < 0 ? -ev.delta[1] : 0,\r\n*         ];\r\n*         // ev.drag is a drag event that occurs when the group resize.\r\n*         const left = offset[0] + ev.drag.beforeDist[0];\r\n*         const top = offset[1] + ev.drag.beforeDist[1];\r\n*         const width = ev.width;\r\n*         const top = ev.top;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group resize finishes, the `resizeGroupEnd` event is called.\r\n * @memberof Moveable.Resizable\r\n * @event resizeGroupEnd\r\n * @param {Moveable.Resizable.OnResizeGroupEnd} - Parameters for the `resizeGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     resizable: true\r\n * });\r\n * moveable.on(\"resizeGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onResizeGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\n/**\r\n * @namespace Rotatable\r\n * @memberof Moveable\r\n * @description Rotatable indicates whether the target can be rotated.\r\n */\r\nfunction setRotateStartInfo(moveable, datas, clientX, clientY, rect) {\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var n = state.is3d ? 4 : 3;\r\n    var origin = datas.origin;\r\n    var nextOrigin = calculatePosition(moveable.state.rootMatrix, \r\n    // TO-DO #710\r\n    minus([origin[0], origin[1]], groupable ? [0, 0] : [state.left, state.top]), n);\r\n    var startAbsoluteOrigin = plus([rect.left, rect.top], nextOrigin);\r\n    datas.startAbsoluteOrigin = startAbsoluteOrigin;\r\n    datas.prevDeg = getRad(startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180;\r\n    datas.defaultDeg = datas.prevDeg;\r\n    datas.prevSnapDeg = 0;\r\n    datas.loop = 0;\r\n    datas.startDist = getDist$1(startAbsoluteOrigin, [clientX, clientY]);\r\n}\r\nfunction getAbsoluteDist(deg, direction, datas) {\r\n    var defaultDeg = datas.defaultDeg, prevDeg = datas.prevDeg;\r\n    var normalizedPrevDeg = prevDeg % 360;\r\n    var loop = Math.floor(prevDeg / 360);\r\n    if (normalizedPrevDeg < 0) {\r\n        normalizedPrevDeg += 360;\r\n    }\r\n    if (normalizedPrevDeg > deg && normalizedPrevDeg > 270 && deg < 90) {\r\n        // 360 => 0\r\n        ++loop;\r\n    }\r\n    else if (normalizedPrevDeg < deg && normalizedPrevDeg < 90 && deg > 270) {\r\n        // 0 => 360\r\n        --loop;\r\n    }\r\n    var dist = direction * (loop * 360 + deg - defaultDeg);\r\n    datas.prevDeg = defaultDeg + dist;\r\n    return dist;\r\n}\r\nfunction getAbsoluteDistByClient(clientX, clientY, direction, datas) {\r\n    return getAbsoluteDist(getRad(datas.startAbsoluteOrigin, [clientX, clientY]) / Math.PI * 180, direction, datas);\r\n}\r\nfunction getRotateInfo(moveable, moveableRect, datas, dist, startValue, checkSnap) {\r\n    var _a = moveable.props.throttleRotate, throttleRotate = _a === void 0 ? 0 : _a;\r\n    var prevSnapDeg = datas.prevSnapDeg;\r\n    var snapRotation = 0;\r\n    var isSnap = false;\r\n    if (checkSnap) {\r\n        var result = checkSnapRotate(moveable, moveableRect, dist, startValue + dist);\r\n        isSnap = result.isSnap;\r\n        snapRotation = startValue + result.dist;\r\n    }\r\n    if (!isSnap) {\r\n        snapRotation = throttle(startValue + dist, throttleRotate);\r\n    }\r\n    var snapDeg = snapRotation - startValue;\r\n    datas.prevSnapDeg = snapDeg;\r\n    return [snapDeg - prevSnapDeg, snapDeg, snapRotation];\r\n}\r\nfunction getRotationPositions(rotationPosition, _a, direction) {\r\n    var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n    if (rotationPosition === \"none\") {\r\n        return [];\r\n    }\r\n    if (isArray(rotationPosition)) {\r\n        return rotationPosition.map(function (child) { return getRotationPositions(child, [pos1, pos2, pos3, pos4], direction)[0]; });\r\n    }\r\n    var _c = __read((rotationPosition || \"top\").split(\"-\"), 2), dir1 = _c[0], dir2 = _c[1];\r\n    var radPoses = [pos1, pos2];\r\n    if (dir1 === \"left\") {\r\n        radPoses = [pos3, pos1];\r\n    }\r\n    else if (dir1 === \"right\") {\r\n        radPoses = [pos2, pos4];\r\n    }\r\n    else if (dir1 === \"bottom\") {\r\n        radPoses = [pos4, pos3];\r\n    }\r\n    var pos = [\r\n        (radPoses[0][0] + radPoses[1][0]) / 2,\r\n        (radPoses[0][1] + radPoses[1][1]) / 2,\r\n    ];\r\n    var rad = getRotationRad(radPoses, direction);\r\n    if (dir2) {\r\n        var isStart = dir2 === \"top\" || dir2 === \"left\";\r\n        var isReverse = dir1 === \"bottom\" || dir1 === \"left\";\r\n        pos = radPoses[(isStart && !isReverse) || (!isStart && isReverse) ? 0 : 1];\r\n    }\r\n    return [[pos, rad]];\r\n}\r\nfunction dragControlCondition(moveable, e) {\r\n    if (e.isRequest) {\r\n        return e.requestAble === \"rotatable\";\r\n    }\r\n    var target = e.inputEvent.target;\r\n    if (hasClass(target, prefix(\"rotation-control\"))\r\n        || (moveable.props.rotateAroundControls && hasClass(target, prefix(\"around-control\")))\r\n        || (hasClass(target, prefix(\"control\")) && hasClass(target, prefix(\"rotatable\")))) {\r\n        return true;\r\n    }\r\n    var rotationTarget = moveable.props.rotationTarget;\r\n    if (rotationTarget) {\r\n        return getRefTargets(rotationTarget, true).some(function (element) {\r\n            if (!element) {\r\n                return false;\r\n            }\r\n            return target === element || target.contains(element);\r\n        });\r\n    }\r\n    return false;\r\n}\r\nvar css = \".rotation {\\nposition: absolute;\\nheight: 40px;\\nwidth: 1px;\\ntransform-origin: 50% 100%;\\nheight: calc(40px * var(--zoom));\\ntop: auto;\\nleft: 0;\\nbottom: 100%;\\nwill-change: transform;\\n}\\n.rotation .rotation-line {\\ndisplay: block;\\nwidth: 100%;\\nheight: 100%;\\ntransform-origin: 50% 50%;\\n}\\n.rotation .rotation-control {\\nborder-color: #4af;\\nborder-color: var(--moveable-color);\\nbackground:#fff;\\ncursor: alias;\\n}\\n:global .view-rotation-dragging, .rotatable.direction.control {\\ncursor: alias;\\n}\\n.rotatable.direction.control.move {\\ncursor: move;\\n}\\n\";\r\nvar Rotatable = {\r\n    name: \"rotatable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"rotatable\",\r\n        \"rotationPosition\",\r\n        \"throttleRotate\",\r\n        \"renderDirections\",\r\n        \"rotationTarget\",\r\n        \"rotateAroundControls\",\r\n        \"edge\",\r\n        \"resolveAblesWithRotatable\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"rotateStart\",\r\n        \"beforeRotate\",\r\n        \"rotate\",\r\n        \"rotateEnd\",\r\n        \"rotateGroupStart\",\r\n        \"beforeRotateGroup\",\r\n        \"rotateGroup\",\r\n        \"rotateGroupEnd\",\r\n    ],\r\n    css: [css],\r\n    viewClassName: function (moveable) {\r\n        if (!moveable.isDragging(\"rotatable\")) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-rotation-dragging\");\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = getProps(moveable.props, \"rotatable\"), rotatable = _a.rotatable, rotationPosition = _a.rotationPosition, zoom = _a.zoom, renderDirections = _a.renderDirections, rotateAroundControls = _a.rotateAroundControls, resolveAblesWithRotatable = _a.resolveAblesWithRotatable;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, direction = _b.direction;\r\n        if (!rotatable) {\r\n            return null;\r\n        }\r\n        var positions = getRotationPositions(rotationPosition, renderPoses, direction);\r\n        var jsxs = [];\r\n        positions.forEach(function (_a, i) {\r\n            var _b = __read(_a, 2), pos = _b[0], rad = _b[1];\r\n            jsxs.push(React.createElement(\"div\", { key: \"rotation\".concat(i), className: prefix(\"rotation\"), style: {\r\n                    // tslint:disable-next-line: max-line-length\r\n                    transform: \"translate(-50%) translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rad, \"rad)\"),\r\n                } },\r\n                React.createElement(\"div\", { className: prefix(\"line rotation-line\"), style: {\r\n                        transform: \"scaleX(\".concat(zoom, \")\"),\r\n                    } }),\r\n                React.createElement(\"div\", { className: prefix(\"control rotation-control\"), style: {\r\n                        transform: \"translate(0.5px) scale(\".concat(zoom, \")\"),\r\n                    } })));\r\n        });\r\n        if (renderDirections) {\r\n            var ables = getKeys(resolveAblesWithRotatable || {});\r\n            var resolveMap_1 = {};\r\n            ables.forEach(function (name) {\r\n                resolveAblesWithRotatable[name].forEach(function (direction) {\r\n                    resolveMap_1[direction] = name;\r\n                });\r\n            });\r\n            var directionControlInfos = [];\r\n            if (isArray(renderDirections)) {\r\n                directionControlInfos = renderDirections.map(function (dir) {\r\n                    var able = resolveMap_1[dir];\r\n                    return {\r\n                        data: able ? { resolve: able } : {},\r\n                        classNames: able ? [\"move\"] : [],\r\n                        dir: dir,\r\n                    };\r\n                });\r\n            }\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderDirectionControlsByInfos(moveable, \"rotatable\", directionControlInfos, React)), false));\r\n        }\r\n        if (rotateAroundControls) {\r\n            jsxs.push.apply(jsxs, __spreadArray([], __read(renderAroundControls(moveable, React)), false));\r\n        }\r\n        return jsxs;\r\n    },\r\n    dragControlCondition: dragControlCondition,\r\n    dragControlStart: function (moveable, e) {\r\n        var _a;\r\n        var _b;\r\n        var datas = e.datas, clientX = e.clientX, clientY = e.clientY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        var state = moveable.state;\r\n        var target = state.target, left = state.left, top = state.top, direction = state.direction, beforeDirection = state.beforeDirection, targetTransform = state.targetTransform, moveableClientRect = state.moveableClientRect, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, allMatrix = state.allMatrix, width = state.width, height = state.height;\r\n        if (!isRequest && !target) {\r\n            return false;\r\n        }\r\n        var rect = moveable.getRect();\r\n        datas.rect = rect;\r\n        datas.transform = targetTransform;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        var setFixedPosition = function (fixedPosition) {\r\n            var result = getOffsetFixedPositionInfo(moveable.state, fixedPosition);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedPosition(fixedPosition);\r\n            }\r\n        };\r\n        var setFixedDirection = function (fixedDirection) {\r\n            var result = getOffsetFixedDirectionInfo(moveable.state, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedOffset = result.fixedOffset;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            if (resizeStart) {\r\n                resizeStart.setFixedDirection(fixedDirection);\r\n            }\r\n        };\r\n        var startClientX = clientX;\r\n        var startClientY = clientY;\r\n        if (isRequest || isPinch || parentFlag) {\r\n            var externalRotate = parentRotate || 0;\r\n            datas.beforeInfo = {\r\n                origin: rect.beforeOrigin,\r\n                prevDeg: externalRotate,\r\n                defaultDeg: externalRotate,\r\n                prevSnapDeg: 0,\r\n                startDist: 0,\r\n            };\r\n            datas.afterInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin });\r\n            datas.absoluteInfo = __assign(__assign({}, datas.beforeInfo), { origin: rect.origin, startValue: externalRotate });\r\n        }\r\n        else {\r\n            var inputTarget = (_b = e.inputEvent) === null || _b === void 0 ? void 0 : _b.target;\r\n            if (inputTarget) {\r\n                var regionDirection = inputTarget.getAttribute(\"data-direction\") || \"\";\r\n                var controlDirection = DIRECTION_REGION_TO_DIRECTION[regionDirection];\r\n                if (controlDirection) {\r\n                    datas.isControl = true;\r\n                    datas.isAroundControl = hasClass(inputTarget, prefix(\"around-control\"));\r\n                    datas.controlDirection = controlDirection;\r\n                    var resolve = inputTarget.getAttribute(\"data-resolve\");\r\n                    if (resolve) {\r\n                        datas.resolveAble = resolve;\r\n                    }\r\n                    var clientPoses = calculateMoveableClientPositions(state.rootMatrix, state.renderPoses, moveableClientRect);\r\n                    _a = __read(getPosByDirection(clientPoses, controlDirection), 2), startClientX = _a[0], startClientY = _a[1];\r\n                }\r\n            }\r\n            datas.beforeInfo = { origin: rect.beforeOrigin };\r\n            datas.afterInfo = { origin: rect.origin };\r\n            datas.absoluteInfo = {\r\n                origin: rect.origin,\r\n                startValue: rect.rotation,\r\n            };\r\n            var originalFixedPosition_1 = setFixedPosition;\r\n            setFixedPosition = function (fixedPosition) {\r\n                var n = state.is3d ? 4 : 3;\r\n                var _a = __read(plus(getOrigin(targetMatrix, n), fixedPosition), 2), originX = _a[0], originY = _a[1];\r\n                var fixedBeforeOrigin = calculate(offsetMatrix, convertPositionMatrix([originX, originY], n));\r\n                var fixedAfterOrigin = calculate(allMatrix, convertPositionMatrix([fixedPosition[0], fixedPosition[1]], n));\r\n                originalFixedPosition_1(fixedPosition);\r\n                var posDelta = state.posDelta;\r\n                datas.beforeInfo.origin = minus(fixedBeforeOrigin, posDelta);\r\n                datas.afterInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                datas.absoluteInfo.origin = minus(fixedAfterOrigin, posDelta);\r\n                setRotateStartInfo(moveable, datas.beforeInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.afterInfo, startClientX, startClientY, moveableClientRect);\r\n                setRotateStartInfo(moveable, datas.absoluteInfo, startClientX, startClientY, moveableClientRect);\r\n            };\r\n            setFixedDirection = function (fixedDirection) {\r\n                var fixedPosition = getPosByDirection([\r\n                    [0, 0],\r\n                    [width, 0],\r\n                    [0, height],\r\n                    [width, height],\r\n                ], fixedDirection);\r\n                setFixedPosition(fixedPosition);\r\n            };\r\n        }\r\n        datas.startClientX = startClientX;\r\n        datas.startClientY = startClientY;\r\n        datas.direction = direction;\r\n        datas.beforeDirection = beforeDirection;\r\n        datas.startValue = 0;\r\n        datas.datas = {};\r\n        setDefaultTransformIndex(moveable, e, \"rotate\");\r\n        var dragStart = false;\r\n        var resizeStart = false;\r\n        if (datas.isControl && datas.resolveAble) {\r\n            var resolveAble = datas.resolveAble;\r\n            if (resolveAble === \"resizable\") {\r\n                resizeStart = Resizable.dragControlStart(moveable, __assign(__assign({}, (new CustomGesto(\"resizable\").dragStart([0, 0], e))), { parentPosition: datas.controlPosition, parentFixedPosition: datas.fixedPosition }));\r\n            }\r\n        }\r\n        if (!resizeStart) {\r\n            dragStart = Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e));\r\n        }\r\n        setFixedPosition(getTotalOrigin(moveable));\r\n        var params = fillParams(moveable, e, __assign(__assign({ set: function (rotatation) {\r\n                datas.startValue = rotatation * Math.PI / 180;\r\n            }, setFixedDirection: setFixedDirection, setFixedPosition: setFixedPosition }, fillTransformStartEvent(moveable, e)), { dragStart: dragStart, resizeStart: resizeStart }));\r\n        var result = triggerEvent(moveable, \"onRotateStart\", params);\r\n        datas.isRotate = result !== false;\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n        };\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, clientDistX = e.clientDistX, clientDistY = e.clientDistY, parentRotate = e.parentRotate, parentFlag = e.parentFlag, isPinch = e.isPinch, groupDelta = e.groupDelta, resolveMatrix = e.resolveMatrix;\r\n        var beforeDirection = datas.beforeDirection, beforeInfo = datas.beforeInfo, afterInfo = datas.afterInfo, absoluteInfo = datas.absoluteInfo, isRotate = datas.isRotate, startValue = datas.startValue, rect = datas.rect, startClientX = datas.startClientX, startClientY = datas.startClientY;\r\n        if (!isRotate) {\r\n            return;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"rotate\");\r\n        var targetDirection = getTransformDirection(e);\r\n        var direction = beforeDirection * targetDirection;\r\n        var parentMoveable = moveable.props.parentMoveable;\r\n        var beforeDelta = 0;\r\n        var beforeDist;\r\n        var beforeRotation;\r\n        var delta = 0;\r\n        var dist;\r\n        var rotation;\r\n        var absoluteDelta = 0;\r\n        var absoluteDist;\r\n        var absoluteRotation;\r\n        var startRotation = 180 / Math.PI * startValue;\r\n        var absoluteStartRotation = absoluteInfo.startValue;\r\n        var isSnap = false;\r\n        var nextClientX = startClientX + clientDistX;\r\n        var nextClientY = startClientY + clientDistY;\r\n        if (!parentFlag && \"parentDist\" in e) {\r\n            var parentDist = e.parentDist;\r\n            beforeDist = parentDist;\r\n            dist = parentDist;\r\n            absoluteDist = parentDist;\r\n        }\r\n        else if (isPinch || parentFlag) {\r\n            beforeDist = getAbsoluteDist(parentRotate, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDist(parentRotate, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDist(parentRotate, direction, absoluteInfo);\r\n        }\r\n        else {\r\n            beforeDist = getAbsoluteDistByClient(nextClientX, nextClientY, beforeDirection, beforeInfo);\r\n            dist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, afterInfo);\r\n            absoluteDist = getAbsoluteDistByClient(nextClientX, nextClientY, direction, absoluteInfo);\r\n            isSnap = true;\r\n        }\r\n        beforeRotation = startRotation + beforeDist;\r\n        rotation = startRotation + dist;\r\n        absoluteRotation = absoluteStartRotation + absoluteDist;\r\n        triggerEvent(moveable, \"onBeforeRotate\", fillParams(moveable, e, {\r\n            beforeRotation: beforeRotation,\r\n            rotation: rotation,\r\n            absoluteRotation: absoluteRotation,\r\n            setRotation: function (nextRotation) {\r\n                dist = nextRotation - startRotation;\r\n                beforeDist = dist;\r\n                absoluteDist = dist;\r\n            },\r\n        }, true));\r\n        _a = __read(getRotateInfo(moveable, rect, beforeInfo, beforeDist, startRotation, isSnap), 3), beforeDelta = _a[0], beforeDist = _a[1], beforeRotation = _a[2];\r\n        _b = __read(getRotateInfo(moveable, rect, afterInfo, dist, startRotation, isSnap), 3), delta = _b[0], dist = _b[1], rotation = _b[2];\r\n        _c = __read(getRotateInfo(moveable, rect, absoluteInfo, absoluteDist, absoluteStartRotation, isSnap), 3), absoluteDelta = _c[0], absoluteDist = _c[1], absoluteRotation = _c[2];\r\n        if (!absoluteDelta && !delta && !beforeDelta && !parentMoveable && !resolveMatrix) {\r\n            return;\r\n        }\r\n        var nextTransform = convertTransformFormat(datas, \"rotate(\".concat(rotation, \"deg)\"), \"rotate(\".concat(dist, \"deg)\"));\r\n        if (resolveMatrix) {\r\n            datas.fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, datas.fixedDirection, datas.fixedOffset, datas);\r\n        }\r\n        var inverseDist = getRotateDist(moveable, dist, datas);\r\n        var inverseDelta = minus(plus(groupDelta || [0, 0], inverseDist), datas.prevInverseDist || [0, 0]);\r\n        datas.prevInverseDist = inverseDist;\r\n        datas.requestValue = null;\r\n        var dragEvent = fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e);\r\n        var transformEvent = dragEvent;\r\n        var parentDistance = getDist$1([nextClientX, nextClientY], absoluteInfo.startAbsoluteOrigin) - absoluteInfo.startDist;\r\n        var resize = undefined;\r\n        if (datas.resolveAble === \"resizable\") {\r\n            var resizeEvent = Resizable.dragControl(moveable, __assign(__assign({}, setCustomDrag(e, moveable.state, [e.deltaX, e.deltaY], !!isPinch, false, \"resizable\")), { resolveMatrix: true, parentDistance: parentDistance }));\r\n            if (resizeEvent) {\r\n                resize = resizeEvent;\r\n                transformEvent = fillAfterTransform(transformEvent, resizeEvent, e);\r\n            }\r\n        }\r\n        var params = fillParams(moveable, e, __assign(__assign({ delta: delta, dist: dist, rotate: rotation, rotation: rotation, beforeDist: beforeDist, beforeDelta: beforeDelta, beforeRotate: beforeRotation, beforeRotation: beforeRotation, absoluteDist: absoluteDist, absoluteDelta: absoluteDelta, absoluteRotate: absoluteRotation, absoluteRotation: absoluteRotation, isPinch: !!isPinch, resize: resize }, dragEvent), transformEvent));\r\n        triggerEvent(moveable, \"onRotate\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        datas.isRotate = false;\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRotateEnd\", params);\r\n        return params;\r\n    },\r\n    dragGroupControlCondition: dragControlCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var _a = moveable.state, parentLeft = _a.left, parentTop = _a.top, parentBeforeOrigin = _a.beforeOrigin;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        params.set(datas.beforeDirection * moveable.rotation);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            var _a = child.state, left = _a.left, top = _a.top, beforeOrigin = _a.beforeOrigin;\r\n            var childClient = plus(minus([left, top], [parentLeft, parentTop]), minus(beforeOrigin, parentBeforeOrigin));\r\n            ev.datas.startGroupClient = childClient;\r\n            ev.datas.groupClient = childClient;\r\n            return __assign(__assign({}, ev), { parentRotate: 0 });\r\n        });\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events });\r\n        var result = triggerEvent(moveable, \"onRotateGroupStart\", nextParams);\r\n        datas.isRotate = result !== false;\r\n        return datas.isRotate ? params : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeRotate\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeRotateGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var direction = datas.beforeDirection;\r\n        var parentRotate = params.beforeDist;\r\n        var rad = parentRotate / 180 * Math.PI;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var startGroupClient = ev.datas.startGroupClient;\r\n            var _a = __read(ev.datas.groupClient, 2), prevClientX = _a[0], prevClientY = _a[1];\r\n            var _b = __read(rotate(startGroupClient, rad * direction), 2), clientX = _b[0], clientY = _b[1];\r\n            var delta = [clientX - prevClientX, clientY - prevClientY];\r\n            ev.datas.groupClient = [clientX, clientY];\r\n            return __assign(__assign({}, ev), { parentRotate: parentRotate, groupDelta: delta });\r\n        });\r\n        moveable.rotation = direction * params.beforeRotation;\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events, set: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            }, setGroupRotation: function (rotation) {\r\n                moveable.rotation = rotation;\r\n            } }, params);\r\n        triggerEvent(moveable, \"onRotateGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isRotate) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onRotateGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Rotatable#request\r\n     * @param {object} [e] - the Resizable's request parameter\r\n     * @param {number} [e.deltaRotate=0] -  delta number of rotation\r\n     * @param {number} [e.rotate=0] - absolute number of moveable's rotation\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"rotatable\", { deltaRotate: 10 }, true);\r\n     *\r\n     * * moveable.request(\"rotatable\", { rotate: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"rotatable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     * requester.request({ deltaRotate: 10 });\r\n     *\r\n     * requester.request({ rotate: 10 });\r\n     * requester.request({ rotate: 20 });\r\n     * requester.request({ rotate: 30 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var distRotate = 0;\r\n        var startRotation = moveable.getRotation();\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaRotate\" in e) {\r\n                    distRotate += e.deltaRotate;\r\n                }\r\n                else if (\"rotate\" in e) {\r\n                    distRotate = e.rotate - startRotation;\r\n                }\r\n                return { datas: datas, parentDist: distRotate };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be rotated. (default: false)\r\n * @name Moveable.Rotatable#rotatable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.rotatable = true;\r\n */\r\n/**\r\n * You can specify the position of the rotation. (default: \"top\")\r\n * @name Moveable.Rotatable#rotationPosition\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   rotationPosition: \"top\",\r\n * });\r\n *\r\n * moveable.rotationPosition = \"bottom\"\r\n */\r\n/**\r\n * throttle of angle(degree) when rotate.\r\n * @name Moveable.Rotatable#throttleRotate\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleRotate = 1;\r\n */\r\n/**\r\n * When the rotate starts, the rotateStart event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateStart\r\n * @param {Moveable.Rotatable.OnRotateStart} - Parameters for the rotateStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n* When rotating, the rotate event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotate\r\n* @param {Moveable.Rotatable.OnRotate} - Parameters for the rotate event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { rotatable: true });\r\n* moveable.on(\"rotate\", ({ target, transform, dist }) => {\r\n*     target.style.transform = transform;\r\n* });\r\n*/\r\n/**\r\n * When the rotate finishes, the rotateEnd event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateEnd\r\n * @param {Moveable.Rotatable.OnRotateEnd} - Parameters for the rotateEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { rotatable: true });\r\n * moveable.on(\"rotateEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n * When the group rotate starts, the `rotateGroupStart` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupStart\r\n * @param {Moveable.Rotatable.OnRotateGroupStart} - Parameters for the `rotateGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRotateGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n* When the group rotate, the `rotateGroup` event is called.\r\n* @memberof Moveable.Rotatable\r\n* @event rotateGroup\r\n* @param {Moveable.Rotatable.OnRotateGroup} - Parameters for the `rotateGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     rotatable: true\r\n* });\r\n* moveable.on(\"rotateGroup\", ({ targets, events }) => {\r\n*     console.log(\"onRotateGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group rotate.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const deg = ev.beforeDist;\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group rotate finishes, the `rotateGroupEnd` event is called.\r\n * @memberof Moveable.Rotatable\r\n * @event rotateGroupEnd\r\n * @param {Moveable.Rotatable.OnRotateGroupEnd} - Parameters for the `rotateGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     rotatable: true\r\n * });\r\n * moveable.on(\"rotateGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onRotateGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction renderGuideline(info, React) {\r\n    var _a;\r\n    var direction = info.direction, classNames = info.classNames, size = info.size, pos = info.pos, zoom = info.zoom, key = info.key;\r\n    var isHorizontal = direction === \"horizontal\";\r\n    var scaleType = isHorizontal ? \"Y\" : \"X\";\r\n    // const scaleType2 = isHorizontal ? \"Y\" : \"X\";\r\n    return React.createElement(\"div\", {\r\n        key: key,\r\n        className: classNames.join(\" \"),\r\n        style: (_a = {},\r\n            _a[isHorizontal ? \"width\" : \"height\"] = \"\".concat(size),\r\n            _a.transform = \"translate(\".concat(pos[0], \", \").concat(pos[1], \") translate\").concat(scaleType, \"(-50%) scale\").concat(scaleType, \"(\").concat(zoom, \")\"),\r\n            _a),\r\n    });\r\n}\r\nfunction renderInnerGuideline(info, React) {\r\n    return renderGuideline(__assign(__assign({}, info), { classNames: __spreadArray([\r\n            prefix(\"line\", \"guideline\", info.direction)\r\n        ], __read(info.classNames), false).filter(function (className) { return className; }), size: info.size || \"\".concat(info.sizeValue, \"px\"), pos: info.pos || info.posValue.map(function (v) { return \"\".concat(throttle(v, 0.1), \"px\"); }) }), React);\r\n}\r\nfunction renderSnapPoses(moveable, direction, snapPoses, minPos, targetPos, size, index, React) {\r\n    var zoom = moveable.props.zoom;\r\n    return snapPoses.map(function (_a, i) {\r\n        var type = _a.type, pos = _a.pos;\r\n        var renderPos = [0, 0];\r\n        renderPos[index] = minPos;\r\n        renderPos[index ? 0 : 1] = -targetPos + pos;\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(direction, \"TargetGuideline\").concat(i),\r\n            classNames: [prefix(\"target\", \"bold\", type)],\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n            direction: direction,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderGuidelines(moveable, type, guidelines, targetPos, targetRect, React) {\r\n    var _a = moveable.props, zoom = _a.zoom, isDisplayInnerSnapDigit = _a.isDisplayInnerSnapDigit;\r\n    var mainNames = type === \"horizontal\" ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[mainNames.start];\r\n    var targetEnd = targetRect[mainNames.end];\r\n    return guidelines.filter(function (_a) {\r\n        var hide = _a.hide, elementRect = _a.elementRect;\r\n        if (hide) {\r\n            return false;\r\n        }\r\n        if (isDisplayInnerSnapDigit && elementRect) {\r\n            // inner\r\n            var rect = elementRect.rect;\r\n            if (rect[mainNames.start] <= targetStart && targetEnd <= rect[mainNames.end]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }).map(function (guideline, i) {\r\n        var pos = guideline.pos, size = guideline.size, element = guideline.element, className = guideline.className;\r\n        var renderPos = [\r\n            -targetPos[0] + pos[0],\r\n            -targetPos[1] + pos[1],\r\n        ];\r\n        return renderInnerGuideline({\r\n            key: \"\".concat(type, \"-default-guideline-\").concat(i),\r\n            classNames: element ? [prefix(\"bold\"), className] : [prefix(\"normal\"), className],\r\n            direction: type,\r\n            posValue: renderPos,\r\n            sizeValue: size,\r\n            zoom: zoom,\r\n        }, React);\r\n    });\r\n}\r\nfunction renderDigitLine(moveable, type, lineType, index, gap, renderPos, className, React) {\r\n    var _a;\r\n    var _b = moveable.props, _c = _b.snapDigit, snapDigit = _c === void 0 ? 0 : _c, _d = _b.isDisplaySnapDigit, isDisplaySnapDigit = _d === void 0 ? true : _d, _e = _b.snapDistFormat, snapDistFormat = _e === void 0 ? function (v, type) {\r\n        // Type can be used render different values.\r\n        if (type === 'vertical') {\r\n            return v;\r\n        }\r\n        return v;\r\n    } : _e, zoom = _b.zoom;\r\n    var scaleType = type === \"horizontal\" ? \"X\" : \"Y\";\r\n    var sizeName = type === \"vertical\" ? \"height\" : \"width\";\r\n    var absGap = Math.abs(gap);\r\n    var snapSize = isDisplaySnapDigit\r\n        ? parseFloat(absGap.toFixed(snapDigit))\r\n        : 0;\r\n    return React.createElement(\"div\", { key: \"\".concat(type, \"-\").concat(lineType, \"-guideline-\").concat(index), className: prefix(\"guideline-group\", type), style: (_a = {\r\n                left: \"\".concat(renderPos[0], \"px\"),\r\n                top: \"\".concat(renderPos[1], \"px\")\r\n            },\r\n            _a[sizeName] = \"\".concat(absGap, \"px\"),\r\n            _a) },\r\n        renderInnerGuideline({\r\n            direction: type,\r\n            classNames: [prefix(lineType), className],\r\n            size: \"100%\",\r\n            posValue: [0, 0],\r\n            sizeValue: absGap,\r\n            zoom: zoom,\r\n        }, React),\r\n        React.createElement(\"div\", { className: prefix(\"size-value\", \"gap\"), style: {\r\n                transform: \"translate\".concat(scaleType, \"(-50%) scale(\").concat(zoom, \")\"),\r\n            } }, snapSize > 0 ? snapDistFormat(snapSize, type) : \"\"));\r\n}\r\nfunction groupByElementGuidelines(type, guidelines, targetRect, isDisplayInnerSnapDigit) {\r\n    var index = type === \"vertical\" ? 0 : 1;\r\n    var otherIndex = type === \"vertical\" ? 1 : 0;\r\n    var names = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n    var targetStart = targetRect[names.start];\r\n    var targetEnd = targetRect[names.end];\r\n    return groupBy(guidelines, function (guideline) {\r\n        return guideline.pos[index];\r\n    }).map(function (nextGuidelines) {\r\n        var start = [];\r\n        var end = [];\r\n        var inner = [];\r\n        nextGuidelines.forEach(function (guideline) {\r\n            var _a, _b;\r\n            var element = guideline.element;\r\n            var rect = guideline.elementRect.rect;\r\n            if (rect[names.end] < targetStart) {\r\n                start.push(guideline);\r\n            }\r\n            else if (targetEnd < rect[names.start]) {\r\n                end.push(guideline);\r\n            }\r\n            else if (rect[names.start] <= targetStart && targetEnd <= rect[names.end] && isDisplayInnerSnapDigit) {\r\n                var pos = guideline.pos;\r\n                var elementRect1 = { element: element, rect: __assign(__assign({}, rect), (_a = {}, _a[names.end] = rect[names.start], _a)) };\r\n                var elementRect2 = { element: element, rect: __assign(__assign({}, rect), (_b = {}, _b[names.start] = rect[names.end], _b)) };\r\n                var nextPos1 = [0, 0];\r\n                var nextPos2 = [0, 0];\r\n                nextPos1[index] = pos[index];\r\n                nextPos1[otherIndex] = pos[otherIndex];\r\n                nextPos2[index] = pos[index];\r\n                nextPos2[otherIndex] = pos[otherIndex] + guideline.size;\r\n                start.push({\r\n                    type: type,\r\n                    pos: nextPos1,\r\n                    size: 0,\r\n                    elementRect: elementRect1,\r\n                    direction: \"\",\r\n                    elementDirection: \"end\",\r\n                });\r\n                end.push({\r\n                    type: type,\r\n                    pos: nextPos2,\r\n                    size: 0,\r\n                    elementRect: elementRect2,\r\n                    direction: \"\",\r\n                    elementDirection: \"start\",\r\n                });\r\n                // inner.push(guideline);\r\n            }\r\n        });\r\n        start.sort(function (a, b) {\r\n            return b.pos[otherIndex] - a.pos[otherIndex];\r\n        });\r\n        end.sort(function (a, b) {\r\n            return a.pos[otherIndex] - b.pos[otherIndex];\r\n        });\r\n        return {\r\n            total: nextGuidelines,\r\n            start: start,\r\n            end: end,\r\n            inner: inner,\r\n        };\r\n    });\r\n}\r\nfunction renderDashedGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var isDisplayInnerSnapDigit = moveable.props.isDisplayInnerSnapDigit;\r\n    var rendered = [];\r\n    [\"vertical\", \"horizontal\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; });\r\n        var index = type === \"vertical\" ? 1 : 0;\r\n        var otherIndex = index ? 0 : 1;\r\n        var groups = groupByElementGuidelines(type, nextGuidelines, targetRect, isDisplayInnerSnapDigit);\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        groups.forEach(function (_a) {\r\n            var total = _a.total, start = _a.start, end = _a.end, inner = _a.inner;\r\n            var sidePos = targetPos[otherIndex] + total[0].pos[otherIndex] - targetRect[sideNames.start];\r\n            var prevRect = targetRect;\r\n            start.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = prevRect[mainNames.start] - nextRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.start] - targetStart - size;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            prevRect = targetRect;\r\n            end.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size = nextRect[mainNames.start] - prevRect[mainNames.end];\r\n                if (size > 0) {\r\n                    var renderPos = [0, 0];\r\n                    renderPos[index] = targetPos[index] + prevRect[mainNames.end] - targetStart;\r\n                    renderPos[otherIndex] = sidePos;\r\n                    rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size, renderPos, guideline.className, React));\r\n                }\r\n                prevRect = nextRect;\r\n            });\r\n            inner.forEach(function (guideline) {\r\n                var nextRect = guideline.elementRect.rect;\r\n                var size1 = targetStart - nextRect[mainNames.start];\r\n                var size2 = nextRect[mainNames.end] - targetEnd;\r\n                var renderPos1 = [0, 0];\r\n                var renderPos2 = [0, 0];\r\n                renderPos1[index] = targetPos[index] - size1;\r\n                renderPos1[otherIndex] = sidePos;\r\n                renderPos2[index] = targetPos[index] + targetEnd - targetStart;\r\n                renderPos2[otherIndex] = sidePos;\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size1, renderPos1, guideline.className, React));\r\n                rendered.push(renderDigitLine(moveable, type, \"dashed\", rendered.length, size2, renderPos2, guideline.className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\r\nfunction renderGapGuidelines(moveable, guidelines, targetPos, targetRect, React) {\r\n    var rendered = [];\r\n    [\"horizontal\", \"vertical\"].forEach(function (type) {\r\n        var nextGuidelines = guidelines.filter(function (guideline) { return guideline.type === type; }).slice(0, 1);\r\n        var index = type === \"vertical\" ? 0 : 1;\r\n        var otherIndex = index ? 0 : 1;\r\n        var mainNames = index ? HORIZONTAL_NAMES_MAP : VERTICAL_NAMES_MAP;\r\n        var sideNames = index ? VERTICAL_NAMES_MAP : HORIZONTAL_NAMES_MAP;\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetSideStart = targetRect[sideNames.start];\r\n        var targetSideEnd = targetRect[sideNames.end];\r\n        nextGuidelines.forEach(function (_a) {\r\n            var gap = _a.gap, gapRects = _a.gapRects;\r\n            var sideStartPos = Math.max.apply(Math, __spreadArray([targetSideStart], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.start];\r\n            })), false));\r\n            var sideEndPos = Math.min.apply(Math, __spreadArray([targetSideEnd], __read(gapRects.map(function (_a) {\r\n                var rect = _a.rect;\r\n                return rect[sideNames.end];\r\n            })), false));\r\n            var sideCenterPos = (sideStartPos + sideEndPos) / 2;\r\n            if (sideStartPos === sideEndPos || sideCenterPos === (targetSideStart + targetSideEnd) / 2) {\r\n                return;\r\n            }\r\n            gapRects.forEach(function (_a) {\r\n                var rect = _a.rect, className = _a.className;\r\n                var renderPos = [targetPos[0], targetPos[1]];\r\n                if (rect[mainNames.end] < targetStart) {\r\n                    renderPos[index] += rect[mainNames.end] - targetStart;\r\n                }\r\n                else if (targetEnd < rect[mainNames.start]) {\r\n                    renderPos[index] += rect[mainNames.start] - targetStart - gap;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n                renderPos[otherIndex] += sideCenterPos - targetSideStart;\r\n                rendered.push(renderDigitLine(moveable, index ? \"vertical\" : \"horizontal\", \"gap\", rendered.length, gap, renderPos, className, React));\r\n            });\r\n        });\r\n    });\r\n    return rendered;\r\n}\n\nfunction getTotalGuidelines(moveable) {\r\n    var _a, _b;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, hasFixed = state.hasFixed;\r\n    var overflow = containerClientRect.overflow, containerHeight = containerClientRect.scrollHeight, containerWidth = containerClientRect.scrollWidth, containerClientHeight = containerClientRect.clientHeight, containerClientWidth = containerClientRect.clientWidth, clientLeft = containerClientRect.clientLeft, clientTop = containerClientRect.clientTop;\r\n    var _c = moveable.props, _d = _c.snapGap, snapGap = _d === void 0 ? true : _d, verticalGuidelines = _c.verticalGuidelines, horizontalGuidelines = _c.horizontalGuidelines, _e = _c.snapThreshold, snapThreshold = _e === void 0 ? 5 : _e, _f = _c.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _f === void 0 ? Infinity : _f, isDisplayGridGuidelines = _c.isDisplayGridGuidelines;\r\n    var _g = getRect(getAbsolutePosesByState(moveable.state)), top = _g.top, left = _g.left, bottom = _g.bottom, right = _g.right;\r\n    var targetRect = { top: top, left: left, bottom: bottom, right: right, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n    var elementGuidelines = getElementGuidelines(moveable);\r\n    var totalGuidelines = __spreadArray([], __read(elementGuidelines), false);\r\n    var snapThresholdMultiples = ((_b = (_a = state.snapThresholdInfo) === null || _a === void 0 ? void 0 : _a.multiples) !== null && _b !== void 0 ? _b : [1, 1]).map(function (n) { return n * snapThreshold; });\r\n    if (snapGap) {\r\n        totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGapGuidelines(moveable, targetRect, snapThresholdMultiples)), false));\r\n    }\r\n    var snapOffset = __assign({}, (state.snapOffset || {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    }));\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getGridGuidelines(moveable, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines)), false));\r\n    if (hasFixed) {\r\n        var left_1 = containerClientRect.left, top_1 = containerClientRect.top;\r\n        snapOffset.left += left_1;\r\n        snapOffset.top += top_1;\r\n        snapOffset.right += left_1;\r\n        snapOffset.bottom += top_1;\r\n    }\r\n    totalGuidelines.push.apply(totalGuidelines, __spreadArray([], __read(getDefaultGuidelines(horizontalGuidelines || false, verticalGuidelines || false, overflow ? containerWidth : containerClientWidth, overflow ? containerHeight : containerClientHeight, clientLeft, clientTop, snapOffset)), false));\r\n    totalGuidelines = totalGuidelines.filter(function (_a) {\r\n        var element = _a.element, elementRect = _a.elementRect, type = _a.type;\r\n        if (!element || !elementRect) {\r\n            return true;\r\n        }\r\n        var rect = elementRect.rect;\r\n        return checkBetweenRects(targetRect, rect, type, maxSnapElementGuidelineDistance);\r\n    });\r\n    return totalGuidelines;\r\n}\r\nfunction getGapGuidelines(moveable, targetRect, snapThresholds) {\r\n    var _a = moveable.props, _b = _a.maxSnapElementGuidelineDistance, maxSnapElementGuidelineDistance = _b === void 0 ? Infinity : _b, _c = _a.maxSnapElementGapDistance, maxSnapElementGapDistance = _c === void 0 ? Infinity : _c;\r\n    var elementRects = moveable.state.elementRects;\r\n    var gapGuidelines = [];\r\n    [\r\n        [\"vertical\", VERTICAL_NAMES_MAP, HORIZONTAL_NAMES_MAP],\r\n        [\"horizontal\", HORIZONTAL_NAMES_MAP, VERTICAL_NAMES_MAP],\r\n    ].forEach(function (_a) {\r\n        var _b = __read(_a, 3), type = _b[0], mainNames = _b[1], sideNames = _b[2];\r\n        var targetStart = targetRect[mainNames.start];\r\n        var targetEnd = targetRect[mainNames.end];\r\n        var targetCenter = targetRect[mainNames.center];\r\n        var targetStart2 = targetRect[sideNames.start];\r\n        var targetEnd2 = targetRect[sideNames.end];\r\n        // element : moveable\r\n        var snapThresholdMap = {\r\n            left: snapThresholds[0],\r\n            top: snapThresholds[1],\r\n        };\r\n        function getDist(elementRect) {\r\n            var rect = elementRect.rect;\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            if (rect[mainNames.end] < targetStart + snapThreshold) {\r\n                return targetStart - rect[mainNames.end];\r\n            }\r\n            else if (targetEnd - snapThreshold < rect[mainNames.start]) {\r\n                return rect[mainNames.start] - targetEnd;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        var nextElementRects = elementRects.filter(function (elementRect) {\r\n            var rect = elementRect.rect;\r\n            if (rect[sideNames.start] > targetEnd2 || rect[sideNames.end] < targetStart2) {\r\n                return false;\r\n            }\r\n            return getDist(elementRect) > 0;\r\n        }).sort(function (a, b) {\r\n            return getDist(a) - getDist(b);\r\n        });\r\n        var groups = [];\r\n        nextElementRects.forEach(function (snapRect1) {\r\n            nextElementRects.forEach(function (snapRect2) {\r\n                if (snapRect1 === snapRect2) {\r\n                    return;\r\n                }\r\n                var rect1 = snapRect1.rect;\r\n                var rect2 = snapRect2.rect;\r\n                var rect1Start = rect1[sideNames.start];\r\n                var rect1End = rect1[sideNames.end];\r\n                var rect2Start = rect2[sideNames.start];\r\n                var rect2End = rect2[sideNames.end];\r\n                if (rect1Start > rect2End || rect2Start > rect1End) {\r\n                    return;\r\n                }\r\n                groups.push([snapRect1, snapRect2]);\r\n            });\r\n        });\r\n        groups.forEach(function (_a) {\r\n            var _b = __read(_a, 2), snapRect1 = _b[0], snapRect2 = _b[1];\r\n            var rect1 = snapRect1.rect;\r\n            var rect2 = snapRect2.rect;\r\n            var rect1Start = rect1[mainNames.start];\r\n            var rect1End = rect1[mainNames.end];\r\n            var rect2Start = rect2[mainNames.start];\r\n            var rect2End = rect2[mainNames.end];\r\n            var snapThreshold = snapThresholdMap[mainNames.start];\r\n            var gap = 0;\r\n            var pos = 0;\r\n            var isStart = false;\r\n            var isCenter = false;\r\n            var isEnd = false;\r\n            if (rect1End <= targetStart && targetEnd <= rect2Start) {\r\n                // (l)element1(r) : (l)target(r) : (l)element2(r)\r\n                isCenter = true;\r\n                gap = ((rect2Start - rect1End) - (targetEnd - targetStart)) / 2;\r\n                pos = rect1End + gap + (targetEnd - targetStart) / 2;\r\n                if (abs(pos - targetCenter) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && rect2End < targetStart + snapThreshold) {\r\n                // (l)element1(r) : (l)element2(r) : (l)target\r\n                isStart = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect2End + gap;\r\n                if (abs(pos - targetStart) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (rect1End < rect2Start && targetEnd - snapThreshold < rect1Start) {\r\n                // target(r) : (l)element1(r) : (l)element2(r)\r\n                isEnd = true;\r\n                gap = rect2Start - rect1End;\r\n                pos = rect1Start - gap;\r\n                if (abs(pos - targetEnd) > snapThreshold) {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            if (!gap) {\r\n                return;\r\n            }\r\n            if (!checkBetweenRects(targetRect, rect2, type, maxSnapElementGuidelineDistance)) {\r\n                return;\r\n            }\r\n            if (gap > maxSnapElementGapDistance) {\r\n                return;\r\n            }\r\n            gapGuidelines.push({\r\n                type: type,\r\n                pos: type === \"vertical\" ? [pos, 0] : [0, pos],\r\n                element: snapRect2.element,\r\n                size: 0,\r\n                className: snapRect2.className,\r\n                isStart: isStart,\r\n                isCenter: isCenter,\r\n                isEnd: isEnd,\r\n                gap: gap,\r\n                hide: true,\r\n                gapRects: [snapRect1, snapRect2],\r\n                direction: \"\",\r\n                elementDirection: \"\",\r\n            });\r\n        });\r\n    });\r\n    return gapGuidelines;\r\n}\r\nfunction startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset) {\r\n    var _a, _b;\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var snapGridAll = props.snapGridAll;\r\n    var _c = props.snapGridWidth, snapGridWidth = _c === void 0 ? 0 : _c, _d = props.snapGridHeight, snapGridHeight = _d === void 0 ? 0 : _d;\r\n    var snapRenderInfo = state.snapRenderInfo;\r\n    var hasDirection = snapRenderInfo && (((_a = snapRenderInfo.direction) === null || _a === void 0 ? void 0 : _a[0]) || ((_b = snapRenderInfo.direction) === null || _b === void 0 ? void 0 : _b[1]));\r\n    var moveables = moveable.moveables;\r\n    // snap group's all child to grid.\r\n    if (snapGridAll\r\n        && moveables\r\n        && hasDirection\r\n        && (snapGridWidth || snapGridHeight)) {\r\n        if (state.snapThresholdInfo) {\r\n            return;\r\n        }\r\n        state.snapThresholdInfo = {\r\n            multiples: [1, 1],\r\n            offset: [0, 0],\r\n        };\r\n        var rect_1 = moveable.getRect();\r\n        var children_1 = rect_1.children;\r\n        var direction = snapRenderInfo.direction;\r\n        if (children_1) {\r\n            var result = direction.map(function (dir, i) {\r\n                var _a = i === 0 ? {\r\n                    snapSize: snapGridWidth,\r\n                    posName: \"left\",\r\n                    sizeName: \"width\",\r\n                    clientOffset: snapOffset.left - clientLeft,\r\n                } : {\r\n                    snapSize: snapGridHeight,\r\n                    posName: \"top\",\r\n                    sizeName: \"height\",\r\n                    clientOffset: snapOffset.top - clientTop,\r\n                }, snapSize = _a.snapSize, posName = _a.posName, sizeName = _a.sizeName, clientOffset = _a.clientOffset;\r\n                if (!snapSize) {\r\n                    return {\r\n                        dir: dir,\r\n                        multiple: 1,\r\n                        snapSize: snapSize,\r\n                        snapOffset: 0,\r\n                    };\r\n                }\r\n                var rectSize = rect_1[sizeName];\r\n                var rectPos = rect_1[posName];\r\n                // 사이즈보다 만약 작다면 어떻게 해야되죠?\r\n                var childSizes = flat$1(children_1.map(function (child) {\r\n                    return [\r\n                        (child[posName] - rectPos),\r\n                        (child[sizeName]),\r\n                        (rectSize - child[sizeName] - child[posName] + rectPos),\r\n                    ];\r\n                })).filter(function (v) { return v; }).sort(function (a, b) {\r\n                    return a - b;\r\n                });\r\n                var firstChildSize = childSizes[0];\r\n                var childSnapSizes = childSizes.map(function (size) { return throttle(size / firstChildSize, 0.1) * snapSize; });\r\n                var n = 1;\r\n                var rectRatio = throttle(rectSize / firstChildSize, 0.1);\r\n                for (n = 1; n <= 10; ++n) {\r\n                    if (childSnapSizes.every(function (childSize) {\r\n                        return childSize * n % 1 === 0;\r\n                    })) {\r\n                        break;\r\n                    }\r\n                }\r\n                // dir 1 (fixed -1)\r\n                // dir 0 (fixed 0)\r\n                // dir -1 (fixed 1)\r\n                var ratio = (-dir + 1) / 2;\r\n                var offsetPos = dot(rectPos - clientOffset, rectPos - clientOffset + rectSize, ratio, 1 - ratio);\r\n                return {\r\n                    multiple: rectRatio * n,\r\n                    dir: dir,\r\n                    snapSize: snapSize,\r\n                    snapOffset: Math.round(offsetPos / snapSize),\r\n                };\r\n            });\r\n            var multiples = result.map(function (r) { return r.multiple || 1; });\r\n            state.snapThresholdInfo.multiples = multiples;\r\n            state.snapThresholdInfo.offset = result.map(function (r) { return r.snapOffset; });\r\n            result.forEach(function (r, i) {\r\n                if (r.snapSize) ;\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        state.snapThresholdInfo = null;\r\n    }\r\n}\r\nfunction getGridGuidelines(moveable, containerWidth, containerHeight, clientLeft, clientTop, snapOffset, isDisplayGridGuidelines) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    var props = moveable.props;\r\n    var state = moveable.state;\r\n    var _a = props.snapGridWidth, snapGridWidth = _a === void 0 ? 0 : _a, _b = props.snapGridHeight, snapGridHeight = _b === void 0 ? 0 : _b;\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top;\r\n    var startOffset = [0, 0];\r\n    startGridGroupGuidelines(moveable, clientLeft, clientTop, snapOffset);\r\n    var snapThresholdInfo = state.snapThresholdInfo;\r\n    var defaultSnapGridWidth = snapGridWidth;\r\n    var defaultSnapGridHeight = snapGridHeight;\r\n    if (snapThresholdInfo) {\r\n        snapGridWidth *= snapThresholdInfo.multiples[0] || 1;\r\n        snapGridHeight *= snapThresholdInfo.multiples[1] || 1;\r\n        startOffset = snapThresholdInfo.offset;\r\n    }\r\n    if (snapGridHeight) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"horizontal\",\r\n                pos: [\r\n                    snapOffsetLeft,\r\n                    throttle(startOffset[1] * defaultSnapGridHeight + pos - clientTop + snapOffsetTop, 0.1),\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerWidth,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerHeight * 2; pos += snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridHeight; pos >= -containerHeight; pos -= snapGridHeight) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    if (snapGridWidth) {\r\n        var pushGuideline = function (pos) {\r\n            guidelines.push({\r\n                type: \"vertical\",\r\n                pos: [\r\n                    throttle(startOffset[0] * defaultSnapGridWidth + pos - clientLeft + snapOffsetLeft, 0.1),\r\n                    snapOffsetTop,\r\n                ],\r\n                className: prefix(\"grid-guideline\"),\r\n                size: containerHeight,\r\n                hide: !isDisplayGridGuidelines,\r\n                direction: \"\",\r\n                grid: true,\r\n            });\r\n        };\r\n        for (var pos = 0; pos <= containerWidth * 2; pos += snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n        for (var pos = -snapGridWidth; pos >= -containerWidth; pos -= snapGridWidth) {\r\n            pushGuideline(pos);\r\n        }\r\n    }\r\n    return guidelines;\r\n}\r\nfunction checkBetweenRects(rect1, rect2, type, distance) {\r\n    if (type === \"horizontal\") {\r\n        return abs(rect1.right - rect2.left) <= distance\r\n            || abs(rect1.left - rect2.right) <= distance\r\n            || rect1.left <= rect2.right && rect2.left <= rect1.right;\r\n    }\r\n    else if (type === \"vertical\") {\r\n        return abs(rect1.bottom - rect2.top) <= distance\r\n            || abs(rect1.top - rect2.bottom) <= distance\r\n            || rect1.top <= rect2.bottom && rect2.top <= rect1.bottom;\r\n    }\r\n    return true;\r\n}\r\nfunction getElementGuidelines(moveable) {\r\n    var state = moveable.state;\r\n    var _a = moveable.props.elementGuidelines, elementGuidelines = _a === void 0 ? [] : _a;\r\n    if (!elementGuidelines.length) {\r\n        state.elementRects = [];\r\n        return [];\r\n    }\r\n    var prevValues = (state.elementRects || []).filter(function (snapRect) { return !snapRect.refresh; });\r\n    var nextElementGuidelines = elementGuidelines.map(function (el) {\r\n        if (isObject(el) && \"element\" in el) {\r\n            return __assign(__assign({}, el), { element: getRefTarget(el.element, true) });\r\n        }\r\n        return {\r\n            element: getRefTarget(el, true),\r\n        };\r\n    }).filter(function (value) {\r\n        return value.element;\r\n    });\r\n    var _b = diff(prevValues.map(function (v) { return v.element; }), nextElementGuidelines.map(function (v) { return v.element; })), maintained = _b.maintained, added = _b.added;\r\n    var nextValues = [];\r\n    maintained.forEach(function (_a) {\r\n        var _b = __read(_a, 2), prevIndex = _b[0], nextIndex = _b[1];\r\n        nextValues[nextIndex] = prevValues[prevIndex];\r\n    });\r\n    getSnapElementRects(moveable, added.map(function (index) { return nextElementGuidelines[index]; })).map(function (rect, i) {\r\n        nextValues[added[i]] = rect;\r\n    });\r\n    state.elementRects = nextValues;\r\n    var elementSnapDirections = getSnapDirections(moveable.props.elementSnapDirections);\r\n    var nextGuidelines = [];\r\n    nextValues.forEach(function (snapRect) {\r\n        var element = snapRect.element, _a = snapRect.top, topValue = _a === void 0 ? elementSnapDirections.top : _a, _b = snapRect.left, leftValue = _b === void 0 ? elementSnapDirections.left : _b, _c = snapRect.right, rightValue = _c === void 0 ? elementSnapDirections.right : _c, _d = snapRect.bottom, bottomValue = _d === void 0 ? elementSnapDirections.bottom : _d, _e = snapRect.center, centerValue = _e === void 0 ? elementSnapDirections.center : _e, _f = snapRect.middle, middleValue = _f === void 0 ? elementSnapDirections.middle : _f, className = snapRect.className, rect = snapRect.rect;\r\n        var _g = splitSnapDirectionPoses({\r\n            top: topValue,\r\n            right: rightValue,\r\n            left: leftValue,\r\n            bottom: bottomValue,\r\n            center: centerValue,\r\n            middle: middleValue,\r\n        }, rect), horizontal = _g.horizontal, vertical = _g.vertical, horizontalNames = _g.horizontalNames, verticalNames = _g.verticalNames;\r\n        var rectTop = rect.top;\r\n        var rectLeft = rect.left;\r\n        var width = rect.right - rectLeft;\r\n        var height = rect.bottom - rectTop;\r\n        var sizes = [width, height];\r\n        vertical.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"vertical\",\r\n                element: element,\r\n                pos: [\r\n                    throttle(pos, 0.1),\r\n                    rectTop,\r\n                ], size: height,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[verticalNames[i]] || verticalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n        horizontal.forEach(function (pos, i) {\r\n            nextGuidelines.push({\r\n                type: \"horizontal\",\r\n                element: element,\r\n                pos: [\r\n                    rectLeft,\r\n                    throttle(pos, 0.1),\r\n                ],\r\n                size: width,\r\n                sizes: sizes,\r\n                className: className,\r\n                elementRect: snapRect,\r\n                elementDirection: SNAP_SKIP_NAMES_MAP[horizontalNames[i]] || horizontalNames[i],\r\n                direction: \"\",\r\n            });\r\n        });\r\n    });\r\n    return nextGuidelines;\r\n}\r\nfunction getObjectGuidelines(guidelines, containerSize) {\r\n    return guidelines ? guidelines.map(function (info) {\r\n        var posGuideline = isObject(info) ? info : { pos: info };\r\n        var pos = posGuideline.pos;\r\n        if (isNumber(pos)) {\r\n            return posGuideline;\r\n        }\r\n        else {\r\n            return __assign(__assign({}, posGuideline), { pos: convertUnitSize(pos, containerSize) });\r\n        }\r\n    }) : [];\r\n}\r\nfunction getDefaultGuidelines(horizontalGuidelines, verticalGuidelines, width, height, clientLeft, clientTop, snapOffset) {\r\n    if (clientLeft === void 0) { clientLeft = 0; }\r\n    if (clientTop === void 0) { clientTop = 0; }\r\n    if (snapOffset === void 0) { snapOffset = { left: 0, top: 0, right: 0, bottom: 0 }; }\r\n    var guidelines = [];\r\n    var snapOffsetLeft = snapOffset.left, snapOffsetTop = snapOffset.top, snapOffsetBottom = snapOffset.bottom, snapOffsetRight = snapOffset.right;\r\n    var snapWidth = width + snapOffsetRight - snapOffsetLeft;\r\n    var snapHeight = height + snapOffsetBottom - snapOffsetTop;\r\n    getObjectGuidelines(horizontalGuidelines, snapHeight).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"horizontal\",\r\n            pos: [\r\n                snapOffsetLeft,\r\n                throttle(posInfo.pos - clientTop + snapOffsetTop, 0.1),\r\n            ],\r\n            size: snapWidth,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    getObjectGuidelines(verticalGuidelines, snapWidth).forEach(function (posInfo) {\r\n        guidelines.push({\r\n            type: \"vertical\",\r\n            pos: [\r\n                throttle(posInfo.pos - clientLeft + snapOffsetLeft, 0.1),\r\n                snapOffsetTop,\r\n            ],\r\n            size: snapHeight,\r\n            className: posInfo.className,\r\n            direction: \"\",\r\n        });\r\n    });\r\n    return guidelines;\r\n}\r\nfunction getSnapElementRects(moveable, values) {\r\n    if (!values.length) {\r\n        return [];\r\n    }\r\n    var groupable = moveable.props.groupable;\r\n    var state = moveable.state;\r\n    var containerClientRect = state.containerClientRect, \r\n    // targetClientRect: {\r\n    //     top: clientTop,\r\n    //     left: clientLeft,\r\n    // },\r\n    rootMatrix = state.rootMatrix, is3d = state.is3d, offsetDelta = state.offsetDelta;\r\n    var n = is3d ? 4 : 3;\r\n    var _a = __read(calculateContainerPos(rootMatrix, containerClientRect, n), 2), containerLeft = _a[0], containerTop = _a[1];\r\n    // const poses = getAbsolutePosesByState(state);\r\n    // const {\r\n    //     minX: targetLeft,\r\n    //     minY: targetTop,\r\n    // } = getMinMaxs(poses);\r\n    // const [distLeft, distTop] = minus([targetLeft, targetTop], calculateInversePosition(rootMatrix, [\r\n    //     clientLeft - containerLeft,\r\n    //     clientTop - containerTop,\r\n    // ], n)).map(pos => roundSign(pos));\r\n    var offsetLeft = groupable ? 0 : offsetDelta[0];\r\n    var offsetTop = groupable ? 0 : offsetDelta[1];\r\n    return values.map(function (value) {\r\n        var rect = value.element.getBoundingClientRect();\r\n        var left = rect.left - containerLeft - offsetLeft;\r\n        var top = rect.top - containerTop - offsetTop;\r\n        var bottom = top + rect.height;\r\n        var right = left + rect.width;\r\n        var _a = __read(calculateInversePosition(rootMatrix, [left, top], n), 2), elementLeft = _a[0], elementTop = _a[1];\r\n        var _b = __read(calculateInversePosition(rootMatrix, [right, bottom], n), 2), elementRight = _b[0], elementBottom = _b[1];\r\n        return __assign(__assign({}, value), { rect: {\r\n                left: elementLeft,\r\n                right: elementRight,\r\n                top: elementTop,\r\n                bottom: elementBottom,\r\n                center: (elementLeft + elementRight) / 2,\r\n                middle: (elementTop + elementBottom) / 2,\r\n            } });\r\n    });\r\n}\n\nfunction checkSnapInfo(moveable) {\r\n    var state = moveable.state;\r\n    var container = state.container;\r\n    var snapContainer = moveable.props.snapContainer || container;\r\n    if (state.snapContainer === snapContainer && state.guidelines && state.guidelines.length) {\r\n        return false;\r\n    }\r\n    var containerClientRect = state.containerClientRect;\r\n    var snapOffset = {\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n    };\r\n    if (container !== snapContainer) {\r\n        var snapContainerTarget = getRefTarget(snapContainer, true);\r\n        if (snapContainerTarget) {\r\n            var snapContainerRect = getClientRect(snapContainerTarget);\r\n            var offset1 = getDragDistByState(state, [\r\n                snapContainerRect.left - containerClientRect.left,\r\n                snapContainerRect.top - containerClientRect.top,\r\n            ]);\r\n            var offset2 = getDragDistByState(state, [\r\n                snapContainerRect.right - containerClientRect.right,\r\n                snapContainerRect.bottom - containerClientRect.bottom,\r\n            ]);\r\n            snapOffset.left = throttle(offset1[0], 0.00001);\r\n            snapOffset.top = throttle(offset1[1], 0.00001);\r\n            snapOffset.right = throttle(offset2[0], 0.00001);\r\n            snapOffset.bottom = throttle(offset2[1], 0.00001);\r\n        }\r\n    }\r\n    state.snapContainer = snapContainer;\r\n    state.snapOffset = snapOffset;\r\n    state.guidelines = getTotalGuidelines(moveable);\r\n    state.enableSnap = true;\r\n    return true;\r\n}\r\nfunction getNextFixedPoses(matrix, width, height, fixedDirection, fixedPos, is3d) {\r\n    var nextPoses = calculatePoses(matrix, width, height, is3d ? 4 : 3);\r\n    var nextFixedPos = getPosByDirection(nextPoses, fixedDirection);\r\n    return getAbsolutePoses(nextPoses, minus(fixedPos, nextFixedPos));\r\n}\r\nfunction normalized(value) {\r\n    return value ? value / abs(value) : 0;\r\n}\r\nfunction getSizeOffsetInfo(moveable, poses, direction, keepRatio, isRequest, datas) {\r\n    var fixedDirection = datas.fixedDirection;\r\n    var directions = getCheckSnapDirections(direction, fixedDirection, keepRatio);\r\n    var innerBoundLineInfos = getCheckInnerBoundLineInfos(moveable, poses, direction, keepRatio);\r\n    var offsets = __spreadArray(__spreadArray([], __read(getSnapBoundInfo(moveable, poses, directions, keepRatio, isRequest, datas)), false), __read(getInnerBoundInfo(moveable, innerBoundLineInfos, datas)), false);\r\n    var widthOffsetInfo = getNearOffsetInfo(offsets, 0);\r\n    var heightOffsetInfo = getNearOffsetInfo(offsets, 1);\r\n    return {\r\n        width: {\r\n            isBound: widthOffsetInfo.isBound,\r\n            offset: widthOffsetInfo.offset[0],\r\n        },\r\n        height: {\r\n            isBound: heightOffsetInfo.isBound,\r\n            offset: heightOffsetInfo.offset[1],\r\n        },\r\n    };\r\n}\r\nfunction recheckSizeByTwoDirection(moveable, poses, width, height, maxWidth, maxHeight, direction, isRequest, datas) {\r\n    var snapPos = getPosByDirection(poses, direction);\r\n    var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n        vertical: [snapPos[0]],\r\n        horizontal: [snapPos[1]],\r\n    }), horizontalOffset = _a.horizontal.offset, verticalOffset = _a.vertical.offset;\r\n    if (throttle(verticalOffset, FLOAT_POINT_NUM) || throttle(horizontalOffset, FLOAT_POINT_NUM)) {\r\n        var _b = __read(getDragDist({\r\n            datas: datas,\r\n            distX: -verticalOffset,\r\n            distY: -horizontalOffset,\r\n        }), 2), nextWidthOffset = _b[0], nextHeightOffset = _b[1];\r\n        var nextWidth = Math.min(maxWidth || Infinity, width + direction[0] * nextWidthOffset);\r\n        var nextHeight = Math.min(maxHeight || Infinity, height + direction[1] * nextHeightOffset);\r\n        return [nextWidth - width, nextHeight - height];\r\n    }\r\n    return [0, 0];\r\n}\r\nfunction checkSizeDist(moveable, getNextPoses, width, height, direction, fixedPosition, isRequest, datas) {\r\n    var poses = getAbsolutePosesByState(moveable.state);\r\n    var keepRatio = moveable.props.keepRatio;\r\n    var widthOffset = 0;\r\n    var heightOffset = 0;\r\n    for (var i = 0; i < 2; ++i) {\r\n        var nextPoses = getNextPoses(widthOffset, heightOffset);\r\n        var _a = getSizeOffsetInfo(moveable, nextPoses, direction, keepRatio, isRequest, datas), widthOffsetInfo = _a.width, heightOffsetInfo = _a.height;\r\n        var isWidthBound = widthOffsetInfo.isBound;\r\n        var isHeightBound = heightOffsetInfo.isBound;\r\n        var nextWidthOffset = widthOffsetInfo.offset;\r\n        var nextHeightOffset = heightOffsetInfo.offset;\r\n        if (i === 1) {\r\n            if (!isWidthBound) {\r\n                nextWidthOffset = 0;\r\n            }\r\n            if (!isHeightBound) {\r\n                nextHeightOffset = 0;\r\n            }\r\n        }\r\n        if (i === 0 && isRequest && !isWidthBound && !isHeightBound) {\r\n            return [0, 0];\r\n        }\r\n        if (keepRatio) {\r\n            var widthDist = abs(nextWidthOffset) * (width ? 1 / width : 1);\r\n            var heightDist = abs(nextHeightOffset) * (height ? 1 / height : 1);\r\n            var isGetWidthOffset = isWidthBound && isHeightBound\r\n                ? widthDist < heightDist\r\n                : isHeightBound ||\r\n                    (!isWidthBound && widthDist < heightDist);\r\n            if (isGetWidthOffset) {\r\n                // width : height = ? : heightOffset\r\n                nextWidthOffset = (width * nextHeightOffset) / height;\r\n            }\r\n            else {\r\n                // width : height = widthOffset : ?\r\n                nextHeightOffset = (height * nextWidthOffset) / width;\r\n            }\r\n        }\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    if (!keepRatio && direction[0] && direction[1]) {\r\n        var _b = checkMaxBounds(moveable, poses, direction, fixedPosition, datas), maxWidth = _b.maxWidth, maxHeight = _b.maxHeight;\r\n        var _c = __read(recheckSizeByTwoDirection(moveable, getNextPoses(widthOffset, heightOffset).map(function (pos) { return pos.map(function (p) { return throttle(p, FLOAT_POINT_NUM); }); }), width + widthOffset, height + heightOffset, maxWidth, maxHeight, direction, isRequest, datas), 2), nextWidthOffset = _c[0], nextHeightOffset = _c[1];\r\n        widthOffset += nextWidthOffset;\r\n        heightOffset += nextHeightOffset;\r\n    }\r\n    return [widthOffset, heightOffset];\r\n}\r\nfunction absDegree(deg) {\r\n    if (deg < 0) {\r\n        deg = deg % 360 + 360;\r\n    }\r\n    deg %= 360;\r\n    return deg;\r\n}\r\nfunction bumpDegree(baseDeg, snapDeg) {\r\n    // baseDeg -80\r\n    // snapDeg 270\r\n    // return -90\r\n    snapDeg = absDegree(snapDeg);\r\n    var count = Math.floor(baseDeg / 360);\r\n    var deg1 = count * 360 + 360 - snapDeg;\r\n    var deg2 = count * 360 + snapDeg;\r\n    return abs(baseDeg - deg1) < abs(baseDeg - deg2) ? deg1 : deg2;\r\n}\r\nfunction getMinDegreeDistance(deg1, deg2) {\r\n    deg1 = absDegree(deg1);\r\n    deg2 = absDegree(deg2);\r\n    var deg3 = absDegree(deg1 - deg2);\r\n    return Math.min(deg3, 360 - deg3);\r\n}\r\nfunction checkSnapRotate(moveable, rect, dist, rotation) {\r\n    var _a;\r\n    var props = moveable.props;\r\n    var snapRotationThreshold = (_a = props[NAME_snapRotationThreshold]) !== null && _a !== void 0 ? _a : 5;\r\n    var snapRotationDegrees = props[NAME_snapRotationDegrees];\r\n    if (hasGuidelines(moveable, \"rotatable\")) {\r\n        var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4, origin2_1 = rect.origin;\r\n        var rad_1 = (dist * Math.PI) / 180;\r\n        var prevPoses = [pos1, pos2, pos3, pos4].map(function (pos) { return minus(pos, origin2_1); });\r\n        var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad_1); });\r\n        // console.log(moveable.state.left, moveable.state.top, moveable.state.origin);\r\n        // console.log(pos1, pos2, pos3, pos4, origin, rad, prevPoses, nextPoses);\r\n        var result = __spreadArray(__spreadArray([], __read(checkRotateBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false), __read(checkRotateInnerBounds(moveable, prevPoses, nextPoses, origin2_1, dist)), false);\r\n        result.sort(function (a, b) { return abs(a - dist) - abs(b - dist); });\r\n        var isSnap = result.length > 0;\r\n        if (isSnap) {\r\n            return {\r\n                isSnap: isSnap,\r\n                dist: isSnap ? result[0] : dist,\r\n            };\r\n        }\r\n    }\r\n    if ((snapRotationDegrees === null || snapRotationDegrees === void 0 ? void 0 : snapRotationDegrees.length) && snapRotationThreshold) {\r\n        var sorted = snapRotationDegrees.slice().sort(function (a, b) {\r\n            return getMinDegreeDistance(a, rotation) - getMinDegreeDistance(b, rotation);\r\n        });\r\n        var firstDegree = sorted[0];\r\n        if (getMinDegreeDistance(firstDegree, rotation) <= snapRotationThreshold) {\r\n            return {\r\n                isSnap: true,\r\n                dist: dist + bumpDegree(rotation, firstDegree) - rotation,\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        isSnap: false,\r\n        dist: dist,\r\n    };\r\n}\r\nfunction checkSnapResize(moveable, width, height, direction, fixedPosition, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"resizable\")) {\r\n        return [0, 0];\r\n    }\r\n    var fixedDirection = datas.fixedDirection, nextAllMatrix = datas.nextAllMatrix;\r\n    var _a = moveable.state, allMatrix = _a.allMatrix, is3d = _a.is3d;\r\n    return checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(nextAllMatrix || allMatrix, width + widthOffset, height + heightOffset, fixedDirection, fixedPosition, is3d);\r\n    }, width, height, direction, fixedPosition, isRequest, datas);\r\n}\r\nfunction checkSnapScale(moveable, scale, direction, isRequest, datas) {\r\n    if (!hasGuidelines(moveable, \"scalable\")) {\r\n        return [0, 0];\r\n    }\r\n    var startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, fixedPosition = datas.fixedPosition, fixedDirection = datas.fixedDirection, is3d = datas.is3d;\r\n    var sizeDist = checkSizeDist(moveable, function (widthOffset, heightOffset) {\r\n        return getNextFixedPoses(scaleMatrix(datas, plus(scale, [widthOffset / startOffsetWidth, heightOffset / startOffsetHeight])), startOffsetWidth, startOffsetHeight, fixedDirection, fixedPosition, is3d);\r\n    }, startOffsetWidth, startOffsetHeight, direction, fixedPosition, isRequest, datas);\r\n    return [sizeDist[0] / startOffsetWidth, sizeDist[1] / startOffsetHeight];\r\n}\r\nfunction startCheckSnapDrag(moveable, datas) {\r\n    datas.absolutePoses = getAbsolutePosesByState(moveable.state);\r\n}\r\nfunction getSnapGuidelines(posInfos) {\r\n    var guidelines = [];\r\n    posInfos.forEach(function (posInfo) {\r\n        posInfo.guidelineInfos.forEach(function (_a) {\r\n            var guideline = _a.guideline;\r\n            if (find(guidelines, function (info) { return info.guideline === guideline; })) {\r\n                return;\r\n            }\r\n            guideline.direction = \"\";\r\n            guidelines.push({ guideline: guideline, posInfo: posInfo });\r\n        });\r\n    });\r\n    return guidelines.map(function (_a) {\r\n        var guideline = _a.guideline, posInfo = _a.posInfo;\r\n        return __assign(__assign({}, guideline), { direction: posInfo.direction });\r\n    });\r\n}\r\nfunction addBoundGuidelines(moveable, verticalPoses, horizontalPoses, verticalSnapPoses, horizontalSnapPoses, externalBounds) {\r\n    var _a = checkBoundPoses(getBounds(moveable, externalBounds), verticalPoses, horizontalPoses), verticalBoundInfos = _a.vertical, horizontalBoundInfos = _a.horizontal;\r\n    var boundMap = getInitialBounds();\r\n    verticalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.left = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.right = true;\r\n            }\r\n            verticalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    horizontalBoundInfos.forEach(function (info) {\r\n        if (info.isBound) {\r\n            if (info.direction === \"start\") {\r\n                boundMap.top = true;\r\n            }\r\n            if (info.direction === \"end\") {\r\n                boundMap.bottom = true;\r\n            }\r\n            horizontalSnapPoses.push({\r\n                type: \"bounds\",\r\n                pos: info.pos,\r\n            });\r\n        }\r\n    });\r\n    var _b = checkInnerBoundPoses(moveable), innerBoundMap = _b.boundMap, verticalInnerBoundPoses = _b.vertical, horizontalInnerBoundPoses = _b.horizontal;\r\n    verticalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(verticalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        verticalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    horizontalInnerBoundPoses.forEach(function (innerPos) {\r\n        if (findIndex(horizontalSnapPoses, function (_a) {\r\n            var type = _a.type, pos = _a.pos;\r\n            return type === \"bounds\" && pos === innerPos;\r\n        }) >= 0) {\r\n            return;\r\n        }\r\n        horizontalSnapPoses.push({\r\n            type: \"bounds\",\r\n            pos: innerPos,\r\n        });\r\n    });\r\n    return {\r\n        boundMap: boundMap,\r\n        innerBoundMap: innerBoundMap,\r\n    };\r\n}\r\nvar directionCondition$1 = getDirectionCondition(\"\", [\"resizable\", \"scalable\"]);\r\n/**\r\n * @namespace Moveable.Snappable\r\n * @description Whether or not target can be snapped to the guideline. (default: false)\r\n * @sort 2\r\n */\r\nvar Snappable = {\r\n    name: \"snappable\",\r\n    dragRelation: \"strong\",\r\n    props: [\r\n        \"snappable\",\r\n        \"snapContainer\",\r\n        \"snapDirections\",\r\n        \"elementSnapDirections\",\r\n        \"snapGap\",\r\n        \"snapGridWidth\",\r\n        \"snapGridHeight\",\r\n        \"isDisplaySnapDigit\",\r\n        \"isDisplayInnerSnapDigit\",\r\n        \"isDisplayGridGuidelines\",\r\n        \"snapDigit\",\r\n        \"snapThreshold\",\r\n        \"snapRenderThreshold\",\r\n        \"snapGridAll\",\r\n        NAME_snapRotationThreshold,\r\n        NAME_snapRotationDegrees,\r\n        NAME_snapHorizontalThreshold,\r\n        NAME_snapVerticalThreshold,\r\n        \"horizontalGuidelines\",\r\n        \"verticalGuidelines\",\r\n        \"elementGuidelines\",\r\n        \"bounds\",\r\n        \"innerBounds\",\r\n        \"snapDistFormat\",\r\n        \"maxSnapElementGuidelineDistance\",\r\n        \"maxSnapElementGapDistance\",\r\n    ],\r\n    events: [\"snap\", \"bound\"],\r\n    css: [\r\n        \":host {\\n--bounds-color: #d66;\\n}\\n.guideline {\\npointer-events: none;\\nz-index: 2;\\n}\\n.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\\n.guideline-group {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.guideline-group .size-value {\\nposition: absolute;\\ncolor: #f55;\\nfont-size: 12px;\\nfont-size: calc(12px * var(--zoom));\\nfont-weight: bold;\\n}\\n.guideline-group.horizontal .size-value {\\ntransform-origin: 50% 100%;\\ntransform: translateX(-50%);\\nleft: 50%;\\nbottom: 5px;\\nbottom: calc(2px + 3px * var(--zoom));\\n}\\n.guideline-group.vertical .size-value {\\ntransform-origin: 0% 50%;\\ntop: 50%;\\ntransform: translateY(-50%);\\nleft: 5px;\\nleft: calc(2px + 3px * var(--zoom));\\n}\\n.guideline.gap {\\nbackground: #f55;\\n}\\n.size-value.gap {\\ncolor: #f55;\\n}\\n\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var state = moveable.state;\r\n        var targetTop = state.top, targetLeft = state.left, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, snapRenderInfo = state.snapRenderInfo;\r\n        var _a = moveable.props.snapRenderThreshold, snapRenderThreshold = _a === void 0 ? 1 : _a;\r\n        if (!snapRenderInfo || !snapRenderInfo.render || !hasGuidelines(moveable, \"\")) {\r\n            // reset store\r\n            watchValue(moveable, \"boundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            watchValue(moveable, \"innerBoundMap\", getInitialBounds(), function (v) { return JSON.stringify(v); });\r\n            return [];\r\n        }\r\n        state.guidelines = getTotalGuidelines(moveable);\r\n        var minLeft = Math.min(pos1[0], pos2[0], pos3[0], pos4[0]);\r\n        var minTop = Math.min(pos1[1], pos2[1], pos3[1], pos4[1]);\r\n        var externalPoses = snapRenderInfo.externalPoses || [];\r\n        var poses = getAbsolutePosesByState(moveable.state);\r\n        var verticalSnapPoses = [];\r\n        var horizontalSnapPoses = [];\r\n        var verticalGuidelines = [];\r\n        var horizontalGuidelines = [];\r\n        var snapInfos = [];\r\n        var _b = getRect(poses), width = _b.width, height = _b.height, top = _b.top, left = _b.left, bottom = _b.bottom, right = _b.right;\r\n        var targetRect = { left: left, right: right, top: top, bottom: bottom, center: (left + right) / 2, middle: (top + bottom) / 2 };\r\n        var hasExternalPoses = externalPoses.length > 0;\r\n        var externalRect = hasExternalPoses\r\n            ? getRect(externalPoses)\r\n            : {};\r\n        if (!snapRenderInfo.request) {\r\n            if (snapRenderInfo.direction) {\r\n                snapInfos.push(getSnapInfosByDirection(moveable, poses, snapRenderInfo.direction, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (snapRenderInfo.snap) {\r\n                var rect = getRect(poses);\r\n                if (snapRenderInfo.center) {\r\n                    rect.middle = (rect.top + rect.bottom) / 2;\r\n                    rect.center = (rect.left + rect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, rect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            if (hasExternalPoses) {\r\n                if (snapRenderInfo.center) {\r\n                    externalRect.middle =\r\n                        (externalRect.top + externalRect.bottom) / 2;\r\n                    externalRect.center =\r\n                        (externalRect.left + externalRect.right) / 2;\r\n                }\r\n                snapInfos.push(checkSnaps(moveable, externalRect, snapRenderThreshold, snapRenderThreshold));\r\n            }\r\n            snapInfos.forEach(function (snapInfo) {\r\n                var verticalPosInfos = snapInfo.vertical.posInfos, horizontalPosInfos = snapInfo.horizontal.posInfos;\r\n                verticalSnapPoses.push.apply(verticalSnapPoses, __spreadArray([], __read(verticalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                horizontalSnapPoses.push.apply(horizontalSnapPoses, __spreadArray([], __read(horizontalPosInfos.filter(function (_a) {\r\n                    var guidelineInfos = _a.guidelineInfos;\r\n                    return guidelineInfos.some(function (_a) {\r\n                        var guideline = _a.guideline;\r\n                        return !guideline.hide;\r\n                    });\r\n                }).map(function (posInfo) { return ({\r\n                    type: \"snap\",\r\n                    pos: posInfo.pos,\r\n                }); })), false));\r\n                verticalGuidelines.push.apply(verticalGuidelines, __spreadArray([], __read(getSnapGuidelines(verticalPosInfos)), false));\r\n                horizontalGuidelines.push.apply(horizontalGuidelines, __spreadArray([], __read(getSnapGuidelines(horizontalPosInfos)), false));\r\n            });\r\n        }\r\n        var _c = addBoundGuidelines(moveable, [left, right], [top, bottom], verticalSnapPoses, horizontalSnapPoses), boundMap = _c.boundMap, innerBoundMap = _c.innerBoundMap;\r\n        if (hasExternalPoses) {\r\n            addBoundGuidelines(moveable, [externalRect.left, externalRect.right], [externalRect.top, externalRect.bottom], verticalSnapPoses, horizontalSnapPoses, snapRenderInfo.externalBounds);\r\n        }\r\n        var allGuidelines = __spreadArray(__spreadArray([], __read(verticalGuidelines), false), __read(horizontalGuidelines), false);\r\n        var elementGuidelines = allGuidelines.filter(function (guideline) { return guideline.element && !guideline.gapRects; });\r\n        var gapGuidelines = allGuidelines.filter(function (guideline) { return guideline.gapRects; }).sort(function (a, b) {\r\n            return a.gap - b.gap;\r\n        });\r\n        triggerEvent(moveable, \"onSnap\", {\r\n            guidelines: allGuidelines.filter(function (_a) {\r\n                var element = _a.element;\r\n                return !element;\r\n            }),\r\n            elements: elementGuidelines,\r\n            gaps: gapGuidelines,\r\n        }, true);\r\n        var nextBoundMap = watchValue(moveable, \"boundMap\", boundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        var nextInnerBoundMap = watchValue(moveable, \"innerBoundMap\", innerBoundMap, function (v) { return JSON.stringify(v); }, getInitialBounds());\r\n        if (boundMap === nextBoundMap || innerBoundMap === nextInnerBoundMap) {\r\n            triggerEvent(moveable, \"onBound\", {\r\n                bounds: boundMap,\r\n                innerBounds: innerBoundMap,\r\n            }, true);\r\n        }\r\n        // verticalSnapPoses.\r\n        return __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(renderDashedGuidelines(moveable, elementGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGapGuidelines(moveable, gapGuidelines, [minLeft, minTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"horizontal\", horizontalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderGuidelines(moveable, \"vertical\", verticalGuidelines, [targetLeft, targetTop], targetRect, React)), false), __read(renderSnapPoses(moveable, \"horizontal\", horizontalSnapPoses, minLeft, targetTop, width, 0, React)), false), __read(renderSnapPoses(moveable, \"vertical\", verticalSnapPoses, minTop, targetLeft, height, 1, React)), false);\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            snap: true,\r\n            center: true,\r\n        };\r\n        checkSnapInfo(moveable);\r\n    },\r\n    drag: function (moveable) {\r\n        var state = moveable.state;\r\n        if (!checkSnapInfo(moveable)) {\r\n            state.guidelines = getTotalGuidelines(moveable);\r\n        }\r\n        if (state.snapRenderInfo) {\r\n            state.snapRenderInfo.render = true;\r\n        }\r\n    },\r\n    pinchStart: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (directionCondition$1(moveable, e) || dragControlCondition(moveable, e)) {\r\n            return true;\r\n        }\r\n        if (!e.isRequest && e.inputEvent) {\r\n            return hasClass(e.inputEvent.target, prefix(\"snap-control\"));\r\n        }\r\n    },\r\n    dragControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    dragGroupControlStart: function (moveable) {\r\n        moveable.state.snapRenderInfo = null;\r\n        checkSnapInfo(moveable);\r\n    },\r\n    dragGroupControl: function (moveable) {\r\n        this.drag(moveable);\r\n    },\r\n    dragGroupControlEnd: function (moveable) {\r\n        this.unset(moveable);\r\n    },\r\n    unset: function (moveable) {\r\n        var state = moveable.state;\r\n        state.enableSnap = false;\r\n        state.guidelines = [];\r\n        state.snapRenderInfo = null;\r\n        state.elementRects = [];\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be snapped to the guideline. (default: false)\r\n * @name Moveable.Snappable#snappable\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snappable = true;\r\n */\r\n/**\r\n *  A snap container that is the basis for snap, bounds, and innerBounds. (default: null = container)\r\n * @name Moveable.Snappable#snapContainer\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.querySelector(\".container\"));\r\n *\r\n * moveable.snapContainer = document.body;\r\n */\r\n/**\r\n * You can specify the directions to snap to the target. (default: { left: true, top: true, right: true, bottom: true })\r\n * @name Moveable.Snappable#snapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.snapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * You can specify the snap directions of elements. (default: { left: true, ftrue, right: true, bottom: true })\r\n * @name Moveable.Snappable#elementSnapDirections\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   elementSnapDirections: true,\r\n * });\r\n * // snap center\r\n * moveable.elementSnapDirections = { left: true, top: true, right: true, bottom: true, center: true, middle: true };\r\n */\r\n/**\r\n * When you drag, make the gap snap in the element guidelines. (default: true)\r\n * @name Moveable.Snappable#snapGap\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   snappable: true,\r\n *   snapElement: true,\r\n *   snapGap: true,\r\n * });\r\n *\r\n * moveable.snapGap = false;\r\n */\r\n/**\r\n * Distance value that can snap to guidelines. (default: 5)\r\n * @name Moveable.Snappable#snapThreshold\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapThreshold = 5;\r\n */\r\n/**\r\n * Add guidelines in the horizontal direction. (default: [])\r\n * @name Moveable.Snappable#horizontalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.horizontalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines in the vertical direction. (default: [])\r\n * @name Moveable.Snappable#verticalGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.verticalGuidelines = [100, 200, 500];\r\n */\r\n/**\r\n * Add guidelines for the element. (default: [])\r\n * @name Moveable.Snappable#elementGuidelines\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.elementGuidelines = [\r\n *   document.querySelector(\".element\"),\r\n * ];\r\n */\r\n/**\r\n * You can set up boundaries.\r\n * @name Moveable.Snappable#bounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.bounds = { left: 0, right: 1000, top: 0, bottom: 1000};\r\n */\r\n/**\r\n * You can set up inner boundaries.\r\n * @name Moveable.Snappable#innerBounds\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.innerBounds = { left: 500, top: 500, width: 100, height: 100};\r\n */\r\n/**\r\n * snap distance digits (default: 0)\r\n * @name Moveable.Snappable#snapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapDigit = 0\r\n */\r\n/**\r\n * If width size is greater than 0, you can vertical snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridWidth\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridWidth = 5;\r\n */\r\n/**\r\n * If height size is greater than 0, you can horizontal snap to the grid. (default: 0)\r\n * @name Moveable.Snappable#snapGridHeight\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.snapGridHeight = 5;\r\n */\r\n/**\r\n * Whether to show snap distance (default: true)\r\n * @name Moveable.Snappable#isDisplaySnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplaySnapDigit = true;\r\n */\r\n/**\r\n * Whether to show element inner snap distance (default: false)\r\n * @name Moveable.Snappable#isDisplayInnerSnapDigit\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.isDisplayInnerSnapDigit = true;\r\n */\r\n/**\r\n * You can set the text format of the distance shown in the guidelines. (default: self)\r\n * @name Moveable.Snappable#snapDistFormat\r\n * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Snappable.html#.SnappableOptions}\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  snappable: true,\r\n *  snapDistFormat: (v, type) => v,\r\n * });\r\n * moveable.snapDistFormat = (v, type) => `${v}px`;\r\n */\r\n/**\r\n * When you drag or dragControl, the `snap` event is called.\r\n * @memberof Moveable.Snappable\r\n * @event snap\r\n * @param {Moveable.Snappable.OnSnap} - Parameters for the `snap` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     snappable: true\r\n * });\r\n * moveable.on(\"snap\", e => {\r\n *     console.log(\"onSnap\", e);\r\n * });\r\n */\n\nfunction multiply2(pos1, pos2) {\r\n    return [\r\n        pos1[0] * pos2[0],\r\n        pos1[1] * pos2[1],\r\n    ];\r\n}\r\nfunction prefix() {\r\n    var classNames = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        classNames[_i] = arguments[_i];\r\n    }\r\n    return prefixNames.apply(void 0, __spreadArray([PREFIX], __read(classNames), false));\r\n}\r\nfunction defaultSync(fn) {\r\n    fn();\r\n}\r\nfunction getTransformMatrix(transform) {\r\n    if (!transform || transform === \"none\") {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    }\r\n    if (isObject(transform)) {\r\n        return transform;\r\n    }\r\n    return parseMat(transform);\r\n}\r\nfunction getAbsoluteMatrix(matrix, n, origin) {\r\n    return multiplies(n, createOriginMatrix(origin, n), matrix, createOriginMatrix(origin.map(function (a) { return -a; }), n));\r\n}\r\nfunction measureSVGSize(el, unit, isHorizontal) {\r\n    if (unit === \"%\") {\r\n        var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n        return viewBox[isHorizontal ? \"width\" : \"height\"] / 100;\r\n    }\r\n    return 1;\r\n}\r\nfunction getBeforeTransformOrigin(el) {\r\n    var relativeOrigin = getTransformOrigin(getComputedStyle(el, \":before\"));\r\n    return relativeOrigin.map(function (o, i) {\r\n        var _a = splitUnit(o), value = _a.value, unit = _a.unit;\r\n        return value * measureSVGSize(el, unit, i === 0);\r\n    });\r\n}\r\nfunction getTransformOriginArray(transformOrigin) {\r\n    return transformOrigin ? transformOrigin.split(\" \") : [\"0\", \"0\"];\r\n}\r\nfunction getTransformOrigin(style) {\r\n    return getTransformOriginArray(style.transformOrigin);\r\n}\r\nfunction getElementTransform(target) {\r\n    var getStyle = getCachedStyle(target);\r\n    var computedTransform = getStyle(\"transform\");\r\n    if (computedTransform && computedTransform !== \"none\") {\r\n        return computedTransform;\r\n    }\r\n    if (\"transform\" in target) {\r\n        var list = target.transform;\r\n        var baseVal = list.baseVal;\r\n        if (!baseVal) {\r\n            return \"\";\r\n        }\r\n        var length_1 = baseVal.length;\r\n        if (!length_1) {\r\n            return \"\";\r\n        }\r\n        var matrixes = [];\r\n        var _loop_1 = function (i) {\r\n            var matrix = baseVal[i].matrix;\r\n            matrixes.push(\"matrix(\".concat([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"].map(function (chr) { return matrix[chr]; }).join(\", \"), \")\"));\r\n        };\r\n        for (var i = 0; i < length_1; ++i) {\r\n            _loop_1(i);\r\n        }\r\n        return matrixes.join(\" \");\r\n    }\r\n    return \"\";\r\n}\r\nfunction getOffsetInfo(el, lastParent, isParent, checkZoom, getTargetStyle) {\r\n    var _a, _b;\r\n    var documentElement = getDocumentElement(el) || getDocumentBody(el);\r\n    var hasSlot = false;\r\n    var target;\r\n    var parentSlotElement;\r\n    if (!el || isParent) {\r\n        target = el;\r\n    }\r\n    else {\r\n        var assignedSlotParentElement = (_a = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _a === void 0 ? void 0 : _a.parentElement;\r\n        var parentElement = el.parentElement;\r\n        if (assignedSlotParentElement) {\r\n            hasSlot = true;\r\n            parentSlotElement = parentElement;\r\n            target = assignedSlotParentElement;\r\n        }\r\n        else {\r\n            target = parentElement;\r\n        }\r\n    }\r\n    var isCustomElement = false;\r\n    var isEnd = el === lastParent || target === lastParent;\r\n    var position = \"relative\";\r\n    var offsetZoom = 1;\r\n    var targetZoom = parseFloat(getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"zoom\")) || 1;\r\n    var targetPosition = getTargetStyle === null || getTargetStyle === void 0 ? void 0 : getTargetStyle(\"position\");\r\n    while (target && target !== documentElement) {\r\n        if (lastParent === target) {\r\n            isEnd = true;\r\n        }\r\n        var getStyle = getCachedStyle(target);\r\n        var tagName = target.tagName.toLowerCase();\r\n        var transform = getElementTransform(target);\r\n        var willChange = getStyle(\"willChange\");\r\n        var zoom = parseFloat(getStyle(\"zoom\")) || 1;\r\n        position = getStyle(\"position\");\r\n        if (checkZoom && zoom !== 1) {\r\n            offsetZoom = zoom;\r\n            break;\r\n        }\r\n        if (\r\n        // offsetParent is the parentElement if the target's zoom is not 1 and not absolute.\r\n        !isParent && checkZoom && targetZoom !== 1 && targetPosition && targetPosition !== \"absolute\"\r\n            || tagName === \"svg\"\r\n            || tagName === \"foreignobject\"\r\n            || position !== \"static\"\r\n            || (transform && transform !== \"none\")\r\n            || willChange === \"transform\") {\r\n            break;\r\n        }\r\n        var slotParentNode = (_b = el === null || el === void 0 ? void 0 : el.assignedSlot) === null || _b === void 0 ? void 0 : _b.parentNode;\r\n        var targetParentNode = target.parentNode;\r\n        if (slotParentNode) {\r\n            hasSlot = true;\r\n            parentSlotElement = targetParentNode;\r\n        }\r\n        var parentNode = targetParentNode;\r\n        if (parentNode && parentNode.nodeType === 11) {\r\n            // Shadow Root\r\n            target = parentNode.host;\r\n            isCustomElement = true;\r\n            position = getCachedStyle(target)(\"position\");\r\n            break;\r\n        }\r\n        target = parentNode;\r\n        position = \"relative\";\r\n    }\r\n    return {\r\n        offsetZoom: offsetZoom,\r\n        hasSlot: hasSlot,\r\n        parentSlotElement: parentSlotElement,\r\n        isCustomElement: isCustomElement,\r\n        isStatic: position === \"static\",\r\n        isEnd: isEnd || !target || target === documentElement,\r\n        offsetParent: target || documentElement,\r\n    };\r\n}\r\nfunction getOffsetPosInfo(el, target) {\r\n    var _a;\r\n    var tagName = el.tagName.toLowerCase();\r\n    var offsetLeft = el.offsetLeft;\r\n    var offsetTop = el.offsetTop;\r\n    var getStyle = getCachedStyle(el);\r\n    // svg\r\n    var isSVG = isUndefined(offsetLeft);\r\n    var hasOffset = !isSVG;\r\n    var origin;\r\n    var targetOrigin;\r\n    // inner svg element\r\n    if (!hasOffset && (tagName !== \"svg\" || el.ownerSVGElement)) {\r\n        origin = IS_WEBKIT605\r\n            ? getBeforeTransformOrigin(el)\r\n            : getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        hasOffset = true;\r\n        if (tagName === \"svg\") {\r\n            offsetLeft = 0;\r\n            offsetTop = 0;\r\n        }\r\n        else {\r\n            _a = __read(getSVGGraphicsOffset(el, origin, el === target && target.tagName.toLowerCase() === \"g\"), 4), offsetLeft = _a[0], offsetTop = _a[1], origin[0] = _a[2], origin[1] = _a[3];\r\n        }\r\n    }\r\n    else {\r\n        origin = getTransformOriginArray(getStyle(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); });\r\n        targetOrigin = origin.slice();\r\n        // console.log(getStyle(\"transformOrigin\"), targetOrigin);\r\n    }\r\n    return {\r\n        tagName: tagName,\r\n        isSVG: isSVG,\r\n        hasOffset: hasOffset,\r\n        offset: [offsetLeft || 0, offsetTop || 0],\r\n        origin: origin,\r\n        targetOrigin: targetOrigin,\r\n    };\r\n}\r\nfunction getBodyOffset(el, isSVG) {\r\n    var getStyle = getCachedStyle(el);\r\n    var getBodyStyle = getCachedStyle(getDocumentBody(el));\r\n    var bodyPosition = getBodyStyle(\"position\");\r\n    if (!isSVG && (!bodyPosition || bodyPosition === \"static\")) {\r\n        return [0, 0];\r\n    }\r\n    var marginLeft = parseInt(getBodyStyle(\"marginLeft\"), 10);\r\n    var marginTop = parseInt(getBodyStyle(\"marginTop\"), 10);\r\n    if (getStyle(\"position\") === \"absolute\") {\r\n        if (getStyle(\"top\") !== \"auto\" || getStyle(\"bottom\") !== \"auto\") {\r\n            marginTop = 0;\r\n        }\r\n        if (getStyle(\"left\") !== \"auto\" || getStyle(\"right\") !== \"auto\") {\r\n            marginLeft = 0;\r\n        }\r\n    }\r\n    return [marginLeft, marginTop];\r\n}\r\nfunction convert3DMatrixes(matrixes) {\r\n    matrixes.forEach(function (info) {\r\n        var matrix = info.matrix;\r\n        if (matrix) {\r\n            info.matrix = convertDimension(matrix, 3, 4);\r\n        }\r\n    });\r\n}\r\nfunction getPositionFixedInfo(el) {\r\n    var fixedContainer = el.parentElement;\r\n    var hasTransform = false;\r\n    var body = getDocumentBody(el);\r\n    while (fixedContainer) {\r\n        var transform = getComputedStyle(fixedContainer).transform;\r\n        if (transform && transform !== \"none\") {\r\n            hasTransform = true;\r\n            break;\r\n        }\r\n        if (fixedContainer === body) {\r\n            break;\r\n        }\r\n        fixedContainer = fixedContainer.parentElement;\r\n    }\r\n    return {\r\n        fixedContainer: fixedContainer || body,\r\n        hasTransform: hasTransform,\r\n    };\r\n}\r\nfunction makeMatrixCSS(matrix, is3d) {\r\n    if (is3d === void 0) { is3d = matrix.length > 9; }\r\n    return \"\".concat(is3d ? \"matrix3d\" : \"matrix\", \"(\").concat(convertMatrixtoCSS(matrix, !is3d).join(\",\"), \")\");\r\n}\r\nfunction getSVGViewBox(el) {\r\n    var clientWidth = el.clientWidth;\r\n    var clientHeight = el.clientHeight;\r\n    if (!el) {\r\n        return { x: 0, y: 0, width: 0, height: 0, clientWidth: clientWidth, clientHeight: clientHeight };\r\n    }\r\n    var viewBox = el.viewBox;\r\n    var baseVal = (viewBox && viewBox.baseVal) || { x: 0, y: 0, width: 0, height: 0 };\r\n    return {\r\n        x: baseVal.x,\r\n        y: baseVal.y,\r\n        width: baseVal.width || clientWidth,\r\n        height: baseVal.height || clientHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n    };\r\n}\r\nfunction getSVGMatrix(el, n) {\r\n    var _a;\r\n    var _b = getSVGViewBox(el), viewBoxWidth = _b.width, viewBoxHeight = _b.height, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\r\n    var scaleX = clientWidth / viewBoxWidth;\r\n    var scaleY = clientHeight / viewBoxHeight;\r\n    var preserveAspectRatio = el.preserveAspectRatio.baseVal;\r\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio\r\n    var align = preserveAspectRatio.align;\r\n    // 1 : meet 2: slice\r\n    var meetOrSlice = preserveAspectRatio.meetOrSlice;\r\n    var svgOrigin = [0, 0];\r\n    var scale = [scaleX, scaleY];\r\n    var translate = [0, 0];\r\n    if (align !== 1) {\r\n        var xAlign = (align - 2) % 3;\r\n        var yAlign = Math.floor((align - 2) / 3);\r\n        svgOrigin[0] = viewBoxWidth * xAlign / 2;\r\n        svgOrigin[1] = viewBoxHeight * yAlign / 2;\r\n        var scaleDimension = meetOrSlice === 2 ? Math.max(scaleY, scaleX) : Math.min(scaleX, scaleY);\r\n        scale[0] = scaleDimension;\r\n        scale[1] = scaleDimension;\r\n        translate[0] = (clientWidth - viewBoxWidth) / 2 * xAlign;\r\n        translate[1] = (clientHeight - viewBoxHeight) / 2 * yAlign;\r\n    }\r\n    var scaleMatrix = createScaleMatrix(scale, n);\r\n    _a = __read(translate, 2), scaleMatrix[n * (n - 1)] = _a[0], scaleMatrix[n * (n - 1) + 1] = _a[1];\r\n    return getAbsoluteMatrix(scaleMatrix, n, svgOrigin);\r\n}\r\nfunction getSVGGraphicsOffset(el, origin, isGTarget) {\r\n    var tagName = el.tagName.toLowerCase();\r\n    if (!el.getBBox || !isGTarget && tagName === \"g\") {\r\n        return [0, 0, 0, 0];\r\n    }\r\n    var getStyle = getCachedStyle(el);\r\n    var isFillBox = getStyle(\"transform-box\") === \"fill-box\";\r\n    var bbox = el.getBBox();\r\n    var viewBox = getSVGViewBox(el.ownerSVGElement);\r\n    var x = bbox.x;\r\n    var y = bbox.y;\r\n    // x, y가 0으로 나타나는 버그\r\n    if (tagName === \"foreignobject\" && (!x && !y)) {\r\n        x = parseFloat(el.getAttribute(\"x\")) || 0;\r\n        y = parseFloat(el.getAttribute(\"y\")) || 0;\r\n    }\r\n    var left = x - viewBox.x;\r\n    var top = y - viewBox.y;\r\n    var originX = isFillBox ? origin[0] : origin[0] - left;\r\n    var originY = isFillBox ? origin[1] : origin[1] - top;\r\n    // if (isFillBox) {\r\n    //     const bbox = (el as SVGGraphicsElement).getBBox();\r\n    //     const x = parseFloat(getStyle(\"x\")) || bbox.x;\r\n    //     const y = parseFloat(getStyle(\"y\")) || bbox.y;\r\n    //     const xScale = bbox.x / x;\r\n    //     const yScale = bbox.y / y;\r\n    //     console.log(x, y);\r\n    //     originX *= xScale;\r\n    //     originY *= yScale;\r\n    // }\r\n    return [left, top, originX, originY];\r\n}\r\nfunction calculatePosition(matrix, pos, n) {\r\n    return calculate(matrix, convertPositionMatrix(pos, n), n);\r\n}\r\nfunction calculatePoses(matrix, width, height, n) {\r\n    return [[0, 0], [width, 0], [0, height], [width, height]].map(function (pos) { return calculatePosition(matrix, pos, n); });\r\n}\r\nfunction getRect(poses) {\r\n    var posesX = poses.map(function (pos) { return pos[0]; });\r\n    var posesY = poses.map(function (pos) { return pos[1]; });\r\n    var left = Math.min.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var top = Math.min.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var right = Math.max.apply(Math, __spreadArray([], __read(posesX), false));\r\n    var bottom = Math.max.apply(Math, __spreadArray([], __read(posesY), false));\r\n    var rectWidth = right - left;\r\n    var rectHeight = bottom - top;\r\n    return {\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        bottom: bottom,\r\n        width: rectWidth,\r\n        height: rectHeight,\r\n    };\r\n}\r\nfunction calculateRect(matrix, width, height, n) {\r\n    var poses = calculatePoses(matrix, width, height, n);\r\n    return getRect(poses);\r\n}\r\nfunction getSVGOffset(offsetInfo, targetInfo, container, n, beforeMatrix) {\r\n    var _a;\r\n    var target = offsetInfo.target;\r\n    var origin = offsetInfo.origin;\r\n    var targetMatrix = targetInfo.matrix;\r\n    var _b = getSize(target), width = _b.offsetWidth, height = _b.offsetHeight;\r\n    var containerClientRect = container.getBoundingClientRect();\r\n    var margin = [0, 0];\r\n    if (container === getDocumentBody(container)) {\r\n        margin = getBodyOffset(target, true);\r\n    }\r\n    var rect = target.getBoundingClientRect();\r\n    var rectLeft = rect.left - containerClientRect.left + container.scrollLeft\r\n        - (container.clientLeft || 0) + margin[0];\r\n    var rectTop = rect.top - containerClientRect.top + container.scrollTop\r\n        - (container.clientTop || 0) + margin[1];\r\n    var rectWidth = rect.width;\r\n    var rectHeight = rect.height;\r\n    var mat = multiplies(n, beforeMatrix, targetMatrix);\r\n    var _c = calculateRect(mat, width, height, n), prevLeft = _c.left, prevTop = _c.top, prevWidth = _c.width, prevHeight = _c.height;\r\n    var posOrigin = calculatePosition(mat, origin, n);\r\n    var prevOrigin = minus(posOrigin, [prevLeft, prevTop]);\r\n    var rectOrigin = [\r\n        rectLeft + prevOrigin[0] * rectWidth / prevWidth,\r\n        rectTop + prevOrigin[1] * rectHeight / prevHeight,\r\n    ];\r\n    var offset = [0, 0];\r\n    var count = 0;\r\n    while (++count < 10) {\r\n        var inverseBeforeMatrix = invert(beforeMatrix, n);\r\n        _a = __read(minus(calculatePosition(inverseBeforeMatrix, rectOrigin, n), calculatePosition(inverseBeforeMatrix, posOrigin, n)), 2), offset[0] = _a[0], offset[1] = _a[1];\r\n        var mat2 = multiplies(n, beforeMatrix, createOriginMatrix(offset, n), targetMatrix);\r\n        var _d = calculateRect(mat2, width, height, n), nextLeft = _d.left, nextTop = _d.top;\r\n        var distLeft = nextLeft - rectLeft;\r\n        var distTop = nextTop - rectTop;\r\n        if (abs(distLeft) < 2 && abs(distTop) < 2) {\r\n            break;\r\n        }\r\n        rectOrigin[0] -= distLeft;\r\n        rectOrigin[1] -= distTop;\r\n    }\r\n    return offset.map(function (p) { return Math.round(p); });\r\n}\r\nfunction calculateMoveableClientPositions(rootMatrix, poses, rootClientRect) {\r\n    var is3d = rootMatrix.length === 16;\r\n    var n = is3d ? 4 : 3;\r\n    var rootPoses = poses.map(function (pos) { return calculatePosition(rootMatrix, pos, n); });\r\n    var left = rootClientRect.left, top = rootClientRect.top;\r\n    return rootPoses.map(function (pos) {\r\n        return [pos[0] + left, pos[1] + top];\r\n    });\r\n}\r\nfunction getDistSize(vec) {\r\n    return Math.sqrt(vec[0] * vec[0] + vec[1] * vec[1]);\r\n}\r\nfunction getDiagonalSize(pos1, pos2) {\r\n    return getDistSize([\r\n        pos2[0] - pos1[0],\r\n        pos2[1] - pos1[1],\r\n    ]);\r\n}\r\nfunction getLineStyle(pos1, pos2, zoom, rad) {\r\n    if (zoom === void 0) { zoom = 1; }\r\n    if (rad === void 0) { rad = getRad(pos1, pos2); }\r\n    var width = getDiagonalSize(pos1, pos2);\r\n    return {\r\n        transform: \"translateY(-50%) translate(\".concat(pos1[0], \"px, \").concat(pos1[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n        width: \"\".concat(width, \"px\"),\r\n    };\r\n}\r\nfunction getControlTransform(rotation, zoom) {\r\n    var poses = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        poses[_i - 2] = arguments[_i];\r\n    }\r\n    var length = poses.length;\r\n    var x = poses.reduce(function (prev, pos) { return prev + pos[0]; }, 0) / length;\r\n    var y = poses.reduce(function (prev, pos) { return prev + pos[1]; }, 0) / length;\r\n    return {\r\n        transform: \"translateZ(0px) translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"rad) scale(\").concat(zoom, \")\"),\r\n    };\r\n}\r\nfunction getProps(props, ableName) {\r\n    var self = props[ableName];\r\n    if (isObject(self)) {\r\n        return __assign(__assign({}, props), self);\r\n    }\r\n    return props;\r\n}\r\nfunction getSize(target) {\r\n    var hasOffset = target && !isUndefined(target.offsetWidth);\r\n    var offsetWidth = 0;\r\n    var offsetHeight = 0;\r\n    var clientWidth = 0;\r\n    var clientHeight = 0;\r\n    var cssWidth = 0;\r\n    var cssHeight = 0;\r\n    var contentWidth = 0;\r\n    var contentHeight = 0;\r\n    var minWidth = 0;\r\n    var minHeight = 0;\r\n    var minOffsetWidth = 0;\r\n    var minOffsetHeight = 0;\r\n    var maxWidth = Infinity;\r\n    var maxHeight = Infinity;\r\n    var maxOffsetWidth = Infinity;\r\n    var maxOffsetHeight = Infinity;\r\n    var inlineCSSWidth = 0;\r\n    var inlineCSSHeight = 0;\r\n    var svg = false;\r\n    if (target) {\r\n        if (!hasOffset && target.ownerSVGElement) {\r\n            // check svg elements\r\n            var bbox = target.getBBox();\r\n            svg = true;\r\n            offsetWidth = bbox.width;\r\n            offsetHeight = bbox.height;\r\n            cssWidth = offsetWidth;\r\n            cssHeight = offsetHeight;\r\n            contentWidth = offsetWidth;\r\n            contentHeight = offsetHeight;\r\n            clientWidth = offsetWidth;\r\n            clientHeight = offsetHeight;\r\n        }\r\n        else {\r\n            // check html elements\r\n            var getStyle = getCachedStyle(target);\r\n            var targetStyle = target.style;\r\n            var boxSizing = getStyle(\"boxSizing\") === \"border-box\";\r\n            var borderLeft = parseFloat(getStyle(\"borderLeftWidth\")) || 0;\r\n            var borderRight = parseFloat(getStyle(\"borderRightWidth\")) || 0;\r\n            var borderTop = parseFloat(getStyle(\"borderTopWidth\")) || 0;\r\n            var borderBottom = parseFloat(getStyle(\"borderBottomWidth\")) || 0;\r\n            var paddingLeft = parseFloat(getStyle(\"paddingLeft\")) || 0;\r\n            var paddingRight = parseFloat(getStyle(\"paddingRight\")) || 0;\r\n            var paddingTop = parseFloat(getStyle(\"paddingTop\")) || 0;\r\n            var paddingBottom = parseFloat(getStyle(\"paddingBottom\")) || 0;\r\n            var horizontalPadding = paddingLeft + paddingRight;\r\n            var verticalPadding = paddingTop + paddingBottom;\r\n            var horizontalBorder = borderLeft + borderRight;\r\n            var verticalBorder = borderTop + borderBottom;\r\n            var horizontalOffset = horizontalPadding + horizontalBorder;\r\n            var verticalOffset = verticalPadding + verticalBorder;\r\n            var position = getStyle(\"position\");\r\n            var containerWidth = 0;\r\n            var containerHeight = 0;\r\n            // SVGSVGElement, HTMLElement\r\n            if (\"clientLeft\" in target) {\r\n                var parentElement = null;\r\n                if (position === \"absolute\") {\r\n                    var offsetInfo = getOffsetInfo(target, getDocumentBody(target));\r\n                    parentElement = offsetInfo.offsetParent;\r\n                }\r\n                else {\r\n                    parentElement = target.parentElement;\r\n                }\r\n                if (parentElement) {\r\n                    var getParentStyle = getCachedStyle(parentElement);\r\n                    containerWidth = parseFloat(getParentStyle(\"width\"));\r\n                    containerHeight = parseFloat(getParentStyle(\"height\"));\r\n                }\r\n            }\r\n            minWidth = Math.max(horizontalPadding, convertUnitSize(getStyle(\"minWidth\"), containerWidth) || 0);\r\n            minHeight = Math.max(verticalPadding, convertUnitSize(getStyle(\"minHeight\"), containerHeight) || 0);\r\n            maxWidth = convertUnitSize(getStyle(\"maxWidth\"), containerWidth);\r\n            maxHeight = convertUnitSize(getStyle(\"maxHeight\"), containerHeight);\r\n            if (isNaN(maxWidth)) {\r\n                maxWidth = Infinity;\r\n            }\r\n            if (isNaN(maxHeight)) {\r\n                maxHeight = Infinity;\r\n            }\r\n            inlineCSSWidth = convertUnitSize(targetStyle.width, 0) || 0;\r\n            inlineCSSHeight = convertUnitSize(targetStyle.height, 0) || 0;\r\n            cssWidth = parseFloat(getStyle(\"width\")) || 0;\r\n            cssHeight = parseFloat(getStyle(\"height\")) || 0;\r\n            contentWidth = abs(cssWidth - inlineCSSWidth) < 1\r\n                ? between(minWidth, inlineCSSWidth || cssWidth, maxWidth)\r\n                : cssWidth;\r\n            contentHeight = abs(cssHeight - inlineCSSHeight) < 1\r\n                ? between(minHeight, inlineCSSHeight || cssHeight, maxHeight)\r\n                : cssHeight;\r\n            offsetWidth = contentWidth;\r\n            offsetHeight = contentHeight;\r\n            clientWidth = contentWidth;\r\n            clientHeight = contentHeight;\r\n            if (boxSizing) {\r\n                maxOffsetWidth = maxWidth;\r\n                maxOffsetHeight = maxHeight;\r\n                minOffsetWidth = minWidth;\r\n                minOffsetHeight = minHeight;\r\n                contentWidth = offsetWidth - horizontalOffset;\r\n                contentHeight = offsetHeight - verticalOffset;\r\n            }\r\n            else {\r\n                maxOffsetWidth = maxWidth + horizontalOffset;\r\n                maxOffsetHeight = maxHeight + verticalOffset;\r\n                minOffsetWidth = minWidth + horizontalOffset;\r\n                minOffsetHeight = minHeight + verticalOffset;\r\n                offsetWidth = contentWidth + horizontalOffset;\r\n                offsetHeight = contentHeight + verticalOffset;\r\n            }\r\n            clientWidth = contentWidth + horizontalPadding;\r\n            clientHeight = contentHeight + verticalPadding;\r\n        }\r\n    }\r\n    return {\r\n        svg: svg,\r\n        offsetWidth: offsetWidth,\r\n        offsetHeight: offsetHeight,\r\n        clientWidth: clientWidth,\r\n        clientHeight: clientHeight,\r\n        contentWidth: contentWidth,\r\n        contentHeight: contentHeight,\r\n        inlineCSSWidth: inlineCSSWidth,\r\n        inlineCSSHeight: inlineCSSHeight,\r\n        cssWidth: cssWidth,\r\n        cssHeight: cssHeight,\r\n        minWidth: minWidth,\r\n        minHeight: minHeight,\r\n        maxWidth: maxWidth,\r\n        maxHeight: maxHeight,\r\n        minOffsetWidth: minOffsetWidth,\r\n        minOffsetHeight: minOffsetHeight,\r\n        maxOffsetWidth: maxOffsetWidth,\r\n        maxOffsetHeight: maxOffsetHeight,\r\n    };\r\n}\r\nfunction getRotationRad(poses, direction) {\r\n    return getRad(direction > 0 ? poses[0] : poses[1], direction > 0 ? poses[1] : poses[0]);\r\n}\r\nfunction resetClientRect() {\r\n    return {\r\n        left: 0, top: 0,\r\n        width: 0, height: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        clientLeft: 0, clientTop: 0,\r\n        clientWidth: 0, clientHeight: 0,\r\n        scrollWidth: 0, scrollHeight: 0,\r\n    };\r\n}\r\nfunction getExtendsRect(el, rect) {\r\n    var isRoot = el === getDocumentBody(el) || el === getDocumentElement(el);\r\n    var extendsRect = {\r\n        clientLeft: el.clientLeft,\r\n        clientTop: el.clientTop,\r\n        clientWidth: el.clientWidth,\r\n        clientHeight: el.clientHeight,\r\n        scrollWidth: el.scrollWidth,\r\n        scrollHeight: el.scrollHeight,\r\n        overflow: false,\r\n    };\r\n    if (isRoot) {\r\n        extendsRect.clientHeight = Math.max(rect.height, extendsRect.clientHeight);\r\n        extendsRect.scrollHeight = Math.max(rect.height, extendsRect.scrollHeight);\r\n    }\r\n    extendsRect.overflow = getCachedStyle(el)(\"overflow\") !== \"visible\";\r\n    return __assign(__assign({}, rect), extendsRect);\r\n}\r\nfunction getClientRectByPosition(position, base, el, isExtends) {\r\n    var left = position.left, right = position.right, top = position.top, bottom = position.bottom;\r\n    var baseTop = base.top;\r\n    var baseLeft = base.left;\r\n    var rect = {\r\n        left: baseLeft + left,\r\n        top: baseTop + top,\r\n        right: baseLeft + right,\r\n        bottom: baseTop + bottom,\r\n        width: right - left,\r\n        height: bottom - top,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getClientRect(el, isExtends) {\r\n    var left = 0;\r\n    var top = 0;\r\n    var width = 0;\r\n    var height = 0;\r\n    // let isRoot = false;\r\n    if (el) {\r\n        var clientRect = el.getBoundingClientRect();\r\n        left = clientRect.left;\r\n        top = clientRect.top;\r\n        width = clientRect.width;\r\n        height = clientRect.height;\r\n    }\r\n    var rect = {\r\n        left: left,\r\n        top: top,\r\n        width: width,\r\n        height: height,\r\n        right: left + width,\r\n        bottom: top + height,\r\n    };\r\n    if (el && isExtends) {\r\n        return getExtendsRect(el, rect);\r\n    }\r\n    return rect;\r\n}\r\nfunction getTotalOrigin(moveable) {\r\n    var _a = moveable.props, groupable = _a.groupable, svgOrigin = _a.svgOrigin;\r\n    var _b = moveable.getState(), offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight, svg = _b.svg, transformOrigin = _b.transformOrigin;\r\n    if (!groupable && svg && svgOrigin) {\r\n        return convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight);\r\n    }\r\n    return transformOrigin;\r\n}\r\nfunction getTotalDirection(parentDirection, isPinch, inputEvent, datas) {\r\n    var direction;\r\n    if (parentDirection) {\r\n        direction = parentDirection;\r\n    }\r\n    else if (isPinch) {\r\n        direction = [0, 0];\r\n    }\r\n    else {\r\n        var target = inputEvent.target;\r\n        direction = getDirection(target, datas);\r\n    }\r\n    return direction;\r\n}\r\nfunction getDirection(target, datas) {\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var deg = target.getAttribute(\"data-rotation\") || \"\";\r\n    var direciton = target.getAttribute(\"data-direction\");\r\n    datas.deg = deg;\r\n    if (!direciton) {\r\n        return;\r\n    }\r\n    var dir = [0, 0];\r\n    (direciton.indexOf(\"w\") > -1) && (dir[0] = -1);\r\n    (direciton.indexOf(\"e\") > -1) && (dir[0] = 1);\r\n    (direciton.indexOf(\"n\") > -1) && (dir[1] = -1);\r\n    (direciton.indexOf(\"s\") > -1) && (dir[1] = 1);\r\n    return dir;\r\n}\r\nfunction getAbsolutePoses(poses, dist) {\r\n    return [\r\n        plus(dist, poses[0]),\r\n        plus(dist, poses[1]),\r\n        plus(dist, poses[2]),\r\n        plus(dist, poses[3]),\r\n    ];\r\n}\r\nfunction getAbsolutePosesByState(_a) {\r\n    var left = _a.left, top = _a.top, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n    return getAbsolutePoses([pos1, pos2, pos3, pos4], [left, top]);\r\n}\r\nfunction unsetAbles(self, isControl) {\r\n    self[isControl ? \"controlAbles\" : \"targetAbles\"].forEach(function (able) {\r\n        able.unset && able.unset(self);\r\n    });\r\n}\r\nfunction unsetGesto(self, isControl) {\r\n    var gestoName = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var gesto = self[gestoName];\r\n    if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n        unsetAbles(self, isControl);\r\n    }\r\n    gesto === null || gesto === void 0 ? void 0 : gesto.unset();\r\n    self[gestoName] = null;\r\n}\r\nfunction fillCSSObject(style, resolvedEvent) {\r\n    if (resolvedEvent) {\r\n        var originalDatas = getBeforeRenderableDatas(resolvedEvent);\r\n        originalDatas.nextStyle = __assign(__assign({}, originalDatas.nextStyle), style);\r\n    }\r\n    return {\r\n        style: style,\r\n        cssText: getKeys(style).map(function (name) { return \"\".concat(decamelize(name, \"-\"), \": \").concat(style[name], \";\"); }).join(\"\"),\r\n    };\r\n}\r\nfunction fillAfterTransform(prevEvent, nextEvent, resolvedEvent) {\r\n    var afterTransform = nextEvent.afterTransform || nextEvent.transform;\r\n    return __assign(__assign({}, fillCSSObject(__assign(__assign(__assign({}, prevEvent.style), nextEvent.style), { transform: afterTransform }), resolvedEvent)), { afterTransform: afterTransform, transform: prevEvent.transform });\r\n}\r\nfunction fillParams(moveable, e, params, isBeforeEvent) {\r\n    var datas = e.datas;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    var nextParams = __assign(__assign({}, params), { target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, moveable: moveable, datas: datas.datas, isRequest: e.isRequest, isRequestChild: e.isRequestChild, isFirstDrag: !!e.isFirstDrag, isTrusted: e.isTrusted !== false, stopAble: function () {\r\n            datas.isEventStart = false;\r\n        }, stopDrag: function () {\r\n            var _a;\r\n            (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n        } });\r\n    if (!datas.isStartEvent) {\r\n        datas.isStartEvent = true;\r\n    }\r\n    else if (!isBeforeEvent) {\r\n        datas.lastEvent = nextParams;\r\n    }\r\n    return nextParams;\r\n}\r\nfunction fillEndParams(moveable, e, params) {\r\n    var datas = e.datas;\r\n    var isDrag = \"isDrag\" in params ? params.isDrag : e.isDrag;\r\n    if (!datas.datas) {\r\n        datas.datas = {};\r\n    }\r\n    return __assign(__assign({ isDrag: isDrag }, params), { moveable: moveable, target: moveable.state.target, clientX: e.clientX, clientY: e.clientY, inputEvent: e.inputEvent, currentTarget: moveable, lastEvent: datas.lastEvent, isDouble: e.isDouble, datas: datas.datas, isFirstDrag: !!e.isFirstDrag });\r\n}\r\nfunction catchEvent(moveable, name, callback) {\r\n    moveable._emitter.on(name, callback);\r\n}\r\nfunction triggerEvent(moveable, name, params, isManager, isRequest) {\r\n    return moveable.triggerEvent(name, params, isManager, isRequest);\r\n}\r\nfunction getComputedStyle(el, pseudoElt) {\r\n    return getWindow(el).getComputedStyle(el, pseudoElt);\r\n}\r\nfunction filterAbles(ables, methods, triggerAblesSimultaneously) {\r\n    var enabledAbles = {};\r\n    var ableGroups = {};\r\n    return ables.filter(function (able) {\r\n        var name = able.name;\r\n        if (enabledAbles[name] || !methods.some(function (method) { return able[method]; })) {\r\n            return false;\r\n        }\r\n        if (!triggerAblesSimultaneously && able.ableGroup) {\r\n            if (ableGroups[able.ableGroup]) {\r\n                return false;\r\n            }\r\n            ableGroups[able.ableGroup] = true;\r\n        }\r\n        enabledAbles[name] = true;\r\n        return true;\r\n    });\r\n}\r\nfunction equals(a1, a2) {\r\n    return a1 === a2 || (a1 == null && a2 == null);\r\n}\r\nfunction selectValue() {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    var length = values.length - 1;\r\n    for (var i = 0; i < length; ++i) {\r\n        var value = values[i];\r\n        if (!isUndefined(value)) {\r\n            return value;\r\n        }\r\n    }\r\n    return values[length];\r\n}\r\nfunction groupBy(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = [];\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var keyIndex = groupKeys.indexOf(groupKey);\r\n        var group = groups[keyIndex] || [];\r\n        if (keyIndex === -1) {\r\n            groupKeys.push(groupKey);\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction groupByMap(arr, func) {\r\n    var groups = [];\r\n    var groupKeys = {};\r\n    arr.forEach(function (el, index) {\r\n        var groupKey = func(el, index, arr);\r\n        var group = groupKeys[groupKey];\r\n        if (!group) {\r\n            group = [];\r\n            groupKeys[groupKey] = group;\r\n            groups.push(group);\r\n        }\r\n        group.push(el);\r\n    });\r\n    return groups;\r\n}\r\nfunction flat(arr) {\r\n    return arr.reduce(function (prev, cur) {\r\n        return prev.concat(cur);\r\n    }, []);\r\n}\r\nfunction maxOffset() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    args.sort(function (a, b) { return abs(b) - abs(a); });\r\n    return args[0];\r\n}\r\nfunction calculateInversePosition(matrix, pos, n) {\r\n    return calculate(invert(matrix, n), convertPositionMatrix(pos, n), n);\r\n}\r\nfunction convertDragDist(state, e) {\r\n    var _a;\r\n    var is3d = state.is3d, rootMatrix = state.rootMatrix;\r\n    var n = is3d ? 4 : 3;\r\n    _a = __read(calculateInversePosition(rootMatrix, [e.distX, e.distY], n), 2), e.distX = _a[0], e.distY = _a[1];\r\n    return e;\r\n}\r\nfunction calculatePadding(matrix, pos, added, n) {\r\n    if (!added[0] && !added[1]) {\r\n        return pos;\r\n    }\r\n    var xAdded = calculatePosition(matrix, [normalized(added[0] || 1), 0], n);\r\n    var yAdded = calculatePosition(matrix, [0, normalized(added[1] || 1)], n);\r\n    var nextAdded = calculatePosition(matrix, [\r\n        added[0] / getDistSize(xAdded),\r\n        added[1] / getDistSize(yAdded),\r\n    ], n);\r\n    return plus(pos, nextAdded);\r\n}\r\nfunction convertCSSSize(value, size, isRelative) {\r\n    return isRelative ? \"\".concat(value / size * 100, \"%\") : \"\".concat(value, \"px\");\r\n}\r\nfunction getTinyDist(v) {\r\n    return abs(v) <= TINY_NUM ? 0 : v;\r\n}\r\nfunction getDirectionViewClassName(ableName) {\r\n    return function (moveable) {\r\n        if (!moveable.isDragging(ableName)) {\r\n            return \"\";\r\n        }\r\n        var data = getGestoData(moveable, ableName);\r\n        var deg = data.deg;\r\n        if (!deg) {\r\n            return \"\";\r\n        }\r\n        return prefix(\"view-control-rotation\".concat(deg));\r\n    };\r\n}\r\nfunction getDirectionCondition(ableName, checkAbles) {\r\n    if (checkAbles === void 0) { checkAbles = [ableName]; }\r\n    return function (moveable, e) {\r\n        if (e.isRequest) {\r\n            if (checkAbles.some(function (name) { return e.requestAble === name; })) {\r\n                return e.parentDirection;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && (!ableName || hasClass(target, prefix(ableName)));\r\n    };\r\n}\r\nfunction convertTransformInfo(transforms, state, index) {\r\n    var _a;\r\n    var matrixInfos = parse(transforms, {\r\n        \"x%\": function (v) { return v / 100 * state.offsetWidth; },\r\n        \"y%\": function (v) { return v / 100 * state.offsetHeight; },\r\n    });\r\n    var beforeFunctionTexts = transforms.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctionTexts2 = transforms.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunctionText = transforms[index] || \"\";\r\n    var afterFunctionTexts = index < 0 ? [] : transforms.slice(index);\r\n    var afterFunctionTexts2 = index < 0 ? [] : transforms.slice(index + 1);\r\n    var beforeFunctions = matrixInfos.slice(0, index < 0 ? undefined : index);\r\n    var beforeFunctions2 = matrixInfos.slice(0, index < 0 ? undefined : index + 1);\r\n    var targetFunction = (_a = matrixInfos[index]) !== null && _a !== void 0 ? _a : parse([\"\"])[0];\r\n    var afterFunctions = index < 0 ? [] : matrixInfos.slice(index);\r\n    var afterFunctions2 = index < 0 ? [] : matrixInfos.slice(index + 1);\r\n    var targetFunctions = targetFunction ? [targetFunction] : [];\r\n    var beforeFunctionMatrix = toMat(beforeFunctions);\r\n    var beforeFunctionMatrix2 = toMat(beforeFunctions2);\r\n    var afterFunctionMatrix = toMat(afterFunctions);\r\n    var afterFunctionMatrix2 = toMat(afterFunctions2);\r\n    var allFunctionMatrix = multiply(beforeFunctionMatrix, afterFunctionMatrix, 4);\r\n    return {\r\n        transforms: transforms,\r\n        beforeFunctionMatrix: beforeFunctionMatrix,\r\n        beforeFunctionMatrix2: beforeFunctionMatrix2,\r\n        targetFunctionMatrix: toMat(targetFunctions),\r\n        afterFunctionMatrix: afterFunctionMatrix,\r\n        afterFunctionMatrix2: afterFunctionMatrix2,\r\n        allFunctionMatrix: allFunctionMatrix,\r\n        beforeFunctions: beforeFunctions,\r\n        beforeFunctions2: beforeFunctions2,\r\n        targetFunction: targetFunctions[0],\r\n        afterFunctions: afterFunctions,\r\n        afterFunctions2: afterFunctions2,\r\n        beforeFunctionTexts: beforeFunctionTexts,\r\n        beforeFunctionTexts2: beforeFunctionTexts2,\r\n        targetFunctionText: targetFunctionText,\r\n        afterFunctionTexts: afterFunctionTexts,\r\n        afterFunctionTexts2: afterFunctionTexts2,\r\n    };\r\n}\r\nfunction isArrayFormat(arr) {\r\n    if (!arr || !isObject(arr)) {\r\n        return false;\r\n    }\r\n    if (isNode(arr)) {\r\n        return false;\r\n    }\r\n    return isArray(arr) || \"length\" in arr;\r\n}\r\nfunction getRefTarget(target, isSelector) {\r\n    if (!target) {\r\n        return null;\r\n    }\r\n    if (isNode(target)) {\r\n        return target;\r\n    }\r\n    if (isString(target)) {\r\n        if (isSelector) {\r\n            return document.querySelector(target);\r\n        }\r\n        return target;\r\n    }\r\n    if (isFunction(target)) {\r\n        return target();\r\n    }\r\n    if (isWindow(target)) {\r\n        return target;\r\n    }\r\n    if (\"current\" in target) {\r\n        return target.current;\r\n    }\r\n    return target;\r\n}\r\nfunction getRefTargets(targets, isSelector) {\r\n    if (!targets) {\r\n        return [];\r\n    }\r\n    var userTargets = isArrayFormat(targets) ? [].slice.call(targets) : [targets];\r\n    return userTargets.reduce(function (prev, target) {\r\n        if (isString(target) && isSelector) {\r\n            return __spreadArray(__spreadArray([], __read(prev), false), __read([].slice.call(document.querySelectorAll(target))), false);\r\n        }\r\n        if (isArray(target)) {\r\n            prev.push(getRefTargets(target, isSelector));\r\n        }\r\n        else {\r\n            prev.push(getRefTarget(target, isSelector));\r\n        }\r\n        return prev;\r\n    }, []);\r\n}\r\nfunction getAbsoluteRotation(pos1, pos2, direction) {\r\n    var deg = getRad(pos1, pos2) / Math.PI * 180;\r\n    deg = direction >= 0 ? deg : 180 - deg;\r\n    deg = deg >= 0 ? deg : 360 + deg;\r\n    return deg;\r\n}\r\nfunction getDragDistByState(state, dist) {\r\n    var rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n    var n = is3d ? 4 : 3;\r\n    var inverseMatrix = invert(rootMatrix, n);\r\n    if (!is3d) {\r\n        inverseMatrix = convertDimension(inverseMatrix, 3, 4);\r\n    }\r\n    inverseMatrix[12] = 0;\r\n    inverseMatrix[13] = 0;\r\n    inverseMatrix[14] = 0;\r\n    return calculateMatrixDist(inverseMatrix, dist);\r\n}\r\nfunction getSizeDistByDist(startSize, dist, ratio, direction, keepRatio) {\r\n    var _a = __read(startSize, 2), startOffsetWidth = _a[0], startOffsetHeight = _a[1];\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    if (keepRatio && startOffsetWidth && startOffsetHeight) {\r\n        var rad = getRad([0, 0], dist);\r\n        var standardRad = getRad([0, 0], direction);\r\n        var size = getDistSize(dist);\r\n        var signSize = Math.cos(rad - standardRad) * size;\r\n        if (!direction[0]) {\r\n            // top, bottom\r\n            distHeight = signSize;\r\n            distWidth = distHeight * ratio;\r\n        }\r\n        else if (!direction[1]) {\r\n            // left, right\r\n            distWidth = signSize;\r\n            distHeight = distWidth / ratio;\r\n        }\r\n        else {\r\n            // two-way\r\n            var startWidthSize = direction[0] * startOffsetWidth;\r\n            var startHeightSize = direction[1] * startOffsetHeight;\r\n            var secondRad = Math.atan2(startWidthSize + dist[0], startHeightSize + dist[1]);\r\n            var firstRad = Math.atan2(startWidthSize, startHeightSize);\r\n            if (secondRad < 0) {\r\n                secondRad += Math.PI * 2;\r\n            }\r\n            if (firstRad < 0) {\r\n                firstRad += Math.PI * 2;\r\n            }\r\n            var rad_1 = 0;\r\n            if (abs(secondRad - firstRad) < Math.PI / 2 || abs(secondRad - firstRad) > Math.PI / 2 * 3) {\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            else {\r\n                firstRad += Math.PI;\r\n                rad_1 = secondRad - firstRad;\r\n            }\r\n            if (rad_1 > Math.PI * 2) {\r\n                rad_1 -= Math.PI * 2;\r\n            }\r\n            else if (rad_1 > Math.PI) {\r\n                rad_1 = 2 * Math.PI - rad_1;\r\n            }\r\n            else if (rad_1 < -Math.PI) {\r\n                rad_1 = -2 * Math.PI - rad_1;\r\n            }\r\n            //       180\r\n            // -1, -1,  // 1, -1\r\n            // 270            90\r\n            // -1, 1    // 1, 1\r\n            //       0\r\n            var distSize = getDistSize([startWidthSize + dist[0], startHeightSize + dist[1]]) * Math.cos(rad_1);\r\n            distWidth = distSize * Math.sin(firstRad) - startWidthSize;\r\n            distHeight = distSize * Math.cos(firstRad) - startHeightSize;\r\n            if (direction[0] < 0) {\r\n                distWidth *= -1;\r\n            }\r\n            if (direction[1] < 0) {\r\n                distHeight *= -1;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        distWidth = direction[0] * dist[0];\r\n        distHeight = direction[1] * dist[1];\r\n    }\r\n    return [distWidth, distHeight];\r\n}\r\nfunction getOffsetSizeDist(sizeDirection, keepRatio, datas, e) {\r\n    var _a;\r\n    var ratio = datas.ratio, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight;\r\n    var distWidth = 0;\r\n    var distHeight = 0;\r\n    var distX = e.distX, distY = e.distY, pinchScale = e.pinchScale, parentDistance = e.parentDistance, parentDist = e.parentDist, parentScale = e.parentScale;\r\n    var startFixedDirection = datas.fixedDirection;\r\n    var directionsDists = [0, 1].map(function (index) {\r\n        return abs(sizeDirection[index] - startFixedDirection[index]);\r\n    });\r\n    var directionRatios = [0, 1].map(function (index) {\r\n        var dist = directionsDists[index];\r\n        if (dist !== 0) {\r\n            dist = 2 / dist;\r\n        }\r\n        return dist;\r\n    });\r\n    if (parentDist) {\r\n        distWidth = parentDist[0];\r\n        distHeight = parentDist[1];\r\n        if (keepRatio) {\r\n            if (!distWidth) {\r\n                distWidth = distHeight * ratio;\r\n            }\r\n            else if (!distHeight) {\r\n                distHeight = distWidth / ratio;\r\n            }\r\n        }\r\n    }\r\n    else if (isNumber(pinchScale)) {\r\n        distWidth = (pinchScale - 1) * startOffsetWidth;\r\n        distHeight = (pinchScale - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentScale) {\r\n        distWidth = (parentScale[0] - 1) * startOffsetWidth;\r\n        distHeight = (parentScale[1] - 1) * startOffsetHeight;\r\n    }\r\n    else if (parentDistance) {\r\n        var scaleX = startOffsetWidth * directionsDists[0];\r\n        var scaleY = startOffsetHeight * directionsDists[1];\r\n        var ratioDistance = getDistSize([scaleX, scaleY]);\r\n        distWidth = parentDistance / ratioDistance * scaleX * directionRatios[0];\r\n        distHeight = parentDistance / ratioDistance * scaleY * directionRatios[1];\r\n    }\r\n    else {\r\n        var dist_1 = getDragDist({ datas: datas, distX: distX, distY: distY });\r\n        dist_1 = directionRatios.map(function (ratio, i) {\r\n            return dist_1[i] * ratio;\r\n        });\r\n        _a = __read(getSizeDistByDist([startOffsetWidth, startOffsetHeight], dist_1, ratio, sizeDirection, keepRatio), 2), distWidth = _a[0], distHeight = _a[1];\r\n    }\r\n    return {\r\n        // direction,\r\n        // sizeDirection,\r\n        distWidth: distWidth,\r\n        distHeight: distHeight,\r\n    };\r\n}\r\nfunction convertTransformUnit(origin, xy) {\r\n    if (xy) {\r\n        if (origin === \"left\") {\r\n            return { x: \"0%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"top\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"center\") {\r\n            return { x: \"50%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"right\") {\r\n            return { x: \"100%\", y: \"50%\" };\r\n        }\r\n        else if (origin === \"bottom\") {\r\n            return { x: \"50%\", y: \"100%\" };\r\n        }\r\n        var _a = __read(origin.split(\" \"), 2), left = _a[0], right = _a[1];\r\n        var leftOrigin = convertTransformUnit(left || \"\");\r\n        var rightOrigin = convertTransformUnit(right || \"\");\r\n        var originObject = __assign(__assign({}, leftOrigin), rightOrigin);\r\n        var nextOriginObject = {\r\n            x: \"50%\",\r\n            y: \"50%\",\r\n        };\r\n        if (originObject.x) {\r\n            nextOriginObject.x = originObject.x;\r\n        }\r\n        if (originObject.y) {\r\n            nextOriginObject.y = originObject.y;\r\n        }\r\n        if (originObject.value) {\r\n            if (originObject.x && !originObject.y) {\r\n                nextOriginObject.y = originObject.value;\r\n            }\r\n            if (!originObject.x && originObject.y) {\r\n                nextOriginObject.x = originObject.value;\r\n            }\r\n        }\r\n        return nextOriginObject;\r\n    }\r\n    if (origin === \"left\") {\r\n        return { x: \"0%\" };\r\n    }\r\n    if (origin === \"right\") {\r\n        return { x: \"100%\" };\r\n    }\r\n    if (origin === \"top\") {\r\n        return { y: \"0%\" };\r\n    }\r\n    if (origin === \"bottom\") {\r\n        return { y: \"100%\" };\r\n    }\r\n    if (!origin) {\r\n        return {};\r\n    }\r\n    if (origin === \"center\") {\r\n        return { value: \"50%\" };\r\n    }\r\n    return { value: origin };\r\n}\r\nfunction convertTransformOriginArray(transformOrigin, width, height) {\r\n    var _a = convertTransformUnit(transformOrigin, true), x = _a.x, y = _a.y;\r\n    return [\r\n        convertUnitSize(x, width) || 0,\r\n        convertUnitSize(y, height) || 0,\r\n    ];\r\n}\r\nfunction rotatePosesInfo(poses, origin, rad) {\r\n    var prevPoses = poses.map(function (pos) { return minus(pos, origin); });\r\n    var nextPoses = prevPoses.map(function (pos) { return rotate(pos, rad); });\r\n    return {\r\n        prev: prevPoses,\r\n        next: nextPoses,\r\n        result: nextPoses.map(function (pos) { return plus(pos, origin); }),\r\n    };\r\n}\r\nfunction isDeepArrayEquals(arr1, arr2) {\r\n    return arr1.length === arr2.length && arr1.every(function (value1, i) {\r\n        var value2 = arr2[i];\r\n        var isArray1 = isArray(value1);\r\n        var isArray2 = isArray(value2);\r\n        if (isArray1 && isArray2) {\r\n            return isDeepArrayEquals(value1, value2);\r\n        }\r\n        else if (!isArray1 && !isArray2) {\r\n            return value1 === value2;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nfunction watchValue(moveable, property, nextValue, valueKey, defaultValue) {\r\n    var store = moveable._store;\r\n    var prevValue = store[property];\r\n    if (!(property in store)) {\r\n        if (defaultValue != null) {\r\n            store[property] = defaultValue;\r\n            prevValue = defaultValue;\r\n        }\r\n        else {\r\n            store[property] = nextValue;\r\n            return nextValue;\r\n        }\r\n    }\r\n    if (prevValue === nextValue || valueKey(prevValue) === valueKey(nextValue)) {\r\n        return prevValue;\r\n    }\r\n    store[property] = nextValue;\r\n    return nextValue;\r\n}\r\nfunction sign(value) {\r\n    return value >= 0 ? 1 : -1;\r\n}\r\nfunction abs(value) {\r\n    return Math.abs(value);\r\n}\r\nfunction countEach(count, callback) {\r\n    return counter(count).map(function (index) { return callback(index); });\r\n}\r\nfunction getPaddingBox(padding) {\r\n    if (isNumber(padding)) {\r\n        return {\r\n            top: padding,\r\n            left: padding,\r\n            right: padding,\r\n            bottom: padding,\r\n        };\r\n    }\r\n    return {\r\n        left: padding.left || 0,\r\n        top: padding.top || 0,\r\n        right: padding.right || 0,\r\n        bottom: padding.bottom || 0,\r\n    };\r\n}\n\n/**\r\n * @namespace Moveable.Pinchable\r\n * @description Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n */\r\nvar Pinchable = makeAble(\"pinchable\", {\r\n    props: [\r\n        \"pinchable\",\r\n    ],\r\n    events: [\r\n        \"pinchStart\",\r\n        \"pinch\",\r\n        \"pinchEnd\",\r\n        \"pinchGroupStart\",\r\n        \"pinchGroup\",\r\n        \"pinchGroupEnd\",\r\n    ],\r\n    dragStart: function () {\r\n        return true;\r\n    },\r\n    pinchStart: function (moveable, e) {\r\n        var datas = e.datas, targets = e.targets, angle = e.angle, originalDatas = e.originalDatas;\r\n        var _a = moveable.props, pinchable = _a.pinchable, ables = _a.ables;\r\n        if (!pinchable) {\r\n            return false;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"Start\");\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlStart\");\r\n        var pinchAbles = (pinchable === true ? moveable.controlAbles : ables.filter(function (able) {\r\n            return pinchable.indexOf(able.name) > -1;\r\n        })).filter(function (able) { return able.canPinch && able[controlEventName]; });\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var result = triggerEvent(moveable, eventName, params);\r\n        datas.isPinch = result !== false;\r\n        datas.ables = pinchAbles;\r\n        var isPinch = datas.isPinch;\r\n        if (!isPinch) {\r\n            return false;\r\n        }\r\n        pinchAbles.forEach(function (able) {\r\n            originalDatas[able.name] = originalDatas[able.name] || {};\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            var ableEvent = __assign(__assign({}, e), { datas: originalDatas[able.name], parentRotate: angle, isPinch: true });\r\n            able[controlEventName](moveable, ableEvent);\r\n        });\r\n        moveable.state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: [0, 0],\r\n        };\r\n        return isPinch;\r\n    },\r\n    pinch: function (moveable, e) {\r\n        var datas = e.datas, pinchScale = e.scale, distance = e.distance, originalDatas = e.originalDatas, inputEvent = e.inputEvent, targets = e.targets, angle = e.angle;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var parentDistance = distance * (1 - 1 / pinchScale);\r\n        var params = fillParams(moveable, e, {});\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\");\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"Control\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { datas: originalDatas[able.name], inputEvent: inputEvent, resolveMatrix: true, pinchScale: pinchScale, parentDistance: parentDistance, parentRotate: angle, isPinch: true }));\r\n        });\r\n        return params;\r\n    },\r\n    pinchEnd: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, targets = e.targets, originalDatas = e.originalDatas;\r\n        if (!datas.isPinch) {\r\n            return;\r\n        }\r\n        var eventName = \"onPinch\".concat(targets ? \"Group\" : \"\", \"End\");\r\n        var params = fillEndParams(moveable, e, { isDrag: isPinch });\r\n        if (targets) {\r\n            params.targets = targets;\r\n        }\r\n        triggerEvent(moveable, eventName, params);\r\n        var ables = datas.ables;\r\n        var controlEventName = \"drag\".concat(targets ? \"Group\" : \"\", \"ControlEnd\");\r\n        ables.forEach(function (able) {\r\n            if (!able[controlEventName]) {\r\n                return;\r\n            }\r\n            able[controlEventName](moveable, __assign(__assign({}, e), { isDrag: isPinch, datas: originalDatas[able.name], inputEvent: inputEvent, isPinch: true }));\r\n        });\r\n        return isPinch;\r\n    },\r\n    pinchGroupStart: function (moveable, e) {\r\n        return this.pinchStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroup: function (moveable, e) {\r\n        return this.pinch(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    pinchGroupEnd: function (moveable, e) {\r\n        return this.pinchEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n});\r\n/**\r\n * Whether or not target can be pinched with draggable, resizable, scalable, rotatable (default: false)\r\n * @name Moveable.Pinchable#pinchable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.pinchable = true;\r\n */\r\n/**\r\n * When the pinch starts, the pinchStart event is called with part of scaleStart, rotateStart, resizeStart\r\n * @memberof Moveable.Pinchable\r\n * @event pinchStart\r\n * @param {Moveable.Pinchable.OnPinchStart} - Parameters for the pinchStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When pinching, the pinch event is called with part of scale, rotate, resize\r\n * @memberof Moveable.Pinchable\r\n * @event pinch\r\n * @param {Moveable.Pinchable.OnPinch} - Parameters for the pinch event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinch\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotate\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scale\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the pinch finishes, the pinchEnd event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchEnd\r\n * @param {Moveable.Pinchable.OnPinchEnd} - Parameters for the pinchEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     rotatable: true,\r\n *     scalable: true,\r\n *     pinchable: true, // [\"rotatable\", \"scalable\"]\r\n * });\r\n * moveable.on(\"pinchEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"rotateEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n * moveable.on(\"scaleEnd\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When the group pinch starts, the `pinchGroupStart` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupStart\r\n * @param {Moveable.Pinchable.OnPinchGroupStart} - Parameters for the `pinchGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupStart\", ({ targets }) => {\r\n *     console.log(\"onPinchGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch, the `pinchGroup` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroup\r\n * @param {Moveable.Pinchable.OnPinchGroup} - Parameters for the `pinchGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroup\", ({ targets, events }) => {\r\n *     console.log(\"onPinchGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * When the group pinch finishes, the `pinchGroupEnd` event is called.\r\n * @memberof Moveable.Pinchable\r\n * @event pinchGroupEnd\r\n * @param {Moveable.Pinchable.OnPinchGroupEnd} - Parameters for the `pinchGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     pinchable: true\r\n * });\r\n * moveable.on(\"pinchGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onPinchGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nvar directionCondition = getDirectionCondition(\"scalable\");\r\n/**\r\n * @namespace Scalable\r\n * @memberof Moveable\r\n * @description Scalable indicates whether the target's x and y can be scale of transform.\r\n */\r\nvar Scalable = {\r\n    name: \"scalable\",\r\n    ableGroup: \"size\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scalable\",\r\n        \"throttleScale\",\r\n        \"renderDirections\",\r\n        \"keepRatio\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"scaleStart\",\r\n        \"beforeScale\",\r\n        \"scale\",\r\n        \"scaleEnd\",\r\n        \"scaleGroupStart\",\r\n        \"beforeScaleGroup\",\r\n        \"scaleGroup\",\r\n        \"scaleGroupEnd\",\r\n    ],\r\n    render: getRenderDirections(\"scalable\"),\r\n    dragControlCondition: directionCondition,\r\n    viewClassName: getDirectionViewClassName(\"scalable\"),\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, inputEvent = e.inputEvent, parentDirection = e.parentDirection;\r\n        var direction = getTotalDirection(parentDirection, isPinch, inputEvent, datas);\r\n        var _a = moveable.state, width = _a.width, height = _a.height, targetTransform = _a.targetTransform, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos4 = _a.pos4;\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        if (!isPinch) {\r\n            setDragStart(moveable, e);\r\n        }\r\n        datas.datas = {};\r\n        datas.transform = targetTransform;\r\n        datas.prevDist = [1, 1];\r\n        datas.direction = direction;\r\n        datas.startOffsetWidth = width;\r\n        datas.startOffsetHeight = height;\r\n        datas.startValue = [1, 1];\r\n        // const scaleWidth = getDist(pos1, pos2);\r\n        // const scaleHeight = getDist(pos2, pos4);\r\n        var isWidth = (!direction[0] && !direction[1]) || direction[0] || !direction[1];\r\n        // datas.scaleWidth = scaleWidth;\r\n        // datas.scaleHeight = scaleHeight;\r\n        // datas.scaleXRatio = scaleWidth / width;\r\n        // datas.scaleYRatio = scaleHeight / height;\r\n        setDefaultTransformIndex(moveable, e, \"scale\");\r\n        datas.isWidth = isWidth;\r\n        function setRatio(ratio) {\r\n            datas.ratio = ratio && isFinite(ratio) ? ratio : 0;\r\n        }\r\n        datas.startPositions = getAbsolutePosesByState(moveable.state);\r\n        function setFixedDirection(fixedDirection) {\r\n            var result = getFixedDirectionInfo(datas.startPositions, fixedDirection);\r\n            datas.fixedDirection = result.fixedDirection;\r\n            datas.fixedPosition = result.fixedPosition;\r\n            datas.fixedOffset = result.fixedOffset;\r\n        }\r\n        datas.setFixedDirection = setFixedDirection;\r\n        setRatio(getDist$1(pos1, pos2) / getDist$1(pos2, pos4));\r\n        setFixedDirection([-direction[0], -direction[1]]);\r\n        var setMinScaleSize = function (min) {\r\n            datas.minScaleSize = min;\r\n        };\r\n        var setMaxScaleSize = function (max) {\r\n            datas.maxScaleSize = max;\r\n        };\r\n        // const setMinScale = (min: number[]) => {\r\n        // };\r\n        // const setMaxScale = (max: number[]) => {\r\n        // };\r\n        setMinScaleSize([-Infinity, -Infinity]);\r\n        setMaxScaleSize([Infinity, Infinity]);\r\n        var params = fillParams(moveable, e, __assign(__assign({ direction: direction, set: function (scale) {\r\n                datas.startValue = scale;\r\n            }, setRatio: setRatio, setFixedDirection: setFixedDirection, setMinScaleSize: setMinScaleSize, setMaxScaleSize: setMaxScaleSize }, fillTransformStartEvent(moveable, e)), { dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)) }));\r\n        var result = triggerEvent(moveable, \"onScaleStart\", params);\r\n        datas.startFixedDirection = datas.fixedDirection;\r\n        if (result !== false) {\r\n            datas.isScale = true;\r\n            moveable.state.snapRenderInfo = {\r\n                request: e.isRequest,\r\n                direction: direction,\r\n            };\r\n        }\r\n        return datas.isScale ? params : false;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        resolveTransformEvent(moveable, e, \"scale\");\r\n        var datas = e.datas, parentKeepRatio = e.parentKeepRatio, parentFlag = e.parentFlag, isPinch = e.isPinch, dragClient = e.dragClient, isRequest = e.isRequest, useSnap = e.useSnap, resolveMatrix = e.resolveMatrix;\r\n        var prevDist = datas.prevDist, direction = datas.direction, startOffsetWidth = datas.startOffsetWidth, startOffsetHeight = datas.startOffsetHeight, isScale = datas.isScale, startValue = datas.startValue, isWidth = datas.isWidth, ratio = datas.ratio;\r\n        if (!isScale) {\r\n            return false;\r\n        }\r\n        var props = moveable.props;\r\n        var throttleScale = props.throttleScale, parentMoveable = props.parentMoveable;\r\n        var sizeDirection = direction;\r\n        if (!direction[0] && !direction[1]) {\r\n            sizeDirection = [1, 1];\r\n        }\r\n        var keepRatio = (ratio && (parentKeepRatio != null ? parentKeepRatio : props.keepRatio)) || false;\r\n        var state = moveable.state;\r\n        var tempScaleValue = [\r\n            startValue[0],\r\n            startValue[1],\r\n        ];\r\n        function getNextScale() {\r\n            var _a = getOffsetSizeDist(sizeDirection, keepRatio, datas, e), distWidth = _a.distWidth, distHeight = _a.distHeight;\r\n            var distX = startOffsetWidth ? (startOffsetWidth + distWidth) / startOffsetWidth : 1;\r\n            var distY = startOffsetHeight ? (startOffsetHeight + distHeight) / startOffsetHeight : 1;\r\n            if (!startValue[0]) {\r\n                tempScaleValue[0] = distWidth / startOffsetWidth;\r\n            }\r\n            if (!startValue[1]) {\r\n                tempScaleValue[1] = distHeight / startOffsetHeight;\r\n            }\r\n            var scaleX = (sizeDirection[0] || keepRatio ? distX : 1) * tempScaleValue[0];\r\n            var scaleY = (sizeDirection[1] || keepRatio ? distY : 1) * tempScaleValue[1];\r\n            if (scaleX === 0) {\r\n                scaleX = sign(prevDist[0]) * MIN_SCALE;\r\n            }\r\n            if (scaleY === 0) {\r\n                scaleY = sign(prevDist[1]) * MIN_SCALE;\r\n            }\r\n            return [scaleX, scaleY];\r\n        }\r\n        var scale = getNextScale();\r\n        if (!isPinch && moveable.props.groupable) {\r\n            var snapRenderInfo = state.snapRenderInfo || {};\r\n            var stateDirection = snapRenderInfo.direction;\r\n            if (isArray(stateDirection) && (stateDirection[0] || stateDirection[1])) {\r\n                state.snapRenderInfo = { direction: direction, request: e.isRequest };\r\n            }\r\n        }\r\n        triggerEvent(moveable, \"onBeforeScale\", fillParams(moveable, e, {\r\n            scale: scale,\r\n            setFixedDirection: function (nextFixedDirection) {\r\n                datas.setFixedDirection(nextFixedDirection);\r\n                scale = getNextScale();\r\n                return scale;\r\n            },\r\n            startFixedDirection: datas.startFixedDirection,\r\n            setScale: function (nextScale) {\r\n                scale = nextScale;\r\n            },\r\n        }, true));\r\n        var dist = [\r\n            scale[0] / tempScaleValue[0],\r\n            scale[1] / tempScaleValue[1],\r\n        ];\r\n        var fixedPosition = dragClient;\r\n        var snapDist = [0, 0];\r\n        var distSign = sign(dist[0] * dist[1]);\r\n        var isSelfPinch = !dragClient && !parentFlag && isPinch;\r\n        if (isSelfPinch || resolveMatrix) {\r\n            fixedPosition = getTranslateFixedPosition(moveable, datas.targetAllTransform, [0, 0], [0, 0], datas);\r\n        }\r\n        else if (!dragClient) {\r\n            fixedPosition = datas.fixedPosition;\r\n        }\r\n        if (!isPinch) {\r\n            snapDist = checkSnapScale(moveable, dist, direction, !useSnap && isRequest, datas);\r\n        }\r\n        if (keepRatio) {\r\n            if (sizeDirection[0] && sizeDirection[1] && snapDist[0] && snapDist[1]) {\r\n                if (Math.abs(snapDist[0] * startOffsetWidth) > Math.abs(snapDist[1] * startOffsetHeight)) {\r\n                    snapDist[1] = 0;\r\n                }\r\n                else {\r\n                    snapDist[0] = 0;\r\n                }\r\n            }\r\n            var isNoSnap = !snapDist[0] && !snapDist[1];\r\n            if (isNoSnap) {\r\n                // throttle scale value (not absolute scale size)\r\n                if (isWidth) {\r\n                    dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n                }\r\n                else {\r\n                    dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n                }\r\n            }\r\n            if ((sizeDirection[0] && !sizeDirection[1])\r\n                || (snapDist[0] && !snapDist[1])\r\n                || (isNoSnap && isWidth)) {\r\n                dist[0] += snapDist[0];\r\n                var snapHeight = startOffsetWidth * dist[0] * tempScaleValue[0] / ratio;\r\n                dist[1] = sign(distSign * dist[0]) * abs(snapHeight / startOffsetHeight / tempScaleValue[1]);\r\n            }\r\n            else if ((!sizeDirection[0] && sizeDirection[1])\r\n                || (!snapDist[0] && snapDist[1])\r\n                || (isNoSnap && !isWidth)) {\r\n                dist[1] += snapDist[1];\r\n                var snapWidth = startOffsetHeight * dist[1] * tempScaleValue[1] * ratio;\r\n                dist[0] = sign(distSign * dist[1]) * abs(snapWidth / startOffsetWidth / tempScaleValue[0]);\r\n            }\r\n        }\r\n        else {\r\n            dist[0] += snapDist[0];\r\n            dist[1] += snapDist[1];\r\n            if (!snapDist[0]) {\r\n                dist[0] = throttle(dist[0] * tempScaleValue[0], throttleScale) / tempScaleValue[0];\r\n            }\r\n            if (!snapDist[1]) {\r\n                dist[1] = throttle(dist[1] * tempScaleValue[1], throttleScale) / tempScaleValue[1];\r\n            }\r\n        }\r\n        if (dist[0] === 0) {\r\n            dist[0] = sign(prevDist[0]) * MIN_SCALE;\r\n        }\r\n        if (dist[1] === 0) {\r\n            dist[1] = sign(prevDist[1]) * MIN_SCALE;\r\n        }\r\n        scale = multiply2(dist, [tempScaleValue[0], tempScaleValue[1]]);\r\n        var startOffsetSize = [\r\n            startOffsetWidth,\r\n            startOffsetHeight,\r\n        ];\r\n        var scaleSize = [\r\n            startOffsetWidth * scale[0],\r\n            startOffsetHeight * scale[1],\r\n        ];\r\n        scaleSize = calculateBoundSize(scaleSize, datas.minScaleSize, datas.maxScaleSize, keepRatio ? ratio : false);\r\n        // if (keepRatio && (isGroup || keepRatioFinally)) {\r\n        //     if (isWidth) {\r\n        //         boundingHeight = boundingWidth / ratio;\r\n        //     } else {\r\n        //         boundingWidth = boundingHeight * ratio;\r\n        //     }\r\n        // }\r\n        scale = countEach(2, function (i) {\r\n            return startOffsetSize[i] ? scaleSize[i] / startOffsetSize[i] : scaleSize[i];\r\n        });\r\n        dist = countEach(2, function (i) {\r\n            return scale[i] / tempScaleValue[i];\r\n        });\r\n        var delta = countEach(2, function (i) { return prevDist[i] ? dist[i] / prevDist[i] : dist[i]; });\r\n        var distText = \"scale(\".concat(dist.join(\", \"), \")\");\r\n        var scaleText = \"scale(\".concat(scale.join(\", \"), \")\");\r\n        var nextTransform = convertTransformFormat(datas, scaleText, distText);\r\n        var isZeroScale = !startValue[0] || !startValue[1];\r\n        var inverseDist = getScaleDist(moveable, isZeroScale ? scaleText : distText, datas.fixedDirection, fixedPosition, datas.fixedOffset, datas, isZeroScale);\r\n        var inverseDelta = isSelfPinch ? inverseDist : minus(inverseDist, datas.prevInverseDist || [0, 0]);\r\n        datas.prevDist = dist;\r\n        datas.prevInverseDist = inverseDist;\r\n        if (scale[0] === prevDist[0] && scale[1] === prevDist[1]\r\n            && inverseDelta.every(function (num) { return !num; })\r\n            && !parentMoveable\r\n            && !isSelfPinch) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, __assign({ offsetWidth: startOffsetWidth, offsetHeight: startOffsetHeight, direction: direction, scale: scale, dist: dist, delta: delta, isPinch: !!isPinch }, fillTransformEvent(moveable, nextTransform, inverseDelta, isPinch, e)));\r\n        triggerEvent(moveable, \"onScale\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return false;\r\n        }\r\n        datas.isScale = false;\r\n        var scaleEndParam = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onScaleEnd\", scaleEndParam);\r\n        return scaleEndParam;\r\n    },\r\n    dragGroupControlCondition: directionCondition,\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        var originalEvents = fillChildEvents(moveable, \"resizable\", e);\r\n        datas.moveableScale = moveable.scale;\r\n        var events = triggerChildAbles(moveable, this, \"dragControlStart\", e, function (child, ev) {\r\n            return startChildDist(moveable, child, datas, ev);\r\n        });\r\n        var setFixedDirection = function (fixedDirection) {\r\n            params.setFixedDirection(fixedDirection);\r\n            events.forEach(function (ev, i) {\r\n                ev.setFixedDirection(fixedDirection);\r\n                startChildDist(moveable, ev.moveable, datas, originalEvents[i]);\r\n            });\r\n        };\r\n        datas.setFixedDirection = setFixedDirection;\r\n        var nextParams = __assign(__assign({}, params), { targets: moveable.props.targets, events: events, setFixedDirection: setFixedDirection });\r\n        var result = triggerEvent(moveable, \"onScaleGroupStart\", nextParams);\r\n        datas.isScale = result !== false;\r\n        return datas.isScale ? nextParams : false;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        catchEvent(moveable, \"onBeforeScale\", function (parentEvent) {\r\n            triggerEvent(moveable, \"onBeforeScaleGroup\", fillParams(moveable, e, __assign(__assign({}, parentEvent), { targets: moveable.props.targets }), true));\r\n        });\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return;\r\n        }\r\n        var dist = params.dist;\r\n        var moveableScale = datas.moveableScale;\r\n        moveable.scale = [\r\n            dist[0] * moveableScale[0],\r\n            dist[1] * moveableScale[1],\r\n        ];\r\n        var keepRatio = moveable.props.keepRatio;\r\n        var fixedPosition = datas.fixedPosition;\r\n        var events = triggerChildAbles(moveable, this, \"dragControl\", e, function (_, ev) {\r\n            var _a = __read(calculate(createRotateMatrix(moveable.rotation / 180 * Math.PI, 3), [\r\n                ev.datas.originalX * dist[0],\r\n                ev.datas.originalY * dist[1],\r\n                1,\r\n            ], 3), 2), clientX = _a[0], clientY = _a[1];\r\n            return __assign(__assign({}, ev), { parentDist: null, parentScale: dist, parentKeepRatio: keepRatio, \r\n                // recalculate child fixed position for parent group's dragging.\r\n                dragClient: plus(fixedPosition, [clientX, clientY]) });\r\n        });\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events }, params);\r\n        triggerEvent(moveable, \"onScaleGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var isDrag = e.isDrag, datas = e.datas;\r\n        if (!datas.isScale) {\r\n            return;\r\n        }\r\n        this.dragControlEnd(moveable, e);\r\n        var events = triggerChildAbles(moveable, this, \"dragControlEnd\", e);\r\n        var nextParams = fillEndParams(moveable, e, {\r\n            targets: moveable.props.targets,\r\n            events: events,\r\n        });\r\n        triggerEvent(moveable, \"onScaleGroupEnd\", nextParams);\r\n        return isDrag;\r\n    },\r\n    /**\r\n     * @method Moveable.Scalable#request\r\n     * @param {Moveable.Scalable.ScalableRequestParam} e - the Scalable's request parameter\r\n     * @return {Moveable.Requester} Moveable Requester\r\n     * @example\r\n\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"scalable\", { deltaWidth: 10, deltaHeight: 10 }, true);\r\n     *\r\n     * // requestStart\r\n     * const requester = moveable.request(\"scalable\");\r\n     *\r\n     * // request\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     * requester.request({ deltaWidth: 10, deltaHeight: 10 });\r\n     *\r\n     * // requestEnd\r\n     * requester.requestEnd();\r\n     */\r\n    request: function () {\r\n        var datas = {};\r\n        var distWidth = 0;\r\n        var distHeight = 0;\r\n        var useSnap = false;\r\n        return {\r\n            isControl: true,\r\n            requestStart: function (e) {\r\n                useSnap = e.useSnap;\r\n                return {\r\n                    datas: datas,\r\n                    parentDirection: e.direction || [1, 1],\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            request: function (e) {\r\n                distWidth += e.deltaWidth;\r\n                distHeight += e.deltaHeight;\r\n                return {\r\n                    datas: datas,\r\n                    parentDist: [distWidth, distHeight],\r\n                    parentKeepRatio: e.keepRatio,\r\n                    useSnap: useSnap,\r\n                };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true, useSnap: useSnap };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether or not target can scaled.\r\n *\r\n * @name Moveable.Scalable#scalable\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.scalable = true;\r\n */\r\n/**\r\n * throttle of scaleX, scaleY when scale.\r\n * @name Moveable.Scalable#throttleScale\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.throttleScale = 0.1;\r\n */\r\n/**\r\n * Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n * @name Moveable.Scalable#renderDirections\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n *   renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n * });\r\n *\r\n * moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n */\r\n/**\r\n * When resize or scale, keeps a ratio of the width, height. (default: false)\r\n * @name Moveable.Scalable#keepRatio\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     scalable: true,\r\n * });\r\n *\r\n * moveable.keepRatio = true;\r\n */\r\n/**\r\n * When the scale starts, the scaleStart event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleStart\r\n * @param {Moveable.Scalable.OnScaleStart} - Parameters for the scaleStart event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleStart\", ({ target }) => {\r\n *     console.log(target);\r\n * });\r\n */\r\n/**\r\n * When scaling, `beforeScale` is called before `scale` occurs. In `beforeScale`, you can get and set the pre-value before scaling.\r\n * @memberof Moveable.Scalable\r\n * @event beforeScale\r\n * @param {Moveable.Scalable.OnBeforeScale} - Parameters for the `beforeScale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"beforeScale\", ({ setFixedDirection }) => {\r\n *     if (shiftKey) {\r\n *        setFixedDirection([0, 0]);\r\n *     }\r\n * });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When scaling, the `scale` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scale\r\n * @param {Moveable.Scalable.OnScale} - Parameters for the `scale` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scale\", ({ target, transform, dist }) => {\r\n *     target.style.transform = transform;\r\n * });\r\n */\r\n/**\r\n * When the scale finishes, the `scaleEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleEnd\r\n * @param {Moveable.Scalable.OnScaleEnd} - Parameters for the `scaleEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { scalable: true });\r\n * moveable.on(\"scaleEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\r\n/**\r\n* When the group scale starts, the `scaleGroupStart` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroupStart\r\n* @param {Moveable.Scalable.OnScaleGroupStart} - Parameters for the `scaleGroupStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroupStart\", ({ targets }) => {\r\n*     console.log(\"onScaleGroupStart\", targets);\r\n* });\r\n*/\r\n/**\r\n* When the group scale, the `scaleGroup` event is called.\r\n* @memberof Moveable.Scalable\r\n* @event scaleGroup\r\n* @param {Moveable.Scalable.OnScaleGroup} - Parameters for the `scaleGroup` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n*     scalable: true\r\n* });\r\n* moveable.on(\"scaleGroup\", ({ targets, events }) => {\r\n*     console.log(\"onScaleGroup\", targets);\r\n*     events.forEach(ev => {\r\n*         const target = ev.target;\r\n*         // ev.drag is a drag event that occurs when the group scale.\r\n*         const left = ev.drag.beforeDist[0];\r\n*         const top = ev.drag.beforeDist[1];\r\n*         const scaleX = ev.scale[0];\r\n*         const scaleY = ev.scale[1];\r\n*     });\r\n* });\r\n*/\r\n/**\r\n * When the group scale finishes, the `scaleGroupEnd` event is called.\r\n * @memberof Moveable.Scalable\r\n * @event scaleGroupEnd\r\n * @param {Moveable.Scalable.OnScaleGroupEnd} - Parameters for the `scaleGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n *     scalable: true\r\n * });\r\n * moveable.on(\"scaleGroupEnd\", ({ targets, isDrag }) => {\r\n *     console.log(\"onScaleGroupEnd\", targets, isDrag);\r\n * });\r\n */\n\nfunction getMiddleLinePos(pos1, pos2) {\r\n    return pos1.map(function (pos, i) { return dot(pos, pos2[i], 1, 2); });\r\n}\r\nfunction getTriangleRad(pos1, pos2, pos3) {\r\n    // pos1 Rad\r\n    var rad1 = getRad(pos1, pos2);\r\n    var rad2 = getRad(pos1, pos3);\r\n    var rad = rad2 - rad1;\r\n    return rad >= 0 ? rad : rad + 2 * Math.PI;\r\n}\r\nfunction isValidPos(poses1, poses2) {\r\n    var rad1 = getTriangleRad(poses1[0], poses1[1], poses1[2]);\r\n    var rad2 = getTriangleRad(poses2[0], poses2[1], poses2[2]);\r\n    var pi = Math.PI;\r\n    if ((rad1 >= pi && rad2 <= pi) || (rad1 <= pi && rad2 >= pi)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @namespace Moveable.Warpable\r\n * @description Warpable indicates whether the target can be warped(distorted, bented).\r\n */\r\nvar Warpable = {\r\n    name: \"warpable\",\r\n    ableGroup: \"size\",\r\n    props: [\r\n        \"warpable\",\r\n        \"renderDirections\",\r\n        \"edge\",\r\n        \"displayAroundControls\",\r\n    ],\r\n    events: [\r\n        \"warpStart\",\r\n        \"warp\",\r\n        \"warpEnd\",\r\n    ],\r\n    viewClassName: getDirectionViewClassName(\"warpable\"),\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, resizable = _a.resizable, scalable = _a.scalable, warpable = _a.warpable, zoom = _a.zoom;\r\n        if (resizable || scalable || !warpable) {\r\n            return [];\r\n        }\r\n        var _b = moveable.state, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var linePosFrom1 = getMiddleLinePos(pos1, pos2);\r\n        var linePosFrom2 = getMiddleLinePos(pos2, pos1);\r\n        var linePosFrom3 = getMiddleLinePos(pos1, pos3);\r\n        var linePosFrom4 = getMiddleLinePos(pos3, pos1);\r\n        var linePosTo1 = getMiddleLinePos(pos3, pos4);\r\n        var linePosTo2 = getMiddleLinePos(pos4, pos3);\r\n        var linePosTo3 = getMiddleLinePos(pos2, pos4);\r\n        var linePosTo4 = getMiddleLinePos(pos4, pos2);\r\n        return __spreadArray([\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine1\", style: getLineStyle(linePosFrom1, linePosTo1, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine2\", style: getLineStyle(linePosFrom2, linePosTo2, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine3\", style: getLineStyle(linePosFrom3, linePosTo3, zoom) }),\r\n            React.createElement(\"div\", { className: prefix(\"line\"), key: \"middeLine4\", style: getLineStyle(linePosFrom4, linePosTo4, zoom) })\r\n        ], __read(renderAllDirections(moveable, \"warpable\", React)), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (e.isRequest) {\r\n            return false;\r\n        }\r\n        var target = e.inputEvent.target;\r\n        return hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"warpable\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas, inputEvent = e.inputEvent;\r\n        var target = moveable.props.target;\r\n        var inputTarget = inputEvent.target;\r\n        var direction = getDirection(inputTarget, datas);\r\n        if (!direction || !target) {\r\n            return false;\r\n        }\r\n        var state = moveable.state;\r\n        var transformOrigin = state.transformOrigin, is3d = state.is3d, targetTransform = state.targetTransform, targetMatrix = state.targetMatrix, width = state.width, height = state.height, left = state.left, top = state.top;\r\n        datas.datas = {};\r\n        datas.targetTransform = targetTransform;\r\n        datas.warpTargetMatrix = is3d ? targetMatrix : convertDimension(targetMatrix, 3, 4);\r\n        datas.targetInverseMatrix = ignoreDimension(invert(datas.warpTargetMatrix, 4), 3, 4);\r\n        datas.direction = direction;\r\n        datas.left = left;\r\n        datas.top = top;\r\n        datas.poses = [\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ].map(function (p) { return minus(p, transformOrigin); });\r\n        datas.nextPoses = datas.poses.map(function (_a) {\r\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\r\n            return calculate(datas.warpTargetMatrix, [x, y, 0, 1], 4);\r\n        });\r\n        datas.startValue = createIdentityMatrix(4);\r\n        datas.prevMatrix = createIdentityMatrix(4);\r\n        datas.absolutePoses = getAbsolutePosesByState(state);\r\n        datas.posIndexes = getPosIndexesByDirection(direction);\r\n        setDragStart(moveable, e);\r\n        setDefaultTransformIndex(moveable, e, \"matrix3d\");\r\n        state.snapRenderInfo = {\r\n            request: e.isRequest,\r\n            direction: direction,\r\n        };\r\n        var params = fillParams(moveable, e, __assign({ set: function (matrix) {\r\n                datas.startValue = matrix;\r\n            } }, fillTransformStartEvent(moveable, e)));\r\n        var result = triggerEvent(moveable, \"onWarpStart\", params);\r\n        if (result !== false) {\r\n            datas.isWarp = true;\r\n        }\r\n        return datas.isWarp;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isRequest = e.isRequest;\r\n        var distX = e.distX, distY = e.distY;\r\n        var targetInverseMatrix = datas.targetInverseMatrix, prevMatrix = datas.prevMatrix, isWarp = datas.isWarp, startValue = datas.startValue, poses = datas.poses, posIndexes = datas.posIndexes, absolutePoses = datas.absolutePoses;\r\n        if (!isWarp) {\r\n            return false;\r\n        }\r\n        resolveTransformEvent(moveable, e, \"matrix3d\");\r\n        if (hasGuidelines(moveable, \"warpable\")) {\r\n            var selectedPoses = posIndexes.map(function (index) { return absolutePoses[index]; });\r\n            if (selectedPoses.length > 1) {\r\n                selectedPoses.push([\r\n                    (selectedPoses[0][0] + selectedPoses[1][0]) / 2,\r\n                    (selectedPoses[0][1] + selectedPoses[1][1]) / 2,\r\n                ]);\r\n            }\r\n            var _a = checkMoveableSnapBounds(moveable, isRequest, {\r\n                horizontal: selectedPoses.map(function (pos) { return pos[1] + distY; }),\r\n                vertical: selectedPoses.map(function (pos) { return pos[0] + distX; }),\r\n            }), horizontalSnapInfo = _a.horizontal, verticalSnapInfo = _a.vertical;\r\n            distY -= horizontalSnapInfo.offset;\r\n            distX -= verticalSnapInfo.offset;\r\n        }\r\n        var dist = getDragDist({ datas: datas, distX: distX, distY: distY }, true);\r\n        var nextPoses = datas.nextPoses.slice();\r\n        posIndexes.forEach(function (index) {\r\n            nextPoses[index] = plus(nextPoses[index], dist);\r\n        });\r\n        if (!NEARBY_POS.every(function (nearByPoses) { return isValidPos(nearByPoses.map(function (i) { return poses[i]; }), nearByPoses.map(function (i) { return nextPoses[i]; })); })) {\r\n            return false;\r\n        }\r\n        var h = createWarpMatrix(poses[0], poses[2], poses[1], poses[3], nextPoses[0], nextPoses[2], nextPoses[1], nextPoses[3]);\r\n        if (!h.length) {\r\n            return false;\r\n        }\r\n        // B * A * M\r\n        var afterMatrix = multiply(targetInverseMatrix, h, 4);\r\n        // B * M * A\r\n        var matrix = getTransfromMatrix(datas, afterMatrix, true);\r\n        var delta = multiply(invert(prevMatrix, 4), matrix, 4);\r\n        datas.prevMatrix = matrix;\r\n        var totalMatrix = multiply(startValue, matrix, 4);\r\n        var nextTransform = convertTransformFormat(datas, \"matrix3d(\".concat(totalMatrix.join(\", \"), \")\"), \"matrix3d(\".concat(matrix.join(\", \"), \")\"));\r\n        fillOriginalTransform(e, nextTransform);\r\n        triggerEvent(moveable, \"onWarp\", fillParams(moveable, e, __assign({ delta: delta, matrix: totalMatrix, dist: matrix, multiply: multiply, transform: nextTransform }, fillCSSObject({\r\n            transform: nextTransform,\r\n        }, e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas, isDrag = e.isDrag;\r\n        if (!datas.isWarp) {\r\n            return false;\r\n        }\r\n        datas.isWarp = false;\r\n        triggerEvent(moveable, \"onWarpEnd\", fillEndParams(moveable, e, {}));\r\n        return isDrag;\r\n    },\r\n};\r\n/**\r\n * Whether or not target can be warped. (default: false)\r\n * @name Moveable.Warpable#warpable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.warpable = true;\r\n */\r\n/**\r\n* Set directions to show the control box. (default: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"])\r\n* @name Moveable.Warpable#renderDirections\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     warpable: true,\r\n*     renderDirections: [\"n\", \"nw\", \"ne\", \"s\", \"se\", \"sw\", \"e\", \"w\"],\r\n* });\r\n*\r\n* moveable.renderDirections = [\"nw\", \"ne\", \"sw\", \"se\"];\r\n*/\r\n/**\r\n* When the warp starts, the warpStart event is called.\r\n* @memberof Moveable.Warpable\r\n* @event warpStart\r\n* @param {Moveable.Warpable.OnWarpStart} - Parameters for the warpStart event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, { warpable: true });\r\n* moveable.on(\"warpStart\", ({ target }) => {\r\n*     console.log(target);\r\n* });\r\n*/\r\n/**\r\n * When warping, the warp event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warp\r\n * @param {Moveable.Warpable.OnWarp} - Parameters for the warp event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n * let matrix = [\r\n *  1, 0, 0, 0,\r\n *  0, 1, 0, 0,\r\n *  0, 0, 1, 0,\r\n *  0, 0, 0, 1,\r\n * ];\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warp\", ({ target, transform, delta, multiply }) => {\r\n *    // target.style.transform = transform;\r\n *    matrix = multiply(matrix, delta);\r\n *    target.style.transform = `matrix3d(${matrix.join(\",\")})`;\r\n * });\r\n */\r\n/**\r\n * When the warp finishes, the warpEnd event is called.\r\n * @memberof Moveable.Warpable\r\n * @event warpEnd\r\n * @param {Moveable.Warpable.OnWarpEnd} - Parameters for the warpEnd event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, { warpable: true });\r\n * moveable.on(\"warpEnd\", ({ target, isDrag }) => {\r\n *     console.log(target, isDrag);\r\n * });\r\n */\n\nvar AREA_PIECES = /*#__PURE__*/ prefix(\"area-pieces\");\r\nvar AREA_PIECE = /*#__PURE__*/ prefix(\"area-piece\");\r\nvar AVOID = /*#__PURE__*/ prefix(\"avoid\");\r\nvar VIEW_DRAGGING = prefix(\"view-dragging\");\n\nfunction restoreStyle(moveable) {\r\n    var el = moveable.areaElement;\r\n    if (!el) {\r\n        return;\r\n    }\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    removeClass(el, AVOID);\r\n    el.style.cssText += \"left: 0px; top: 0px; width: \".concat(width, \"px; height: \").concat(height, \"px\");\r\n}\r\nfunction renderPieces(React) {\r\n    return (React.createElement(\"div\", { key: \"area_pieces\", className: AREA_PIECES },\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE }),\r\n        React.createElement(\"div\", { className: AREA_PIECE })));\r\n}\r\nvar DragArea = {\r\n    name: \"dragArea\",\r\n    props: [\r\n        \"dragArea\",\r\n        \"passDragArea\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, target = _a.target, dragArea = _a.dragArea, groupable = _a.groupable, passDragArea = _a.passDragArea;\r\n        var _b = moveable.getState(), width = _b.width, height = _b.height, renderPoses = _b.renderPoses;\r\n        var className = passDragArea ? prefix(\"area\", \"pass\") : prefix(\"area\");\r\n        if (groupable) {\r\n            return [\r\n                React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className }),\r\n                renderPieces(React),\r\n            ];\r\n        }\r\n        if (!target || !dragArea) {\r\n            return [];\r\n        }\r\n        var h = createWarpMatrix([0, 0], [width, 0], [0, height], [width, height], renderPoses[0], renderPoses[1], renderPoses[2], renderPoses[3]);\r\n        var transform = h.length ? makeMatrixCSS(h, true) : \"none\";\r\n        return [\r\n            React.createElement(\"div\", { key: \"area\", ref: ref(moveable, \"areaElement\"), className: className, style: {\r\n                    top: \"0px\",\r\n                    left: \"0px\",\r\n                    width: \"\".concat(width, \"px\"),\r\n                    height: \"\".concat(height, \"px\"),\r\n                    transformOrigin: \"0 0\",\r\n                    transform: transform,\r\n                } }),\r\n            renderPieces(React),\r\n        ];\r\n    },\r\n    dragStart: function (moveable, _a) {\r\n        var datas = _a.datas, clientX = _a.clientX, clientY = _a.clientY, inputEvent = _a.inputEvent;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        datas.isDragArea = false;\r\n        var areaElement = moveable.areaElement;\r\n        var state = moveable.state;\r\n        var moveableClientRect = state.moveableClientRect, renderPoses = state.renderPoses, rootMatrix = state.rootMatrix, is3d = state.is3d;\r\n        var left = moveableClientRect.left, top = moveableClientRect.top;\r\n        var _b = getRect(renderPoses), relativeLeft = _b.left, relativeTop = _b.top, width = _b.width, height = _b.height;\r\n        var n = is3d ? 4 : 3;\r\n        var _c = __read(calculateInversePosition(rootMatrix, [clientX - left, clientY - top], n), 2), posX = _c[0], posY = _c[1];\r\n        posX -= relativeLeft;\r\n        posY -= relativeTop;\r\n        var rects = [\r\n            { left: relativeLeft, top: relativeTop, width: width, height: posY - 10 },\r\n            { left: relativeLeft, top: relativeTop, width: posX - 10, height: height },\r\n            { left: relativeLeft, top: relativeTop + posY + 10, width: width, height: height - posY - 10 },\r\n            { left: relativeLeft + posX + 10, top: relativeTop, width: width - posX - 10, height: height },\r\n        ];\r\n        var children = [].slice.call(areaElement.nextElementSibling.children);\r\n        rects.forEach(function (rect, i) {\r\n            children[i].style.cssText\r\n                = \"left: \".concat(rect.left, \"px;top: \").concat(rect.top, \"px; width: \").concat(rect.width, \"px; height: \").concat(rect.height, \"px;\");\r\n        });\r\n        addClass(areaElement, AVOID);\r\n        state.disableNativeEvent = true;\r\n        return;\r\n    },\r\n    drag: function (moveable, _a) {\r\n        var datas = _a.datas, inputEvent = _a.inputEvent;\r\n        this.enableNativeEvent(moveable);\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            datas.isDragArea = true;\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        this.enableNativeEvent(moveable);\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        if (!inputEvent) {\r\n            return false;\r\n        }\r\n        if (!datas.isDragArea) {\r\n            restoreStyle(moveable);\r\n        }\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    unset: function (moveable) {\r\n        restoreStyle(moveable);\r\n        moveable.state.disableNativeEvent = false;\r\n    },\r\n    enableNativeEvent: function (moveable) {\r\n        var state = moveable.state;\r\n        if (state.disableNativeEvent) {\r\n            requestAnimationFrame(function () {\r\n                state.disableNativeEvent = false;\r\n            });\r\n        }\r\n    },\r\n};\r\n/**\r\n * Add an event to the moveable area instead of the target for stopPropagation. (default: false, true in group)\r\n * @name Moveable#dragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\r\n/**\r\n * Set `pointerEvents: none;` css to pass events in dragArea. (default: false)\r\n * @name Moveable#passDragArea\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  dragArea: false,\r\n * });\r\n */\n\nvar Origin = makeAble(\"origin\", {\r\n    props: [\"origin\", \"svgOrigin\"],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, zoom = _a.zoom, svgOrigin = _a.svgOrigin, groupable = _a.groupable;\r\n        var _b = moveable.getState(), beforeOrigin = _b.beforeOrigin, rotation = _b.rotation, svg = _b.svg, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\r\n        var originStyle;\r\n        if (!groupable && svg && svgOrigin) {\r\n            var _c = __read(convertTransformOriginArray(svgOrigin, offsetWidth, offsetHeight), 2), originX = _c[0], originY = _c[1];\r\n            var n = is3d ? 4 : 3;\r\n            var result = calculatePosition(allMatrix, [originX, originY], n);\r\n            originStyle = getControlTransform(rotation, zoom, minus(result, [left, top]));\r\n        }\r\n        else {\r\n            originStyle = getControlTransform(rotation, zoom, beforeOrigin);\r\n        }\r\n        return [\r\n            React.createElement(\"div\", { className: prefix(\"control\", \"origin\"), style: originStyle, key: \"beforeOrigin\" }),\r\n        ];\r\n    },\r\n});\r\n/**\r\n * Whether or not the origin controlbox will be visible or not (default: true)\r\n * @name Moveable#origin\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n *\r\n * moveable.origin = true;\r\n */\n\nfunction getDefaultScrollPosition(e) {\r\n    var scrollContainer = e.scrollContainer;\r\n    return [\r\n        scrollContainer.scrollLeft,\r\n        scrollContainer.scrollTop,\r\n    ];\r\n}\r\n/**\r\n * @namespace Moveable.Scrollable\r\n * @description Whether or not target can be scrolled to the scroll container (default: false)\r\n */\r\nvar Scrollable = {\r\n    name: \"scrollable\",\r\n    canPinch: true,\r\n    props: [\r\n        \"scrollable\",\r\n        \"scrollContainer\",\r\n        \"scrollThreshold\",\r\n        \"scrollThrottleTime\",\r\n        \"getScrollPosition\",\r\n        \"scrollOptions\",\r\n    ],\r\n    events: [\r\n        \"scroll\",\r\n        \"scrollGroup\",\r\n    ],\r\n    dragRelation: \"strong\",\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.scrollContainer, scrollContainer = _a === void 0 ? moveable.getContainer() : _a, scrollOptions = props.scrollOptions;\r\n        var dragScroll = new DragScroll();\r\n        var scrollContainerElement = getRefTarget(scrollContainer, true);\r\n        e.datas.dragScroll = dragScroll;\r\n        moveable.state.dragScroll = dragScroll;\r\n        var gestoName = e.isControl ? \"controlGesto\" : \"targetGesto\";\r\n        var targets = e.targets;\r\n        dragScroll.on(\"scroll\", function (_a) {\r\n            var container = _a.container, direction = _a.direction;\r\n            var params = fillParams(moveable, e, {\r\n                scrollContainer: container,\r\n                direction: direction,\r\n            });\r\n            var eventName = targets ? \"onScrollGroup\" : \"onScroll\";\r\n            if (targets) {\r\n                params.targets = targets;\r\n            }\r\n            triggerEvent(moveable, eventName, params);\r\n        }).on(\"move\", function (_a) {\r\n            var offsetX = _a.offsetX, offsetY = _a.offsetY, inputEvent = _a.inputEvent;\r\n            moveable[gestoName].scrollBy(offsetX, offsetY, inputEvent.inputEvent, false);\r\n        }).on(\"scrollDrag\", function (_a) {\r\n            var next = _a.next;\r\n            next(moveable[gestoName].getCurrentEvent());\r\n        });\r\n        dragScroll.dragStart(e, __assign({ container: scrollContainerElement }, scrollOptions));\r\n    },\r\n    checkScroll: function (moveable, e) {\r\n        var dragScroll = e.datas.dragScroll;\r\n        if (!dragScroll) {\r\n            return;\r\n        }\r\n        var _a = moveable.props, _b = _a.scrollContainer, scrollContainer = _b === void 0 ? moveable.getContainer() : _b, _c = _a.scrollThreshold, scrollThreshold = _c === void 0 ? 0 : _c, _d = _a.scrollThrottleTime, scrollThrottleTime = _d === void 0 ? 0 : _d, _e = _a.getScrollPosition, getScrollPosition = _e === void 0 ? getDefaultScrollPosition : _e, scrollOptions = _a.scrollOptions;\r\n        dragScroll.drag(e, __assign({ container: scrollContainer, threshold: scrollThreshold, throttleTime: scrollThrottleTime, getScrollPosition: function (ev) {\r\n                return getScrollPosition({ scrollContainer: ev.container, direction: ev.direction });\r\n            } }, scrollOptions));\r\n        return true;\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.checkScroll(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        e.datas.dragScroll.dragEnd();\r\n        e.datas.dragScroll = null;\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { isControl: true }));\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, __assign(__assign({}, e), { targets: moveable.props.targets, isControl: true }));\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.drag(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    dragGroupControEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, __assign(__assign({}, e), { targets: moveable.props.targets }));\r\n    },\r\n    unset: function (moveable) {\r\n        var _a;\r\n        var state = moveable.state;\r\n        (_a = state.dragScroll) === null || _a === void 0 ? void 0 : _a.dragEnd();\r\n        state.dragScroll = null;\r\n    },\r\n};\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scroll` event occur to scroll.\r\n * @memberof Moveable.Scrollable\r\n * @event scroll\r\n * @param {Moveable.Scrollable.OnScroll} - Parameters for the `scroll` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\r\n/**\r\n * When the drag cursor leaves the scrollContainer, the `scrollGroup` event occur to scroll in group.\r\n * @memberof Moveable.Scrollable\r\n * @event scrollGroup\r\n * @param {Moveable.Scrollable.OnScrollGroup} - Parameters for the `scrollGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"scroll\", ({ scrollContainer, direction }) => {\r\n *   scrollContainer.scrollLeft += direction[0] * 10;\r\n *   scrollContainer.scrollTop += direction[1] * 10;\r\n * });\r\n */\n\nvar Default = {\r\n    name: \"\",\r\n    props: [\r\n        \"target\",\r\n        \"dragTargetSelf\",\r\n        \"dragTarget\",\r\n        \"dragContainer\",\r\n        \"container\",\r\n        \"warpSelf\",\r\n        \"rootContainer\",\r\n        \"useResizeObserver\",\r\n        \"useMutationObserver\",\r\n        \"zoom\",\r\n        \"dragFocusedInput\",\r\n        \"transformOrigin\",\r\n        \"ables\",\r\n        \"className\",\r\n        \"pinchThreshold\",\r\n        \"pinchOutside\",\r\n        \"triggerAblesSimultaneously\",\r\n        \"checkInput\",\r\n        \"cspNonce\",\r\n        \"translateZ\",\r\n        \"hideDefaultLines\",\r\n        \"props\",\r\n        \"flushSync\",\r\n        \"stopPropagation\",\r\n        \"preventClickEventOnDrag\",\r\n        \"preventClickDefault\",\r\n        \"viewContainer\",\r\n        \"persistData\",\r\n        \"useAccuratePosition\",\r\n        \"firstRenderState\",\r\n        \"linePadding\",\r\n        \"controlPadding\",\r\n        \"preventDefault\",\r\n        \"preventRightClick\",\r\n        \"preventWheelClick\",\r\n        \"requestStyles\",\r\n    ],\r\n    events: [\r\n        \"changeTargets\",\r\n    ],\r\n};\n\nvar Padding = makeAble(\"padding\", {\r\n    props: [\"padding\"],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        if (props.dragArea) {\r\n            return [];\r\n        }\r\n        var _a = getPaddingBox(props.padding || {}), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\r\n        var _b = moveable.getState(), renderPoses = _b.renderPoses, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4;\r\n        var poses = [pos1, pos2, pos3, pos4];\r\n        var paddingDirections = [];\r\n        if (left > 0) {\r\n            paddingDirections.push([0, 2]);\r\n        }\r\n        if (top > 0) {\r\n            paddingDirections.push([0, 1]);\r\n        }\r\n        if (right > 0) {\r\n            paddingDirections.push([1, 3]);\r\n        }\r\n        if (bottom > 0) {\r\n            paddingDirections.push([2, 3]);\r\n        }\r\n        return paddingDirections.map(function (_a, i) {\r\n            var _b = __read(_a, 2), dir1 = _b[0], dir2 = _b[1];\r\n            var paddingPos1 = poses[dir1];\r\n            var paddingPos2 = poses[dir2];\r\n            var paddingPos3 = renderPoses[dir1];\r\n            var paddingPos4 = renderPoses[dir2];\r\n            var h = createWarpMatrix([0, 0], [100, 0], [0, 100], [100, 100], paddingPos1, paddingPos2, paddingPos3, paddingPos4);\r\n            if (!h.length) {\r\n                return undefined;\r\n            }\r\n            return (React.createElement(\"div\", { key: \"padding\".concat(i), className: prefix(\"padding\"), style: {\r\n                    transform: makeMatrixCSS(h, true),\r\n                } }));\r\n        });\r\n    },\r\n});\r\n/**\r\n * Add padding around the target to increase the drag area.\r\n * @name Moveable#padding\r\n * @default null\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  target: document.querySelector(\".target\"),\r\n *  padding: { left: 0, top: 0, right: 0, bottom: 0 },\r\n * });\r\n * moveable.padding = { left: 10, top: 10, right: 10, bottom: 10 },\r\n * moveable.updateRect();\r\n */\n\nvar RADIUS_DIRECTIONS = [\"nw\", \"ne\", \"se\", \"sw\"];\r\nfunction calculateRatio(values, size) {\r\n    var sumSize = values[0] + values[1];\r\n    var sumRatio = sumSize > size ? size / sumSize : 1;\r\n    values[0] *= sumRatio;\r\n    values[1] = size - values[1] * sumRatio;\r\n    return values;\r\n}\r\nvar HORIZONTAL_RADIUS_ORDER = [1, 2, 5, 6];\r\nvar VERTICAL_RADIUS_ORDER = [0, 3, 4, 7];\r\nvar HORIZONTAL_RADIUS_DIRECTIONS = [1, -1, -1, 1];\r\nvar VERTICAL_RADIUS_DIRECTIONS = [1, 1, -1, -1];\r\nfunction getRadiusStyles(nextPoses, isRelative, width, height, left, top, right, bottom) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    if (right === void 0) { right = width; }\r\n    if (bottom === void 0) { bottom = height; }\r\n    var clipStyles = [];\r\n    var isVertical = false;\r\n    var radiusPoses = nextPoses.filter(function (pos) { return !pos.virtual; });\r\n    var raws = radiusPoses.map(function (posInfo) {\r\n        var horizontal = posInfo.horizontal, vertical = posInfo.vertical, pos = posInfo.pos;\r\n        if (vertical && !isVertical) {\r\n            isVertical = true;\r\n            clipStyles.push(\"/\");\r\n        }\r\n        if (isVertical) {\r\n            var rawPos = Math.max(0, vertical === 1 ? pos[1] - top : bottom - pos[1]);\r\n            clipStyles.push(convertCSSSize(rawPos, height, isRelative));\r\n            return rawPos;\r\n        }\r\n        else {\r\n            var rawPos = Math.max(0, horizontal === 1 ? pos[0] - left : right - pos[0]);\r\n            clipStyles.push(convertCSSSize(rawPos, width, isRelative));\r\n            return rawPos;\r\n        }\r\n    });\r\n    return {\r\n        radiusPoses: radiusPoses,\r\n        styles: clipStyles,\r\n        raws: raws,\r\n    };\r\n}\r\nfunction getRadiusRange(controlPoses) {\r\n    // [start, length]\r\n    var horizontalRange = [0, 0];\r\n    var verticalRange = [0, 0];\r\n    var length = controlPoses.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        var clipPose = controlPoses[i];\r\n        if (!clipPose.sub) {\r\n            continue;\r\n        }\r\n        if (clipPose.horizontal) {\r\n            if (horizontalRange[1] === 0) {\r\n                horizontalRange[0] = i;\r\n            }\r\n            horizontalRange[1] = i - horizontalRange[0] + 1;\r\n            verticalRange[0] = i + 1;\r\n        }\r\n        if (clipPose.vertical) {\r\n            if (verticalRange[1] === 0) {\r\n                verticalRange[0] = i;\r\n            }\r\n            verticalRange[1] = i - verticalRange[0] + 1;\r\n        }\r\n    }\r\n    return {\r\n        horizontalRange: horizontalRange,\r\n        verticalRange: verticalRange,\r\n    };\r\n}\r\nfunction getRadiusValues(values, width, height, left, top, minCounts, full) {\r\n    var _a, _b, _c, _d;\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    if (full === void 0) { full = false; }\r\n    var splitIndex = values.indexOf(\"/\");\r\n    var splitLength = (splitIndex > -1 ? values.slice(0, splitIndex) : values).length;\r\n    var horizontalValues = values.slice(0, splitLength);\r\n    var verticalValues = values.slice(splitLength + 1);\r\n    var horizontalValuesLength = horizontalValues.length;\r\n    var verticalValuesLength = verticalValues.length;\r\n    var hasVerticalValues = verticalValuesLength > 0;\r\n    var _e = __read(horizontalValues, 4), _f = _e[0], nwValue = _f === void 0 ? \"0px\" : _f, _g = _e[1], neValue = _g === void 0 ? nwValue : _g, _h = _e[2], seValue = _h === void 0 ? nwValue : _h, _j = _e[3], swValue = _j === void 0 ? neValue : _j;\r\n    var _k = __read(verticalValues, 4), _l = _k[0], wnValue = _l === void 0 ? nwValue : _l, _m = _k[1], enValue = _m === void 0 ? hasVerticalValues ? wnValue : neValue : _m, _o = _k[2], esValue = _o === void 0 ? hasVerticalValues ? wnValue : seValue : _o, _p = _k[3], wsValue = _p === void 0 ? hasVerticalValues ? enValue : swValue : _p;\r\n    var horizontalRawPoses = [nwValue, neValue, seValue, swValue].map(function (pos) { return convertUnitSize(pos, width); });\r\n    var verticalRawPoses = [wnValue, enValue, esValue, wsValue].map(function (pos) { return convertUnitSize(pos, height); });\r\n    var horizontalPoses = horizontalRawPoses.slice();\r\n    var verticalPoses = verticalRawPoses.slice();\r\n    _a = __read(calculateRatio([horizontalPoses[0], horizontalPoses[1]], width), 2), horizontalPoses[0] = _a[0], horizontalPoses[1] = _a[1];\r\n    _b = __read(calculateRatio([horizontalPoses[3], horizontalPoses[2]], width), 2), horizontalPoses[3] = _b[0], horizontalPoses[2] = _b[1];\r\n    _c = __read(calculateRatio([verticalPoses[0], verticalPoses[3]], height), 2), verticalPoses[0] = _c[0], verticalPoses[3] = _c[1];\r\n    _d = __read(calculateRatio([verticalPoses[1], verticalPoses[2]], height), 2), verticalPoses[1] = _d[0], verticalPoses[2] = _d[1];\r\n    var nextHorizontalPoses = full\r\n        ? horizontalPoses\r\n        : horizontalPoses.slice(0, Math.max(minCounts[0], horizontalValuesLength));\r\n    var nextVerticalPoses = full\r\n        ? verticalPoses\r\n        : verticalPoses.slice(0, Math.max(minCounts[1], verticalValuesLength));\r\n    return __spreadArray(__spreadArray([], __read(nextHorizontalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= horizontalValuesLength,\r\n            horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n            vertical: 0,\r\n            pos: [left + pos, top + (VERTICAL_RADIUS_DIRECTIONS[i] === -1 ? height : 0)],\r\n            sub: true,\r\n            raw: horizontalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false), __read(nextVerticalPoses.map(function (pos, i) {\r\n        var direction = RADIUS_DIRECTIONS[i];\r\n        return {\r\n            virtual: i >= verticalValuesLength,\r\n            horizontal: 0,\r\n            vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n            pos: [left + (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1 ? width : 0), top + pos],\r\n            sub: true,\r\n            raw: verticalRawPoses[i],\r\n            direction: direction,\r\n        };\r\n    })), false);\r\n}\r\nfunction removeRadiusPos(controlPoses, poses, index, startIndex, length) {\r\n    if (length === void 0) { length = poses.length; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    var radiuslIndex = index - startIndex;\r\n    var deleteCount = 0;\r\n    if (radiuslIndex === 0) {\r\n        deleteCount = length;\r\n    }\r\n    else if (radiuslIndex > 0 && radiuslIndex < horizontalRange[1]) {\r\n        deleteCount = horizontalRange[1] - radiuslIndex;\r\n    }\r\n    else if (radiuslIndex >= verticalRange[0]) {\r\n        deleteCount = verticalRange[0] + verticalRange[1] - radiuslIndex;\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    controlPoses.splice(index, deleteCount);\r\n    poses.splice(index, deleteCount);\r\n}\r\nfunction addRadiusPos(controlPoses, poses, startIndex, horizontalIndex, verticalIndex, distX, distY, right, bottom, left, top) {\r\n    if (left === void 0) { left = 0; }\r\n    if (top === void 0) { top = 0; }\r\n    var _a = getRadiusRange(controlPoses.slice(startIndex)), horizontalRange = _a.horizontalRange, verticalRange = _a.verticalRange;\r\n    if (horizontalIndex > -1) {\r\n        var radiusX = HORIZONTAL_RADIUS_DIRECTIONS[horizontalIndex] === 1\r\n            ? distX - left\r\n            : right - distX;\r\n        for (var i = horizontalRange[1]; i <= horizontalIndex; ++i) {\r\n            var y = VERTICAL_RADIUS_DIRECTIONS[i] === 1 ? top : bottom;\r\n            var x = 0;\r\n            if (horizontalIndex === i) {\r\n                x = distX;\r\n            }\r\n            else if (i === 0) {\r\n                x = left + radiusX;\r\n            }\r\n            else if (HORIZONTAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                x = right - (poses[startIndex][0] - left);\r\n            }\r\n            controlPoses.splice(startIndex + i, 0, {\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[i],\r\n                vertical: 0,\r\n                pos: [x, y],\r\n            });\r\n            poses.splice(startIndex + i, 0, [x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    else if (verticalIndex > -1) {\r\n        var radiusY = VERTICAL_RADIUS_DIRECTIONS[verticalIndex] === 1\r\n            ? distY - top\r\n            : bottom - distY;\r\n        if (horizontalRange[1] === 0 && verticalRange[1] === 0) {\r\n            var pos = [\r\n                left + radiusY,\r\n                top,\r\n            ];\r\n            controlPoses.push({\r\n                horizontal: HORIZONTAL_RADIUS_DIRECTIONS[0],\r\n                vertical: 0,\r\n                pos: pos,\r\n            });\r\n            poses.push(pos);\r\n        }\r\n        var startVerticalIndex = verticalRange[0];\r\n        for (var i = verticalRange[1]; i <= verticalIndex; ++i) {\r\n            var x = HORIZONTAL_RADIUS_DIRECTIONS[i] === 1 ? left : right;\r\n            var y = 0;\r\n            if (verticalIndex === i) {\r\n                y = distY;\r\n            }\r\n            else if (i === 0) {\r\n                y = top + radiusY;\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === 1) {\r\n                y = poses[startIndex + startVerticalIndex][1];\r\n            }\r\n            else if (VERTICAL_RADIUS_DIRECTIONS[i] === -1) {\r\n                y = bottom - (poses[startIndex + startVerticalIndex][1] - top);\r\n            }\r\n            controlPoses.push({\r\n                horizontal: 0,\r\n                vertical: VERTICAL_RADIUS_DIRECTIONS[i],\r\n                pos: [x, y],\r\n            });\r\n            poses.push([x, y]);\r\n            if (i === 0) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction splitRadiusPoses(controlPoses, raws) {\r\n    if (raws === void 0) { raws = controlPoses.map(function (pos) { return pos.raw; }); }\r\n    var horizontals = controlPoses\r\n        .map(function (pos, i) { return pos.horizontal ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    var verticals = controlPoses\r\n        .map(function (pos, i) { return pos.vertical ? raws[i] : null; }).filter(function (pos) { return pos != null; });\r\n    return {\r\n        horizontals: horizontals,\r\n        verticals: verticals,\r\n    };\r\n}\n\nvar CLIP_DIRECTIONS = [\r\n    [0, -1, \"n\"],\r\n    [1, 0, \"e\"],\r\n];\r\nvar CLIP_RECT_DIRECTIONS = [\r\n    [-1, -1, \"nw\"],\r\n    [0, -1, \"n\"],\r\n    [1, -1, \"ne\"],\r\n    [1, 0, \"e\"],\r\n    [1, 1, \"se\"],\r\n    [0, 1, \"s\"],\r\n    [-1, 1, \"sw\"],\r\n    [-1, 0, \"w\"],\r\n];\r\n// 1 2 5 6 0 3 4 7\r\n// 0 1 2 3 4 5 6 7\r\nfunction getClipStyles(moveable, clipPath, poses) {\r\n    var clipRelative = moveable.props.clipRelative;\r\n    var _a = moveable.state, width = _a.width, height = _a.height;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses;\r\n    var isRect = clipType === \"rect\";\r\n    var isCircle = clipType === \"circle\";\r\n    if (clipType === \"polygon\") {\r\n        return poses.map(function (pos) { return \"\".concat(convertCSSSize(pos[0], width, clipRelative), \" \").concat(convertCSSSize(pos[1], height, clipRelative)); });\r\n    }\r\n    else if (isRect || clipType === \"inset\") {\r\n        var top_1 = poses[1][1];\r\n        var right = poses[3][0];\r\n        var left = poses[7][0];\r\n        var bottom = poses[5][1];\r\n        if (isRect) {\r\n            return [\r\n                top_1,\r\n                right,\r\n                bottom,\r\n                left,\r\n            ].map(function (pos) { return \"\".concat(pos, \"px\"); });\r\n        }\r\n        var clipStyles = [top_1, width - right, height - bottom, left]\r\n            .map(function (pos, i) { return convertCSSSize(pos, i % 2 ? width : height, clipRelative); });\r\n        if (poses.length > 8) {\r\n            var _c = __read(minus(poses[4], poses[0]), 2), subWidth = _c[0], subHeight = _c[1];\r\n            clipStyles.push.apply(clipStyles, __spreadArray([\"round\"], __read(getRadiusStyles(clipPoses.slice(8).map(function (info, i) {\r\n                return __assign(__assign({}, info), { pos: poses[i] });\r\n            }), clipRelative, subWidth, subHeight, left, top_1, right, bottom).styles), false));\r\n        }\r\n        return clipStyles;\r\n    }\r\n    else if (isCircle || clipType === \"ellipse\") {\r\n        var center = poses[0];\r\n        var ry = convertCSSSize(abs(poses[1][1] - center[1]), isCircle ? Math.sqrt((width * width + height * height) / 2) : height, clipRelative);\r\n        var clipStyles = isCircle ? [ry]\r\n            : [convertCSSSize(abs(poses[2][0] - center[0]), width, clipRelative), ry];\r\n        clipStyles.push(\"at\", convertCSSSize(center[0], width, clipRelative), convertCSSSize(center[1], height, clipRelative));\r\n        return clipStyles;\r\n    }\r\n}\r\nfunction getRectPoses(top, right, bottom, left) {\r\n    var xs = [left, (left + right) / 2, right];\r\n    var ys = [top, (top + bottom) / 2, bottom];\r\n    return CLIP_RECT_DIRECTIONS.map(function (_a) {\r\n        var _b = __read(_a, 3), dirx = _b[0], diry = _b[1], dir = _b[2];\r\n        var x = xs[dirx + 1];\r\n        var y = ys[diry + 1];\r\n        return {\r\n            vertical: abs(diry),\r\n            horizontal: abs(dirx),\r\n            direction: dir,\r\n            pos: [x, y],\r\n        };\r\n    });\r\n}\r\nfunction getControlSize(controlPoses) {\r\n    var xRange = [Infinity, -Infinity];\r\n    var yRange = [Infinity, -Infinity];\r\n    controlPoses.forEach(function (_a) {\r\n        var pos = _a.pos;\r\n        xRange[0] = Math.min(xRange[0], pos[0]);\r\n        xRange[1] = Math.max(xRange[1], pos[0]);\r\n        yRange[0] = Math.min(yRange[0], pos[1]);\r\n        yRange[1] = Math.max(yRange[1], pos[1]);\r\n    });\r\n    return [\r\n        abs(xRange[1] - xRange[0]),\r\n        abs(yRange[1] - yRange[0]),\r\n    ];\r\n}\r\nfunction getClipPath(target, width, height, defaultClip, customClip) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n    if (!target) {\r\n        return;\r\n    }\r\n    var clipText = customClip;\r\n    if (!clipText) {\r\n        var getStyle = getCachedStyle(target);\r\n        var clipPath = getStyle(\"clipPath\");\r\n        clipText = clipPath !== \"none\" ? clipPath : getStyle(\"clip\");\r\n    }\r\n    if (!clipText || clipText === \"none\" || clipText === \"auto\") {\r\n        clipText = defaultClip;\r\n        if (!clipText) {\r\n            return;\r\n        }\r\n    }\r\n    var _k = splitBracket(clipText), _l = _k.prefix, clipPrefix = _l === void 0 ? clipText : _l, _m = _k.value, value = _m === void 0 ? \"\" : _m;\r\n    var isCircle = clipPrefix === \"circle\";\r\n    var splitter = \" \";\r\n    if (clipPrefix === \"polygon\") {\r\n        var values = splitComma(value || \"0% 0%, 100% 0%, 100% 100%, 0% 100%\");\r\n        splitter = \",\";\r\n        var poses = values.map(function (pos) {\r\n            var _a = __read(pos.split(\" \"), 2), xPos = _a[0], yPos = _a[1];\r\n            return {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: [\r\n                    convertUnitSize(xPos, width),\r\n                    convertUnitSize(yPos, height),\r\n                ],\r\n            };\r\n        });\r\n        var minMaxs = getMinMaxs(poses.map(function (pos) { return pos.pos; }));\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            poses: poses,\r\n            splitter: splitter,\r\n            left: minMaxs.minX,\r\n            right: minMaxs.maxX,\r\n            top: minMaxs.minY,\r\n            bottom: minMaxs.maxY,\r\n        };\r\n    }\r\n    else if (isCircle || clipPrefix === \"ellipse\") {\r\n        var xPos = \"\";\r\n        var yPos = \"\";\r\n        var radiusX_1 = 0;\r\n        var radiusY_1 = 0;\r\n        var values = splitSpace(value);\r\n        if (isCircle) {\r\n            var radius = \"\";\r\n            _a = __read(values, 4), _b = _a[0], radius = _b === void 0 ? \"50%\" : _b, _c = _a[2], xPos = _c === void 0 ? \"50%\" : _c, _d = _a[3], yPos = _d === void 0 ? \"50%\" : _d;\r\n            radiusX_1 = convertUnitSize(radius, Math.sqrt((width * width + height * height) / 2));\r\n            radiusY_1 = radiusX_1;\r\n        }\r\n        else {\r\n            var xRadius = \"\";\r\n            var yRadius = \"\";\r\n            _e = __read(values, 5), _f = _e[0], xRadius = _f === void 0 ? \"50%\" : _f, _g = _e[1], yRadius = _g === void 0 ? \"50%\" : _g, _h = _e[3], xPos = _h === void 0 ? \"50%\" : _h, _j = _e[4], yPos = _j === void 0 ? \"50%\" : _j;\r\n            radiusX_1 = convertUnitSize(xRadius, width);\r\n            radiusY_1 = convertUnitSize(yRadius, height);\r\n        }\r\n        var centerPos_1 = [\r\n            convertUnitSize(xPos, width),\r\n            convertUnitSize(yPos, height),\r\n        ];\r\n        var poses = __spreadArray([\r\n            {\r\n                vertical: 1,\r\n                horizontal: 1,\r\n                pos: centerPos_1,\r\n                direction: \"nesw\",\r\n            }\r\n        ], __read(CLIP_DIRECTIONS.slice(0, isCircle ? 1 : 2).map(function (dir) { return ({\r\n            vertical: abs(dir[1]),\r\n            horizontal: dir[0],\r\n            direction: dir[2],\r\n            sub: true,\r\n            pos: [\r\n                centerPos_1[0] + dir[0] * radiusX_1,\r\n                centerPos_1[1] + dir[1] * radiusY_1,\r\n            ],\r\n        }); })), false);\r\n        return {\r\n            type: clipPrefix,\r\n            clipText: clipText,\r\n            radiusX: radiusX_1,\r\n            radiusY: radiusY_1,\r\n            left: centerPos_1[0] - radiusX_1,\r\n            top: centerPos_1[1] - radiusY_1,\r\n            right: centerPos_1[0] + radiusX_1,\r\n            bottom: centerPos_1[1] + radiusY_1,\r\n            poses: poses,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"inset\") {\r\n        var values = splitSpace(value || \"0 0 0 0\");\r\n        var roundIndex = values.indexOf(\"round\");\r\n        var rectLength = (roundIndex > -1 ? values.slice(0, roundIndex) : values).length;\r\n        var radiusValues = values.slice(rectLength + 1);\r\n        var _o = __read(values.slice(0, rectLength), 4), topValue = _o[0], _p = _o[1], rightValue = _p === void 0 ? topValue : _p, _q = _o[2], bottomValue = _q === void 0 ? topValue : _q, _r = _o[3], leftValue = _r === void 0 ? rightValue : _r;\r\n        var _s = __read([topValue, bottomValue].map(function (pos) { return convertUnitSize(pos, height); }), 2), top_2 = _s[0], bottom = _s[1];\r\n        var _t = __read([leftValue, rightValue].map(function (pos) { return convertUnitSize(pos, width); }), 2), left = _t[0], right = _t[1];\r\n        var nextRight = width - right;\r\n        var nextBottom = height - bottom;\r\n        var radiusPoses = getRadiusValues(radiusValues, nextRight - left, nextBottom - top_2, left, top_2);\r\n        var poses = __spreadArray(__spreadArray([], __read(getRectPoses(top_2, nextRight, nextBottom, left)), false), __read(radiusPoses), false);\r\n        return {\r\n            type: \"inset\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_2,\r\n            left: left,\r\n            right: nextRight,\r\n            bottom: nextBottom,\r\n            radius: radiusValues,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    else if (clipPrefix === \"rect\") {\r\n        // top right bottom left\r\n        var values = splitComma(value || \"0px, \".concat(width, \"px, \").concat(height, \"px, 0px\"));\r\n        splitter = \",\";\r\n        var _u = __read(values.map(function (pos) {\r\n            var posValue = splitUnit(pos).value;\r\n            return posValue;\r\n        }), 4), top_3 = _u[0], right = _u[1], bottom = _u[2], left = _u[3];\r\n        var poses = getRectPoses(top_3, right, bottom, left);\r\n        return {\r\n            type: \"rect\",\r\n            clipText: clipText,\r\n            poses: poses,\r\n            top: top_3,\r\n            right: right,\r\n            bottom: bottom,\r\n            left: left,\r\n            values: values,\r\n            splitter: splitter,\r\n        };\r\n    }\r\n    return;\r\n}\n\nfunction moveControlPos(controlPoses, index, dist, isRect, keepRatio) {\r\n    var _a = controlPoses[index], direction = _a.direction, sub = _a.sub;\r\n    var dists = controlPoses.map(function () { return [0, 0]; });\r\n    var directions = direction ? direction.split(\"\") : [];\r\n    if (isRect && index < 8) {\r\n        var verticalDirections = directions.filter(function (dir) { return dir === \"w\" || dir === \"e\"; });\r\n        var horizontalDirections = directions.filter(function (dir) { return dir === \"n\" || dir === \"s\"; });\r\n        var verticalDirection_1 = verticalDirections[0];\r\n        var horizontalDirection_1 = horizontalDirections[0];\r\n        dists[index] = dist;\r\n        var _b = __read(getControlSize(controlPoses), 2), width = _b[0], height = _b[1];\r\n        var ratio = width && height ? width / height : 0;\r\n        if (ratio && keepRatio) {\r\n            // 0 1 2\r\n            // 7   3\r\n            // 6 5 4\r\n            var fixedIndex = (index + 4) % 8;\r\n            var fixedPosition = controlPoses[fixedIndex].pos;\r\n            var sizeDirection = [0, 0];\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                sizeDirection[0] = -1;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                sizeDirection[0] = 1;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                sizeDirection[1] = -1;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                sizeDirection[1] = 1;\r\n            }\r\n            var nextDist = getSizeDistByDist([width, height], dist, ratio, sizeDirection, true);\r\n            var nextWidth = width + nextDist[0];\r\n            var nextHeight = height + nextDist[1];\r\n            var top_1 = fixedPosition[1];\r\n            var bottom = fixedPosition[1];\r\n            var left = fixedPosition[0];\r\n            var right = fixedPosition[0];\r\n            if (sizeDirection[0] === -1) {\r\n                left = right - nextWidth;\r\n            }\r\n            else if (sizeDirection[0] === 1) {\r\n                right = left + nextWidth;\r\n            }\r\n            else {\r\n                left = left - nextWidth / 2;\r\n                right = right + nextWidth / 2;\r\n            }\r\n            if (sizeDirection[1] === -1) {\r\n                top_1 = bottom - nextHeight;\r\n            }\r\n            else if (sizeDirection[1] === 1) {\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            else {\r\n                top_1 = bottom - nextHeight / 2;\r\n                bottom = top_1 + nextHeight;\r\n            }\r\n            var nextControlPoses_1 = getRectPoses(top_1, right, bottom, left);\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                dists[i][0] = nextControlPoses_1[i].pos[0] - controlPose.pos[0];\r\n                dists[i][1] = nextControlPoses_1[i].pos[1] - controlPose.pos[1];\r\n            });\r\n        }\r\n        else {\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var controlDir = controlPose.direction;\r\n                if (!controlDir) {\r\n                    return;\r\n                }\r\n                if (controlDir.indexOf(verticalDirection_1) > -1) {\r\n                    dists[i][0] = dist[0];\r\n                }\r\n                if (controlDir.indexOf(horizontalDirection_1) > -1) {\r\n                    dists[i][1] = dist[1];\r\n                }\r\n            });\r\n            if (verticalDirection_1) {\r\n                dists[1][0] = dist[0] / 2;\r\n                dists[5][0] = dist[0] / 2;\r\n            }\r\n            if (horizontalDirection_1) {\r\n                dists[3][1] = dist[1] / 2;\r\n                dists[7][1] = dist[1] / 2;\r\n            }\r\n        }\r\n    }\r\n    else if (direction && !sub) {\r\n        directions.forEach(function (dir) {\r\n            var isVertical = dir === \"n\" || dir === \"s\";\r\n            controlPoses.forEach(function (controlPose, i) {\r\n                var dirDir = controlPose.direction, dirHorizontal = controlPose.horizontal, dirVertical = controlPose.vertical;\r\n                if (!dirDir || dirDir.indexOf(dir) === -1) {\r\n                    return;\r\n                }\r\n                dists[i] = [\r\n                    isVertical || !dirHorizontal ? 0 : dist[0],\r\n                    !isVertical || !dirVertical ? 0 : dist[1],\r\n                ];\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        dists[index] = dist;\r\n    }\r\n    return dists;\r\n}\r\nfunction addClipPath(moveable, e) {\r\n    var _a = __read(calculatePointerDist(moveable, e), 2), distX = _a[0], distY = _a[1];\r\n    var _b = e.datas, clipPath = _b.clipPath, clipIndex = _b.clipIndex;\r\n    var _c = clipPath, clipType = _c.type, clipPoses = _c.poses, splitter = _c.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    if (clipType === \"polygon\") {\r\n        poses.splice(clipIndex, 0, [distX, distY]);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        var horizontalIndex = HORIZONTAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var verticalIndex = VERTICAL_RADIUS_ORDER.indexOf(clipIndex);\r\n        var length_1 = clipPoses.length;\r\n        addRadiusPos(clipPoses, poses, 8, horizontalIndex, verticalIndex, distX, distY, poses[4][0], poses[4][1], poses[0][0], poses[0][1]);\r\n        if (length_1 === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"added\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\nfunction removeClipPath(moveable, e) {\r\n    var _a = e.datas, clipPath = _a.clipPath, clipIndex = _a.clipIndex;\r\n    var _b = clipPath, clipType = _b.type, clipPoses = _b.poses, splitter = _b.splitter;\r\n    var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n    var length = poses.length;\r\n    if (clipType === \"polygon\") {\r\n        clipPoses.splice(clipIndex, 1);\r\n        poses.splice(clipIndex, 1);\r\n    }\r\n    else if (clipType === \"inset\") {\r\n        if (clipIndex < 8) {\r\n            return;\r\n        }\r\n        removeRadiusPos(clipPoses, poses, clipIndex, 8, length);\r\n        if (length === clipPoses.length) {\r\n            return;\r\n        }\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n    var clipStyles = getClipStyles(moveable, clipPath, poses);\r\n    var clipStyle = \"\".concat(clipType, \"(\").concat(clipStyles.join(splitter), \")\");\r\n    triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"removed\", clipType: clipType, poses: poses, clipStyles: clipStyles, clipStyle: clipStyle, distX: 0, distY: 0 }, fillCSSObject({\r\n        clipPath: clipStyle,\r\n    }, e))));\r\n}\r\n/**\r\n * @namespace Moveable.Clippable\r\n * @description Whether to clip the target.\r\n */\r\nvar Clippable = {\r\n    name: \"clippable\",\r\n    props: [\r\n        \"clippable\",\r\n        \"defaultClipPath\",\r\n        \"customClipPath\",\r\n        \"keepRatio\",\r\n        \"clipRelative\",\r\n        \"clipArea\",\r\n        \"dragWithClip\",\r\n        \"clipTargetBounds\",\r\n        \"clipVerticalGuidelines\",\r\n        \"clipHorizontalGuidelines\",\r\n        \"clipSnapThreshold\",\r\n    ],\r\n    events: [\r\n        \"clipStart\",\r\n        \"clip\",\r\n        \"clipEnd\",\r\n    ],\r\n    css: [\r\n        \".control.clip-control {\\nbackground: #6d6;\\ncursor: pointer;\\n}\\n.control.clip-control.clip-radius {\\nbackground: #d66;\\n}\\n.line.clip-line {\\nbackground: #6e6;\\ncursor: move;\\nz-index: 1;\\n}\\n.clip-area {\\nposition: absolute;\\ntop: 0;\\nleft: 0;\\n}\\n.clip-ellipse {\\nposition: absolute;\\ncursor: move;\\nborder: 1px solid #6d6;\\nborder: var(--zoompx) solid #6d6;\\nborder-radius: 50%;\\ntransform-origin: 0px 0px;\\n}\",\r\n        \":host {\\n--bounds-color: #d66;\\n}\",\r\n        \".guideline {\\npointer-events: none;\\nz-index: 2;\\n}\",\r\n        \".line.guideline.bounds {\\nbackground: #d66;\\nbackground: var(--bounds-color);\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var _a = moveable.props, customClipPath = _a.customClipPath, defaultClipPath = _a.defaultClipPath, clipArea = _a.clipArea, zoom = _a.zoom, groupable = _a.groupable;\r\n        var _b = moveable.getState(), target = _b.target, width = _b.width, height = _b.height, allMatrix = _b.allMatrix, is3d = _b.is3d, left = _b.left, top = _b.top, pos1 = _b.pos1, pos2 = _b.pos2, pos3 = _b.pos3, pos4 = _b.pos4, clipPathState = _b.clipPathState, snapBoundInfos = _b.snapBoundInfos, rotationRad = _b.rotation;\r\n        if (!target || groupable) {\r\n            return [];\r\n        }\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", clipPathState || customClipPath);\r\n        if (!clipPath) {\r\n            return [];\r\n        }\r\n        var n = is3d ? 4 : 3;\r\n        var type = clipPath.type;\r\n        var clipPoses = clipPath.poses;\r\n        var poses = clipPoses.map(function (pos) {\r\n            // return [x, y];\r\n            var calculatedPos = calculatePosition(allMatrix, pos.pos, n);\r\n            return [\r\n                calculatedPos[0] - left,\r\n                calculatedPos[1] - top,\r\n            ];\r\n        });\r\n        var controls = [];\r\n        var lines = [];\r\n        var isRect = type === \"rect\";\r\n        var isInset = type === \"inset\";\r\n        var isPolygon = type === \"polygon\";\r\n        if (isRect || isInset || isPolygon) {\r\n            var linePoses_1 = isInset ? poses.slice(0, 8) : poses;\r\n            lines = linePoses_1.map(function (to, i) {\r\n                var from = i === 0 ? linePoses_1[linePoses_1.length - 1] : linePoses_1[i - 1];\r\n                var rad = getRad(from, to);\r\n                var dist = getDiagonalSize(from, to);\r\n                return React.createElement(\"div\", { key: \"clipLine\".concat(i), className: prefix(\"line\", \"clip-line\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                        width: \"\".concat(dist, \"px\"),\r\n                        transform: \"translate(\".concat(from[0], \"px, \").concat(from[1], \"px) rotate(\").concat(rad, \"rad) scaleY(\").concat(zoom, \")\"),\r\n                    } });\r\n            });\r\n        }\r\n        controls = poses.map(function (pos, i) {\r\n            return React.createElement(\"div\", { key: \"clipControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"snap-control\"), \"data-clip-index\": i, style: {\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n        if (isInset) {\r\n            controls.push.apply(controls, __spreadArray([], __read(poses.slice(8).map(function (pos, i) {\r\n                return React.createElement(\"div\", { key: \"clipRadiusControl\".concat(i), className: prefix(\"control\", \"clip-control\", \"clip-radius\", \"snap-control\"), \"data-clip-index\": 8 + i, style: {\r\n                        transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) rotate(\").concat(rotationRad, \"rad) scale(\").concat(zoom, \")\"),\r\n                    } });\r\n            })), false));\r\n        }\r\n        if (type === \"circle\" || type === \"ellipse\") {\r\n            var clipLeft = clipPath.left, clipTop = clipPath.top, radiusX = clipPath.radiusX, radiusY = clipPath.radiusY;\r\n            var _c = __read(minus(calculatePosition(allMatrix, [clipLeft, clipTop], n), calculatePosition(allMatrix, [0, 0], n)), 2), distLeft = _c[0], distTop = _c[1];\r\n            var ellipseClipPath = \"none\";\r\n            if (!clipArea) {\r\n                var piece = Math.max(10, radiusX / 5, radiusY / 5);\r\n                var areaPoses = [];\r\n                for (var i = 0; i <= piece; ++i) {\r\n                    var rad = Math.PI * 2 / piece * i;\r\n                    areaPoses.push([\r\n                        radiusX + (radiusX - zoom) * Math.cos(rad),\r\n                        radiusY + (radiusY - zoom) * Math.sin(rad),\r\n                    ]);\r\n                }\r\n                areaPoses.push([radiusX, -2]);\r\n                areaPoses.push([-2, -2]);\r\n                areaPoses.push([-2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, radiusY * 2 + 2]);\r\n                areaPoses.push([radiusX * 2 + 2, -2]);\r\n                areaPoses.push([radiusX, -2]);\r\n                ellipseClipPath = \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0], \"px \").concat(pos[1], \"px\"); }).join(\", \"), \")\");\r\n            }\r\n            controls.push(React.createElement(\"div\", { key: \"clipEllipse\", className: prefix(\"clip-ellipse\", \"snap-control\"), style: {\r\n                    width: \"\".concat(radiusX * 2, \"px\"),\r\n                    height: \"\".concat(radiusY * 2, \"px\"),\r\n                    clipPath: ellipseClipPath,\r\n                    transform: \"translate(\".concat(-left + distLeft, \"px, \").concat(-top + distTop, \"px) \").concat(makeMatrixCSS(allMatrix)),\r\n                } }));\r\n        }\r\n        if (clipArea) {\r\n            var _d = getRect(__spreadArray([pos1, pos2, pos3, pos4], __read(poses), false)), allWidth = _d.width, allHeight = _d.height, allLeft_1 = _d.left, allTop_1 = _d.top;\r\n            if (isPolygon || isRect || isInset) {\r\n                var areaPoses = isInset ? poses.slice(0, 8) : poses;\r\n                controls.push(React.createElement(\"div\", { key: \"clipArea\", className: prefix(\"clip-area\", \"snap-control\"), style: {\r\n                        width: \"\".concat(allWidth, \"px\"),\r\n                        height: \"\".concat(allHeight, \"px\"),\r\n                        transform: \"translate(\".concat(allLeft_1, \"px, \").concat(allTop_1, \"px)\"),\r\n                        clipPath: \"polygon(\".concat(areaPoses.map(function (pos) { return \"\".concat(pos[0] - allLeft_1, \"px \").concat(pos[1] - allTop_1, \"px\"); }).join(\", \"), \")\"),\r\n                    } }));\r\n            }\r\n        }\r\n        if (snapBoundInfos) {\r\n            [\"vertical\", \"horizontal\"].forEach(function (directionType) {\r\n                var info = snapBoundInfos[directionType];\r\n                var isHorizontal = directionType === \"horizontal\";\r\n                if (info.isSnap) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.snap.posInfos.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"snap\").concat(i), \"guideline\");\r\n                    })), false));\r\n                }\r\n                if (info.isBound) {\r\n                    lines.push.apply(lines, __spreadArray([], __read(info.bounds.map(function (_a, i) {\r\n                        var pos = _a.pos;\r\n                        var snapPos1 = minus(calculatePosition(allMatrix, isHorizontal ? [0, pos] : [pos, 0], n), [left, top]);\r\n                        var snapPos2 = minus(calculatePosition(allMatrix, isHorizontal ? [width, pos] : [pos, height], n), [left, top]);\r\n                        return renderLine(React, \"\", snapPos1, snapPos2, zoom, \"clip\".concat(directionType, \"bounds\").concat(i), \"guideline\", \"bounds\", \"bold\");\r\n                    })), false));\r\n                }\r\n            });\r\n        }\r\n        return __spreadArray(__spreadArray([], __read(controls), false), __read(lines), false);\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        return e.inputEvent && (e.inputEvent.target.getAttribute(\"class\") || \"\").indexOf(\"clip\") > -1;\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        var props = moveable.props;\r\n        var _a = props.dragWithClip, dragWithClip = _a === void 0 ? true : _a;\r\n        if (dragWithClip) {\r\n            return false;\r\n        }\r\n        return this.dragControlStart(moveable, e);\r\n    },\r\n    drag: function (moveable, e) {\r\n        return this.dragControl(moveable, __assign(__assign({}, e), { isDragTarget: true }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return this.dragControlEnd(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var state = moveable.state;\r\n        var _a = moveable.props, defaultClipPath = _a.defaultClipPath, customClipPath = _a.customClipPath;\r\n        var target = state.target, width = state.width, height = state.height;\r\n        var inputTarget = e.inputEvent ? e.inputEvent.target : null;\r\n        var className = (inputTarget && inputTarget.getAttribute(\"class\")) || \"\";\r\n        var datas = e.datas;\r\n        var clipPath = getClipPath(target, width, height, defaultClipPath || \"inset\", customClipPath);\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var clipText = clipPath.clipText, type = clipPath.type, poses = clipPath.poses;\r\n        var result = triggerEvent(moveable, \"onClipStart\", fillParams(moveable, e, {\r\n            clipType: type,\r\n            clipStyle: clipText,\r\n            poses: poses.map(function (pos) { return pos.pos; }),\r\n        }));\r\n        if (result === false) {\r\n            datas.isClipStart = false;\r\n            return false;\r\n        }\r\n        datas.isControl = className && className.indexOf(\"clip-control\") > -1;\r\n        datas.isLine = className.indexOf(\"clip-line\") > -1;\r\n        datas.isArea = className.indexOf(\"clip-area\") > -1 || className.indexOf(\"clip-ellipse\") > -1;\r\n        datas.clipIndex = inputTarget ? parseInt(inputTarget.getAttribute(\"data-clip-index\"), 10) : -1;\r\n        datas.clipPath = clipPath;\r\n        datas.isClipStart = true;\r\n        state.clipPathState = clipText;\r\n        setDragStart(moveable, e);\r\n        return true;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var _a, _b, _c;\r\n        var datas = e.datas, originalDatas = e.originalDatas, isDragTarget = e.isDragTarget;\r\n        if (!datas.isClipStart) {\r\n            return false;\r\n        }\r\n        var _d = datas, isControl = _d.isControl, isLine = _d.isLine, isArea = _d.isArea, clipIndex = _d.clipIndex, clipPath = _d.clipPath;\r\n        if (!clipPath) {\r\n            return false;\r\n        }\r\n        var props = getProps(moveable.props, \"clippable\");\r\n        var keepRatio = props.keepRatio;\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var originalDraggable = originalDatas.draggable;\r\n        var originalDist = getDragDist(e);\r\n        if (isDragTarget && originalDraggable) {\r\n            _a = __read(originalDraggable.prevBeforeDist, 2), distX = _a[0], distY = _a[1];\r\n        }\r\n        else {\r\n            _b = __read(originalDist, 2), distX = _b[0], distY = _b[1];\r\n        }\r\n        var firstDist = [distX, distY];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        var isDragWithTarget = !isArea && !isControl && !isLine;\r\n        var clipType = clipPath.type, clipPoses = clipPath.poses, splitter = clipPath.splitter;\r\n        var poses = clipPoses.map(function (pos) { return pos.pos; });\r\n        if (isDragWithTarget) {\r\n            distX = -distX;\r\n            distY = -distY;\r\n        }\r\n        var isAll = !isControl || clipPoses[clipIndex].direction === \"nesw\";\r\n        var isRect = clipType === \"inset\" || clipType === \"rect\";\r\n        var dists = clipPoses.map(function () { return [0, 0]; });\r\n        if (isControl && !isAll) {\r\n            var _e = clipPoses[clipIndex], horizontal = _e.horizontal, vertical = _e.vertical;\r\n            var dist = [\r\n                distX * abs(horizontal),\r\n                distY * abs(vertical),\r\n            ];\r\n            dists = moveControlPos(clipPoses, clipIndex, dist, isRect, keepRatio);\r\n        }\r\n        else if (isAll) {\r\n            dists = poses.map(function () { return [distX, distY]; });\r\n        }\r\n        var nextPoses = poses.map(function (pos, i) { return plus(pos, dists[i]); });\r\n        var guidePoses = __spreadArray([], __read(nextPoses), false);\r\n        state.snapBoundInfos = null;\r\n        var isCircle = clipPath.type === \"circle\";\r\n        var isEllipse = clipPath.type === \"ellipse\";\r\n        if (isCircle || isEllipse) {\r\n            var guideRect = getRect(nextPoses);\r\n            var ry = abs(guideRect.bottom - guideRect.top);\r\n            var rx = abs(isEllipse ? guideRect.right - guideRect.left : ry);\r\n            var bottom = nextPoses[0][1] + ry;\r\n            var left = nextPoses[0][0] - rx;\r\n            var right = nextPoses[0][0] + rx;\r\n            // right\r\n            if (isCircle) {\r\n                guidePoses.push([right, guideRect.bottom]);\r\n                dists.push([1, 0]);\r\n            }\r\n            // bottom\r\n            guidePoses.push([guideRect.left, bottom]);\r\n            dists.push([0, 1]);\r\n            // left\r\n            guidePoses.push([left, guideRect.bottom]);\r\n            dists.push([1, 0]);\r\n        }\r\n        var guidelines = getDefaultGuidelines((props.clipHorizontalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), height); }), (props.clipVerticalGuidelines || []).map(function (v) { return convertUnitSize(\"\".concat(v), width); }), width, height);\r\n        var guideXPoses = [];\r\n        var guideYPoses = [];\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            var rectDists_1 = [dists[0], dists[2], dists[4], dists[6]];\r\n            guideXPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.filter(function (_, i) { return rectDists_1[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.filter(function (_, i) { return dists[i][0]; }).map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.filter(function (_, i) { return dists[i][1]; }).map(function (pos) { return pos[1]; });\r\n        }\r\n        var boundDelta = [0, 0];\r\n        var _f = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 5, 5), horizontalSnapInfo = _f.horizontal, verticalSnapInfo = _f.vertical;\r\n        var snapOffsetY = horizontalSnapInfo.offset;\r\n        var snapOffsetX = verticalSnapInfo.offset;\r\n        if (horizontalSnapInfo.isBound) {\r\n            boundDelta[1] += snapOffsetY;\r\n        }\r\n        if (verticalSnapInfo.isBound) {\r\n            boundDelta[0] += snapOffsetX;\r\n        }\r\n        if ((isEllipse || isCircle) && dists[0][0] === 0 && dists[0][1] === 0) {\r\n            var guideRect = getRect(nextPoses);\r\n            var cy = guideRect.bottom - guideRect.top;\r\n            var cx = isEllipse ? guideRect.right - guideRect.left : cy;\r\n            var distSnapX = verticalSnapInfo.isBound\r\n                ? abs(snapOffsetX)\r\n                : (verticalSnapInfo.snapIndex === 0 ? -snapOffsetX : snapOffsetX);\r\n            var distSnapY = horizontalSnapInfo.isBound\r\n                ? abs(snapOffsetY)\r\n                : (horizontalSnapInfo.snapIndex === 0 ? -snapOffsetY : snapOffsetY);\r\n            cx -= distSnapX;\r\n            cy -= distSnapY;\r\n            if (isCircle) {\r\n                cy = checkSnapBoundPriority(verticalSnapInfo, horizontalSnapInfo) > 0 ? cy : cx;\r\n                cx = cy;\r\n            }\r\n            var center = guidePoses[0];\r\n            guidePoses[1][1] = center[1] - cy;\r\n            guidePoses[2][0] = center[0] + cx;\r\n            guidePoses[3][1] = center[1] + cy;\r\n            guidePoses[4][0] = center[0] - cx;\r\n        }\r\n        else if (isRect && keepRatio && isControl) {\r\n            var _g = __read(getControlSize(clipPoses), 2), width_1 = _g[0], height_1 = _g[1];\r\n            var ratio = width_1 && height_1 ? width_1 / height_1 : 0;\r\n            var clipPose = clipPoses[clipIndex];\r\n            var direction = clipPose.direction || \"\";\r\n            var top_2 = guidePoses[1][1];\r\n            var bottom = guidePoses[5][1];\r\n            var left = guidePoses[7][0];\r\n            var right = guidePoses[3][0];\r\n            if (abs(snapOffsetY) <= abs(snapOffsetX)) {\r\n                snapOffsetY = sign(snapOffsetY) * abs(snapOffsetX) / ratio;\r\n            }\r\n            else {\r\n                snapOffsetX = sign(snapOffsetX) * abs(snapOffsetY) * ratio;\r\n            }\r\n            if (direction.indexOf(\"w\") > -1) {\r\n                left -= snapOffsetX;\r\n            }\r\n            else if (direction.indexOf(\"e\") > -1) {\r\n                right -= snapOffsetX;\r\n            }\r\n            else {\r\n                left += snapOffsetX / 2;\r\n                right -= snapOffsetX / 2;\r\n            }\r\n            if (direction.indexOf(\"n\") > -1) {\r\n                top_2 -= snapOffsetY;\r\n            }\r\n            else if (direction.indexOf(\"s\") > -1) {\r\n                bottom -= snapOffsetY;\r\n            }\r\n            else {\r\n                top_2 += snapOffsetY / 2;\r\n                bottom -= snapOffsetY / 2;\r\n            }\r\n            var nextControlPoses_2 = getRectPoses(top_2, right, bottom, left);\r\n            guidePoses.forEach(function (pos, i) {\r\n                var _a;\r\n                _a = __read(nextControlPoses_2[i].pos, 2), pos[0] = _a[0], pos[1] = _a[1];\r\n            });\r\n        }\r\n        else {\r\n            guidePoses.forEach(function (pos, j) {\r\n                var dist = dists[j];\r\n                if (dist[0]) {\r\n                    pos[0] -= snapOffsetX;\r\n                }\r\n                if (dist[1]) {\r\n                    pos[1] -= snapOffsetY;\r\n                }\r\n            });\r\n        }\r\n        var nextClipStyles = getClipStyles(moveable, clipPath, nextPoses);\r\n        var clipStyle = \"\".concat(clipType, \"(\").concat(nextClipStyles.join(splitter), \")\");\r\n        state.clipPathState = clipStyle;\r\n        if (isCircle || isEllipse) {\r\n            guideXPoses = [guidePoses[4][0], guidePoses[2][0]];\r\n            guideYPoses = [guidePoses[1][1], guidePoses[3][1]];\r\n        }\r\n        else if (isRect) {\r\n            var rectPoses = [guidePoses[0], guidePoses[2], guidePoses[4], guidePoses[6]];\r\n            guideXPoses = rectPoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = rectPoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        else {\r\n            guideXPoses = guidePoses.map(function (pos) { return pos[0]; });\r\n            guideYPoses = guidePoses.map(function (pos) { return pos[1]; });\r\n        }\r\n        state.snapBoundInfos = checkSnapBounds(guidelines, props.clipTargetBounds && { left: 0, top: 0, right: width, bottom: height }, guideXPoses, guideYPoses, 1, 1);\r\n        if (originalDraggable) {\r\n            var is3d = state.is3d, allMatrix = state.allMatrix;\r\n            var n = is3d ? 4 : 3;\r\n            var dragDist = boundDelta;\r\n            if (isDragTarget) {\r\n                dragDist = [\r\n                    firstDist[0] + boundDelta[0] - originalDist[0],\r\n                    firstDist[1] + boundDelta[1] - originalDist[1],\r\n                ];\r\n            }\r\n            originalDraggable.deltaOffset = multiply(allMatrix, [dragDist[0], dragDist[1], 0, 0], n);\r\n        }\r\n        triggerEvent(moveable, \"onClip\", fillParams(moveable, e, __assign({ clipEventType: \"changed\", clipType: clipType, poses: nextPoses, clipStyle: clipStyle, clipStyles: nextClipStyles, distX: distX, distY: distY }, fillCSSObject((_c = {},\r\n            _c[clipType === \"rect\" ? \"clip\" : \"clipPath\"] = clipStyle,\r\n            _c), e))));\r\n        return true;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.unset(moveable);\r\n        var isDrag = e.isDrag, datas = e.datas, isDouble = e.isDouble;\r\n        var isLine = datas.isLine, isClipStart = datas.isClipStart, isControl = datas.isControl;\r\n        if (!isClipStart) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onClipEnd\", fillEndParams(moveable, e, {}));\r\n        if (isDouble) {\r\n            if (isControl) {\r\n                removeClipPath(moveable, e);\r\n            }\r\n            else if (isLine) {\r\n                // add\r\n                addClipPath(moveable, e);\r\n            }\r\n        }\r\n        return isDouble || isDrag;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.clipPathState = \"\";\r\n        moveable.state.snapBoundInfos = null;\r\n    },\r\n};\r\n/**\r\n * Whether to clip the target. (default: false)\r\n * @name Moveable.Clippable#clippable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n *  If clippath is not set, the default value can be set. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#defaultClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (`rect` not possible) (default: false)\r\n * @name Moveable.Clippable#clipRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can force the custom clipPath. (defaultClipPath < style < customClipPath < dragging clipPath)\r\n * @name Moveable.Clippable#customClipPath\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When dragging the target, the clip also moves. (default: true)\r\n * @name Moveable.Clippable#dragWithClip\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * You can drag the clip by setting clipArea.\r\n * @name Moveable.Clippable#clipArea\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n* Whether the clip is bound to the target.\r\n* @name Moveable.Clippable#clipTargetBounds\r\n* @default false\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipTargetBounds: true,\r\n* });\r\n* moveable.on(\"clipStart\", e => {\r\n*     console.log(e);\r\n* }).on(\"clip\", e => {\r\n*     if (e.clipType === \"rect\") {\r\n*         e.target.style.clip = e.clipStyle;\r\n*     } else {\r\n*         e.target.style.clipPath = e.clipStyle;\r\n*     }\r\n* }).on(\"clipEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n * Add clip guidelines in the vertical direction.\r\n * @name Moveable.Clippable#clipVerticalGuidelines\r\n * @default 0\r\n * @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* Add clip guidelines in the horizontal direction.\r\n* @name Moveable.Clippable#clipHorizontalGuidelines\r\n* @default []\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n* istance value that can snap to clip guidelines.\r\n* @name Moveable.Clippable#clipSnapThreshold\r\n* @default 5\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     clippable: true,\r\n*     defaultClipPath: \"inset\",\r\n*     customClipPath: \"\",\r\n*     clipRelative: false,\r\n*     clipArea: false,\r\n*     dragWithClip: true,\r\n*     clipVerticalGuidelines: [0, 100, 200],\r\n*     clipHorizontalGuidelines: [0, 100, 200],\r\n*     clipSnapThreshold: 5,\r\n* });\r\n*/\r\n/**\r\n * When drag start the clip area or controls, the `clipStart` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipStart\r\n * @param {Moveable.Clippable.OnClipStart} - Parameters for the `clipStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag the clip area or controls, the `clip` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clip\r\n * @param {Moveable.Clippable.OnClip} - Parameters for the `clip` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the clip area or controls, the `clipEnd` event is called.\r\n * @memberof Moveable.Clippable\r\n * @event clipEnd\r\n * @param {Moveable.Clippable.OnClipEnd} - Parameters for the `clipEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     clippable: true,\r\n *     defaultClipPath: \"inset\",\r\n *     customClipPath: \"\",\r\n *     clipRelative: false,\r\n *     clipArea: false,\r\n *     dragWithClip: true,\r\n * });\r\n * moveable.on(\"clipStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"clip\", e => {\r\n *     if (e.clipType === \"rect\") {\r\n *         e.target.style.clip = e.clipStyle;\r\n *     } else {\r\n *         e.target.style.clipPath = e.clipStyle;\r\n *     }\r\n * }).on(\"clipEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\n/**\r\n * @namespace OriginDraggable\r\n * @memberof Moveable\r\n * @description Whether to drag origin (default: false)\r\n */\r\nvar OriginDraggable = {\r\n    name: \"originDraggable\",\r\n    props: [\r\n        \"originDraggable\",\r\n        \"originRelative\",\r\n    ],\r\n    events: [\r\n        \"dragOriginStart\",\r\n        \"dragOrigin\",\r\n        \"dragOriginEnd\",\r\n    ],\r\n    css: [\r\n        \":host[data-able-origindraggable] .control.origin {\\npointer-events: auto;\\n}\",\r\n    ],\r\n    dragControlCondition: function (_, e) {\r\n        if (e.isRequest) {\r\n            return e.requestAble === \"originDraggable\";\r\n        }\r\n        return hasClass(e.inputEvent.target, prefix(\"origin\"));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var datas = e.datas;\r\n        setDragStart(moveable, e);\r\n        var params = fillParams(moveable, e, {\r\n            dragStart: Draggable.dragStart(moveable, new CustomGesto().dragStart([0, 0], e)),\r\n        });\r\n        var result = triggerEvent(moveable, \"onDragOriginStart\", params);\r\n        datas.startOrigin = moveable.state.transformOrigin;\r\n        datas.startTargetOrigin = moveable.state.targetOrigin;\r\n        datas.prevOrigin = [0, 0];\r\n        datas.isDragOrigin = true;\r\n        if (result === false) {\r\n            datas.isDragOrigin = false;\r\n            return false;\r\n        }\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas, isPinch = e.isPinch, isRequest = e.isRequest;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height, offsetMatrix = state.offsetMatrix, targetMatrix = state.targetMatrix, is3d = state.is3d;\r\n        var _b = moveable.props.originRelative, originRelative = _b === void 0 ? true : _b;\r\n        var n = is3d ? 4 : 3;\r\n        var dist = [distX, distY];\r\n        if (isRequest) {\r\n            var distOrigin = e.distOrigin;\r\n            if (distOrigin[0] || distOrigin[1]) {\r\n                dist = distOrigin;\r\n            }\r\n        }\r\n        var origin = plus(datas.startOrigin, dist);\r\n        var targetOrigin = plus(datas.startTargetOrigin, dist);\r\n        var delta = minus(dist, datas.prevOrigin);\r\n        var nextMatrix = getNextMatrix(offsetMatrix, targetMatrix, origin, n);\r\n        var rect = moveable.getRect();\r\n        var nextRect = getRect(calculatePoses(nextMatrix, width, height, n));\r\n        var dragDelta = [\r\n            rect.left - nextRect.left,\r\n            rect.top - nextRect.top,\r\n        ];\r\n        datas.prevOrigin = dist;\r\n        var transformOrigin = [\r\n            convertCSSSize(targetOrigin[0], width, originRelative),\r\n            convertCSSSize(targetOrigin[1], height, originRelative),\r\n        ].join(\" \");\r\n        var result = Draggable.drag(moveable, setCustomDrag(e, moveable.state, dragDelta, !!isPinch, false));\r\n        var params = fillParams(moveable, e, __assign(__assign({ width: width, height: height, origin: origin, dist: dist, delta: delta, transformOrigin: transformOrigin, drag: result }, fillCSSObject({\r\n            transformOrigin: transformOrigin,\r\n            transform: result.transform,\r\n        }, e)), { afterTransform: result.transform }));\r\n        triggerEvent(moveable, \"onDragOrigin\", params);\r\n        return params;\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var datas = e.datas;\r\n        if (!datas.isDragOrigin) {\r\n            return false;\r\n        }\r\n        triggerEvent(moveable, \"onDragOriginEnd\", fillEndParams(moveable, e, {}));\r\n        return true;\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var params = this.dragControlStart(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var params = this.dragControl(moveable, e);\r\n        if (!params) {\r\n            return false;\r\n        }\r\n        moveable.transformOrigin = params.transformOrigin;\r\n        return true;\r\n    },\r\n    /**\r\n    * @method Moveable.OriginDraggable#request\r\n    * @param {object} e - the OriginDraggable's request parameter\r\n    * @param {number} [e.x] - x position\r\n    * @param {number} [e.y] - y position\r\n    * @param {number} [e.deltaX] - x number to move\r\n    * @param {number} [e.deltaY] - y number to move\r\n    * @param {array} [e.deltaOrigin] - left, top number to move transform-origin\r\n    * @param {array} [e.origin] - transform-origin position\r\n    * @param {number} [e.isInstant] - Whether to execute the request instantly\r\n    * @return {Moveable.Requester} Moveable Requester\r\n    * @example\r\n\n    * // Instantly Request (requestStart - request - requestEnd)\r\n    * // Use Relative Value\r\n    * moveable.request(\"originDraggable\", { deltaX: 10, deltaY: 10 }, true);\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 }, true);\r\n    * // Use Transform Value\r\n    * moveable.request(\"originDraggable\", { deltaOrigin: [10, 0] }, true);\r\n    * moveable.request(\"originDraggable\", { origin: [100, 0] }, true);\r\n    * // requestStart\r\n    * const requester = moveable.request(\"originDraggable\");\r\n    *\r\n    * // request\r\n    * // Use Relative Value\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * requester.request({ deltaX: 10, deltaY: 10 });\r\n    * // Use Absolute Value\r\n    * moveable.request(\"originDraggable\", { x: 200, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 220, y: 100 });\r\n    * moveable.request(\"originDraggable\", { x: 240, y: 100 });\r\n    *\r\n    * // requestEnd\r\n    * requester.requestEnd();\r\n    */\r\n    request: function (moveable) {\r\n        var datas = {};\r\n        var rect = moveable.getRect();\r\n        var distX = 0;\r\n        var distY = 0;\r\n        var transformOrigin = rect.transformOrigin;\r\n        var distOrigin = [0, 0];\r\n        return {\r\n            isControl: true,\r\n            requestStart: function () {\r\n                return { datas: datas };\r\n            },\r\n            request: function (e) {\r\n                if (\"deltaOrigin\" in e) {\r\n                    distOrigin[0] += e.deltaOrigin[0];\r\n                    distOrigin[1] += e.deltaOrigin[1];\r\n                }\r\n                else if (\"origin\" in e) {\r\n                    distOrigin[0] = e.origin[0] - transformOrigin[0];\r\n                    distOrigin[1] = e.origin[1] - transformOrigin[1];\r\n                }\r\n                else {\r\n                    if (\"x\" in e) {\r\n                        distX = e.x - rect.left;\r\n                    }\r\n                    else if (\"deltaX\" in e) {\r\n                        distX += e.deltaX;\r\n                    }\r\n                    if (\"y\" in e) {\r\n                        distY = e.y - rect.top;\r\n                    }\r\n                    else if (\"deltaY\" in e) {\r\n                        distY += e.deltaY;\r\n                    }\r\n                }\r\n                return { datas: datas, distX: distX, distY: distY, distOrigin: distOrigin };\r\n            },\r\n            requestEnd: function () {\r\n                return { datas: datas, isDrag: true };\r\n            },\r\n        };\r\n    },\r\n};\r\n/**\r\n * Whether to drag origin (default: false)\r\n * @name Moveable.OriginDraggable#originDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n * });\r\n * let translate = [0, 0];\r\n * moveable.on(\"dragOriginStart\", e => {\r\n *     e.dragStart && e.dragStart.set(translate);\r\n * }).on(\"dragOrigin\", e => {\r\n *     translate = e.drag.beforeTranslate;\r\n *     e.target.style.cssText\r\n *         = `transform-origin: ${e.transformOrigin};`\r\n *         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n * }).on(\"dragOriginEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px (default: true)\r\n * @name Moveable.OriginDraggable#originRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     originDraggable: true,\r\n *     originRelative: false,\r\n * });\r\n * moveable.originRelative = true;\r\n */\r\n/**\r\n* When drag start the origin, the `dragOriginStart` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginStart\r\n* @param {Moveable.OriginDraggable.OnDragOriginStart} - Parameters for the `dragOriginStart` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag the origin, the `dragOrigin` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOrigin\r\n* @param {Moveable.OriginDraggable.OnDragOrigin} - Parameters for the `dragOrigin` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\r\n/**\r\n* When drag end the origin, the `dragOriginEnd` event is called.\r\n* @memberof Moveable.OriginDraggable\r\n* @event dragOriginEnd\r\n* @param {Moveable.OriginDraggable.OnDragOriginEnd} - Parameters for the `dragOriginEnd` event\r\n* @example\r\n* import Moveable from \"moveable\";\r\n*\r\n* const moveable = new Moveable(document.body, {\r\n*     originDraggable: true,\r\n* });\r\n* let translate = [0, 0];\r\n* moveable.on(\"dragOriginStart\", e => {\r\n*     e.dragStart && e.dragStart.set(translate);\r\n* }).on(\"dragOrigin\", e => {\r\n*     translate = e.drag.beforeTranslate;\r\n*     e.target.style.cssText\r\n*         = `transform-origin: ${e.transformOrigin};`\r\n*         + `transform: translate(${translate[0]}px, ${translate[1]}px)`;\r\n* }).on(\"dragOriginEnd\", e => {\r\n*     console.log(e);\r\n* });\r\n*/\n\nfunction addBorderRadiusByLine(controlPoses, lineIndex, distX, distY) {\r\n    // lineIndex\r\n    // 0 top\r\n    // 1 right\r\n    // 2 bottom\r\n    // 3 left\r\n    var horizontalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, horizontal = _a.horizontal;\r\n        return horizontal && !virtual;\r\n    }).length;\r\n    var verticalsLength = controlPoses.filter(function (_a) {\r\n        var virtual = _a.virtual, vertical = _a.vertical;\r\n        return vertical && !virtual;\r\n    }).length;\r\n    var controlIndex = -1;\r\n    //top\r\n    if (lineIndex === 0) {\r\n        if (horizontalsLength === 0) {\r\n            controlIndex = 0;\r\n        }\r\n        else if (horizontalsLength === 1) {\r\n            controlIndex = 1;\r\n        }\r\n    }\r\n    // bottom\r\n    if (lineIndex === 2) {\r\n        if (horizontalsLength <= 2) {\r\n            controlIndex = 2;\r\n        }\r\n        else if (horizontalsLength <= 3) {\r\n            controlIndex = 3;\r\n        }\r\n    }\r\n    // left\r\n    if (lineIndex === 3) {\r\n        if (verticalsLength === 0) {\r\n            controlIndex = 4;\r\n        }\r\n        else if (verticalsLength < 4) {\r\n            controlIndex = 7;\r\n        }\r\n    }\r\n    // right\r\n    if (lineIndex === 1) {\r\n        if (verticalsLength <= 1) {\r\n            controlIndex = 5;\r\n        }\r\n        else if (verticalsLength <= 2) {\r\n            controlIndex = 6;\r\n        }\r\n    }\r\n    if (controlIndex === -1 || !controlPoses[controlIndex].virtual) {\r\n        return;\r\n    }\r\n    var controlPoseInfo = controlPoses[controlIndex];\r\n    addBorderRadius(controlPoses, controlIndex);\r\n    if (controlIndex < 4) {\r\n        controlPoseInfo.pos[0] = distX;\r\n    }\r\n    else {\r\n        controlPoseInfo.pos[1] = distY;\r\n    }\r\n}\r\nfunction addBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(0, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n    else {\r\n        if (controlPoses[0].virtual) {\r\n            controlPoses[0].virtual = false;\r\n        }\r\n        controlPoses.slice(4, index + 1).forEach(function (info) {\r\n            info.virtual = false;\r\n        });\r\n    }\r\n}\r\nfunction removeBorderRadius(controlPoses, index) {\r\n    if (index < 4) {\r\n        controlPoses.slice(index, 4).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n    else {\r\n        controlPoses.slice(index).forEach(function (info) {\r\n            info.virtual = true;\r\n        });\r\n    }\r\n}\r\nfunction getBorderRadius(borderRadius, width, height, minCounts, full) {\r\n    if (minCounts === void 0) { minCounts = [0, 0]; }\r\n    var values = [];\r\n    if (!borderRadius || borderRadius === \"0px\") {\r\n        values = [];\r\n    }\r\n    else {\r\n        values = splitSpace(borderRadius);\r\n    }\r\n    return getRadiusValues(values, width, height, 0, 0, minCounts, full);\r\n}\r\nfunction triggerRoundEvent(moveable, e, dist, delta, nextPoses) {\r\n    var state = moveable.state;\r\n    var width = state.width, height = state.height;\r\n    var _a = getRadiusStyles(nextPoses, moveable.props.roundRelative, width, height), raws = _a.raws, styles = _a.styles, radiusPoses = _a.radiusPoses;\r\n    var _b = splitRadiusPoses(radiusPoses, raws), horizontals = _b.horizontals, verticals = _b.verticals;\r\n    var borderRadius = styles.join(\" \");\r\n    state.borderRadiusState = borderRadius;\r\n    var params = fillParams(moveable, e, __assign({ horizontals: horizontals, verticals: verticals, borderRadius: borderRadius, width: width, height: height, delta: delta, dist: dist }, fillCSSObject({\r\n        borderRadius: borderRadius,\r\n    }, e)));\r\n    triggerEvent(moveable, \"onRound\", params);\r\n    return params;\r\n}\r\nfunction getStyleBorderRadius(moveable) {\r\n    var _a, _b;\r\n    var style = moveable.getState().style;\r\n    var borderRadius = style.borderRadius || \"\";\r\n    if (!borderRadius && moveable.props.groupable) {\r\n        var firstMoveable = moveable.moveables[0];\r\n        var firstTarget = moveable.getTargets()[0];\r\n        if (firstTarget) {\r\n            if ((firstMoveable === null || firstMoveable === void 0 ? void 0 : firstMoveable.props.target) === firstTarget) {\r\n                borderRadius = (_b = (_a = moveable.moveables[0]) === null || _a === void 0 ? void 0 : _a.state.style.borderRadius) !== null && _b !== void 0 ? _b : \"\";\r\n                style.borderRadius = borderRadius;\r\n            }\r\n            else {\r\n                borderRadius = getComputedStyle(firstTarget).borderRadius;\r\n                style.borderRadius = borderRadius;\r\n            }\r\n        }\r\n    }\r\n    return borderRadius;\r\n}\r\n/**\r\n * @namespace Moveable.Roundable\r\n * @description Whether to show and drag or double click border-radius\r\n */\r\nvar Roundable = {\r\n    name: \"roundable\",\r\n    props: [\r\n        \"roundable\",\r\n        \"roundRelative\",\r\n        \"minRoundControls\",\r\n        \"maxRoundControls\",\r\n        \"roundClickable\",\r\n        \"roundPadding\",\r\n        \"isDisplayShadowRoundControls\",\r\n    ],\r\n    events: [\r\n        \"roundStart\",\r\n        \"round\",\r\n        \"roundEnd\",\r\n        \"roundGroupStart\",\r\n        \"roundGroup\",\r\n        \"roundGroupEnd\",\r\n    ],\r\n    css: [\r\n        \".control.border-radius {\\nbackground: #d66;\\ncursor: pointer;\\nz-index: 3;\\n}\",\r\n        \".control.border-radius.vertical {\\nbackground: #d6d;\\nz-index: 2;\\n}\",\r\n        \".control.border-radius.virtual {\\nopacity: 0.5;\\nz-index: 1;\\n}\",\r\n        \":host.round-line-clickable .line.direction {\\ncursor: pointer;\\n}\",\r\n    ],\r\n    className: function (moveable) {\r\n        var roundClickable = moveable.props.roundClickable;\r\n        return roundClickable === true || roundClickable === \"line\" ? prefix(\"round-line-clickable\") : \"\";\r\n    },\r\n    requestStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    requestChildStyle: function () {\r\n        return [\"borderRadius\"];\r\n    },\r\n    render: function (moveable, React) {\r\n        var _a = moveable.getState(), target = _a.target, width = _a.width, height = _a.height, allMatrix = _a.allMatrix, is3d = _a.is3d, left = _a.left, top = _a.top, borderRadiusState = _a.borderRadiusState;\r\n        var _b = moveable.props, _c = _b.minRoundControls, minRoundControls = _c === void 0 ? [0, 0] : _c, _d = _b.maxRoundControls, maxRoundControls = _d === void 0 ? [4, 4] : _d, zoom = _b.zoom, _e = _b.roundPadding, roundPadding = _e === void 0 ? 0 : _e, isDisplayShadowRoundControls = _b.isDisplayShadowRoundControls, groupable = _b.groupable;\r\n        if (!target) {\r\n            return null;\r\n        }\r\n        var borderRadius = borderRadiusState || getStyleBorderRadius(moveable);\r\n        var n = is3d ? 4 : 3;\r\n        var radiusValues = getBorderRadius(borderRadius, width, height, minRoundControls, true);\r\n        if (!radiusValues) {\r\n            return null;\r\n        }\r\n        var verticalCount = 0;\r\n        var horizontalCount = 0;\r\n        var basePos = groupable ? [0, 0] : [left, top];\r\n        return radiusValues.map(function (v, i) {\r\n            var horizontal = v.horizontal;\r\n            var vertical = v.vertical;\r\n            var direction = v.direction || \"\";\r\n            var originalPos = __spreadArray([], __read(v.pos), false);\r\n            horizontalCount += Math.abs(horizontal);\r\n            verticalCount += Math.abs(vertical);\r\n            if (horizontal && direction.indexOf(\"n\") > -1) {\r\n                originalPos[1] -= roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"w\") > -1) {\r\n                originalPos[0] -= roundPadding;\r\n            }\r\n            if (horizontal && direction.indexOf(\"s\") > -1) {\r\n                originalPos[1] += roundPadding;\r\n            }\r\n            if (vertical && direction.indexOf(\"e\") > -1) {\r\n                originalPos[0] += roundPadding;\r\n            }\r\n            var pos = minus(calculatePosition(allMatrix, originalPos, n), basePos);\r\n            var isDisplayVerticalShadow = isDisplayShadowRoundControls\r\n                && isDisplayShadowRoundControls !== \"horizontal\";\r\n            var isDisplay = v.vertical\r\n                ? verticalCount <= maxRoundControls[1] && (isDisplayVerticalShadow || !v.virtual)\r\n                : horizontalCount <= maxRoundControls[0] && (isDisplayShadowRoundControls || !v.virtual);\r\n            return React.createElement(\"div\", { key: \"borderRadiusControl\".concat(i), className: prefix(\"control\", \"border-radius\", v.vertical ? \"vertical\" : \"\", v.virtual ? \"virtual\" : \"\"), \"data-radius-index\": i, style: {\r\n                    display: isDisplay ? \"block\" : \"none\",\r\n                    transform: \"translate(\".concat(pos[0], \"px, \").concat(pos[1], \"px) scale(\").concat(zoom, \")\"),\r\n                } });\r\n        });\r\n    },\r\n    dragControlCondition: function (moveable, e) {\r\n        if (!e.inputEvent || e.isRequest) {\r\n            return false;\r\n        }\r\n        var className = (e.inputEvent.target.getAttribute(\"class\") || \"\");\r\n        return className.indexOf(\"border-radius\") > -1\r\n            || (className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1);\r\n    },\r\n    dragGroupControlCondition: function (moveable, e) {\r\n        return this.dragControlCondition(moveable, e);\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        var inputEvent = e.inputEvent, datas = e.datas;\r\n        var inputTarget = inputEvent.target;\r\n        var className = (inputTarget.getAttribute(\"class\") || \"\");\r\n        var isControl = className.indexOf(\"border-radius\") > -1;\r\n        var isLine = className.indexOf(\"moveable-line\") > -1 && className.indexOf(\"moveable-direction\") > -1;\r\n        var controlIndex = isControl ? parseInt(inputTarget.getAttribute(\"data-radius-index\"), 10) : -1;\r\n        var lineIndex = -1;\r\n        if (isLine) {\r\n            var indexAttr = inputTarget.getAttribute(\"data-line-key\") || \"\";\r\n            if (indexAttr) {\r\n                lineIndex = parseInt(indexAttr.replace(/render-line-/g, \"\"), 10);\r\n                if (isNaN(lineIndex)) {\r\n                    lineIndex = -1;\r\n                }\r\n            }\r\n        }\r\n        if (!isControl && !isLine) {\r\n            return false;\r\n        }\r\n        var params = fillParams(moveable, e, {});\r\n        var result = triggerEvent(moveable, \"onRoundStart\", params);\r\n        if (result === false) {\r\n            return false;\r\n        }\r\n        datas.lineIndex = lineIndex;\r\n        datas.controlIndex = controlIndex;\r\n        datas.isControl = isControl;\r\n        datas.isLine = isLine;\r\n        setDragStart(moveable, e);\r\n        var _a = moveable.props, roundRelative = _a.roundRelative, _b = _a.minRoundControls, minRoundControls = _b === void 0 ? [0, 0] : _b;\r\n        var state = moveable.state;\r\n        var width = state.width, height = state.height;\r\n        datas.isRound = true;\r\n        datas.prevDist = [0, 0];\r\n        var borderRadius = getStyleBorderRadius(moveable);\r\n        var controlPoses = getBorderRadius(borderRadius || \"\", width, height, minRoundControls, true) || [];\r\n        datas.controlPoses = controlPoses;\r\n        state.borderRadiusState = getRadiusStyles(controlPoses, roundRelative, width, height).styles.join(\" \");\r\n        return params;\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        var datas = e.datas;\r\n        var controlPoses = datas.controlPoses;\r\n        if (!datas.isRound || !datas.isControl || !controlPoses.length) {\r\n            return false;\r\n        }\r\n        var index = datas.controlIndex;\r\n        var _a = __read(getDragDist(e), 2), distX = _a[0], distY = _a[1];\r\n        var dist = [distX, distY];\r\n        var delta = minus(dist, datas.prevDist);\r\n        var _b = moveable.props.maxRoundControls, maxRoundControls = _b === void 0 ? [4, 4] : _b;\r\n        var _c = moveable.state, width = _c.width, height = _c.height;\r\n        var selectedControlPose = controlPoses[index];\r\n        var selectedVertical = selectedControlPose.vertical;\r\n        var selectedHorizontal = selectedControlPose.horizontal;\r\n        // 0: [0, 1, 2, 3] maxCount === 1\r\n        // 0: [0, 2] maxCount === 2\r\n        // 1: [1, 3] maxCount === 2\r\n        // 0: [0] maxCount === 3\r\n        // 1: [1, 3] maxCount === 3\r\n        var dists = controlPoses.map(function (pose) {\r\n            var horizontal = pose.horizontal, vertical = pose.vertical;\r\n            var poseDist = [\r\n                horizontal * selectedHorizontal * dist[0],\r\n                vertical * selectedVertical * dist[1],\r\n            ];\r\n            if (horizontal) {\r\n                if (maxRoundControls[0] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[0] < 4 && horizontal !== selectedHorizontal) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            else if (maxRoundControls[1] === 0) {\r\n                poseDist[1] = vertical * selectedHorizontal * dist[0] / width * height;\r\n                return poseDist;\r\n            }\r\n            else if (selectedVertical) {\r\n                if (maxRoundControls[1] === 1) {\r\n                    return poseDist;\r\n                }\r\n                else if (maxRoundControls[1] < 4 && vertical !== selectedVertical) {\r\n                    return poseDist;\r\n                }\r\n            }\r\n            return [0, 0];\r\n        });\r\n        dists[index] = dist;\r\n        var nextPoses = controlPoses.map(function (info, i) {\r\n            return __assign(__assign({}, info), { pos: plus(info.pos, dists[i]) });\r\n        });\r\n        if (index < 4) {\r\n            nextPoses.slice(0, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        else {\r\n            nextPoses.slice(4, index + 1).forEach(function (info) {\r\n                info.virtual = false;\r\n            });\r\n        }\r\n        datas.prevDist = [distX, distY];\r\n        return triggerRoundEvent(moveable, e, dist, delta, nextPoses);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        var state = moveable.state;\r\n        state.borderRadiusState = \"\";\r\n        var datas = e.datas, isDouble = e.isDouble;\r\n        if (!datas.isRound) {\r\n            return false;\r\n        }\r\n        var isControl = datas.isControl, controlIndex = datas.controlIndex, isLine = datas.isLine, lineIndex = datas.lineIndex;\r\n        var controlPoses = datas.controlPoses;\r\n        var length = controlPoses.filter(function (_a) {\r\n            var virtual = _a.virtual;\r\n            return virtual;\r\n        }).length;\r\n        var _a = moveable.props.roundClickable, roundClickable = _a === void 0 ? true : _a;\r\n        if (isDouble && roundClickable) {\r\n            if (isControl && (roundClickable === true || roundClickable === \"control\")) {\r\n                removeBorderRadius(controlPoses, controlIndex);\r\n            }\r\n            else if (isLine && (roundClickable === true || roundClickable === \"line\")) {\r\n                var _b = __read(calculatePointerDist(moveable, e), 2), distX = _b[0], distY = _b[1];\r\n                addBorderRadiusByLine(controlPoses, lineIndex, distX, distY);\r\n            }\r\n            if (length !== controlPoses.filter(function (_a) {\r\n                var virtual = _a.virtual;\r\n                return virtual;\r\n            }).length) {\r\n                triggerRoundEvent(moveable, e, [0, 0], [0, 0], controlPoses);\r\n            }\r\n        }\r\n        var params = fillEndParams(moveable, e, {});\r\n        triggerEvent(moveable, \"onRoundEnd\", params);\r\n        state.borderRadiusState = \"\";\r\n        return params;\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        var result = this.dragControlStart(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupStart\", nextParams);\r\n        return result;\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        var result = this.dragControl(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                    borderRadius: result.borderRadius,\r\n                }, ev));\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        return nextParams;\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        var moveables = moveable.moveables;\r\n        var targets = moveable.props.targets;\r\n        var events = fillChildEvents(moveable, \"roundable\", e);\r\n        catchEvent(moveable, \"onRound\", function (parentEvent) {\r\n            var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                    return __assign(__assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i] }), fillCSSObject({\r\n                        borderRadius: parentEvent.borderRadius,\r\n                    }, ev));\r\n                }) }, parentEvent);\r\n            triggerEvent(moveable, \"onRoundGroup\", nextParams);\r\n        });\r\n        var result = this.dragControlEnd(moveable, e);\r\n        if (!result) {\r\n            return false;\r\n        }\r\n        var nextParams = __assign({ targets: moveable.props.targets, events: events.map(function (ev, i) {\r\n                var _a;\r\n                return __assign(__assign({}, ev), { target: targets[i], moveable: moveables[i], currentTarget: moveables[i], lastEvent: (_a = ev.datas) === null || _a === void 0 ? void 0 : _a.lastEvent });\r\n            }) }, result);\r\n        triggerEvent(moveable, \"onRoundGroupEnd\", nextParams);\r\n        return nextParams;\r\n    },\r\n    unset: function (moveable) {\r\n        moveable.state.borderRadiusState = \"\";\r\n    },\r\n};\r\n/**\r\n * Whether to show and drag or double click border-radius, (default: false)\r\n * @name Moveable.Roundable#roundable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * % Can be used instead of the absolute px\r\n * @name Moveable.Roundable#roundRelative\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * Minimum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [0, 0])\r\n * @name Moveable.Roundable#minRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     minRoundControls: [0, 0],\r\n * });\r\n * moveable.minRoundControls = [1, 0];\r\n */\r\n/**\r\n * Maximum number of round controls. It moves in proportion by control. [horizontal, vertical] (default: [4, 4])\r\n * @name Moveable.Roundable#maxRoundControls\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     maxRoundControls: [4, 4],\r\n * });\r\n * moveable.maxRoundControls = [1, 0];\r\n */\r\n/**\r\n * Whether you can add/delete round controls by double-clicking a line or control.\r\n * @name Moveable.Roundable#roundClickable\r\n * @default true\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n *     roundClickable: true,\r\n * });\r\n * moveable.roundClickable = false;\r\n */\r\n/**\r\n * Whether to show a round control that does not actually exist as a shadow\r\n * @name Moveable.Roundable#isDisplayShadowRoundControls\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     isDisplayShadowRoundControls: false,\r\n * });\r\n * moveable.isDisplayShadowRoundControls = true;\r\n */\r\n/**\r\n * The padding value of the position of the round control\r\n * @name Moveable.Roundable#roundPadding\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundPadding: 0,\r\n * });\r\n * moveable.roundPadding = 15;\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundStart\r\n * @param {Moveable.Roundable.OnRoundStart} - Parameters for the `roundStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `round` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event round\r\n * @param {Moveable.Roundable.OnRound} - Parameters for the `round` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundEnd\r\n * @param {Moveable.Roundable.onRoundEnd} - Parameters for the `roundEnd` event\r\n * @example\r\n  * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     roundable: true,\r\n *     roundRelative: false,\r\n * });\r\n * moveable.on(\"roundStart\", e => {\r\n *     console.log(e);\r\n * }).on(\"round\", e => {\r\n *     e.target.style.borderRadius = e.borderRadius;\r\n * }).on(\"roundEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag start the clip area or controls, the `roundGroupStart` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupStart\r\n * @param {Moveable.Roundable.OnRoundGroupStart} - Parameters for the `roundGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag or double click the border area or controls, the `roundGroup` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroup\r\n * @param {Moveable.Roundable.OnRoundGroup} - Parameters for the `roundGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *   e.events.forEach(ev => {\r\n *       ev.target.style.cssText += ev.cssText;\r\n *   });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\r\n/**\r\n * When drag end the border area or controls, the `roundGroupEnd` event is called.\r\n * @memberof Moveable.Roundable\r\n * @event roundGroupEnd\r\n * @param {Moveable.Roundable.onRoundGroupEnd} - Parameters for the `roundGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     targets: [target1, target2, target3],\r\n *     roundable: true,\r\n * });\r\n * moveable.on(\"roundGroupStart\", e => {\r\n *     console.log(e.targets);\r\n * }).on(\"roundGroup\", e => {\r\n *     e.events.forEach(ev => {\r\n *         ev.target.style.cssText += ev.cssText;\r\n *     });\r\n * }).on(\"roundGroupEnd\", e => {\r\n *     console.log(e);\r\n * });\r\n */\n\nfunction isIdentityMatrix(matrix, is3d) {\r\n    var n = is3d ? 4 : 3;\r\n    var identityMatrix = createIdentityMatrix(n);\r\n    var value = \"matrix\".concat(is3d ? \"3d\" : \"\", \"(\").concat(identityMatrix.join(\",\"), \")\");\r\n    return matrix === value || matrix === \"matrix(1,0,0,1,0,0)\";\r\n}\r\nvar BeforeRenderable = {\r\n    isPinch: true,\r\n    name: \"beforeRenderable\",\r\n    props: [],\r\n    events: [\r\n        \"beforeRenderStart\",\r\n        \"beforeRender\",\r\n        \"beforeRenderEnd\",\r\n        \"beforeRenderGroupStart\",\r\n        \"beforeRenderGroup\",\r\n        \"beforeRenderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    setTransform: function (moveable, e) {\r\n        var _a = moveable.state, is3d = _a.is3d, targetMatrix = _a.targetMatrix, inlineTransform = _a.inlineTransform;\r\n        var cssMatrix = is3d\r\n            ? \"matrix3d(\".concat(targetMatrix.join(\",\"), \")\")\r\n            : \"matrix(\".concat(convertMatrixtoCSS(targetMatrix, true), \")\");\r\n        var startTransform = !inlineTransform || inlineTransform === \"none\" ? cssMatrix : inlineTransform;\r\n        e.datas.startTransforms = isIdentityMatrix(startTransform, is3d) ? [] : splitSpace(startTransform);\r\n    },\r\n    resetStyle: function (e) {\r\n        var datas = e.datas;\r\n        datas.nextStyle = {};\r\n        datas.nextTransforms = e.datas.startTransforms;\r\n        datas.nextTransformAppendedIndexes = [];\r\n    },\r\n    fillDragStartParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            setTransform: function (transform) {\r\n                e.datas.startTransforms = isArray(transform) ? transform : splitSpace(transform);\r\n            },\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        return fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        });\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        this.setTransform(moveable, e);\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRenderStart\", this.fillDragStartParams(moveable, e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n        }\r\n        this.resetStyle(e);\r\n        triggerEvent(moveable, \"onBeforeRender\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        if (!e.datas.startTransforms) {\r\n            this.setTransform(moveable, e);\r\n            this.resetStyle(e);\r\n        }\r\n        triggerEvent(moveable, \"onBeforeRenderEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n        }));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        var _this = this;\r\n        this.dragStart(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.setTransform(childMoveable, childEvent);\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragStartParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            setTransform: function () { },\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        this.drag(moveable, e);\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            _this.resetStyle(childEvent);\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onBeforeRenderGroup\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n            events: params,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n        triggerEvent(moveable, \"onBeforeRenderGroupEnd\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            isDrag: e.isDrag,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n};\n\nvar Renderable = {\r\n    name: \"renderable\",\r\n    props: [],\r\n    events: [\r\n        \"renderStart\",\r\n        \"render\",\r\n        \"renderEnd\",\r\n        \"renderGroupStart\",\r\n        \"renderGroup\",\r\n        \"renderGroupEnd\",\r\n    ],\r\n    dragRelation: \"weak\",\r\n    dragStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n        }));\r\n    },\r\n    drag: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRender\", this.fillDragParams(moveable, e));\r\n    },\r\n    dragAfter: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderEnd\", this.fillDragEndParams(moveable, e));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        triggerEvent(moveable, \"onRenderGroupStart\", fillParams(moveable, e, {\r\n            isPinch: !!e.isPinch,\r\n            targets: moveable.props.targets,\r\n        }));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroup\", fillParams(moveable, e, __assign(__assign({ isPinch: !!e.isPinch, targets: moveable.props.targets, transform: getNextTransformText(e), transformObject: {} }, fillCSSObject(getNextStyle(e))), { events: params })));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var _this = this;\r\n        var events = fillChildEvents(moveable, \"beforeRenderable\", e);\r\n        var moveables = moveable.moveables;\r\n        var params = events.map(function (childEvent, i) {\r\n            var childMoveable = moveables[i];\r\n            return _this.fillDragEndParams(childMoveable, childEvent);\r\n        });\r\n        triggerEvent(moveable, \"onRenderGroupEnd\", fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, targets: moveable.props.targets, events: params, transformObject: {}, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e)))));\r\n    },\r\n    dragControlStart: function (moveable, e) {\r\n        return this.dragStart(moveable, e);\r\n    },\r\n    dragControl: function (moveable, e) {\r\n        return this.drag(moveable, e);\r\n    },\r\n    dragControlAfter: function (moveable, e) {\r\n        return this.dragAfter(moveable, e);\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        return this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlStart: function (moveable, e) {\r\n        return this.dragGroupStart(moveable, e);\r\n    },\r\n    dragGroupControl: function (moveable, e) {\r\n        return this.dragGroup(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        return this.dragGroupEnd(moveable, e);\r\n    },\r\n    fillDragParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n    fillDragEndParams: function (moveable, e) {\r\n        var transformObject = {};\r\n        parse(getNextTransforms(e) || []).forEach(function (matrixInfo) {\r\n            transformObject[matrixInfo.name] = matrixInfo.functionValue;\r\n        });\r\n        return fillParams(moveable, e, __assign({ isPinch: !!e.isPinch, isDrag: e.isDrag, transformObject: transformObject, transform: getNextTransformText(e) }, fillCSSObject(getNextStyle(e))));\r\n    },\r\n};\n\nfunction triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e, requestInstant) {\r\n    // pre setting\r\n    e.clientDistX = e.distX;\r\n    e.clientDistY = e.distY;\r\n    var isStart = eventType === \"Start\";\r\n    var isEnd = eventType === \"End\";\r\n    var isAfter = eventType === \"After\";\r\n    var target = moveable.state.target;\r\n    var isRequest = e.isRequest;\r\n    var isControl = eventAffix.indexOf(\"Control\") > -1;\r\n    if (!target\r\n        || (isStart && isControl && !isRequest && moveable.areaElement === e.inputEvent.target)) {\r\n        return false;\r\n    }\r\n    var ables = __spreadArray([], __read(moveableAbles), false);\r\n    if (isRequest) {\r\n        var requestAble_1 = e.requestAble;\r\n        if (!ables.some(function (able) { return able.name === requestAble_1; })) {\r\n            ables.push.apply(ables, __spreadArray([], __read(moveable.props.ables.filter(function (able) { return able.name === requestAble_1; })), false));\r\n        }\r\n    }\r\n    if (!ables.length || ables.every(function (able) { return able.dragRelation; })) {\r\n        return false;\r\n    }\r\n    // \"drag\" \"Control\" \"After\"\r\n    var inputEvent = e.inputEvent;\r\n    var inputTarget;\r\n    if (isEnd && inputEvent) {\r\n        inputTarget = document.elementFromPoint(e.clientX, e.clientY) || inputEvent.target;\r\n    }\r\n    var isDragStop = false;\r\n    var stop = function () {\r\n        var _a;\r\n        isDragStop = true;\r\n        (_a = e.stop) === null || _a === void 0 ? void 0 : _a.call(e);\r\n    };\r\n    var isFirstStart = isStart && (!moveable.targetGesto || !moveable.controlGesto\r\n        || (!moveable.targetGesto.isFlag() || !moveable.controlGesto.isFlag()));\r\n    if (isFirstStart) {\r\n        moveable.updateRect(eventType, true, false);\r\n    }\r\n    // trigger ables\r\n    var datas = e.datas;\r\n    var gestoType = isControl ? \"controlGesto\" : \"targetGesto\";\r\n    var prevGesto = moveable[gestoType];\r\n    var trigger = function (able, eventName, conditionName) {\r\n        if (!(eventName in able) || prevGesto !== moveable[gestoType]) {\r\n            return false;\r\n        }\r\n        var ableName = able.name;\r\n        var nextDatas = datas[ableName] || (datas[ableName] = {});\r\n        if (isStart) {\r\n            nextDatas.isEventStart = !conditionName\r\n                || !able[conditionName] || able[conditionName](moveable, e);\r\n        }\r\n        if (!nextDatas.isEventStart) {\r\n            return false;\r\n        }\r\n        var result = able[eventName](moveable, __assign(__assign({}, e), { stop: stop, datas: nextDatas, originalDatas: datas, inputTarget: inputTarget }));\r\n        moveable._emitter.off();\r\n        if (isStart && result === false) {\r\n            nextDatas.isEventStart = false;\r\n        }\r\n        return result;\r\n    };\r\n    // unset ables for first drag start\r\n    if (isFirstStart) {\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    // BeforeRenderable\r\n    trigger(BeforeRenderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    var forceEndedCount = 0;\r\n    var updatedCount = 0;\r\n    eventOperations.forEach(function (eventOperation) {\r\n        if (isDragStop) {\r\n            return false;\r\n        }\r\n        var eventName = \"\".concat(eventOperation).concat(eventAffix).concat(eventType);\r\n        var conditionName = \"\".concat(eventOperation).concat(eventAffix, \"Condition\");\r\n        if (eventType === \"\" && !isRequest) {\r\n            // Convert distX, distY\r\n            convertDragDist(moveable.state, e);\r\n        }\r\n        // const isGroup = eventAffix.indexOf(\"Group\") > -1;\r\n        var eventAbles = ables.filter(function (able) { return able[eventName]; });\r\n        eventAbles = eventAbles.filter(function (able, i) {\r\n            return able.name && eventAbles.indexOf(able) === i;\r\n        });\r\n        var results = eventAbles.filter(function (able) { return trigger(able, eventName, conditionName); });\r\n        var isUpdate = results.length;\r\n        // end ables\r\n        if (isDragStop) {\r\n            ++forceEndedCount;\r\n        }\r\n        if (isUpdate) {\r\n            ++updatedCount;\r\n        }\r\n        if (!isDragStop && isStart && eventAbles.length && !isUpdate) {\r\n            forceEndedCount += eventAbles.filter(function (able) {\r\n                var ableName = able.name;\r\n                var nextDatas = datas[ableName];\r\n                if (nextDatas.isEventStart) {\r\n                    if (able.dragRelation === \"strong\") {\r\n                        return false;\r\n                    }\r\n                    // stop drag\r\n                    return true;\r\n                }\r\n                // pre stop drag\r\n                return false;\r\n            }).length ? 1 : 0;\r\n        }\r\n    });\r\n    if (!isAfter || updatedCount) {\r\n        trigger(Renderable, \"drag\".concat(eventAffix).concat(eventType));\r\n    }\r\n    // stop gesto condition\r\n    var isForceEnd = prevGesto !== moveable[gestoType] || forceEndedCount === eventOperations.length;\r\n    if (isEnd || isDragStop || isForceEnd) {\r\n        moveable.state.gestos = {};\r\n        if (moveable.moveables) {\r\n            moveable.moveables.forEach(function (childMoveable) {\r\n                childMoveable.state.gestos = {};\r\n            });\r\n        }\r\n        ables.forEach(function (able) {\r\n            able.unset && able.unset(moveable);\r\n        });\r\n    }\r\n    if (isStart && !isForceEnd && !isRequest && updatedCount && moveable.props.preventDefault) {\r\n        e === null || e === void 0 ? void 0 : e.preventDefault();\r\n    }\r\n    if (moveable.isUnmounted || isForceEnd) {\r\n        return false;\r\n    }\r\n    if ((!isStart && updatedCount && !requestInstant) || isEnd) {\r\n        var flushSync = moveable.props.flushSync || defaultSync;\r\n        flushSync(function () {\r\n            moveable.updateRect(isEnd ? eventType : \"\", true, false);\r\n            moveable.forceUpdate();\r\n        });\r\n    }\r\n    if (!isStart && !isEnd && !isAfter && updatedCount && !requestInstant) {\r\n        triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType + \"After\", e);\r\n    }\r\n    return true;\r\n}\r\nfunction checkMoveableTarget(moveable, isControl) {\r\n    return function (e, target) {\r\n        var _a;\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        var eventTarget = target;\r\n        var areaElement = moveable.areaElement;\r\n        var dragTargetElement = moveable._dragTarget;\r\n        if (!dragTargetElement || (!isControl && ((_a = moveable.controlGesto) === null || _a === void 0 ? void 0 : _a.isFlag()))) {\r\n            return false;\r\n        }\r\n        return eventTarget === dragTargetElement\r\n            || dragTargetElement.contains(eventTarget)\r\n            || eventTarget === areaElement\r\n            || (!moveable.isMoveableElement(eventTarget) && !moveable.controlBox.contains(eventTarget))\r\n            || hasClass(eventTarget, \"moveable-area\")\r\n            || hasClass(eventTarget, \"moveable-padding\")\r\n            || hasClass(eventTarget, \"moveable-edgeDraggable\");\r\n    };\r\n}\r\nfunction getTargetAbleGesto(moveable, moveableTarget, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    var props = moveable.props;\r\n    var dragArea = props.dragArea;\r\n    var target = moveable.state.target;\r\n    var dragTarget = props.dragTarget;\r\n    targets.push(controlBox);\r\n    if (!dragArea || dragTarget) {\r\n        targets.push(moveableTarget);\r\n    }\r\n    if (!dragArea && dragTarget && target && moveableTarget !== target && props.dragTargetSelf) {\r\n        targets.push(target);\r\n    }\r\n    var checkTarget = checkMoveableTarget(moveable);\r\n    return getAbleGesto(moveable, targets, \"targetAbles\", eventAffix, {\r\n        dragStart: checkTarget,\r\n        pinchStart: checkTarget,\r\n    });\r\n}\r\nfunction getControlAbleGesto(moveable, eventAffix) {\r\n    var controlBox = moveable.controlBox;\r\n    var targets = [];\r\n    targets.push(controlBox);\r\n    var checkTarget = checkMoveableTarget(moveable, true);\r\n    var checkControlTarget = function (e, target) {\r\n        if (target === void 0) { target = e.inputEvent.target; }\r\n        if (target === controlBox) {\r\n            return true;\r\n        }\r\n        var result = checkTarget(e, target);\r\n        return !result;\r\n    };\r\n    return getAbleGesto(moveable, targets, \"controlAbles\", eventAffix, {\r\n        dragStart: checkControlTarget,\r\n        pinchStart: checkControlTarget,\r\n    });\r\n}\r\nfunction getAbleGesto(moveable, target, ableType, eventAffix, conditionFunctions) {\r\n    if (conditionFunctions === void 0) { conditionFunctions = {}; }\r\n    var isTargetAbles = ableType === \"targetAbles\";\r\n    var _a = moveable.props, pinchOutside = _a.pinchOutside, pinchThreshold = _a.pinchThreshold, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickDefault = _a.preventClickDefault, checkInput = _a.checkInput, dragFocusedInput = _a.dragFocusedInput, _b = _a.preventDefault, preventDefault = _b === void 0 ? true : _b, _c = _a.preventRightClick, preventRightClick = _c === void 0 ? true : _c, _d = _a.preventWheelClick, preventWheelClick = _d === void 0 ? true : _d, dragContaienrOption = _a.dragContainer;\r\n    var dragContainer = getRefTarget(dragContaienrOption, true);\r\n    var options = {\r\n        preventDefault: preventDefault,\r\n        preventRightClick: preventRightClick,\r\n        preventWheelClick: preventWheelClick,\r\n        container: dragContainer || getWindow(moveable.getControlBoxElement()),\r\n        pinchThreshold: pinchThreshold,\r\n        pinchOutside: pinchOutside,\r\n        preventClickEventOnDrag: isTargetAbles ? preventClickEventOnDrag : false,\r\n        preventClickEventOnDragStart: isTargetAbles ? preventClickDefault : false,\r\n        preventClickEventByCondition: isTargetAbles ? null : function (e) {\r\n            return moveable.controlBox.contains(e.target);\r\n        },\r\n        checkInput: isTargetAbles ? checkInput : false,\r\n        dragFocusedInput: dragFocusedInput,\r\n    };\r\n    var gesto = new Gesto(target, options);\r\n    var isControl = eventAffix === \"Control\";\r\n    [\"drag\", \"pinch\"].forEach(function (eventOperation) {\r\n        [\"Start\", \"\", \"End\"].forEach(function (eventType) {\r\n            gesto.on(\"\".concat(eventOperation).concat(eventType), function (e) {\r\n                var _a;\r\n                var eventName = e.eventType;\r\n                var isPinchScheduled = eventOperation === \"drag\" && e.isPinch;\r\n                if (conditionFunctions[eventName] && !conditionFunctions[eventName](e)) {\r\n                    e.stop();\r\n                    return;\r\n                }\r\n                if (isPinchScheduled) {\r\n                    return;\r\n                }\r\n                var eventOperations = eventOperation === \"drag\" ? [eventOperation] : [\"drag\", eventOperation];\r\n                var moveableAbles = __spreadArray([], __read(moveable[ableType]), false);\r\n                var result = triggerAble(moveable, moveableAbles, eventOperations, eventAffix, eventType, e);\r\n                if (!result) {\r\n                    e.stop();\r\n                }\r\n                else if (moveable.props.stopPropagation || (eventType === \"Start\" && isControl)) {\r\n                    (_a = e === null || e === void 0 ? void 0 : e.inputEvent) === null || _a === void 0 ? void 0 : _a.stopPropagation();\r\n                }\r\n            });\r\n        });\r\n    });\r\n    return gesto;\r\n}\n\nvar EventManager = /*#__PURE__*/ (function () {\r\n    function EventManager(target, moveable, eventName) {\r\n        var _this = this;\r\n        this.target = target;\r\n        this.moveable = moveable;\r\n        this.eventName = eventName;\r\n        this.ables = [];\r\n        this._onEvent = function (e) {\r\n            var eventName = _this.eventName;\r\n            var moveable = _this.moveable;\r\n            if (moveable.state.disableNativeEvent) {\r\n                return;\r\n            }\r\n            _this.ables.forEach(function (able) {\r\n                able[eventName](moveable, {\r\n                    inputEvent: e,\r\n                });\r\n            });\r\n        };\r\n        target.addEventListener(eventName.toLowerCase(), this._onEvent);\r\n    }\r\n    EventManager.prototype.setAbles = function (ables) {\r\n        this.ables = ables;\r\n    };\r\n    EventManager.prototype.destroy = function () {\r\n        this.target.removeEventListener(this.eventName.toLowerCase(), this._onEvent);\r\n        this.target = null;\r\n        this.moveable = null;\r\n    };\r\n    return EventManager;\r\n}());\n\nfunction calculateMatrixStack(target, container, rootContainer, isAbsolute3d) {\r\n    var _a;\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var _b = getMatrixStackInfo(target, container), matrixes = _b.matrixes, is3d = _b.is3d, prevTargetMatrix = _b.targetMatrix, transformOrigin = _b.transformOrigin, targetOrigin = _b.targetOrigin, offsetContainer = _b.offsetContainer, hasFixed = _b.hasFixed, containerZoom = _b.zoom; // prevMatrix\r\n    var _c = getCachedMatrixContainerInfo(offsetContainer, rootContainer), rootMatrixes = _c.matrixes, isRoot3d = _c.is3d, offsetRootContainer = _c.offsetContainer, rootZoom = _c.zoom; // prevRootMatrix\r\n    // if (rootContainer === document.body) {\r\n    //     console.log(offsetContainer, rootContainer, rootMatrixes);\r\n    // }\r\n    var isNext3d = isAbsolute3d || isRoot3d || is3d;\r\n    var n = isNext3d ? 4 : 3;\r\n    var isSVGGraphicElement = target.tagName.toLowerCase() !== \"svg\" && \"ownerSVGElement\" in target;\r\n    var targetMatrix = prevTargetMatrix;\r\n    // let allMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let rootMatrix = prevRootMatrix ? convertDimension(prevRootMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    // let beforeMatrix = prevMatrix ? convertDimension(prevMatrix, prevN!, n) : createIdentityMatrix(n);\r\n    var allMatrix = createIdentityMatrix(n);\r\n    var rootMatrix = createIdentityMatrix(n);\r\n    var beforeMatrix = createIdentityMatrix(n);\r\n    var offsetMatrix = createIdentityMatrix(n);\r\n    var length = matrixes.length;\r\n    var nextRootMatrixes = rootMatrixes.map(function (info) {\r\n        return __assign(__assign({}, info), { matrix: info.matrix ? __spreadArray([], __read(info.matrix), false) : undefined });\r\n    }).reverse();\r\n    matrixes.reverse();\r\n    if (!is3d && isNext3d) {\r\n        targetMatrix = convertDimension(targetMatrix, 3, 4);\r\n        convert3DMatrixes(matrixes);\r\n    }\r\n    if (!isRoot3d && isNext3d) {\r\n        convert3DMatrixes(nextRootMatrixes);\r\n    }\r\n    // rootMatrix = (...) -> container -> offset -> absolute -> offset -> absolute(targetMatrix)\r\n    // rootMatrixBeforeOffset = lastOffsetMatrix -> (...) -> container\r\n    // beforeMatrix = (... -> container -> offset -> absolute) -> offset -> absolute(targetMatrix)\r\n    // offsetMatrix = (... -> container -> offset -> absolute -> offset) -> absolute(targetMatrix)\r\n    nextRootMatrixes.forEach(function (info) {\r\n        rootMatrix = multiply(rootMatrix, info.matrix, n);\r\n    });\r\n    var originalRootContainer = rootContainer || getDocumentBody(target);\r\n    var endContainer = ((_a = nextRootMatrixes[0]) === null || _a === void 0 ? void 0 : _a.target)\r\n        || getOffsetInfo(originalRootContainer, originalRootContainer, true).offsetParent;\r\n    var rootMatrixBeforeOffset = nextRootMatrixes.slice(1).reduce(function (matrix, info) {\r\n        return multiply(matrix, info.matrix, n);\r\n    }, createIdentityMatrix(n));\r\n    matrixes.forEach(function (info, i) {\r\n        if (length - 2 === i) {\r\n            // length - 3\r\n            beforeMatrix = allMatrix.slice();\r\n        }\r\n        if (length - 1 === i) {\r\n            // length - 2\r\n            offsetMatrix = allMatrix.slice();\r\n        }\r\n        // calculate for SVGElement\r\n        if (!info.matrix) {\r\n            var nextInfo = matrixes[i + 1];\r\n            var offset = getSVGOffset(info, nextInfo, endContainer, n, multiply(rootMatrixBeforeOffset, allMatrix, n));\r\n            info.matrix = createOriginMatrix(offset, n);\r\n        }\r\n        allMatrix = multiply(allMatrix, info.matrix, n);\r\n    });\r\n    var isMatrix3d = !isSVGGraphicElement && is3d;\r\n    if (!targetMatrix) {\r\n        targetMatrix = createIdentityMatrix(isMatrix3d ? 4 : 3);\r\n    }\r\n    var targetTransform = makeMatrixCSS(isSVGGraphicElement && targetMatrix.length === 16\r\n        ? convertDimension(targetMatrix, 4, 3) : targetMatrix, isMatrix3d);\r\n    var originalRootMatrix = rootMatrix;\r\n    rootMatrix = ignoreDimension(rootMatrix, n, n);\r\n    return {\r\n        hasZoom: containerZoom !== 1 || rootZoom !== 1,\r\n        hasFixed: hasFixed,\r\n        matrixes: matrixes,\r\n        rootMatrix: rootMatrix,\r\n        originalRootMatrix: originalRootMatrix,\r\n        beforeMatrix: beforeMatrix,\r\n        offsetMatrix: offsetMatrix,\r\n        allMatrix: allMatrix,\r\n        targetMatrix: targetMatrix,\r\n        targetTransform: targetTransform,\r\n        inlineTransform: target.style.transform,\r\n        transformOrigin: transformOrigin,\r\n        targetOrigin: targetOrigin,\r\n        is3d: isNext3d,\r\n        offsetContainer: offsetContainer,\r\n        offsetRootContainer: offsetRootContainer,\r\n    };\r\n}\n\nfunction calculateElementInfo(target, container, rootContainer, isAbsolute3d) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    var width = 0;\r\n    var height = 0;\r\n    var rotation = 0;\r\n    var allResult = {};\r\n    var sizes = getSize(target);\r\n    if (target) {\r\n        width = sizes.offsetWidth;\r\n        height = sizes.offsetHeight;\r\n    }\r\n    if (target) {\r\n        var result = calculateMatrixStack(target, container, rootContainer, isAbsolute3d);\r\n        var position = calculateElementPosition(result.allMatrix, result.transformOrigin, width, height);\r\n        allResult = __assign(__assign({}, result), position);\r\n        var rotationPosition = calculateElementPosition(result.allMatrix, [50, 50], 100, 100);\r\n        rotation = getRotationRad([rotationPosition.pos1, rotationPosition.pos2], rotationPosition.direction);\r\n    }\r\n    var n = isAbsolute3d ? 4 : 3;\r\n    return __assign(__assign(__assign({ hasZoom: false, width: width, height: height, rotation: rotation }, sizes), { originalRootMatrix: createIdentityMatrix(n), rootMatrix: createIdentityMatrix(n), beforeMatrix: createIdentityMatrix(n), offsetMatrix: createIdentityMatrix(n), allMatrix: createIdentityMatrix(n), targetMatrix: createIdentityMatrix(n), targetTransform: \"\", inlineTransform: \"\", transformOrigin: [0, 0], targetOrigin: [0, 0], is3d: !!isAbsolute3d, left: 0, top: 0, right: 0, bottom: 0, origin: [0, 0], pos1: [0, 0], pos2: [0, 0], pos3: [0, 0], pos4: [0, 0], direction: 1, hasFixed: false, offsetContainer: null, offsetRootContainer: null, matrixes: [] }), allResult);\r\n}\r\nfunction getElementInfo(target, container, rootContainer) {\r\n    if (rootContainer === void 0) { rootContainer = container; }\r\n    return calculateElementInfo(target, container, rootContainer, true);\r\n}\n\nfunction getMoveableTargetInfo(moveableElement, target, container, parentContainer, rootContainer, requestStyles) {\r\n    if (requestStyles === void 0) { requestStyles = []; }\r\n    var beforeDirection = 1;\r\n    var beforeOrigin = [0, 0];\r\n    var targetClientRect = resetClientRect();\r\n    var moveableClientRect = resetClientRect();\r\n    var containerClientRect = resetClientRect();\r\n    var rootContainerClientRect = resetClientRect();\r\n    var offsetDelta = [0, 0];\r\n    var style = {};\r\n    var result = calculateElementInfo(target, container, rootContainer, true);\r\n    if (target) {\r\n        var getStyle_1 = getCachedStyle(target);\r\n        requestStyles.forEach(function (name) {\r\n            style[name] = getStyle_1(name);\r\n        });\r\n        var n = result.is3d ? 4 : 3;\r\n        var beforePosition = calculateElementPosition(result.offsetMatrix, plus(result.transformOrigin, getOrigin(result.targetMatrix, n)), result.width, result.height);\r\n        beforeDirection = beforePosition.direction;\r\n        beforeOrigin = plus(beforePosition.origin, [beforePosition.left - result.left, beforePosition.top - result.top]);\r\n        rootContainerClientRect = getClientRect(result.offsetRootContainer);\r\n        var offsetContainer = getOffsetInfo(parentContainer, parentContainer, true).offsetParent\r\n            || result.offsetRootContainer;\r\n        if (result.hasZoom) {\r\n            var absoluteTargetPosition = calculateElementPosition(multiply(result.originalRootMatrix, result.allMatrix), result.transformOrigin, result.width, result.height);\r\n            var absoluteContainerPosition = calculateElementPosition(result.originalRootMatrix, getTransformOriginArray(getCachedStyle(offsetContainer)(\"transformOrigin\")).map(function (pos) { return parseFloat(pos); }), offsetContainer.offsetWidth, offsetContainer.offsetHeight);\r\n            targetClientRect = getClientRectByPosition(absoluteTargetPosition, rootContainerClientRect);\r\n            containerClientRect = getClientRectByPosition(absoluteContainerPosition, rootContainerClientRect, offsetContainer, true);\r\n            if (moveableElement) {\r\n                var left = absoluteTargetPosition.left;\r\n                var top_1 = absoluteTargetPosition.top;\r\n                moveableClientRect = getClientRectByPosition({\r\n                    left: left,\r\n                    top: top_1,\r\n                    bottom: top_1,\r\n                    right: top_1,\r\n                }, rootContainerClientRect);\r\n            }\r\n        }\r\n        else {\r\n            targetClientRect = getClientRect(target);\r\n            containerClientRect = getCachedClientRect(offsetContainer);\r\n            if (moveableElement) {\r\n                moveableClientRect = getClientRect(moveableElement);\r\n            }\r\n            var containerClientRectLeft = containerClientRect.left, containerClientRectTop = containerClientRect.top, containterClientLeft = containerClientRect.clientLeft, containerClientTop = containerClientRect.clientTop;\r\n            var clientDelta = [\r\n                targetClientRect.left - containerClientRectLeft,\r\n                targetClientRect.top - containerClientRectTop,\r\n            ];\r\n            offsetDelta = minus(calculateInversePosition(result.rootMatrix, clientDelta, 4), [containterClientLeft + result.left, containerClientTop + result.top]);\r\n        }\r\n    }\r\n    return __assign({ targetClientRect: targetClientRect, containerClientRect: containerClientRect, moveableClientRect: moveableClientRect, rootContainerClientRect: rootContainerClientRect, beforeDirection: beforeDirection, beforeOrigin: beforeOrigin, originalBeforeOrigin: beforeOrigin, target: target, style: style, offsetDelta: offsetDelta }, result);\r\n}\n\nfunction getPersistState(rect) {\r\n    var pos1 = rect.pos1, pos2 = rect.pos2, pos3 = rect.pos3, pos4 = rect.pos4;\r\n    if (!pos1 || !pos2 || !pos3 || !pos4) {\r\n        return null;\r\n    }\r\n    var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n    var posDelta = [minPos.minX, minPos.minY];\r\n    var origin = minus(rect.origin, posDelta);\r\n    pos1 = minus(pos1, posDelta);\r\n    pos2 = minus(pos2, posDelta);\r\n    pos3 = minus(pos3, posDelta);\r\n    pos4 = minus(pos4, posDelta);\r\n    return __assign(__assign({}, rect), { left: rect.left, top: rect.top, posDelta: posDelta, pos1: pos1, pos2: pos2, pos3: pos3, pos4: pos4, origin: origin, beforeOrigin: origin, \r\n        // originalBeforeOrigin: origin,\r\n        isPersisted: true });\r\n}\n\nvar MoveableManager = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableManager, _super);\r\n    function MoveableManager() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = __assign({ container: null, gestos: {}, renderLines: [\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n                [[0, 0], [0, 0]],\r\n            ], renderPoses: [[0, 0], [0, 0], [0, 0], [0, 0]], disableNativeEvent: false, posDelta: [0, 0] }, getMoveableTargetInfo(null));\r\n        _this.renderState = {};\r\n        _this.enabledAbles = [];\r\n        _this.targetAbles = [];\r\n        _this.controlAbles = [];\r\n        _this.rotation = 0;\r\n        _this.scale = [1, 1];\r\n        _this.isMoveableMounted = false;\r\n        _this.isUnmounted = false;\r\n        _this.events = {\r\n            \"mouseEnter\": null,\r\n            \"mouseLeave\": null,\r\n        };\r\n        _this._emitter = new EventEmitter();\r\n        _this._prevOriginalDragTarget = null;\r\n        _this._originalDragTarget = null;\r\n        _this._prevDragTarget = null;\r\n        _this._dragTarget = null;\r\n        _this._prevPropTarget = null;\r\n        _this._propTarget = null;\r\n        _this._prevDragArea = false;\r\n        _this._isPropTargetChanged = false;\r\n        _this._hasFirstTarget = false;\r\n        _this._reiszeObserver = null;\r\n        _this._observerId = 0;\r\n        _this._mutationObserver = null;\r\n        _this._rootContainer = null;\r\n        _this._viewContainer = null;\r\n        _this._viewClassNames = [];\r\n        _this._store = {};\r\n        _this.checkUpdateRect = function () {\r\n            if (_this.isDragging()) {\r\n                return;\r\n            }\r\n            var parentMoveable = _this.props.parentMoveable;\r\n            if (parentMoveable) {\r\n                parentMoveable.checkUpdateRect();\r\n                return;\r\n            }\r\n            cancelAnimationFrame(_this._observerId);\r\n            _this._observerId = requestAnimationFrame(function () {\r\n                if (_this.isDragging()) {\r\n                    return;\r\n                }\r\n                _this.updateRect();\r\n            });\r\n        };\r\n        _this._onPreventClick = function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            // removeEvent(window, \"click\", this._onPreventClick, true);\r\n        };\r\n        return _this;\r\n    }\r\n    MoveableManager.prototype.render = function () {\r\n        var props = this.props;\r\n        var state = this.getState();\r\n        var parentPosition = props.parentPosition, className = props.className, propsTarget = props.target, zoom = props.zoom, cspNonce = props.cspNonce, translateZ = props.translateZ, ControlBoxElement = props.cssStyled, groupable = props.groupable, linePadding = props.linePadding, controlPadding = props.controlPadding;\r\n        this._checkUpdateRootContainer();\r\n        this.checkUpdate();\r\n        this.updateRenderPoses();\r\n        var _a = __read(parentPosition || [0, 0], 2), parentLeft = _a[0], parentTop = _a[1];\r\n        var left = state.left, top = state.top, stateTarget = state.target, direction = state.direction, hasFixed = state.hasFixed, offsetDelta = state.offsetDelta;\r\n        var groupTargets = props.targets;\r\n        var isDragging = this.isDragging();\r\n        var ableAttributes = {};\r\n        this.getEnabledAbles().forEach(function (able) {\r\n            ableAttributes[\"data-able-\".concat(able.name.toLowerCase())] = true;\r\n        });\r\n        var ableClassName = this._getAbleClassName();\r\n        var isDisplay = (groupTargets && groupTargets.length && (stateTarget || groupable))\r\n            || propsTarget\r\n            || (!this._hasFirstTarget && this.state.isPersisted);\r\n        var isVisible = this.controlBox || this.props.firstRenderState || this.props.persistData;\r\n        var translate = [left - parentLeft, top - parentTop];\r\n        if (!groupable && props.useAccuratePosition) {\r\n            translate[0] += offsetDelta[0];\r\n            translate[1] += offsetDelta[1];\r\n        }\r\n        var style = {\r\n            \"position\": hasFixed ? \"fixed\" : \"absolute\",\r\n            \"display\": isDisplay ? \"block\" : \"none\",\r\n            \"visibility\": isVisible ? \"visible\" : \"hidden\",\r\n            \"transform\": \"translate3d(\".concat(translate[0], \"px, \").concat(translate[1], \"px, \").concat(translateZ, \")\"),\r\n            \"--zoom\": zoom,\r\n            \"--zoompx\": \"\".concat(zoom, \"px\"),\r\n        };\r\n        if (linePadding) {\r\n            style[\"--moveable-line-padding\"] = linePadding;\r\n        }\r\n        if (controlPadding) {\r\n            style[\"--moveable-control-padding\"] = controlPadding;\r\n        }\r\n        return (React.createElement(ControlBoxElement, __assign({ cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: \"\".concat(prefix(\"control-box\", direction === -1 ? \"reverse\" : \"\", isDragging ? \"dragging\" : \"\"), \" \").concat(ableClassName, \" \").concat(className) }, ableAttributes, { onClick: this._onPreventClick, style: style }),\r\n            this.renderAbles(),\r\n            this._renderLines()));\r\n    };\r\n    MoveableManager.prototype.componentDidMount = function () {\r\n        this.isMoveableMounted = true;\r\n        this.isUnmounted = false;\r\n        var props = this.props;\r\n        var parentMoveable = props.parentMoveable, container = props.container;\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateTargets();\r\n        this._updateNativeEvents();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(this.props);\r\n        if (!container && !parentMoveable && !this.state.isPersisted) {\r\n            this.updateRect(\"\", false, false);\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    MoveableManager.prototype.componentDidUpdate = function (prevProps) {\r\n        this._checkUpdateRootContainer();\r\n        this._checkUpdateViewContainer();\r\n        this._updateNativeEvents();\r\n        this._updateTargets();\r\n        this._updateEvents();\r\n        this.updateCheckInput();\r\n        this._updateObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype.componentWillUnmount = function () {\r\n        var _a, _b;\r\n        this.isMoveableMounted = false;\r\n        this.isUnmounted = true;\r\n        this._emitter.off();\r\n        (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n        (_b = this._mutationObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames([]);\r\n        }\r\n        unsetGesto(this, false);\r\n        unsetGesto(this, true);\r\n        var events = this.events;\r\n        for (var name_1 in events) {\r\n            var manager = events[name_1];\r\n            manager && manager.destroy();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getTargets = function () {\r\n        var target = this.props.target;\r\n        return target ? [target] : [];\r\n    };\r\n    /**\r\n     * Get the able used in MoveableManager.\r\n     * @method Moveable#getAble\r\n     * @param - able name\r\n     */\r\n    MoveableManager.prototype.getAble = function (ableName) {\r\n        var ables = this.props.ables || [];\r\n        return find(ables, function (able) { return able.name === ableName; });\r\n    };\r\n    MoveableManager.prototype.getContainer = function () {\r\n        var _a = this.props, parentMoveable = _a.parentMoveable, wrapperMoveable = _a.wrapperMoveable, container = _a.container;\r\n        return container\r\n            || (wrapperMoveable && wrapperMoveable.getContainer())\r\n            || (parentMoveable && parentMoveable.getContainer())\r\n            || this.controlBox.parentElement;\r\n    };\r\n    /**\r\n     * Returns the element of the control box.\r\n     * @method Moveable#getControlBoxElement\r\n     */\r\n    MoveableManager.prototype.getControlBoxElement = function () {\r\n        return this.controlBox;\r\n    };\r\n    /**\r\n     * Target element to be dragged in moveable\r\n     * @method Moveable#getDragElement\r\n     */\r\n    MoveableManager.prototype.getDragElement = function () {\r\n        return this._dragTarget;\r\n    };\r\n    /**\r\n     * Check if the target is an element included in the moveable.\r\n     * @method Moveable#isMoveableElement\r\n     * @param - the target\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"click\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *         moveable.target = e.target;\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isMoveableElement = function (target) {\r\n        var _a;\r\n        return target && (((_a = target.getAttribute) === null || _a === void 0 ? void 0 : _a.call(target, \"class\")) || \"\").indexOf(PREFIX) > -1;\r\n    };\r\n    /**\r\n     * You can drag start the Moveable through the external `MouseEvent`or `TouchEvent`. (Angular: ngDragStart)\r\n     * @method Moveable#dragStart\r\n     * @param - external `MouseEvent`or `TouchEvent`\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (!moveable.isMoveableElement(e.target)) {\r\n     *          moveable.dragStart(e);\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto && checkMoveableTarget(this)({ inputEvent: e }, target)) {\r\n            if (!targetGesto.isFlag()) {\r\n                targetGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        else if (controlGesto && this.isMoveableElement(target)) {\r\n            if (!controlGesto.isFlag()) {\r\n                controlGesto.triggerDragStart(e);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Hit test an element or rect on a moveable target.\r\n     * (100% = 100)\r\n     * @method Moveable#hitTest\r\n     * @param - element or rect to test\r\n     * @return - Get hit test rate (rate > 0 is hitted)\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.hitTest(e.target) > 0) {\r\n     *          console.log(\"hiited\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.hitTest = function (el) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return 0;\r\n        }\r\n        var rect;\r\n        if (isNode(el)) {\r\n            var clientRect = el.getBoundingClientRect();\r\n            rect = {\r\n                left: clientRect.left,\r\n                top: clientRect.top,\r\n                width: clientRect.width,\r\n                height: clientRect.height,\r\n            };\r\n        }\r\n        else {\r\n            rect = __assign({ width: 0, height: 0 }, el);\r\n        }\r\n        var rectLeft = rect.left, rectTop = rect.top, rectWidth = rect.width, rectHeight = rect.height;\r\n        var points = fitPoints([pos1, pos2, pos4, pos3], targetClientRect);\r\n        var size = getOverlapSize(points, [\r\n            [rectLeft, rectTop],\r\n            [rectLeft + rectWidth, rectTop],\r\n            [rectLeft + rectWidth, rectTop + rectHeight],\r\n            [rectLeft, rectTop + rectHeight],\r\n        ]);\r\n        var totalSize = getAreaSize(points);\r\n        if (!size || !totalSize) {\r\n            return 0;\r\n        }\r\n        return Math.min(100, size / totalSize * 100);\r\n    };\r\n    /**\r\n     * Whether the coordinates are inside Moveable\r\n     * @method Moveable#isInside\r\n     * @param - x coordinate\r\n     * @param - y coordinate\r\n     * @return - True if the coordinate is in moveable or false\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * document.body.addEventListener(\"mousedown\", e => {\r\n     *     if (moveable.isInside(e.clientX, e.clientY)) {\r\n     *          console.log(\"inside\");\r\n     *     }\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isInside = function (clientX, clientY) {\r\n        var _a = this.state, target = _a.target, pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4, targetClientRect = _a.targetClientRect;\r\n        if (!target) {\r\n            return false;\r\n        }\r\n        return isInside([clientX, clientY], fitPoints([pos1, pos2, pos4, pos3], targetClientRect));\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of all elements change, update the shape of the moveable.\r\n     * @method Moveable#updateRect\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * window.addEventListener(\"resize\", e => {\r\n     *     moveable.updateRect();\r\n     * });\r\n     */\r\n    MoveableManager.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var props = this.props;\r\n        var isSingle = !props.parentPosition && !props.wrapperMoveable;\r\n        if (isSingle) {\r\n            setStoreCache(true);\r\n        }\r\n        var parentMoveable = props.parentMoveable;\r\n        var state = this.state;\r\n        var target = (state.target || props.target);\r\n        var container = this.getContainer();\r\n        var rootContainer = parentMoveable\r\n            ? parentMoveable._rootContainer\r\n            : this._rootContainer;\r\n        var nextState = getMoveableTargetInfo(this.controlBox, target, container, container, rootContainer || container, this._getRequestStyles());\r\n        if (!target && this._hasFirstTarget && props.persistData) {\r\n            var persistState = getPersistState(props.persistData);\r\n            for (var name_2 in persistState) {\r\n                nextState[name_2] = persistState[name_2];\r\n            }\r\n        }\r\n        if (isSingle) {\r\n            setStoreCache();\r\n        }\r\n        this.updateState(nextState, parentMoveable ? false : isSetState);\r\n    };\r\n    /**\r\n     * Check if the moveable state is being dragged.\r\n     * @method Moveable#isDragging\r\n     * @param - If you want to check if able is dragging, specify ableName.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // false\r\n     * console.log(moveable.isDragging());\r\n     *\r\n     * moveable.on(\"drag\", () => {\r\n     *   // true\r\n     *   console.log(moveable.isDragging());\r\n     * });\r\n     */\r\n    MoveableManager.prototype.isDragging = function (ableName) {\r\n        var _a, _b;\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        if (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = targetGesto.getEventData();\r\n            return !!((_a = data[ableName]) === null || _a === void 0 ? void 0 : _a.isEventStart);\r\n        }\r\n        if (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag()) {\r\n            if (!ableName) {\r\n                return true;\r\n            }\r\n            var data = controlGesto.getEventData();\r\n            return !!((_b = data[ableName]) === null || _b === void 0 ? void 0 : _b.isEventStart);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * If the width, height, left, and top of the only target change, update the shape of the moveable.\r\n     * Use `.updateRect()` method\r\n     * @method Moveable#updateTarget\r\n     * @deprecated\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.updateTarget();\r\n     */\r\n    MoveableManager.prototype.updateTarget = function (type) {\r\n        this.updateRect(type, true);\r\n    };\r\n    /**\r\n     * You can get the vertex information, position and offset size information of the target based on the container.\r\n     * @method Moveable#getRect\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const rectInfo = moveable.getRect();\r\n     */\r\n    MoveableManager.prototype.getRect = function () {\r\n        var state = this.state;\r\n        var poses = getAbsolutePosesByState(this.state);\r\n        var _a = __read(poses, 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        var rect = getRect(poses);\r\n        var offsetWidth = state.width, offsetHeight = state.height;\r\n        var width = rect.width, height = rect.height, left = rect.left, top = rect.top;\r\n        var statePos = [state.left, state.top];\r\n        var origin = plus(statePos, state.origin);\r\n        var beforeOrigin = plus(statePos, state.beforeOrigin);\r\n        var transformOrigin = state.transformOrigin;\r\n        return {\r\n            width: width,\r\n            height: height,\r\n            left: left,\r\n            top: top,\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            offsetWidth: offsetWidth,\r\n            offsetHeight: offsetHeight,\r\n            beforeOrigin: beforeOrigin,\r\n            origin: origin,\r\n            transformOrigin: transformOrigin,\r\n            rotation: this.getRotation(),\r\n        };\r\n    };\r\n    /**\r\n     * Get a manager that manages the moveable's state and props.\r\n     * @method Moveable#getManager\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * const manager = moveable.getManager(); // real moveable class instance\r\n     */\r\n    MoveableManager.prototype.getManager = function () {\r\n        return this;\r\n    };\r\n    /**\r\n     * You can stop the dragging currently in progress through a method from outside.\r\n     * @method Moveable#stopDrag\r\n     * @return - The Rect Info\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.stopDrag();\r\n     */\r\n    MoveableManager.prototype.stopDrag = function (type) {\r\n        if (!type || type === \"target\") {\r\n            var gesto = this.targetGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, false);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n        if (!type || type === \"control\") {\r\n            var gesto = this.controlGesto;\r\n            if ((gesto === null || gesto === void 0 ? void 0 : gesto.isIdle()) === false) {\r\n                unsetAbles(this, true);\r\n            }\r\n            gesto === null || gesto === void 0 ? void 0 : gesto.stop();\r\n        }\r\n    };\r\n    MoveableManager.prototype.getRotation = function () {\r\n        var _a = this.state, pos1 = _a.pos1, pos2 = _a.pos2, direction = _a.direction;\r\n        return getAbsoluteRotation(pos1, pos2, direction);\r\n    };\r\n    /**\r\n     * Request able through a method rather than an event.\r\n     * At the moment of execution, requestStart is executed,\r\n     * and then request and requestEnd can be executed through Requester.\r\n     * @method Moveable#request\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Draggable.html#request|Draggable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Resizable.html#request|Resizable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Scalable.html#request|Scalable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.Rotatable.html#request|Rotatable Requester}\r\n     * @see {@link https://daybrush.com/moveable/release/latest/doc/Moveable.OriginDraggable.html#request|OriginDraggable Requester}\r\n     * @param - ableName\r\n     * @param - request to be able params.\r\n     * @param - If isInstant is true, request and requestEnd are executed immediately.\r\n     * @return - Able Requester. If there is no request in able, nothing will work.\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * // Instantly Request (requestStart - request - requestEnd)\r\n     * moveable.request(\"draggable\", { deltaX: 10, deltaY: 10 }, true);\r\n     *\r\n     * // Start move\r\n     * const requester = moveable.request(\"draggable\");\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.request({ deltaX: 10, deltaY: 10 });\r\n     * requester.requestEnd();\r\n     */\r\n    MoveableManager.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var self = this;\r\n        var props = self.props;\r\n        var manager = props.parentMoveable || props.wrapperMoveable || self;\r\n        var allAbles = manager.props.ables;\r\n        var groupable = props.groupable;\r\n        var requsetAble = find(allAbles, function (able) { return able.name === ableName; });\r\n        if (this.isDragging() || !requsetAble || !requsetAble.request) {\r\n            return {\r\n                request: function () {\r\n                    return this;\r\n                },\r\n                requestEnd: function () {\r\n                    return this;\r\n                },\r\n            };\r\n        }\r\n        var ableRequester = requsetAble.request(self);\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var ableType = ableRequester.isControl ? \"controlAbles\" : \"targetAbles\";\r\n        var eventAffix = \"\".concat((groupable ? \"Group\" : \"\")).concat(ableRequester.isControl ? \"Control\" : \"\");\r\n        var moveableAbles = __spreadArray([], __read(manager[ableType]), false);\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"\", __assign(__assign({}, ableRequester.request(ableParam)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n            requestEnd: function () {\r\n                triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"End\", __assign(__assign({}, ableRequester.requestEnd()), { requestAble: ableName, isRequest: true }), requestInstant);\r\n                return requester;\r\n            },\r\n        };\r\n        triggerAble(self, moveableAbles, [\"drag\"], eventAffix, \"Start\", __assign(__assign({}, ableRequester.requestStart(param)), { requestAble: ableName, isRequest: true }), requestInstant);\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    /**\r\n     * moveable is the top level that manages targets\r\n     * `Single`: MoveableManager instance\r\n     * `Group`: MoveableGroup instance\r\n     * `IndividualGroup`: MoveableIndividaulGroup instance\r\n     * Returns leaf target MoveableManagers.\r\n     */\r\n    MoveableManager.prototype.getMoveables = function () {\r\n        return [this];\r\n    };\r\n    /**\r\n     * Remove the Moveable object and the events.\r\n     * @method Moveable#destroy\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body);\r\n     *\r\n     * moveable.destroy();\r\n     */\r\n    MoveableManager.prototype.destroy = function () {\r\n        this.componentWillUnmount();\r\n    };\r\n    MoveableManager.prototype.updateRenderPoses = function () {\r\n        var state = this.getState();\r\n        var props = this.props;\r\n        var padding = props.padding;\r\n        var originalBeforeOrigin = state.originalBeforeOrigin, transformOrigin = state.transformOrigin, allMatrix = state.allMatrix, is3d = state.is3d, pos1 = state.pos1, pos2 = state.pos2, pos3 = state.pos3, pos4 = state.pos4, stateLeft = state.left, stateTop = state.top, isPersisted = state.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        if (!padding && zoom <= 1) {\r\n            state.renderPoses = [\r\n                pos1,\r\n                pos2,\r\n                pos3,\r\n                pos4,\r\n            ];\r\n            state.renderLines = [\r\n                [pos1, pos2],\r\n                [pos2, pos4],\r\n                [pos4, pos3],\r\n                [pos3, pos1],\r\n            ];\r\n            return;\r\n        }\r\n        var _a = getPaddingBox(padding || {}), left = _a.left, top = _a.top, bottom = _a.bottom, right = _a.right;\r\n        var n = is3d ? 4 : 3;\r\n        // const clipPathInfo = getClipPath(\r\n        //     props.target,\r\n        //     offsetWidth,\r\n        //     offsetHeight,\r\n        // );\r\n        // if (clipPathInfo) {\r\n        //     left -= Math.max(0, clipPathInfo.left);\r\n        //     top -= Math.max(0, clipPathInfo.top);\r\n        //     bottom -= Math.max(0, offsetHeight - clipPathInfo.bottom);\r\n        //     right -= Math.max(0, offsetWidth - clipPathInfo.right);\r\n        // }\r\n        var absoluteOrigin = [];\r\n        if (isPersisted) {\r\n            absoluteOrigin = transformOrigin;\r\n        }\r\n        else if (this.controlBox && props.groupable) {\r\n            absoluteOrigin = originalBeforeOrigin;\r\n        }\r\n        else {\r\n            absoluteOrigin = plus(originalBeforeOrigin, [stateLeft, stateTop]);\r\n        }\r\n        var nextMatrix = multiplies(n, createOriginMatrix(absoluteOrigin.map(function (v) { return -v; }), n), allMatrix, createOriginMatrix(transformOrigin, n));\r\n        var renderPos1 = calculatePadding(nextMatrix, pos1, [-left, -top], n);\r\n        var renderPos2 = calculatePadding(nextMatrix, pos2, [right, -top], n);\r\n        var renderPos3 = calculatePadding(nextMatrix, pos3, [-left, bottom], n);\r\n        var renderPos4 = calculatePadding(nextMatrix, pos4, [right, bottom], n);\r\n        state.renderPoses = [\r\n            renderPos1,\r\n            renderPos2,\r\n            renderPos3,\r\n            renderPos4,\r\n        ];\r\n        state.renderLines = [\r\n            [renderPos1, renderPos2],\r\n            [renderPos2, renderPos4],\r\n            [renderPos4, renderPos3],\r\n            [renderPos3, renderPos1],\r\n        ];\r\n        if (zoom) {\r\n            var zoomOffset = zoom / 2;\r\n            state.renderLines = [\r\n                [\r\n                    calculatePadding(nextMatrix, pos1, [-left - zoomOffset, -top], n),\r\n                    calculatePadding(nextMatrix, pos2, [right + zoomOffset, -top], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos2, [right, -top - zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos4, [right, bottom + zoomOffset], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos4, [right + zoomOffset, bottom], n),\r\n                    calculatePadding(nextMatrix, pos3, [-left - zoomOffset, bottom], n),\r\n                ],\r\n                [\r\n                    calculatePadding(nextMatrix, pos3, [-left, bottom + zoomOffset], n),\r\n                    calculatePadding(nextMatrix, pos1, [-left, -top - zoomOffset], n),\r\n                ],\r\n            ];\r\n        }\r\n    };\r\n    MoveableManager.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        var _a = this.props, target = _a.target, container = _a.container, parentMoveable = _a.parentMoveable;\r\n        var _b = this.state, stateTarget = _b.target, stateContainer = _b.container;\r\n        if (!stateTarget && !target) {\r\n            return;\r\n        }\r\n        this.updateAbles();\r\n        var isTargetChanged = !equals(stateTarget, target);\r\n        var isChanged = isTargetChanged || !equals(stateContainer, container);\r\n        if (!isChanged) {\r\n            return;\r\n        }\r\n        var moveableContainer = container || this.controlBox;\r\n        if (moveableContainer) {\r\n            this.unsetAbles();\r\n        }\r\n        this.updateState({ target: target, container: container });\r\n        if (!parentMoveable && moveableContainer) {\r\n            this.updateRect(\"End\", false, false);\r\n        }\r\n        this._isPropTargetChanged = isTargetChanged;\r\n    };\r\n    MoveableManager.prototype.waitToChangeTarget = function () {\r\n        return new Promise(function () { });\r\n    };\r\n    MoveableManager.prototype.triggerEvent = function (name, e) {\r\n        var props = this.props;\r\n        this._emitter.trigger(name, e);\r\n        if (props.parentMoveable && e.isRequest && !e.isRequestChild) {\r\n            return props.parentMoveable.triggerEvent(name, e, true);\r\n        }\r\n        var callback = props[name];\r\n        return callback && callback(e);\r\n    };\r\n    MoveableManager.prototype.useCSS = function (tag, css) {\r\n        var customStyleMap = this.props.customStyledMap;\r\n        var key = tag + css;\r\n        if (!customStyleMap[key]) {\r\n            customStyleMap[key] = styled(tag, css);\r\n        }\r\n        return customStyleMap[key];\r\n    };\r\n    MoveableManager.prototype.getState = function () {\r\n        var _a;\r\n        var props = this.props;\r\n        if (props.target || ((_a = props.targets) === null || _a === void 0 ? void 0 : _a.length)) {\r\n            this._hasFirstTarget = true;\r\n        }\r\n        var hasControlBox = this.controlBox;\r\n        var persistData = props.persistData;\r\n        var firstRenderState = props.firstRenderState;\r\n        if (firstRenderState && !hasControlBox) {\r\n            return firstRenderState;\r\n        }\r\n        if (!this._hasFirstTarget && persistData) {\r\n            var persistState = getPersistState(persistData);\r\n            if (persistState) {\r\n                this.updateState(persistState, false);\r\n                return this.state;\r\n            }\r\n        }\r\n        this.state.isPersisted = false;\r\n        return this.state;\r\n    };\r\n    MoveableManager.prototype.updateSelectors = function () { };\r\n    MoveableManager.prototype.unsetAbles = function () {\r\n        var _this = this;\r\n        this.targetAbles.forEach(function (able) {\r\n            if (able.unset) {\r\n                able.unset(_this);\r\n            }\r\n        });\r\n    };\r\n    MoveableManager.prototype.updateAbles = function (ables, eventAffix) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        if (eventAffix === void 0) { eventAffix = \"\"; }\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var enabledAbles = this.getEnabledAbles(ables);\r\n        var dragStart = \"drag\".concat(eventAffix, \"Start\");\r\n        var pinchStart = \"pinch\".concat(eventAffix, \"Start\");\r\n        var dragControlStart = \"drag\".concat(eventAffix, \"ControlStart\");\r\n        var targetAbles = filterAbles(enabledAbles, [dragStart, pinchStart], triggerAblesSimultaneously);\r\n        var controlAbles = filterAbles(enabledAbles, [dragControlStart], triggerAblesSimultaneously);\r\n        this.enabledAbles = enabledAbles;\r\n        this.targetAbles = targetAbles;\r\n        this.controlAbles = controlAbles;\r\n    };\r\n    MoveableManager.prototype.updateState = function (nextState, isSetState) {\r\n        if (isSetState) {\r\n            if (this.isUnmounted) {\r\n                return;\r\n            }\r\n            this.setState(nextState);\r\n        }\r\n        else {\r\n            var state = this.state;\r\n            for (var name_3 in nextState) {\r\n                state[name_3] = nextState[name_3];\r\n            }\r\n        }\r\n    };\r\n    MoveableManager.prototype.getEnabledAbles = function (ables) {\r\n        if (ables === void 0) { ables = this.props.ables; }\r\n        var props = this.props;\r\n        return ables.filter(function (able) { return able && ((able.always && props[able.name] !== false)\r\n            || props[able.name]); });\r\n    };\r\n    MoveableManager.prototype.renderAbles = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var triggerAblesSimultaneously = props.triggerAblesSimultaneously;\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        this.renderState = {};\r\n        return groupByMap(flat(filterAbles(this.getEnabledAbles(), [\"render\"], triggerAblesSimultaneously).map(function (_a) {\r\n            var render = _a.render;\r\n            return render(_this, Renderer) || [];\r\n        })).filter(function (el) { return el; }), function (_a) {\r\n            var key = _a.key;\r\n            return key;\r\n        }).map(function (group) { return group[0]; });\r\n    };\r\n    MoveableManager.prototype.updateCheckInput = function () {\r\n        this.targetGesto && (this.targetGesto.options.checkInput = this.props.checkInput);\r\n    };\r\n    MoveableManager.prototype._getRequestStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, __spreadArray([], __read((this.props.requestStyles || [])), false));\r\n        return styleNames;\r\n    };\r\n    MoveableManager.prototype._updateObserver = function (prevProps) {\r\n        this._updateResizeObserver(prevProps);\r\n        this._updateMutationObserver(prevProps);\r\n    };\r\n    MoveableManager.prototype._updateEvents = function () {\r\n        var hasTargetAble = this.targetAbles.length;\r\n        var hasControlAble = this.controlAbles.length;\r\n        var target = this._dragTarget;\r\n        var isUnset = (!hasTargetAble && this.targetGesto)\r\n            || this._isTargetChanged(true);\r\n        if (isUnset) {\r\n            unsetGesto(this, false);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (!hasControlAble) {\r\n            unsetGesto(this, true);\r\n        }\r\n        if (target && hasTargetAble && !this.targetGesto) {\r\n            this.targetGesto = getTargetAbleGesto(this, target, \"\");\r\n        }\r\n        if (!this.controlGesto && hasControlAble) {\r\n            this.controlGesto = getControlAbleGesto(this, \"Control\");\r\n        }\r\n    };\r\n    MoveableManager.prototype._updateTargets = function () {\r\n        var props = this.props;\r\n        this._prevPropTarget = this._propTarget;\r\n        this._prevDragTarget = this._dragTarget;\r\n        this._prevOriginalDragTarget = this._originalDragTarget;\r\n        this._prevDragArea = props.dragArea;\r\n        this._propTarget = props.target;\r\n        this._originalDragTarget = props.dragTarget || props.target;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableManager.prototype._renderLines = function () {\r\n        var props = this.props;\r\n        var _a = props, zoom = _a.zoom, hideDefaultLines = _a.hideDefaultLines, hideChildMoveableDefaultLines = _a.hideChildMoveableDefaultLines, parentMoveable = _a.parentMoveable;\r\n        if (hideDefaultLines || (parentMoveable && hideChildMoveableDefaultLines)) {\r\n            return [];\r\n        }\r\n        var state = this.getState();\r\n        var Renderer = {\r\n            createElement: createElement,\r\n        };\r\n        return state.renderLines.map(function (line, i) {\r\n            return renderLine(Renderer, \"\", line[0], line[1], zoom, \"render-line-\".concat(i));\r\n        });\r\n    };\r\n    MoveableManager.prototype._isTargetChanged = function (useDragArea) {\r\n        var props = this.props;\r\n        var nextTarget = props.dragTarget || props.target;\r\n        var prevTarget = this._prevOriginalDragTarget;\r\n        var prevDragArea = this._prevDragArea;\r\n        var dragArea = props.dragArea;\r\n        // check target without dragArea\r\n        var isDragTargetChanged = !dragArea && prevTarget !== nextTarget;\r\n        var isDragAreaChanged = (useDragArea || dragArea) && prevDragArea !== dragArea;\r\n        return isDragTargetChanged || isDragAreaChanged || this._prevPropTarget != this._propTarget;\r\n    };\r\n    MoveableManager.prototype._updateNativeEvents = function () {\r\n        var _this = this;\r\n        var props = this.props;\r\n        var target = props.dragArea ? this.areaElement : this.state.target;\r\n        var events = this.events;\r\n        var eventKeys = getKeys(events);\r\n        if (this._isTargetChanged()) {\r\n            for (var eventName in events) {\r\n                var manager = events[eventName];\r\n                manager && manager.destroy();\r\n                events[eventName] = null;\r\n            }\r\n        }\r\n        if (!target) {\r\n            return;\r\n        }\r\n        var enabledAbles = this.enabledAbles;\r\n        eventKeys.forEach(function (eventName) {\r\n            var ables = filterAbles(enabledAbles, [eventName]);\r\n            var hasAbles = ables.length > 0;\r\n            var manager = events[eventName];\r\n            if (!hasAbles) {\r\n                if (manager) {\r\n                    manager.destroy();\r\n                    events[eventName] = null;\r\n                }\r\n                return;\r\n            }\r\n            if (!manager) {\r\n                manager = new EventManager(target, _this, eventName);\r\n                events[eventName] = manager;\r\n            }\r\n            manager.setAbles(ables);\r\n        });\r\n    };\r\n    MoveableManager.prototype._checkUpdateRootContainer = function () {\r\n        var rootContainer = this.props.rootContainer;\r\n        if (!this._rootContainer && rootContainer) {\r\n            this._rootContainer = getRefTarget(rootContainer, true);\r\n        }\r\n    };\r\n    MoveableManager.prototype._checkUpdateViewContainer = function () {\r\n        var viewContainerOption = this.props.viewContainer;\r\n        if (!this._viewContainer && viewContainerOption) {\r\n            this._viewContainer = getRefTarget(viewContainerOption, true);\r\n        }\r\n        var viewContainer = this._viewContainer;\r\n        if (viewContainer) {\r\n            this._changeAbleViewClassNames(__spreadArray(__spreadArray([], __read(this._getAbleViewClassNames()), false), [\r\n                this.isDragging() ? VIEW_DRAGGING : \"\",\r\n            ], false));\r\n        }\r\n    };\r\n    MoveableManager.prototype._changeAbleViewClassNames = function (classNames) {\r\n        var viewContainer = this._viewContainer;\r\n        var nextClassNames = groupBy(classNames.filter(Boolean), function (el) { return el; }).map(function (_a) {\r\n            var _b = __read(_a, 1), className = _b[0];\r\n            return className;\r\n        });\r\n        var prevClassNames = this._viewClassNames;\r\n        var _a = diff$1(prevClassNames, nextClassNames), removed = _a.removed, added = _a.added;\r\n        removed.forEach(function (index) {\r\n            removeClass(viewContainer, prevClassNames[index]);\r\n        });\r\n        added.forEach(function (index) {\r\n            addClass(viewContainer, nextClassNames[index]);\r\n        });\r\n        this._viewClassNames = nextClassNames;\r\n    };\r\n    MoveableManager.prototype._getAbleViewClassNames = function () {\r\n        var _this = this;\r\n        return (this.getEnabledAbles().map(function (able) {\r\n            var _a;\r\n            return (((_a = able.viewClassName) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\");\r\n        }).join(\" \") + \" \".concat(this._getAbleClassName(\"-view\"))).split(/\\s+/g);\r\n    };\r\n    MoveableManager.prototype._getAbleClassName = function (classPrefix) {\r\n        var _this = this;\r\n        if (classPrefix === void 0) { classPrefix = \"\"; }\r\n        var ables = this.getEnabledAbles();\r\n        var targetGesto = this.targetGesto;\r\n        var controlGesto = this.controlGesto;\r\n        var targetGestoData = (targetGesto === null || targetGesto === void 0 ? void 0 : targetGesto.isFlag())\r\n            ? targetGesto.getEventData() : {};\r\n        var controlGestoData = (controlGesto === null || controlGesto === void 0 ? void 0 : controlGesto.isFlag())\r\n            ? controlGesto.getEventData() : {};\r\n        return ables.map(function (able) {\r\n            var _a, _b, _c;\r\n            var name = able.name;\r\n            var className = ((_a = able.className) === null || _a === void 0 ? void 0 : _a.call(able, _this)) || \"\";\r\n            if (((_b = targetGestoData[name]) === null || _b === void 0 ? void 0 : _b.isEventStart)\r\n                || ((_c = controlGestoData[name]) === null || _c === void 0 ? void 0 : _c.isEventStart)) {\r\n                className += \" \".concat(prefix(\"\".concat(name).concat(classPrefix, \"-dragging\")));\r\n            }\r\n            return className.trim();\r\n        }).filter(Boolean).join(\" \");\r\n    };\r\n    MoveableManager.prototype._updateResizeObserver = function (prevProps) {\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.ResizeObserver || !target || !props.useResizeObserver) {\r\n            (_a = this._reiszeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._reiszeObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.ResizeObserver(this.checkUpdateRect);\r\n        observer.observe(target, {\r\n            box: \"border-box\",\r\n        });\r\n        this._reiszeObserver = observer;\r\n    };\r\n    MoveableManager.prototype._updateMutationObserver = function (prevProps) {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var target = props.target;\r\n        var win = getWindow(this.getControlBoxElement());\r\n        if (!win.MutationObserver || !target || !props.useMutationObserver) {\r\n            (_a = this._mutationObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n            return;\r\n        }\r\n        if (prevProps.target === target && this._mutationObserver) {\r\n            return;\r\n        }\r\n        var observer = new win.MutationObserver(function (records) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var records_1 = __values(records), records_1_1 = records_1.next(); !records_1_1.done; records_1_1 = records_1.next()) {\r\n                    var mutation = records_1_1.value;\r\n                    if (mutation.type === \"attributes\" && mutation.attributeName === \"style\") {\r\n                        _this.checkUpdateRect();\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (records_1_1 && !records_1_1.done && (_a = records_1.return)) _a.call(records_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        });\r\n        observer.observe(target, {\r\n            attributes: true,\r\n        });\r\n        this._mutationObserver = observer;\r\n    };\r\n    MoveableManager.defaultProps = {\r\n        dragTargetSelf: false,\r\n        target: null,\r\n        dragTarget: null,\r\n        container: null,\r\n        rootContainer: null,\r\n        origin: true,\r\n        parentMoveable: null,\r\n        wrapperMoveable: null,\r\n        isWrapperMounted: false,\r\n        parentPosition: null,\r\n        warpSelf: false,\r\n        svgOrigin: \"\",\r\n        dragContainer: null,\r\n        useResizeObserver: false,\r\n        useMutationObserver: false,\r\n        preventDefault: true,\r\n        preventRightClick: true,\r\n        preventWheelClick: true,\r\n        linePadding: 0,\r\n        controlPadding: 0,\r\n        ables: [],\r\n        pinchThreshold: 20,\r\n        dragArea: false,\r\n        passDragArea: false,\r\n        transformOrigin: \"\",\r\n        className: \"\",\r\n        zoom: 1,\r\n        triggerAblesSimultaneously: false,\r\n        padding: {},\r\n        pinchOutside: true,\r\n        checkInput: false,\r\n        dragFocusedInput: false,\r\n        groupable: false,\r\n        hideDefaultLines: false,\r\n        cspNonce: \"\",\r\n        translateZ: 0,\r\n        cssStyled: null,\r\n        customStyledMap: {},\r\n        props: {},\r\n        stopPropagation: false,\r\n        preventClickDefault: false,\r\n        preventClickEventOnDrag: true,\r\n        flushSync: defaultSync,\r\n        firstRenderState: null,\r\n        persistData: null,\r\n        viewContainer: null,\r\n        requestStyles: [],\r\n        useAccuratePosition: false,\r\n    };\r\n    return MoveableManager;\r\n}(React.PureComponent));\r\n/**\r\n * The target to indicate Moveable Control Box.\r\n * @name Moveable#target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n */\r\n/**\r\n * Zooms in the elements of a moveable.\r\n * @name Moveable#zoom\r\n * @default 1\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.zoom = 2;\r\n */\r\n/**\r\n * Whether the target size is detected and updated whenever it changes.\r\n * @name Moveable#useResizeObserver\r\n * @default false\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.useResizeObserver = true;\r\n */\r\n/**\r\n * Resize, Scale Events at edges\r\n * @name Moveable#edge\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.edge = true;\r\n */\r\n/**\r\n * You can specify the className of the moveable controlbox.\r\n * @name Moveable#className\r\n * @default \"\"\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *   className: \"\",\r\n * });\r\n *\r\n * moveable.className = \"moveable1\";\r\n */\r\n/**\r\n * The target(s) to drag Moveable target(s)\r\n * @name Moveable#dragTarget\r\n * @default target\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body);\r\n * moveable.target = document.querySelector(\".target\");\r\n * moveable.dragTarget = document.querySelector(\".dragTarget\");\r\n */\r\n/**\r\n * `renderStart` event occurs at the first start of all events.\r\n * @memberof Moveable\r\n * @event renderStart\r\n * @param {Moveable.OnRenderStart} - Parameters for the `renderStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderStart\", ({ target }) => {\r\n *     console.log(\"onRenderStart\", target);\r\n * });\r\n */\r\n/**\r\n * `render` event occurs before the target is drawn on the screen.\r\n * @memberof Moveable\r\n * @event render\r\n * @param {Moveable.OnRender} - Parameters for the `render` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"render\", ({ target }) => {\r\n *     console.log(\"onRender\", target);\r\n * });\r\n */\r\n/**\r\n * `renderEnd` event occurs at the end of all events.\r\n * @memberof Moveable\r\n * @event renderEnd\r\n * @param {Moveable.OnRenderEnd} - Parameters for the `renderEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"renderEnd\", ({ target }) => {\r\n *     console.log(\"onRenderEnd\", target);\r\n * });\r\n */\r\n/**\r\n * `renderGroupStart` event occurs at the first start of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupStart\r\n * @param {Moveable.OnRenderGroupStart} - Parameters for the `renderGroupStart` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupStart\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupStart\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroup` event occurs before the target is drawn on the screen in group.\r\n * @memberof Moveable\r\n * @event renderGroup\r\n * @param {Moveable.OnRenderGroup} - Parameters for the `renderGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroup\", ({ targets }) => {\r\n *     console.log(\"onRenderGroup\", targets);\r\n * });\r\n */\r\n/**\r\n * `renderGroupEnd` event occurs at the end of all events in group.\r\n * @memberof Moveable\r\n * @event renderGroupEnd\r\n * @param {Moveable.OnRenderGroupEnd} - Parameters for the `renderGroupEnd` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"renderGroupEnd\", ({ targets }) => {\r\n *     console.log(\"onRenderGroupEnd\", targets);\r\n * });\r\n */\n\nvar Groupable = {\r\n    name: \"groupable\",\r\n    props: [\r\n        \"defaultGroupRotate\",\r\n        \"useDefaultGroupRotate\",\r\n        \"defaultGroupOrigin\",\r\n        \"groupable\",\r\n        \"groupableProps\",\r\n        \"targetGroups\",\r\n        \"hideChildMoveableDefaultLines\",\r\n    ],\r\n    events: [],\r\n    render: function (moveable, React) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var targets = props.targets || [];\r\n        var _b = moveable.getState(), left = _b.left, top = _b.top, isPersisted = _b.isPersisted;\r\n        var zoom = props.zoom || 1;\r\n        var renderGroupRects = moveable.renderGroupRects;\r\n        var persistDatChildren = ((_a = props.persistData) === null || _a === void 0 ? void 0 : _a.children) || [];\r\n        if (isPersisted) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else {\r\n            persistDatChildren = [];\r\n        }\r\n        var parentPosition = watchValue(moveable, \"parentPosition\", [left, top], function (styles) { return styles.join(\",\"); });\r\n        var requestStyles = watchValue(moveable, \"requestStyles\", moveable.getRequestChildStyles(), function (styles) { return styles.join(\",\"); });\r\n        moveable.moveables = moveable.moveables.slice(0, targets.length);\r\n        return __spreadArray(__spreadArray([], __read(targets.map(function (target, i) {\r\n            return React.createElement(MoveableManager, { key: \"moveable\" + i, ref: refs(moveable, \"moveables\", i), target: target, origin: false, requestStyles: requestStyles, cssStyled: props.cssStyled, customStyledMap: props.customStyledMap, useResizeObserver: props.useResizeObserver, useMutationObserver: props.useMutationObserver, hideChildMoveableDefaultLines: props.hideChildMoveableDefaultLines, parentMoveable: moveable, parentPosition: [left, top], persistData: persistDatChildren[i], zoom: zoom });\r\n        })), false), __read(flat(renderGroupRects.map(function (_a, i) {\r\n            var pos1 = _a.pos1, pos2 = _a.pos2, pos3 = _a.pos3, pos4 = _a.pos4;\r\n            var poses = [pos1, pos2, pos3, pos4];\r\n            return [\r\n                [0, 1],\r\n                [1, 3],\r\n                [3, 2],\r\n                [2, 0],\r\n            ].map(function (_a, j) {\r\n                var _b = __read(_a, 2), from = _b[0], to = _b[1];\r\n                return renderLine(React, \"\", minus(poses[from], parentPosition), minus(poses[to], parentPosition), zoom, \"group-rect-\".concat(i, \"-\").concat(j));\r\n            });\r\n        }))), false);\r\n    },\r\n};\n\nvar Clickable = makeAble(\"clickable\", {\r\n    props: [\r\n        \"clickable\",\r\n    ],\r\n    events: [\r\n        \"click\",\r\n        \"clickGroup\",\r\n    ],\r\n    always: true,\r\n    dragRelation: \"weak\",\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    dragStart: function () {\r\n        return;\r\n    },\r\n    dragControlStart: function () {\r\n        return;\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        e.datas.inputTarget = e.inputEvent && e.inputEvent.target;\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        var target = moveable.props.target;\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        var isMoveableElement = moveable.isMoveableElement(inputTarget);\r\n        var containsElement = !isMoveableElement && moveable.controlBox.contains(inputTarget);\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            || containsElement\r\n        // External event duplicate target or dragAreaElement\r\n        ) {\r\n            return;\r\n        }\r\n        var containsTarget = target.contains(inputTarget);\r\n        triggerEvent(moveable, \"onClick\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            inputTarget: inputTarget,\r\n            isTarget: target === inputTarget,\r\n            moveableTarget: moveable.props.target,\r\n            containsTarget: containsTarget,\r\n        }));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        var inputEvent = e.inputEvent;\r\n        var inputTarget = e.inputTarget;\r\n        if (!inputEvent || !inputTarget || e.isDrag\r\n            || moveable.isMoveableElement(inputTarget)\r\n            // External event duplicate target or dragAreaElement\r\n            || e.datas.inputTarget === inputTarget) {\r\n            return;\r\n        }\r\n        var targets = moveable.props.targets;\r\n        var targetIndex = targets.indexOf(inputTarget);\r\n        var isTarget = targetIndex > -1;\r\n        var containsTarget = false;\r\n        if (targetIndex === -1) {\r\n            targetIndex = findIndex(targets, function (parentTarget) { return parentTarget.contains(inputTarget); });\r\n            containsTarget = targetIndex > -1;\r\n        }\r\n        triggerEvent(moveable, \"onClickGroup\", fillParams(moveable, e, {\r\n            isDouble: e.isDouble,\r\n            targets: targets,\r\n            inputTarget: inputTarget,\r\n            targetIndex: targetIndex,\r\n            isTarget: isTarget,\r\n            containsTarget: containsTarget,\r\n            moveableTarget: targets[targetIndex],\r\n        }));\r\n    },\r\n    dragControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n    dragGroupControlEnd: function (moveable, e) {\r\n        this.dragEnd(moveable, e);\r\n    },\r\n});\r\n/**\r\n * When you click on the element, the `click` event is called.\r\n * @memberof Moveable\r\n * @event click\r\n * @param {Moveable.OnClick} - Parameters for the `click` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: document.querySelector(\".target\"),\r\n * });\r\n * moveable.on(\"click\", ({ hasTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", target, hasTarget, containsTarget, targetIndex);\r\n * });\r\n */\r\n/**\r\n * When you click on the element inside the group, the `clickGroup` event is called.\r\n * @memberof Moveable\r\n * @event clickGroup\r\n * @param {Moveable.OnClickGroup} - Parameters for the `clickGroup` event\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *     target: [].slice.call(document.querySelectorAll(\".target\")),\r\n * });\r\n * moveable.on(\"clickGroup\", ({ inputTarget, isTarget, containsTarget, targetIndex }) => {\r\n *     // If you click on an element other than the target and not included in the target, index is -1.\r\n *     console.log(\"onClickGroup\", inputTarget, isTarget, containsTarget, targetIndex);\r\n * });\r\n */\n\nfunction getDraggableEvent(e) {\r\n    var datas = e.originalDatas.draggable;\r\n    if (!datas) {\r\n        e.originalDatas.draggable = {};\r\n        datas = e.originalDatas.draggable;\r\n    }\r\n    return __assign(__assign({}, e), { datas: datas });\r\n}\r\nvar edgeDraggable = makeAble(\"edgeDraggable\", {\r\n    css: [\r\n        \".edge.edgeDraggable.line {\\ncursor: move;\\n}\",\r\n    ],\r\n    render: function (moveable, React) {\r\n        var props = moveable.props;\r\n        var edge = props.edgeDraggable;\r\n        if (!edge) {\r\n            return [];\r\n        }\r\n        return renderEdgeLines(React, \"edgeDraggable\", edge, moveable.getState().renderPoses, props.zoom);\r\n    },\r\n    dragCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable\r\n            && hasClass(target, prefix(\"direction\"))\r\n            && hasClass(target, prefix(\"edge\"))\r\n            && hasClass(target, prefix(\"edgeDraggable\"));\r\n    },\r\n    dragStart: function (moveable, e) {\r\n        return Draggable.dragStart(moveable, getDraggableEvent(e));\r\n    },\r\n    drag: function (moveable, e) {\r\n        return Draggable.drag(moveable, getDraggableEvent(e));\r\n    },\r\n    dragEnd: function (moveable, e) {\r\n        return Draggable.dragEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupCondition: function (moveable, e) {\r\n        var _a;\r\n        var props = moveable.props;\r\n        var target = (_a = e.inputEvent) === null || _a === void 0 ? void 0 : _a.target;\r\n        if (!props.edgeDraggable || !target) {\r\n            return false;\r\n        }\r\n        return !props.draggable && hasClass(target, prefix(\"direction\")) && hasClass(target, prefix(\"line\"));\r\n    },\r\n    dragGroupStart: function (moveable, e) {\r\n        return Draggable.dragGroupStart(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroup: function (moveable, e) {\r\n        return Draggable.dragGroup(moveable, getDraggableEvent(e));\r\n    },\r\n    dragGroupEnd: function (moveable, e) {\r\n        return Draggable.dragGroupEnd(moveable, getDraggableEvent(e));\r\n    },\r\n    unset: function (moveable) {\r\n        return Draggable.unset(moveable);\r\n    },\r\n});\r\n/**\r\n * Whether to move by dragging the edge line (default: false)\r\n * @name Moveable.Draggable#edgeDraggable\r\n * @example\r\n * import Moveable from \"moveable\";\r\n *\r\n * const moveable = new Moveable(document.body, {\r\n *  draggable: true,\r\n *  edgeDraggable: false,\r\n * });\r\n *\r\n * moveable.edgeDraggable = true;\r\n */\n\nvar IndividualGroupable = {\r\n    name: \"individualGroupable\",\r\n    props: [\r\n        \"individualGroupable\",\r\n        \"individualGroupableProps\",\r\n    ],\r\n    events: [],\r\n};\n\nvar MOVEABLE_ABLES =  [\r\n    BeforeRenderable,\r\n    Default, Snappable, Pinchable,\r\n    Draggable, edgeDraggable,\r\n    Resizable, Scalable, Warpable, Rotatable,\r\n    Scrollable, Padding, Origin,\r\n    OriginDraggable,\r\n    Clippable, Roundable, Groupable, IndividualGroupable,\r\n    Clickable,\r\n    DragArea,\r\n    Renderable,\r\n];\r\nvar MOVEABLE_EVENTS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.events || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\r\nvar MOVEABLE_PROPS = /*#__PURE__*/ MOVEABLE_ABLES.reduce(function (current, able) {\r\n    (able.props || []).forEach(function (name) {\r\n        pushSet(current, name);\r\n    });\r\n    return current;\r\n}, []);\n\nfunction solveConstantsDistance(_a, pos) {\r\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\r\n    return (a * pos[0] + b * pos[1] + c) / Math.sqrt(a * a + b * b);\r\n}\r\nfunction solveC(_a, pos) {\r\n    var _b = __read(_a, 2), a = _b[0], b = _b[1];\r\n    // ax + by + c = 0\r\n    // -ax -by;\r\n    return -a * pos[0] - b * pos[1];\r\n}\n\nfunction getMaxPos(poses, index) {\r\n    return Math.max.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.max(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getMinPos(poses, index) {\r\n    return Math.min.apply(Math, __spreadArray([], __read(poses.map(function (_a) {\r\n        var _b = __read(_a, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n        return Math.min(pos1[index], pos2[index], pos3[index], pos4[index]);\r\n    })), false));\r\n}\r\nfunction getGroupRect(parentPoses, rotation) {\r\n    var _a, _b, _c;\r\n    var pos1 = [0, 0];\r\n    var pos2 = [0, 0];\r\n    var pos3 = [0, 0];\r\n    var pos4 = [0, 0];\r\n    var width = 0;\r\n    var height = 0;\r\n    if (!parentPoses.length) {\r\n        return {\r\n            pos1: pos1,\r\n            pos2: pos2,\r\n            pos3: pos3,\r\n            pos4: pos4,\r\n            minX: 0,\r\n            minY: 0,\r\n            maxX: 0,\r\n            maxY: 0,\r\n            width: width,\r\n            height: height,\r\n            rotation: rotation,\r\n        };\r\n    }\r\n    var fixedRotation = throttle(rotation, TINY_NUM);\r\n    if (fixedRotation % 90) {\r\n        var rad = fixedRotation / 180 * Math.PI;\r\n        var a1_1 = Math.tan(rad);\r\n        var a2_1 = -1 / a1_1;\r\n        // ax = y  // -ax + y = 0 // 0 => 1\r\n        // -ax = y // ax + y = 0  // 0 => 3\r\n        var a1MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a1MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        var a2MinMax_1 = [MAX_NUM, MIN_NUM];\r\n        var a2MinMaxPos_1 = [[0, 0], [0, 0]];\r\n        parentPoses.forEach(function (poses) {\r\n            poses.forEach(function (pos) {\r\n                // const b1 = pos[1] - a1 * pos[0];\r\n                // const b2 = pos[1] - a2 * pos[0];\r\n                var a1Dist = solveConstantsDistance([-a1_1, 1, 0], pos);\r\n                var a2Dist = solveConstantsDistance([-a2_1, 1, 0], pos);\r\n                if (a1MinMax_1[0] > a1Dist) {\r\n                    a1MinMaxPos_1[0] = pos;\r\n                    a1MinMax_1[0] = a1Dist;\r\n                }\r\n                if (a1MinMax_1[1] < a1Dist) {\r\n                    a1MinMaxPos_1[1] = pos;\r\n                    a1MinMax_1[1] = a1Dist;\r\n                }\r\n                if (a2MinMax_1[0] > a2Dist) {\r\n                    a2MinMaxPos_1[0] = pos;\r\n                    a2MinMax_1[0] = a2Dist;\r\n                }\r\n                if (a2MinMax_1[1] < a2Dist) {\r\n                    a2MinMaxPos_1[1] = pos;\r\n                    a2MinMax_1[1] = a2Dist;\r\n                }\r\n            });\r\n        });\r\n        var _d = __read(a1MinMaxPos_1, 2), a1MinPos = _d[0], a1MaxPos = _d[1];\r\n        var _e = __read(a2MinMaxPos_1, 2), a2MinPos = _e[0], a2MaxPos = _e[1];\r\n        var minHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MinPos)];\r\n        var maxHorizontalLine = [-a1_1, 1, solveC([-a1_1, 1], a1MaxPos)];\r\n        var minVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MinPos)];\r\n        var maxVerticalLine = [-a2_1, 1, solveC([-a2_1, 1], a2MaxPos)];\r\n        _a = __read([\r\n            [minHorizontalLine, minVerticalLine],\r\n            [minHorizontalLine, maxVerticalLine],\r\n            [maxHorizontalLine, minVerticalLine],\r\n            [maxHorizontalLine, maxVerticalLine],\r\n        ].map(function (_a) {\r\n            var _b = __read(_a, 2), line1 = _b[0], line2 = _b[1];\r\n            return getIntersectionPointsByConstants(line1, line2)[0];\r\n        }), 4), pos1 = _a[0], pos2 = _a[1], pos3 = _a[2], pos4 = _a[3];\r\n        width = a2MinMax_1[1] - a2MinMax_1[0];\r\n        height = a1MinMax_1[1] - a1MinMax_1[0];\r\n    }\r\n    else {\r\n        var minX_1 = getMinPos(parentPoses, 0);\r\n        var minY_1 = getMinPos(parentPoses, 1);\r\n        var maxX_1 = getMaxPos(parentPoses, 0);\r\n        var maxY_1 = getMaxPos(parentPoses, 1);\r\n        pos1 = [minX_1, minY_1];\r\n        pos2 = [maxX_1, minY_1];\r\n        pos3 = [minX_1, maxY_1];\r\n        pos4 = [maxX_1, maxY_1];\r\n        width = maxX_1 - minX_1;\r\n        height = maxY_1 - minY_1;\r\n        if (fixedRotation % 180) {\r\n            // 0\r\n            // 1 2\r\n            // 3 4\r\n            // 90\r\n            // 3 1\r\n            // 4 2\r\n            // 180\r\n            // 4 3\r\n            // 2 1\r\n            // 270\r\n            // 2 4\r\n            // 1 3\r\n            // 1, 2, 3,4 = 3 1 4 2\r\n            var changedX = [pos3, pos1, pos4, pos2];\r\n            _b = __read(changedX, 4), pos1 = _b[0], pos2 = _b[1], pos3 = _b[2], pos4 = _b[3];\r\n            width = maxY_1 - minY_1;\r\n            height = maxX_1 - minX_1;\r\n        }\r\n    }\r\n    if (fixedRotation % 360 > 180) {\r\n        // 1 2   4 3\r\n        // 3 4   2 1\r\n        var changedX = [pos4, pos3, pos2, pos1];\r\n        _c = __read(changedX, 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3];\r\n    }\r\n    var _f = getMinMaxs([pos1, pos2, pos3, pos4]), minX = _f.minX, minY = _f.minY, maxX = _f.maxX, maxY = _f.maxY;\r\n    return {\r\n        pos1: pos1,\r\n        pos2: pos2,\r\n        pos3: pos3,\r\n        pos4: pos4,\r\n        width: width,\r\n        height: height,\r\n        minX: minX,\r\n        minY: minY,\r\n        maxX: maxX,\r\n        maxY: maxY,\r\n        rotation: rotation,\r\n    };\r\n}\r\nfunction findMoveableGroups(moveables, childTargetGroups) {\r\n    var groups = childTargetGroups.map(function (targetGroup) {\r\n        if (isArray(targetGroup)) {\r\n            var childMoveableGroups = findMoveableGroups(moveables, targetGroup);\r\n            var length_1 = childMoveableGroups.length;\r\n            if (length_1 > 1) {\r\n                return childMoveableGroups;\r\n            }\r\n            else if (length_1 === 1) {\r\n                return childMoveableGroups[0];\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            var checked = find(moveables, function (_a) {\r\n                var manager = _a.manager;\r\n                return manager.props.target === targetGroup;\r\n            });\r\n            if (checked) {\r\n                checked.finded = true;\r\n                return checked.manager;\r\n            }\r\n            return null;\r\n        }\r\n    }).filter(Boolean);\r\n    if (groups.length === 1 && isArray(groups[0])) {\r\n        return groups[0];\r\n    }\r\n    return groups;\r\n}\r\n/**\r\n * @namespace Moveable.Group\r\n * @description You can make targets moveable.\r\n */\r\nvar MoveableGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableGroup, _super);\r\n    function MoveableGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.differ = new ChildrenDiffer();\r\n        _this.moveables = [];\r\n        _this.transformOrigin = \"50% 50%\";\r\n        _this.renderGroupRects = [];\r\n        _this._targetGroups = [];\r\n        _this._hasFirstTargets = false;\r\n        return _this;\r\n    }\r\n    MoveableGroup.prototype.componentDidMount = function () {\r\n        _super.prototype.componentDidMount.call(this);\r\n    };\r\n    MoveableGroup.prototype.checkUpdate = function () {\r\n        this._isPropTargetChanged = false;\r\n        this.updateAbles();\r\n    };\r\n    MoveableGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        var _a;\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        var state = this.state;\r\n        if (!this.controlBox || state.isPersisted) {\r\n            return;\r\n        }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, false, false);\r\n        });\r\n        var props = this.props;\r\n        var moveables = this.moveables;\r\n        var target = state.target || props.target;\r\n        var checkeds = moveables.map(function (moveable) { return ({ finded: false, manager: moveable }); });\r\n        var targetGroups = this.props.targetGroups || [];\r\n        var moveableGroups = findMoveableGroups(checkeds, targetGroups);\r\n        var useDefaultGroupRotate = props.useDefaultGroupRotate;\r\n        moveableGroups.push.apply(moveableGroups, __spreadArray([], __read(checkeds.filter(function (_a) {\r\n            var finded = _a.finded;\r\n            return !finded;\r\n        }).map(function (_a) {\r\n            var manager = _a.manager;\r\n            return manager;\r\n        })), false));\r\n        var renderGroupRects = [];\r\n        var isReset = !isTarget || (type !== \"\" && props.updateGroup);\r\n        var defaultGroupRotate = props.defaultGroupRotate || 0;\r\n        if (!this._hasFirstTargets) {\r\n            var persistedRoatation = (_a = props.persistData) === null || _a === void 0 ? void 0 : _a.rotation;\r\n            if (persistedRoatation != null) {\r\n                defaultGroupRotate = persistedRoatation;\r\n            }\r\n        }\r\n        function getMoveableGroupRect(group, parentRotation, isRoot) {\r\n            var posesRotations = group.map(function (moveable) {\r\n                if (isArray(moveable)) {\r\n                    var rect = getMoveableGroupRect(moveable, parentRotation);\r\n                    var poses = [rect.pos1, rect.pos2, rect.pos3, rect.pos4];\r\n                    renderGroupRects.push(rect);\r\n                    return { poses: poses, rotation: rect.rotation };\r\n                }\r\n                else {\r\n                    return {\r\n                        poses: getAbsolutePosesByState(moveable.state),\r\n                        rotation: moveable.getRotation(),\r\n                    };\r\n                }\r\n            });\r\n            var rotations = posesRotations.map(function (_a) {\r\n                var rotation = _a.rotation;\r\n                return rotation;\r\n            });\r\n            var groupRotation = 0;\r\n            var firstRotation = rotations[0];\r\n            var isSameRotation = rotations.every(function (nextRotation) {\r\n                return Math.abs(firstRotation - nextRotation) < 0.1;\r\n            });\r\n            if (isReset) {\r\n                groupRotation = !useDefaultGroupRotate && isSameRotation ? firstRotation : defaultGroupRotate;\r\n            }\r\n            else {\r\n                groupRotation = !useDefaultGroupRotate && !isRoot && isSameRotation ? firstRotation : parentRotation;\r\n            }\r\n            var groupPoses = posesRotations.map(function (_a) {\r\n                var poses = _a.poses;\r\n                return poses;\r\n            });\r\n            var groupRect = getGroupRect(groupPoses, groupRotation);\r\n            return groupRect;\r\n        }\r\n        var rootGroupRect = getMoveableGroupRect(moveableGroups, this.rotation, true);\r\n        if (isReset) {\r\n            // reset rotataion\r\n            this.rotation = rootGroupRect.rotation;\r\n            this.transformOrigin = props.defaultGroupOrigin || \"50% 50%\";\r\n            this.scale = [1, 1];\r\n        }\r\n        this._targetGroups = targetGroups;\r\n        this.renderGroupRects = renderGroupRects;\r\n        var transformOrigin = this.transformOrigin;\r\n        var rotation = this.rotation;\r\n        var scale = this.scale;\r\n        var width = rootGroupRect.width, height = rootGroupRect.height, minX = rootGroupRect.minX, minY = rootGroupRect.minY;\r\n        var posesInfo = rotatePosesInfo([\r\n            [0, 0],\r\n            [width, 0],\r\n            [0, height],\r\n            [width, height],\r\n        ], convertTransformOriginArray(transformOrigin, width, height), this.rotation / 180 * Math.PI);\r\n        var _b = getMinMaxs(posesInfo.result), deltaX = _b.minX, deltaY = _b.minY;\r\n        var rotateScale = \" rotate(\".concat(rotation, \"deg)\")\r\n            + \" scale(\".concat(sign(scale[0]), \", \").concat(sign(scale[1]), \")\");\r\n        var transform = \"translate(\".concat(-deltaX, \"px, \").concat(-deltaY, \"px)\").concat(rotateScale);\r\n        this.controlBox.style.transform\r\n            = \"translate3d(\".concat(minX, \"px, \").concat(minY, \"px, \").concat(this.props.translateZ || 0, \")\");\r\n        target.style.cssText += \"left:0px;top:0px;\"\r\n            + \"transform-origin:\".concat(transformOrigin, \";\")\r\n            + \"width:\".concat(width, \"px;height:\").concat(height, \"px;\")\r\n            + \"transform: \".concat(transform);\r\n        state.width = width;\r\n        state.height = height;\r\n        var container = this.getContainer();\r\n        var info = getMoveableTargetInfo(this.controlBox, target, this.controlBox, this.getContainer(), this._rootContainer || container, []);\r\n        var pos = [info.left, info.top];\r\n        var _c = __read(getAbsolutePosesByState(info), 4), pos1 = _c[0], pos2 = _c[1], pos3 = _c[2], pos4 = _c[3]; // info.left + info.pos(1 ~ 4)\r\n        var minPos = getMinMaxs([pos1, pos2, pos3, pos4]);\r\n        var delta = [minPos.minX, minPos.minY];\r\n        var direction = sign(scale[0] * scale[1]);\r\n        info.pos1 = minus(pos1, delta);\r\n        info.pos2 = minus(pos2, delta);\r\n        info.pos3 = minus(pos3, delta);\r\n        info.pos4 = minus(pos4, delta);\r\n        // info.left = info.left + delta[0];\r\n        // info.top = info.top + delta[1];\r\n        info.left = minX - info.left + delta[0];\r\n        info.top = minY - info.top + delta[1];\r\n        info.origin = minus(plus(pos, info.origin), delta);\r\n        info.beforeOrigin = minus(plus(pos, info.beforeOrigin), delta);\r\n        info.originalBeforeOrigin = plus(pos, info.originalBeforeOrigin);\r\n        info.transformOrigin = minus(plus(pos, info.transformOrigin), delta);\r\n        target.style.transform\r\n            = \"translate(\".concat(-deltaX - delta[0], \"px, \").concat(-deltaY - delta[1], \"px)\")\r\n                + rotateScale;\r\n        setStoreCache();\r\n        this.updateState(__assign(__assign({}, info), { posDelta: delta, direction: direction, beforeDirection: direction }), isSetState);\r\n    };\r\n    MoveableGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableGroup.prototype.triggerEvent = function (name, e, isManager) {\r\n        if (isManager || name.indexOf(\"Group\") > -1) {\r\n            return _super.prototype.triggerEvent.call(this, name, e);\r\n        }\r\n        else {\r\n            this._emitter.trigger(name, e);\r\n        }\r\n    };\r\n    MoveableGroup.prototype.getRequestChildStyles = function () {\r\n        var styleNames = this.getEnabledAbles().reduce(function (names, able) {\r\n            var _a, _b;\r\n            var ableStyleNames = ((_b = (_a = able.requestChildStyle) === null || _a === void 0 ? void 0 : _a.call(able)) !== null && _b !== void 0 ? _b : []);\r\n            return __spreadArray(__spreadArray([], __read(names), false), __read(ableStyleNames), false);\r\n        }, []);\r\n        return styleNames;\r\n    };\r\n    MoveableGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableGroup.prototype.updateAbles = function () {\r\n        _super.prototype.updateAbles.call(this, __spreadArray(__spreadArray([], __read(this.props.ables), false), [Groupable], false), \"Group\");\r\n    };\r\n    MoveableGroup.prototype._updateTargets = function () {\r\n        _super.prototype._updateTargets.call(this);\r\n        this._originalDragTarget = this.props.dragTarget || this.areaElement;\r\n        this._dragTarget = getRefTarget(this._originalDragTarget, true);\r\n    };\r\n    MoveableGroup.prototype._updateEvents = function () {\r\n        var state = this.state;\r\n        var props = this.props;\r\n        var prevTarget = this._prevDragTarget;\r\n        var nextTarget = props.dragTarget || this.areaElement;\r\n        var targets = props.targets;\r\n        var _a = this.differ.update(targets), added = _a.added, changed = _a.changed, removed = _a.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged || this._prevOriginalDragTarget !== this._originalDragTarget) {\r\n            unsetGesto(this, false);\r\n            unsetGesto(this, true);\r\n            this.updateState({ gestos: {} });\r\n        }\r\n        if (prevTarget !== nextTarget) {\r\n            state.target = null;\r\n        }\r\n        if (!state.target) {\r\n            state.target = this.areaElement;\r\n            this.controlBox.style.display = \"block\";\r\n        }\r\n        if (state.target) {\r\n            if (!this.targetGesto) {\r\n                this.targetGesto = getTargetAbleGesto(this, this._dragTarget, \"Group\");\r\n            }\r\n            if (!this.controlGesto) {\r\n                this.controlGesto = getControlAbleGesto(this, \"GroupControl\");\r\n            }\r\n        }\r\n        var isContainerChanged = !equals(state.container, props.container);\r\n        if (isContainerChanged) {\r\n            state.container = props.container;\r\n        }\r\n        if (isContainerChanged\r\n            || isTargetChanged\r\n            || this.transformOrigin !== (props.defaultGroupOrigin || \"50% 50%\")\r\n            || changed.length\r\n            || targets.length && !isDeepArrayEquals(this._targetGroups, props.targetGroups || [])) {\r\n            this.updateRect();\r\n            this._hasFirstTargets = true;\r\n        }\r\n        this._isPropTargetChanged = !!isTargetChanged;\r\n    };\r\n    MoveableGroup.prototype._updateObserver = function () { };\r\n    MoveableGroup.defaultProps = __assign(__assign({}, MoveableManager.defaultProps), { transformOrigin: [\"50%\", \"50%\"], groupable: true, dragArea: true, keepRatio: true, targets: [], defaultGroupRotate: 0, defaultGroupOrigin: \"50% 50%\" });\r\n    return MoveableGroup;\r\n}(MoveableManager));\n\n/**\r\n * @namespace Moveable.IndividualGroup\r\n * @description Create targets individually, not as a group.Create targets individually, not as a group.\r\n */\r\nvar MoveableIndividualGroup = /*#__PURE__*/ (function (_super) {\r\n    __extends(MoveableIndividualGroup, _super);\r\n    function MoveableIndividualGroup() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.moveables = [];\r\n        return _this;\r\n    }\r\n    MoveableIndividualGroup.prototype.render = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var props = this.props;\r\n        var cspNonce = props.cspNonce, ControlBoxElement = props.cssStyled, persistData = props.persistData;\r\n        var targets = props.targets || [];\r\n        var length = targets.length;\r\n        var canPersist = this.isUnmounted || !length;\r\n        var persistDatChildren = (_a = persistData === null || persistData === void 0 ? void 0 : persistData.children) !== null && _a !== void 0 ? _a : [];\r\n        if (canPersist && !length && persistDatChildren.length) {\r\n            targets = persistDatChildren.map(function () { return null; });\r\n        }\r\n        else if (!canPersist) {\r\n            persistDatChildren = [];\r\n        }\r\n        return React.createElement(ControlBoxElement, { cspNonce: cspNonce, ref: ref(this, \"controlBox\"), className: prefix(\"control-box\") }, targets.map(function (target, i) {\r\n            var _a, _b;\r\n            var individualProps = (_b = (_a = props.individualGroupableProps) === null || _a === void 0 ? void 0 : _a.call(props, target, i)) !== null && _b !== void 0 ? _b : {};\r\n            return React.createElement(MoveableManager, __assign({ key: \"moveable\" + i, ref: refs(_this, \"moveables\", i) }, props, individualProps, { target: target, wrapperMoveable: _this, isWrapperMounted: _this.isMoveableMounted, persistData: persistDatChildren[i] }));\r\n        }));\r\n    };\r\n    MoveableIndividualGroup.prototype.componentDidMount = function () { };\r\n    MoveableIndividualGroup.prototype.componentDidUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.getTargets = function () {\r\n        return this.props.targets;\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRect = function (type, isTarget, isSetState) {\r\n        if (isSetState === void 0) { isSetState = true; }\r\n        setStoreCache(true);\r\n        this.moveables.forEach(function (moveable) {\r\n            moveable.updateRect(type, isTarget, isSetState);\r\n        });\r\n        setStoreCache();\r\n    };\r\n    MoveableIndividualGroup.prototype.getRect = function () {\r\n        return __assign(__assign({}, _super.prototype.getRect.call(this)), { children: this.moveables.map(function (child) { return child.getRect(); }) });\r\n    };\r\n    MoveableIndividualGroup.prototype.request = function (ableName, param, isInstant) {\r\n        if (param === void 0) { param = {}; }\r\n        var results = this.moveables.map(function (m) { return m.request(ableName, __assign(__assign({}, param), { isInstant: false }), false); });\r\n        var requestInstant = isInstant || param.isInstant;\r\n        var requester = {\r\n            request: function (ableParam) {\r\n                results.forEach(function (r) { return r.request(ableParam); });\r\n                return this;\r\n            },\r\n            requestEnd: function () {\r\n                results.forEach(function (r) { return r.requestEnd(); });\r\n                return this;\r\n            },\r\n        };\r\n        return requestInstant ? requester.request(param).requestEnd() : requester;\r\n    };\r\n    MoveableIndividualGroup.prototype.dragStart = function (e, target) {\r\n        if (target === void 0) { target = e.target; }\r\n        var inputTarget = target;\r\n        var childMoveable = find(this.moveables, function (child) {\r\n            var target = child.getTargets()[0];\r\n            var controlBoxElement = child.getControlBoxElement();\r\n            var dragElement = child.getDragElement();\r\n            if (!target || !dragElement) {\r\n                return false;\r\n            }\r\n            return dragElement === inputTarget || dragElement.contains(inputTarget)\r\n                || (dragElement !== target && target === inputTarget || target.contains(inputTarget))\r\n                || controlBoxElement === inputTarget || controlBoxElement.contains(inputTarget);\r\n        });\r\n        if (childMoveable) {\r\n            childMoveable.dragStart(e, target);\r\n        }\r\n        return this;\r\n    };\r\n    MoveableIndividualGroup.prototype.hitTest = function () {\r\n        return 0;\r\n    };\r\n    MoveableIndividualGroup.prototype.isInside = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.isDragging = function () {\r\n        return false;\r\n    };\r\n    MoveableIndividualGroup.prototype.getDragElement = function () {\r\n        return null;\r\n    };\r\n    MoveableIndividualGroup.prototype.getMoveables = function () {\r\n        return __spreadArray([], __read(this.moveables), false);\r\n    };\r\n    MoveableIndividualGroup.prototype.updateRenderPoses = function () { };\r\n    MoveableIndividualGroup.prototype.checkUpdate = function () { };\r\n    MoveableIndividualGroup.prototype.triggerEvent = function () { };\r\n    MoveableIndividualGroup.prototype.updateAbles = function () { };\r\n    MoveableIndividualGroup.prototype._updateEvents = function () { };\r\n    MoveableIndividualGroup.prototype._updateObserver = function () { };\r\n    return MoveableIndividualGroup;\r\n}(MoveableManager));\n\nfunction getElementTargets(refTargets, selectorMap) {\r\n    var elementTargets = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                elementTargets.push.apply(elementTargets, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            elementTargets.push.apply(elementTargets, __spreadArray([], __read(getElementTargets(target, selectorMap)), false));\r\n        }\r\n        else {\r\n            elementTargets.push(target);\r\n        }\r\n    });\r\n    return elementTargets;\r\n}\r\nfunction getTargetGroups(refTargets, selectorMap) {\r\n    var targetGroups = [];\r\n    refTargets.forEach(function (target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        if (isString(target)) {\r\n            if (selectorMap[target]) {\r\n                targetGroups.push.apply(targetGroups, __spreadArray([], __read(selectorMap[target]), false));\r\n            }\r\n            return;\r\n        }\r\n        if (isArray(target)) {\r\n            targetGroups.push(getTargetGroups(target, selectorMap));\r\n        }\r\n        else {\r\n            targetGroups.push(target);\r\n        }\r\n    });\r\n    return targetGroups;\r\n}\r\nfunction compareRefTargets(prevRefTargets, nextRefTargets) {\r\n    return (prevRefTargets.length !== nextRefTargets.length) || prevRefTargets.some(function (target, i) {\r\n        var nextTarget = nextRefTargets[i];\r\n        if (!target && !nextTarget) {\r\n            return false;\r\n        }\r\n        else if (target != nextTarget) {\r\n            if (isArray(target) && isArray(nextTarget)) {\r\n                return compareRefTargets(target, nextTarget);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n}\r\nvar InitialMoveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(InitialMoveable, _super);\r\n    function InitialMoveable() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.refTargets = [];\r\n        _this.selectorMap = {};\r\n        _this._differ = new ChildrenDiffer();\r\n        _this._elementTargets = [];\r\n        _this._tmpRefTargets = [];\r\n        _this._tmpSelectorMap = {};\r\n        _this._onChangeTargets = null;\r\n        return _this;\r\n    }\r\n    InitialMoveable.makeStyled = function () {\r\n        var cssMap = {};\r\n        var ables = this.getTotalAbles();\r\n        ables.forEach(function (_a) {\r\n            var css = _a.css;\r\n            if (!css) {\r\n                return;\r\n            }\r\n            css.forEach(function (text) {\r\n                cssMap[text] = true;\r\n            });\r\n        });\r\n        var style = getKeys(cssMap).join(\"\\n\");\r\n        this.defaultStyled = styled(\"div\", prefixCSS(PREFIX, MOVEABLE_CSS + style));\r\n    };\r\n    InitialMoveable.getTotalAbles = function () {\r\n        return __spreadArray([Default, Groupable, IndividualGroupable, DragArea], __read(this.defaultAbles), false);\r\n    };\r\n    InitialMoveable.prototype.render = function () {\r\n        var _a;\r\n        var moveableContructor = this.constructor;\r\n        if (!moveableContructor.defaultStyled) {\r\n            moveableContructor.makeStyled();\r\n        }\r\n        var _b = this.props, userAbles = _b.ables, userProps = _b.props, props = __rest(_b, [\"ables\", \"props\"]);\r\n        var _c = __read(this._updateRefs(true), 2), refTargets = _c[0], nextSelectorMap = _c[1];\r\n        var elementTargets = getElementTargets(refTargets, nextSelectorMap);\r\n        var isGroup = elementTargets.length > 1;\r\n        var totalAbles = moveableContructor.getTotalAbles();\r\n        var ables = __spreadArray(__spreadArray([], __read(totalAbles), false), __read((userAbles || [])), false);\r\n        var nextProps = __assign(__assign(__assign({}, props), (userProps || {})), { ables: ables, cssStyled: moveableContructor.defaultStyled, customStyledMap: moveableContructor.customStyledMap });\r\n        this._elementTargets = elementTargets;\r\n        var firstRenderState = null;\r\n        var prevMoveable = this.moveable;\r\n        var persistData = props.persistData;\r\n        if (persistData === null || persistData === void 0 ? void 0 : persistData.children) {\r\n            isGroup = true;\r\n        }\r\n        // Even one child is treated as a group if individualGroupable is enabled. #867\r\n        if (props.individualGroupable) {\r\n            return React.createElement(MoveableIndividualGroup, __assign({ key: \"individual-group\", ref: ref(this, \"moveable\") }, nextProps, { target: null, targets: elementTargets }));\r\n        }\r\n        if (isGroup) {\r\n            var targetGroups = getTargetGroups(refTargets, nextSelectorMap);\r\n            // manager\r\n            if (prevMoveable && !prevMoveable.props.groupable && !prevMoveable.props.individualGroupable) {\r\n                var target = prevMoveable.props.target;\r\n                if (target && elementTargets.indexOf(target) > -1) {\r\n                    firstRenderState = __assign({}, prevMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableGroup, __assign({ key: \"group\", ref: ref(this, \"moveable\") }, nextProps, (_a = props.groupableProps) !== null && _a !== void 0 ? _a : {}, { target: null, targets: elementTargets, targetGroups: targetGroups, firstRenderState: firstRenderState }));\r\n        }\r\n        else {\r\n            var target_1 = elementTargets[0];\r\n            // manager\r\n            if (prevMoveable && (prevMoveable.props.groupable || prevMoveable.props.individualGroupable)) {\r\n                var moveables = prevMoveable.moveables || [];\r\n                var prevTargetMoveable = find(moveables, function (mv) { return mv.props.target === target_1; });\r\n                if (prevTargetMoveable) {\r\n                    firstRenderState = __assign({}, prevTargetMoveable.state);\r\n                }\r\n            }\r\n            return React.createElement(MoveableManager, __assign({ key: \"single\", ref: ref(this, \"moveable\") }, nextProps, { target: target_1, firstRenderState: firstRenderState }));\r\n        }\r\n    };\r\n    InitialMoveable.prototype.componentDidMount = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentDidUpdate = function () {\r\n        this._checkChangeTargets();\r\n    };\r\n    InitialMoveable.prototype.componentWillUnmount = function () {\r\n        this.selectorMap = {};\r\n        this.refTargets = [];\r\n    };\r\n    /**\r\n     * Get targets set in moveable through target or targets of props.\r\n     * @method Moveable#getTargets\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: [targetRef, \".target\", document.querySelectorAll(\".target\")],\r\n     * });\r\n     *\r\n     * console.log(moveable.getTargets());\r\n     */\r\n    InitialMoveable.prototype.getTargets = function () {\r\n        var _a, _b;\r\n        return (_b = (_a = this.moveable) === null || _a === void 0 ? void 0 : _a.getTargets()) !== null && _b !== void 0 ? _b : [];\r\n    };\r\n    /**\r\n     * If the element list corresponding to the selector among the targets is changed, it is updated.\r\n     * @method Moveable#updateSelectors\r\n     * @example\r\n     * import Moveable from \"moveable\";\r\n     *\r\n     * const moveable = new Moveable(document.body, {\r\n     *    target: \".target\",\r\n     * });\r\n     *\r\n     * moveable.updateSelectors();\r\n     */\r\n    InitialMoveable.prototype.updateSelectors = function () {\r\n        this.selectorMap = {};\r\n        this._updateRefs();\r\n        this.forceUpdate();\r\n    };\r\n    /**\r\n     * User changes target and waits for target to change.\r\n     * @method Moveable#waitToChangeTarget\r\n     * @story combination-with-other-components--components-selecto\r\n     * @example\r\n     * document.querySelector(\".target\").addEventListener(\"mousedown\", e => {\r\n     *   moveable.waitToChangeTarget().then(() => {\r\n     *      moveable.dragStart(e, e.currentTarget);\r\n     *   });\r\n     *   moveable.target = e.currentTarget;\r\n     * });\r\n     */\r\n    InitialMoveable.prototype.waitToChangeTarget = function () {\r\n        // let resolvePromise: (e: OnChangeTarget) => void;\r\n        var _this = this;\r\n        // this._onChangeTargets = () => {\r\n        //     this._onChangeTargets = null;\r\n        //     resolvePromise({\r\n        //         moveable: this.getManager(),\r\n        //         targets: this._elementTargets,\r\n        //     });\r\n        // };\r\n        // return new Promise<OnChangeTarget>(resolve => {\r\n        //     resolvePromise = resolve;\r\n        // });\r\n        var resolvePromise;\r\n        this._onChangeTargets = function () {\r\n            _this._onChangeTargets = null;\r\n            resolvePromise();\r\n        };\r\n        return new Promise(function (resolve) {\r\n            resolvePromise = resolve;\r\n        });\r\n    };\r\n    InitialMoveable.prototype.waitToChangeTargets = function () {\r\n        return this.waitToChangeTarget();\r\n    };\r\n    InitialMoveable.prototype.getManager = function () {\r\n        return this.moveable;\r\n    };\r\n    InitialMoveable.prototype.getMoveables = function () {\r\n        return this.moveable.getMoveables();\r\n    };\r\n    InitialMoveable.prototype.getDragElement = function () {\r\n        return this.moveable.getDragElement();\r\n    };\r\n    InitialMoveable.prototype._updateRefs = function (isRender) {\r\n        var prevRefTargets = this.refTargets;\r\n        var nextRefTargets = getRefTargets((this.props.target || this.props.targets));\r\n        var isBrowser = typeof document !== \"undefined\";\r\n        var isUpdate = compareRefTargets(prevRefTargets, nextRefTargets);\r\n        var selectorMap = this.selectorMap;\r\n        var nextSelectorMap = {};\r\n        this.refTargets.forEach(function updateSelectorMap(target) {\r\n            if (isString(target)) {\r\n                var selectorTarget = selectorMap[target];\r\n                if (selectorTarget) {\r\n                    nextSelectorMap[target] = selectorMap[target];\r\n                }\r\n                else if (isBrowser) {\r\n                    isUpdate = true;\r\n                    nextSelectorMap[target] = [].slice.call(document.querySelectorAll(target));\r\n                }\r\n            }\r\n            else if (isArray(target)) {\r\n                target.forEach(updateSelectorMap);\r\n            }\r\n        });\r\n        this._tmpRefTargets = nextRefTargets;\r\n        this._tmpSelectorMap = nextSelectorMap;\r\n        return [\r\n            nextRefTargets,\r\n            nextSelectorMap,\r\n            !isRender && isUpdate,\r\n        ];\r\n    };\r\n    InitialMoveable.prototype._checkChangeTargets = function () {\r\n        var _a, _b, _c;\r\n        this.refTargets = this._tmpRefTargets;\r\n        this.selectorMap = this._tmpSelectorMap;\r\n        var _d = this._differ.update(this._elementTargets), added = _d.added, removed = _d.removed;\r\n        var isTargetChanged = added.length || removed.length;\r\n        if (isTargetChanged) {\r\n            (_b = (_a = this.props).onChangeTargets) === null || _b === void 0 ? void 0 : _b.call(_a, {\r\n                moveable: this.moveable,\r\n                targets: this._elementTargets,\r\n            });\r\n            (_c = this._onChangeTargets) === null || _c === void 0 ? void 0 : _c.call(this);\r\n        }\r\n        var _e = __read(this._updateRefs(), 3), refTargets = _e[0], selectorMap = _e[1], isUpdate = _e[2];\r\n        this.refTargets = refTargets;\r\n        this.selectorMap = selectorMap;\r\n        if (isUpdate) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    InitialMoveable.defaultAbles = [];\r\n    InitialMoveable.customStyledMap = {};\r\n    InitialMoveable.defaultStyled = null;\r\n    __decorate([\r\n        withMethods(MOVEABLE_METHODS)\r\n    ], InitialMoveable.prototype, \"moveable\", void 0);\r\n    return InitialMoveable;\r\n}(React.PureComponent));\n\nvar Moveable = /*#__PURE__*/ (function (_super) {\r\n    __extends(Moveable, _super);\r\n    function Moveable() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Moveable.defaultAbles = MOVEABLE_ABLES;\r\n    return Moveable;\r\n}(InitialMoveable));\n\nfunction makeMoveable(ables) {\r\n    var _a;\r\n    return _a = /*#__PURE__*/ (function (_super) {\r\n            __extends(Moveable, _super);\r\n            function Moveable() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            return Moveable;\r\n        }(InitialMoveable)),\r\n        _a.defaultAbles = ables,\r\n        _a;\r\n}\n\nexport { Clippable, DIRECTIONS, Draggable, edgeDraggable as EdgeDraggable, InitialMoveable, MOVEABLE_ABLES, MOVEABLE_EVENTS, MOVEABLE_METHODS, MOVEABLE_PROPS, Pinchable, Resizable, Rotatable, Roundable, Scalable, Snappable, Warpable, calculateElementPosition, Moveable as default, getElementInfo, makeAble, makeMoveable };\n","/*\nCopyright (c) 2019 Daybrush\nname: moveable\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/moveable\nversion: 0.53.0\n*/\nimport { ref, Properties } from 'framework-utils';\nimport * as React from 'croact';\nimport { renderSelf } from 'croact';\nimport Moveable$1, { MOVEABLE_PROPS, MOVEABLE_METHODS, MOVEABLE_EVENTS, getElementInfo as getElementInfo$1, makeAble as makeAble$1 } from 'croact-moveable';\nimport { camelize, getDocument, isArray } from '@daybrush/utils';\nimport EventEmitter from '@scena/event-emitter';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\nvar InnerMoveable = /*#__PURE__*/function (_super) {\n  __extends(InnerMoveable, _super);\n\n  function InnerMoveable(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {};\n    _this.state = _this.props;\n    return _this;\n  }\n\n  var __proto = InnerMoveable.prototype;\n\n  __proto.render = function () {\n    return React.createElement(Moveable$1, __assign({\n      ref: ref(this, \"moveable\")\n    }, this.state));\n  };\n\n  return InnerMoveable;\n}(React.Component);\n\nvar PROPERTIES = MOVEABLE_PROPS;\nvar METHODS = MOVEABLE_METHODS;\nvar EVENTS = MOVEABLE_EVENTS;\n\n/**\r\n * Moveable is Draggable! Resizable! Scalable! Rotatable!\r\n * @sort 1\r\n * @alias Moveable\r\n * @extends EventEmitter\r\n */\n\nvar MoveableManager = /*#__PURE__*/function (_super) {\n  __extends(MoveableManager, _super);\n  /**\r\n   *\r\n   */\n\n\n  function MoveableManager(parentElement, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.containerProvider = null;\n    _this.selfElement = null;\n    _this._warp = false;\n\n    var nextOptions = __assign({}, options);\n\n    var events = {};\n    EVENTS.forEach(function (name) {\n      events[camelize(\"on \".concat(name))] = function (e) {\n        return _this.trigger(name, e);\n      };\n    });\n    var selfElement;\n\n    if (options.warpSelf) {\n      delete options.warpSelf;\n      _this._warp = true;\n      selfElement = parentElement;\n    } else {\n      selfElement = getDocument(parentElement).createElement(\"div\");\n      parentElement.appendChild(selfElement);\n    }\n\n    _this.containerProvider = renderSelf(React.createElement(InnerMoveable, __assign({\n      ref: ref(_this, \"innerMoveable\")\n    }, nextOptions, events)), selfElement);\n    _this.selfElement = selfElement;\n    var target = nextOptions.target;\n\n    if (isArray(target) && target.length > 1) {\n      _this.updateRect();\n    }\n\n    return _this;\n  }\n\n  var __proto = MoveableManager.prototype;\n\n  __proto.setState = function (state, callback) {\n    this.innerMoveable.setState(state, callback);\n  };\n\n  __proto.forceUpdate = function (callback) {\n    this.innerMoveable.forceUpdate(callback);\n  };\n\n  __proto.dragStart = function (e, target) {\n    if (target === void 0) {\n      target = e.target;\n    }\n\n    var innerMoveable = this.innerMoveable;\n\n    if (innerMoveable.$_timer) {\n      this.forceUpdate();\n    }\n\n    this.getMoveable().dragStart(e, target);\n  };\n\n  __proto.destroy = function () {\n    var _a;\n\n    var selfElement = this.selfElement;\n    renderSelf(null, selfElement, this.containerProvider);\n\n    if (!this._warp) {\n      (_a = selfElement === null || selfElement === void 0 ? void 0 : selfElement.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(selfElement);\n    }\n\n    this.containerProvider = null;\n    this.off();\n    this.selfElement = null;\n    this.innerMoveable = null;\n  };\n\n  __proto.getMoveable = function () {\n    return this.innerMoveable.moveable;\n  };\n\n  MoveableManager = __decorate([Properties(METHODS, function (prototype, property) {\n    if (prototype[property]) {\n      return;\n    }\n\n    prototype[property] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var self = this.getMoveable();\n\n      if (!self || !self[property]) {\n        return;\n      }\n\n      return self[property].apply(self, args);\n    };\n  }), Properties(PROPERTIES, function (prototype, property) {\n    Object.defineProperty(prototype, property, {\n      get: function () {\n        return this.getMoveable().props[property];\n      },\n      set: function (value) {\n        var _a;\n\n        this.setState((_a = {}, _a[property] = value, _a));\n      },\n      enumerable: true,\n      configurable: true\n    });\n  })], MoveableManager);\n  return MoveableManager;\n}(EventEmitter);\n\nvar Moveable = /*#__PURE__*/function (_super) {\n  __extends(Moveable, _super);\n\n  function Moveable() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Moveable;\n}(MoveableManager);\n\nfunction getElementInfo(target, container, rootContainer) {\n  return getElementInfo$1(target, container, rootContainer);\n}\nfunction makeAble(name, able) {\n  return makeAble$1(name, able);\n}\n\nexport { EVENTS, METHODS, PROPERTIES, Moveable as default, getElementInfo, makeAble };\n//# sourceMappingURL=moveable.esm.js.map\n","<script setup lang=\"ts\">\r\nimport {\r\n  ref,\r\n  reactive,\r\n  toRef,\r\n  computed,\r\n  watch,\r\n  watchEffect,\r\n  inject,\r\n  onBeforeMount,\r\n  onMounted,\r\n  onBeforeUnmount\r\n} from 'vue'\r\nimport { isNull, nextTickOnce, throttle } from '@vexip-ui/utils'\r\nimport {\r\n  LAYOUT_KEY,\r\n  EMITTER_KEY,\r\n  setTopLeft,\r\n  setTopRight,\r\n  setTransformRtl,\r\n  setTransform,\r\n  useNameHelper\r\n} from '../helpers/common'\r\nimport { getControlPosition, createCoreData } from '../helpers/draggable'\r\nimport { getColsFromBreakpoint } from '../helpers/responsive'\r\nimport { getDocumentDir } from '../helpers/dom'\r\n\r\nimport Moveable from 'moveable'\r\n\r\nconst props = defineProps({\r\n  isDraggable: {\r\n    type: Boolean,\r\n    default: null\r\n  },\r\n  isResizable: {\r\n    type: Boolean,\r\n    default: null\r\n  },\r\n  isBounded: {\r\n    type: Boolean,\r\n    default: null\r\n  },\r\n  static: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  minH: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  minW: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  maxH: {\r\n    type: Number,\r\n    default: Infinity\r\n  },\r\n  maxW: {\r\n    type: Number,\r\n    default: Infinity\r\n  },\r\n  x: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  y: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  w: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  h: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  i: {\r\n    type: [Number, String],\r\n    required: true\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['container-resized', 'resize', 'resized', 'move', 'moved'])\r\n\r\nconst layout = inject(LAYOUT_KEY)\r\nconst emitter = inject(EMITTER_KEY)!\r\n\r\nif (!layout) {\r\n  throw new Error('[grid-layout-plus]: missing layout store, GridItem must under a GridLayout.')\r\n}\r\n\r\nconst interactObj = ref<InstanceType<typeof Moveable> | null>(null)\r\n\r\nconst state = reactive({\r\n  cols: 1,\r\n  containerWidth: 100,\r\n  rowHeight: 30,\r\n  margin: [10, 10],\r\n  maxRows: Infinity,\r\n  draggable: null as boolean | null,\r\n  resizable: null as boolean | null,\r\n  bounded: null as boolean | null,\r\n  transformScale: 1,\r\n  useCssTransforms: true,\r\n  useStyleCursor: true,\r\n\r\n  isDragging: false,\r\n  dragging: {\r\n    top: -1,\r\n    left: -1\r\n  },\r\n  isResizing: false,\r\n  resizing: {\r\n    width: -1,\r\n    height: -1\r\n  },\r\n  style: {} as Record<string, string>,\r\n  rtl: false\r\n})\r\n\r\nlet dragEventSet = false\r\nlet resizeEventSet = false\r\n\r\nlet lastX = NaN\r\nlet lastY = NaN\r\nlet lastW = NaN\r\nlet lastH = NaN\r\n\r\nlet previousW = -1\r\nlet previousH = -1\r\nlet previousX = -1\r\nlet previousY = -1\r\n\r\nlet innerX = props.x\r\nlet innerY = props.y\r\nlet innerW = props.w\r\nlet innerH = props.h\r\n\r\nconst wrapper = ref<HTMLElement>()\r\n\r\nconst instance = reactive({\r\n  i: toRef(props, 'i'),\r\n  state,\r\n  wrapper,\r\n  calcXY\r\n})\r\n\r\nfunction updateWidthHandler(width: number) {\r\n  updateWidth(width)\r\n}\r\n\r\nfunction compactHandler() {\r\n  compact()\r\n}\r\n\r\nfunction setDraggableHandler(isDraggable: boolean) {\r\n  if (isNull(props.isDraggable)) {\r\n    state.draggable = isDraggable\r\n  }\r\n}\r\n\r\nfunction setResizableHandler(isResizable: boolean) {\r\n  if (isNull(props.isResizable)) {\r\n    state.resizable = isResizable\r\n  }\r\n}\r\n\r\nfunction setBoundedHandler(isBounded: boolean) {\r\n  if (isNull(props.isBounded)) {\r\n    state.bounded = isBounded\r\n  }\r\n}\r\n\r\nfunction setTransformScaleHandler(transformScale: number) {\r\n  state.transformScale = transformScale\r\n}\r\n\r\nfunction setRowHeightHandler(rowHeight: number) {\r\n  state.rowHeight = rowHeight\r\n}\r\n\r\nfunction setMaxRowsHandler(maxRows: number) {\r\n  state.maxRows = maxRows\r\n}\r\n\r\nfunction directionchangeHandler() {\r\n  state.rtl = getDocumentDir() === 'rtl'\r\n  compact()\r\n}\r\n\r\nfunction setColNum(colNum: number) {\r\n  state.cols = Math.floor(colNum)\r\n}\r\n\r\nlayout.increaseItem(instance)\r\n\r\nonBeforeMount(() => {\r\n  state.rtl = getDocumentDir() === 'rtl'\r\n})\r\n\r\nonMounted(() => {\r\n  if (layout.responsive && layout.lastBreakpoint) {\r\n    state.cols = getColsFromBreakpoint(layout.lastBreakpoint, layout.cols)\r\n  } else {\r\n    state.cols = layout.colNum\r\n  }\r\n  state.rowHeight = layout.rowHeight\r\n  state.containerWidth = layout.width !== null ? layout.width : 100\r\n  state.margin = layout.margin !== undefined ? layout.margin.map(Number) : [10, 10]\r\n  state.maxRows = layout.maxRows\r\n\r\n  if (isNull(props.isDraggable)) {\r\n    state.draggable = layout.isDraggable\r\n  } else {\r\n    state.draggable = props.isDraggable\r\n  }\r\n  if (isNull(props.isResizable)) {\r\n    state.resizable = layout.isResizable\r\n  } else {\r\n    state.resizable = props.isResizable\r\n  }\r\n  if (isNull(props.isBounded)) {\r\n    state.bounded = layout.isBounded\r\n  } else {\r\n    state.bounded = props.isBounded\r\n  }\r\n  state.transformScale = layout.transformScale\r\n  state.useCssTransforms = layout.useCssTransforms\r\n  state.useStyleCursor = layout.useStyleCursor\r\n\r\n  watchEffect(() => {\r\n    innerX = props.x\r\n    innerY = props.y\r\n    innerH = props.h\r\n    innerW = props.w\r\n    nextTickOnce(createStyle)\r\n  })\r\n\r\n  emitter.on('updateWidth', updateWidthHandler)\r\n  emitter.on('compact', compactHandler)\r\n  emitter.on('setDraggable', setDraggableHandler)\r\n  emitter.on('setResizable', setResizableHandler)\r\n  emitter.on('setBounded', setBoundedHandler)\r\n  emitter.on('setTransformScale', setTransformScaleHandler)\r\n  emitter.on('setRowHeight', setRowHeightHandler)\r\n  emitter.on('setMaxRows', setMaxRowsHandler)\r\n  emitter.on('directionchange', directionchangeHandler)\r\n  emitter.on('setColNum', setColNum)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  emitter.off('updateWidth', updateWidthHandler)\r\n  emitter.off('compact', compactHandler)\r\n  emitter.off('setDraggable', setDraggableHandler)\r\n  emitter.off('setResizable', setResizableHandler)\r\n  emitter.off('setBounded', setBoundedHandler)\r\n  emitter.off('setTransformScale', setTransformScaleHandler)\r\n  emitter.off('setRowHeight', setRowHeightHandler)\r\n  emitter.off('setMaxRows', setMaxRowsHandler)\r\n  emitter.off('directionchange', directionchangeHandler)\r\n  emitter.off('setColNum', setColNum)\r\n\r\n  if (interactObj.value) {\r\n    interactObj.value.destroy()\r\n  }\r\n\r\n  layout.decreaseItem(instance)\r\n})\r\n\r\ndefineExpose({ state, wrapper })\r\n\r\nconst isAndroid = navigator.userAgent.toLowerCase().includes('android')\r\n\r\nconst resizableAndNotStatic = computed(() => state.resizable && !props.static)\r\nconst renderRtl = computed(() => (layout.isMirrored ? !state.rtl : state.rtl))\r\nconst draggableOrResizableAndNotStatic = computed(() => {\r\n  return (state.draggable || state.resizable) && !props.static\r\n})\r\n\r\nconst nh = useNameHelper('item')\r\n\r\nconst className = computed(() => {\r\n  return {\r\n    [nh.b()]: true,\r\n    [nh.bm('resizable')]: resizableAndNotStatic.value,\r\n    [nh.bm('static')]: props.static,\r\n    [nh.bm('resizing')]: state.isResizing,\r\n    [nh.bm('dragging')]: state.isDragging,\r\n    [nh.bm('transform')]: state.useCssTransforms,\r\n    [nh.bm('rtl')]: renderRtl.value,\r\n    [nh.bm('no-touch')]: isAndroid && draggableOrResizableAndNotStatic.value\r\n  }\r\n})\r\nconst resizerClass = computed(() => {\r\n  // return renderRtl.value ? 'vue-resizable-handle vue-rtl-resizable-handle' : 'vue-resizable-handle'\r\n  return [nh.be('resizer'), renderRtl.value && nh.bem('resizer', 'rtl')].filter(Boolean)\r\n})\r\n\r\nwatch(\r\n  () => props.isDraggable,\r\n  value => {\r\n    state.draggable = value\r\n  }\r\n)\r\nwatch(\r\n  () => props.static,\r\n  () => {\r\n    nextTickOnce(tryMakeDraggable)\r\n    nextTickOnce(tryMakeResizable)\r\n  }\r\n)\r\nwatch(\r\n  () => state.draggable,\r\n  () => {\r\n    nextTickOnce(tryMakeDraggable)\r\n  }\r\n)\r\nwatch(\r\n  () => props.isResizable,\r\n  value => {\r\n    state.resizable = value\r\n  }\r\n)\r\nwatch(\r\n  () => props.isBounded,\r\n  value => {\r\n    state.bounded = value\r\n  }\r\n)\r\nwatch(\r\n  () => state.resizable,\r\n  () => {\r\n    nextTickOnce(tryMakeResizable)\r\n  }\r\n)\r\nwatch(\r\n  () => state.rowHeight,\r\n  () => {\r\n    nextTickOnce(createStyle)\r\n    nextTickOnce(emitContainerResized)\r\n  }\r\n)\r\nwatch([() => state.cols, () => state.containerWidth], () => {\r\n  nextTickOnce(tryMakeResizable)\r\n  nextTickOnce(createStyle)\r\n  nextTickOnce(emitContainerResized)\r\n})\r\nwatch([() => props.minH, () => props.maxH, () => props.minW, () => props.maxW], () => {\r\n  nextTickOnce(tryMakeResizable)\r\n})\r\nwatch(renderRtl, () => {\r\n  nextTickOnce(tryMakeResizable)\r\n  nextTickOnce(createStyle)\r\n})\r\nwatch([() => layout.margin, () => layout.margin[0], () => layout.margin[1]], () => {\r\n  const margin = layout.margin\r\n\r\n  if (!margin || (margin[0] === state.margin[0] && margin[1] === state.margin[1])) {\r\n    return\r\n  }\r\n\r\n  state.margin = margin.map(Number)\r\n  nextTickOnce(createStyle)\r\n  nextTickOnce(emitContainerResized)\r\n})\r\n\r\nfunction createStyle() {\r\n  if (props.x + props.w > state.cols) {\r\n    innerX = 0\r\n    innerW = props.w > state.cols ? state.cols : props.w\r\n  } else {\r\n    innerX = props.x\r\n    innerW = props.w\r\n  }\r\n\r\n  const pos = calcPosition(innerX, innerY, innerW, innerH)\r\n\r\n  if (state.isDragging) {\r\n    pos.top = state.dragging.top\r\n    // Add rtl support\r\n    if (renderRtl.value) {\r\n      pos.right = state.dragging.left\r\n    } else {\r\n      pos.left = state.dragging.left\r\n    }\r\n  }\r\n  if (state.isResizing) {\r\n    pos.width = state.resizing.width\r\n    pos.height = state.resizing.height\r\n  }\r\n\r\n  let style\r\n  // CSS Transforms support (default)\r\n  if (state.useCssTransforms) {\r\n    // Add rtl support\r\n    if (renderRtl.value) {\r\n      style = setTransformRtl(pos.top, pos.right!, pos.width, pos.height)\r\n    } else {\r\n      style = setTransform(pos.top, pos.left!, pos.width, pos.height)\r\n    }\r\n  } else {\r\n    // top,left (slow)\r\n    // Add rtl support\r\n    if (renderRtl.value) {\r\n      style = setTopRight(pos.top, pos.right!, pos.width, pos.height)\r\n    } else {\r\n      style = setTopLeft(pos.top, pos.left!, pos.width, pos.height)\r\n    }\r\n  }\r\n\r\n  state.style = style\r\n}\r\n\r\nfunction emitContainerResized() {\r\n  // this.style has width and height with trailing 'px'. The\r\n  // resized event is without them\r\n  const styleProps: Record<string, string> = {}\r\n  for (const prop of ['width', 'height']) {\r\n    const val = state.style[prop]\r\n    const matches = val.match(/^(\\d+)px$/)\r\n    if (!matches) {\r\n      return\r\n    }\r\n    styleProps[prop] = matches[1]\r\n  }\r\n  emit('container-resized', props.i, props.h, props.w, styleProps.height, styleProps.width)\r\n}\r\n\r\nfunction handleResize(event: any, type: string) {\r\n  if (props.static) return\r\n\r\n  if (\r\n    (type === 'resizestart' && state.isResizing) ||\r\n    (type !== 'resizestart' && !state.isResizing)\r\n  ) {\r\n    return\r\n  }\r\n\r\n  const position = getControlPosition(event)\r\n  // Get the current drag point from the event. This is used as the offset.\r\n  if (isNull(position)) return // not possible but satisfies flow\r\n\r\n  const { x, y } = position\r\n  const newSize = { width: 0, height: 0 }\r\n  let pos\r\n  switch (type) {\r\n    case 'resizestart': {\r\n      tryMakeResizable()\r\n      previousW = innerW\r\n      previousH = innerH\r\n      pos = calcPosition(innerX, innerY, innerW, innerH)\r\n      newSize.width = pos.width\r\n      newSize.height = pos.height\r\n      state.resizing = newSize\r\n      state.isResizing = true\r\n      break\r\n    }\r\n    case 'resizemove': {\r\n      const coreEvent = createCoreData(lastW, lastH, x, y)\r\n      if (renderRtl.value) {\r\n        newSize.width = state.resizing.width - coreEvent.deltaX / state.transformScale\r\n      } else {\r\n        newSize.width = state.resizing.width + coreEvent.deltaX / state.transformScale\r\n      }\r\n      newSize.height = state.resizing.height + coreEvent.deltaY / state.transformScale\r\n      state.resizing = newSize\r\n      break\r\n    }\r\n    case 'resizeend': {\r\n      pos = calcPosition(innerX, innerY, innerW, innerH)\r\n      newSize.width = pos.width\r\n      newSize.height = pos.height\r\n\r\n      state.resizing = { width: -1, height: -1 }\r\n      state.isResizing = false\r\n      break\r\n    }\r\n  }\r\n\r\n  // Get new WH\r\n  pos = calcWH(newSize.height, newSize.width)\r\n  if (pos.w < props.minW) {\r\n    pos.w = props.minW\r\n  }\r\n  if (pos.w > props.maxW) {\r\n    pos.w = props.maxW\r\n  }\r\n  if (pos.h < props.minH) {\r\n    pos.h = props.minH\r\n  }\r\n  if (pos.h > props.maxH) {\r\n    pos.h = props.maxH\r\n  }\r\n\r\n  if (pos.h < 1) {\r\n    pos.h = 1\r\n  }\r\n  if (pos.w < 1) {\r\n    pos.w = 1\r\n  }\r\n\r\n  lastW = x\r\n  lastH = y\r\n\r\n  if (innerW !== pos.w || innerH !== pos.h) {\r\n    emit('resize', props.i, pos.h, pos.w, newSize.height, newSize.width)\r\n  }\r\n  if (type === 'resizeend' && (previousW !== innerW || previousH !== innerH)) {\r\n    emit('resized', props.i, pos.h, pos.w, newSize.height, newSize.width)\r\n  }\r\n  emitter.emit('resizeEvent', type, props.i, innerX, innerY, pos.h, pos.w)\r\n}\r\n\r\nfunction handleDrag(event: any, type: string) {\r\n  if (props.static || state.isResizing) return\r\n\r\n  if ((type === 'dragstart' && state.isDragging) || (type !== 'dragstart' && !state.isDragging)) {\r\n    return\r\n  }\r\n\r\n  const position = getControlPosition(event)\r\n\r\n  // Get the current drag point from the event. This is used as the offset.\r\n  if (isNull(position)) return // not possible but satisfies flow\r\n  const { x, y } = position\r\n  const target = event.target as HTMLElement\r\n\r\n  if (!target.offsetParent) return\r\n\r\n  // let shouldUpdate = false;\r\n  const newPosition = { top: 0, left: 0 }\r\n  switch (type) {\r\n    case 'dragstart': {\r\n      previousX = innerX\r\n      previousY = innerY\r\n\r\n      const parentRect = target.offsetParent.getBoundingClientRect()\r\n      const clientRect = target.getBoundingClientRect()\r\n\r\n      const cLeft = clientRect.left / state.transformScale\r\n      const pLeft = parentRect.left / state.transformScale\r\n      const cRight = clientRect.right / state.transformScale\r\n      const pRight = parentRect.right / state.transformScale\r\n      const cTop = clientRect.top / state.transformScale\r\n      const pTop = parentRect.top / state.transformScale\r\n\r\n      if (renderRtl.value) {\r\n        newPosition.left = (cRight - pRight) * -1\r\n      } else {\r\n        newPosition.left = cLeft - pLeft\r\n      }\r\n      newPosition.top = cTop - pTop\r\n      state.dragging = newPosition\r\n      state.isDragging = true\r\n      break\r\n    }\r\n    case 'dragmove': {\r\n      const coreEvent = createCoreData(lastX, lastY, x, y)\r\n      // Add rtl support\r\n      if (renderRtl.value) {\r\n        newPosition.left = state.dragging.left - coreEvent.deltaX / state.transformScale\r\n      } else {\r\n        newPosition.left = state.dragging.left + coreEvent.deltaX / state.transformScale\r\n      }\r\n      newPosition.top = state.dragging.top + coreEvent.deltaY / state.transformScale\r\n      if (state.bounded) {\r\n        const bottomBoundary =\r\n          target.offsetParent.clientHeight -\r\n          calcGridItemWHPx(props.h, state.rowHeight, state.margin[1])\r\n        newPosition.top = clamp(newPosition.top, 0, bottomBoundary)\r\n        const colWidth = calcColWidth()\r\n        const rightBoundary =\r\n          state.containerWidth - calcGridItemWHPx(props.w, colWidth, state.margin[0])\r\n        newPosition.left = clamp(newPosition.left, 0, rightBoundary)\r\n      }\r\n\r\n      state.dragging = newPosition\r\n      break\r\n    }\r\n    case 'dragend': {\r\n      const parentRect = target.offsetParent.getBoundingClientRect()\r\n      const clientRect = target.getBoundingClientRect()\r\n\r\n      const cLeft = clientRect.left / state.transformScale\r\n      const pLeft = parentRect.left / state.transformScale\r\n      const cRight = clientRect.right / state.transformScale\r\n      const pRight = parentRect.right / state.transformScale\r\n      const cTop = clientRect.top / state.transformScale\r\n      const pTop = parentRect.top / state.transformScale\r\n\r\n      // Add rtl support\r\n      if (renderRtl.value) {\r\n        newPosition.left = (cRight - pRight) * -1\r\n      } else {\r\n        newPosition.left = cLeft - pLeft\r\n      }\r\n      newPosition.top = cTop - pTop\r\n      state.dragging = { top: -1, left: -1 }\r\n      state.isDragging = false\r\n      break\r\n    }\r\n  }\r\n\r\n  // Get new XY\r\n  let pos\r\n  if (renderRtl.value) {\r\n    pos = calcXY(newPosition.top, newPosition.left)\r\n  } else {\r\n    pos = calcXY(newPosition.top, newPosition.left)\r\n  }\r\n\r\n  lastX = x\r\n  lastY = y\r\n\r\n  if (innerX !== pos.x || innerY !== pos.y) {\r\n    emit('move', props.i, pos.x, pos.y)\r\n  }\r\n  if (type === 'dragend' && (previousX !== innerX || previousY !== innerY)) {\r\n    emit('moved', props.i, pos.x, pos.y)\r\n  }\r\n  emitter.emit('dragEvent', type, props.i, pos.x, pos.y, innerH, innerW)\r\n}\r\n\r\nfunction calcPosition(x: number, y: number, w: number, h: number) {\r\n  const colWidth = calcColWidth()\r\n  // add rtl support\r\n  let out\r\n  if (renderRtl.value) {\r\n    out = {\r\n      right: Math.round(colWidth * x + (x + 1) * state.margin[0]),\r\n      top: Math.round(state.rowHeight * y + (y + 1) * state.margin[1]),\r\n      // 0 * Infinity === NaN, which causes problems with resize constraints;\r\n      // Fix this if it occurs.\r\n      // Note we do it here rather than later because Math.round(Infinity) causes depot\r\n      width: w === Infinity ? w : Math.round(colWidth * w + Math.max(0, w - 1) * state.margin[0]),\r\n      height:\r\n        h === Infinity ? h : Math.round(state.rowHeight * h + Math.max(0, h - 1) * state.margin[1])\r\n    }\r\n  } else {\r\n    out = {\r\n      left: Math.round(colWidth * x + (x + 1) * state.margin[0]),\r\n      top: Math.round(state.rowHeight * y + (y + 1) * state.margin[1]),\r\n      // 0 * Infinity === NaN, which causes problems with resize constraints;\r\n      // Fix this if it occurs.\r\n      // Note we do it here rather than later because Math.round(Infinity) causes depot\r\n      width: w === Infinity ? w : Math.round(colWidth * w + Math.max(0, w - 1) * state.margin[0]),\r\n      height:\r\n        h === Infinity ? h : Math.round(state.rowHeight * h + Math.max(0, h - 1) * state.margin[1])\r\n    }\r\n  }\r\n\r\n  return out\r\n}\r\n\r\n/**\r\n * Translate x and y coordinates from pixels to grid units.\r\n * @param top  Top position (relative to parent) in pixels.\r\n * @param left Left position (relative to parent) in pixels.\r\n * @return x and y in grid units.\r\n */\r\n// TODO check if this function needs change in order to support rtl.\r\nfunction calcXY(top: number, left: number) {\r\n  const colWidth = calcColWidth()\r\n\r\n  // left = colWidth * x + margin * (x + 1)\r\n  // l = cx + m(x+1)\r\n  // l = cx + mx + m\r\n  // l - m = cx + mx\r\n  // l - m = x(c + m)\r\n  // (l - m) / (c + m) = x\r\n  // x = (left - margin) / (coldWidth + margin)\r\n  let x = Math.round((left - state.margin[0]) / (colWidth + state.margin[0]))\r\n  let y = Math.round((top - state.margin[1]) / (state.rowHeight + state.margin[1]))\r\n\r\n  // Capping\r\n  x = Math.max(Math.min(x, state.cols - innerW), 0)\r\n  y = Math.max(Math.min(y, state.maxRows - innerH), 0)\r\n\r\n  return { x, y }\r\n}\r\n\r\nfunction calcColWidth() {\r\n  return (state.containerWidth - state.margin[0] * (state.cols + 1)) / state.cols\r\n}\r\n\r\nfunction calcGridItemWHPx(gridUnits: number, colOrRowSize: number, marginPx: number) {\r\n  // 0 * Infinity === NaN, which causes problems with resize constraints\r\n  if (!Number.isFinite(gridUnits)) return gridUnits\r\n  return Math.round(colOrRowSize * gridUnits + Math.max(0, gridUnits - 1) * marginPx)\r\n}\r\n\r\nfunction clamp(num: number, lowerBound: number, upperBound: number) {\r\n  return Math.max(Math.min(num, upperBound), lowerBound)\r\n}\r\n\r\n/**\r\n * Given a height and width in pixel values, calculate grid units.\r\n * @param height Height in pixels.\r\n * @param width  Width in pixels.\r\n * @param autoSizeFlag  function autoSize identifier.\r\n * @return w, h as grid units.\r\n */\r\nfunction calcWH(height: number, width: number, autoSizeFlag = false) {\r\n  const colWidth = calcColWidth()\r\n\r\n  // width = colWidth * w - (margin * (w - 1))\r\n  // ...\r\n  // w = (width + margin) / (colWidth + margin)\r\n  let w = Math.round((width + state.margin[0]) / (colWidth + state.margin[0]))\r\n  let h = 0\r\n  if (!autoSizeFlag) {\r\n    h = Math.round((height + state.margin[1]) / (state.rowHeight + state.margin[1]))\r\n  } else {\r\n    h = Math.ceil((height + state.margin[1]) / (state.rowHeight + state.margin[1]))\r\n  }\r\n\r\n  // Capping\r\n  w = Math.max(Math.min(w, state.cols - innerX), 0)\r\n  h = Math.max(Math.min(h, state.maxRows - innerY), 0)\r\n  return { w, h }\r\n}\r\n\r\nfunction updateWidth(width: number, colNum?: number) {\r\n  state.containerWidth = width\r\n  if (colNum !== undefined && colNum !== null) {\r\n    state.cols = colNum\r\n  }\r\n}\r\n\r\nfunction compact() {\r\n  createStyle()\r\n}\r\n\r\nfunction tryInteract() {\r\n  if (!interactObj.value && wrapper.value) {\r\n    // @ts-ignore\r\n    interactObj.value = new Moveable(document.body, {\r\n      target: wrapper.value,\r\n      hideDefaultLines: true,\r\n      origin: false\r\n    })\r\n  }\r\n}\r\n\r\nconst throttleDrag = throttle(handleDrag)\r\n\r\nfunction tryMakeDraggable() {\r\n  tryInteract()\r\n\r\n  if (!interactObj.value) return\r\n\r\n  if (state.draggable && !props.static) {\r\n    interactObj.value.setState({\r\n      draggable: true\r\n    })\r\n\r\n    if (!dragEventSet) {\r\n      dragEventSet = true\r\n\r\n      interactObj.value\r\n        .on('dragStart', e => handleDrag(e, 'dragstart'))\r\n        .on('drag', e => throttleDrag(e, 'dragmove'))\r\n        .on('dragEnd', e => handleDrag(e, 'dragend'))\r\n    }\r\n  } else {\r\n    interactObj.value.setState({\r\n      draggable: false\r\n    })\r\n  }\r\n}\r\n\r\nconst throttleResize = throttle(handleResize)\r\n\r\nfunction tryMakeResizable() {\r\n  tryInteract()\r\n\r\n  if (!interactObj.value) return\r\n\r\n  if (state.resizable && !props.static) {\r\n    interactObj.value.setState({\r\n      resizable: true\r\n    })\r\n    if (!resizeEventSet) {\r\n      resizeEventSet = true\r\n      interactObj.value\r\n        .on('resizeStart', e => handleResize(e, 'resizestart'))\r\n        .on('resize', e => throttleResize(e, 'resizemove'))\r\n        .on('resizeEnd', e => handleResize(e, 'resizeend'))\r\n    }\r\n  } else {\r\n    interactObj.value.setState({\r\n      resizable: false\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <section ref=\"wrapper\" :class=\"className\" :style=\"state.style\">\r\n    <slot></slot>\r\n    <span v-if=\"resizableAndNotStatic\" :class=\"resizerClass\"></span>\r\n  </section>\r\n</template>\r\n","import { watch as Q, unref as T, getCurrentScope as De, onScopeDispose as J, ref as z, onMounted as Ze, nextTick as Lt, onBeforeUnmount as et, renderSlot as an, isVNode as ln, Comment as fn, createTextVNode as un, Fragment as dn, readonly as Bt, computed as W, isRef as Oe, customRef as hn, reactive as Ve, shallowRef as Ie, watchEffect as lt } from \"vue\";\nconst D = typeof window < \"u\";\nvar ft;\nD && ((ft = window == null ? void 0 : window.navigator) != null && ft.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction Xe(e) {\n  return e != null;\n}\nfunction P() {\n}\nconst mn = Object.freeze({\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n});\nObject.freeze(new Set(Object.keys(mn)));\nfunction ut(e) {\n  return e & -e;\n}\nfunction pn(e, t = 0) {\n  const n = new Array(e + 1).fill(0);\n  function r(c, a) {\n    if (!(!a || c >= e))\n      for (c += 1; c <= e; )\n        n[c] += a, c += ut(c);\n  }\n  function o(c = e) {\n    if (c <= 0)\n      return 0;\n    c > e && (c = e);\n    let a = c * t;\n    for (; c > 0; )\n      a += n[c], c -= ut(c);\n    return a;\n  }\n  function i(c) {\n    return o(c + 1) - o(c);\n  }\n  function s(c) {\n    let a = 0, l = e;\n    for (; l > a; ) {\n      const f = Math.floor((a + l) / 2), p = o(f);\n      if (p > c) {\n        l = f;\n        continue;\n      } else if (p < c) {\n        if (a === f)\n          return o(a + 1) <= c ? a + 1 : a;\n        a = f;\n      } else\n        return f;\n    }\n    return a;\n  }\n  return { tree: n, add: r, sum: o, get: i, boundIndex: s };\n}\nfunction vn(e) {\n  let t = parseFloat(e);\n  return Number.isNaN(t) && (t = Number(e)), Number.isNaN(t) ? 0 : t;\n}\nconst gn = D && (\"ontouchstart\" in window || yn() > 0), bn = gn ? \"pointerdown\" : \"click\";\nfunction yn() {\n  return typeof navigator < \"u\" && (navigator.maxTouchPoints || navigator.msMaxTouchPoints) || 0;\n}\nfunction wn(e, t, n = window.Event) {\n  const { type: r, bubbles: o = !1, cancelable: i = !1, ...s } = t;\n  if (!Xe(r) || r === \"\")\n    return !1;\n  let c;\n  return Xe(n) ? c = new n(r, { bubbles: o, cancelable: i }) : (c = document.createEvent(\"HTMLEvents\"), c.initEvent(r, o, i)), Object.assign(c, s), e.dispatchEvent(c);\n}\nconst xn = D ? requestAnimationFrame : (e) => {\n  setTimeout(e, 16);\n};\nfunction Pt(e, t = 16) {\n  if (typeof e != \"function\")\n    return P;\n  const n = (...i) => {\n    e(...i);\n  };\n  if (t <= 0)\n    return En(n);\n  let r = 0, o;\n  return function(...i) {\n    const s = Date.now(), c = s - r;\n    clearTimeout(o), c >= t ? (r = s, n(...i)) : o = setTimeout(\n      () => {\n        r = Date.now(), n(...i);\n      },\n      Math.max(0, t - c)\n    );\n  };\n}\nfunction En(e) {\n  if (typeof e != \"function\")\n    return e;\n  let t = !1, n, r;\n  return function(...o) {\n    return n = o, t || (t = !0, r = Promise.resolve().then(() => (t = !1, r = void 0, e(...n)))), r;\n  };\n}\nconst de = /* @__PURE__ */ new Set(), Dt = /* @__PURE__ */ new WeakMap();\nfunction Rn() {\n  de.forEach((e) => {\n    e(...Dt.get(e));\n  }), de.clear();\n}\nfunction Tn(e, ...t) {\n  if (typeof e != \"function\")\n    return e;\n  Dt.set(e, t), !de.has(e) && (de.add(e), de.size === 1 && xn(Rn));\n}\nfunction Ft(e) {\n  return Array.isArray(e) ? e : [e];\n}\nfunction q(e, t, n, r) {\n  if (!e)\n    return P;\n  let o = P;\n  const i = Q(\n    () => T(e),\n    (c) => {\n      o(), c && (c.addEventListener(t, n, r), o = () => {\n        c.removeEventListener(t, n, r), o = P;\n      });\n    },\n    { immediate: !0, flush: \"post\" }\n  ), s = () => {\n    i(), o();\n  };\n  return De() && J(s), s;\n}\nconst _t = \"clickoutside\", je = /* @__PURE__ */ new Set();\nD && document.addEventListener(\n  bn,\n  (e) => {\n    const t = e.target, n = e.composedPath && e.composedPath();\n    je.forEach((r) => {\n      r !== t && (n ? !n.includes(r) : !r.contains(t)) && (!r.__transferElement || r.__transferElement !== t && !r.__transferElement.contains(t)) && wn(r, { type: _t });\n    });\n  },\n  !0\n);\nfunction jr(e, t = z(null)) {\n  let n = P;\n  const r = Q(\n    () => T(t),\n    (i) => {\n      n(), i && (je.add(i), n = () => {\n        je.delete(i), n = P;\n      });\n    },\n    { immediate: !0, flush: \"post\" }\n  ), o = () => {\n    r(), n();\n  };\n  return De() && J(o), q(t, _t, e), t;\n}\nfunction Yr(e = P, t = z(null)) {\n  let n;\n  return Ze(() => {\n    Lt(() => {\n      const r = Nt(t.value);\n      r ? (n = new MutationObserver(() => {\n        r.style.display !== \"none\" && (typeof e == \"function\" && e(), n == null || n.disconnect(), n = null);\n      }), n.observe(r, {\n        attributes: !0,\n        childList: !0,\n        characterData: !0,\n        attributeFilter: [\"style\"]\n      })) : typeof e == \"function\" && e();\n    });\n  }), et(() => {\n    n == null || n.disconnect(), n = null;\n  }), t;\n}\nfunction Nt(e) {\n  if (e) {\n    let t = e.parentElement;\n    for (; t && t !== document.body; ) {\n      if (t.style.display === \"none\")\n        return t;\n      t = t.parentElement;\n    }\n  }\n  return null;\n}\nfunction dt(e) {\n  return (e == null ? void 0 : e.style.display) !== \"none\" ? !!Nt(e) : !0;\n}\nfunction Kr(e, t, n) {\n  for (const r of t)\n    if (e[r])\n      return (o) => an(e, r, o, () => {\n        const i = n == null ? void 0 : n(o);\n        return i ? Ft(i) : [];\n      });\n  return n || null;\n}\nfunction Ur(e) {\n  const t = [], n = Array.isArray(e) ? [...e] : [];\n  for (; n.length; ) {\n    const r = n.shift();\n    r !== null && (Array.isArray(r) && n.unshift(...r), !(typeof r != \"string\" && typeof r != \"number\" && (!ln(r) || r.type === fn)) && (typeof r == \"string\" || typeof r == \"number\" ? t.push(un(String(r))) : r.type === dn && Array.isArray(r.children) ? n.unshift(r.children) : t.push(r)));\n  }\n  return t;\n}\nfunction we(e) {\n  const t = T(e);\n  return typeof t == \"string\" ? D ? document.querySelector(t) : null : (t == null ? void 0 : t.$el) ?? t;\n}\nfunction Gr(e) {\n  return new Proxy({}, {\n    get(t, n) {\n      var r, o, i;\n      if (e.component)\n        return ((r = e.component.proxy) == null ? void 0 : r[n]) ?? ((o = e.component.exposeProxy) == null ? void 0 : o[n]) ?? ((i = e.component.exposed) == null ? void 0 : i[n]);\n    }\n  });\n}\nfunction Qr(...e) {\n  const t = z(!0), n = e[1] || P;\n  function r() {\n    t.value = !1;\n  }\n  function o() {\n    t.value = !0;\n  }\n  const i = Q(\n    e[0],\n    (...s) => new Promise((c, a) => {\n      t.value && Promise.resolve(n(...s)).then(c).catch(a);\n    }),\n    e[2]\n  );\n  return { active: Bt(t), pause: r, resume: o, stop: i };\n}\nconst Sn = [\n  [\n    \"requestFullscreen\",\n    \"exitFullscreen\",\n    \"fullscreenElement\",\n    \"fullscreenEnabled\",\n    \"fullscreenchange\",\n    \"fullscreenerror\"\n  ],\n  // New WebKit\n  [\n    \"webkitRequestFullscreen\",\n    \"webkitExitFullscreen\",\n    \"webkitFullscreenElement\",\n    \"webkitFullscreenEnabled\",\n    \"webkitfullscreenchange\",\n    \"webkitfullscreenerror\"\n  ],\n  // Old WebKit\n  [\n    \"webkitRequestFullScreen\",\n    \"webkitCancelFullScreen\",\n    \"webkitCurrentFullScreenElement\",\n    \"webkitCancelFullScreen\",\n    \"webkitfullscreenchange\",\n    \"webkitfullscreenerror\"\n  ],\n  [\n    \"mozRequestFullScreen\",\n    \"mozCancelFullScreen\",\n    \"mozFullScreenElement\",\n    \"mozFullScreenEnabled\",\n    \"mozfullscreenchange\",\n    \"mozfullscreenerror\"\n  ],\n  [\n    \"msRequestFullscreen\",\n    \"msExitFullscreen\",\n    \"msFullscreenElement\",\n    \"msFullscreenEnabled\",\n    \"MSFullscreenChange\",\n    \"MSFullscreenError\"\n  ]\n];\nlet me;\nif (D) {\n  for (const e of Sn)\n    if (e[1] in document) {\n      me = e;\n      break;\n    }\n}\nconst Ye = !!me, On = {\n  supported: Ye,\n  full: W(() => !1),\n  enter: P,\n  exit: P,\n  toggle: P\n}, Wt = /* @__PURE__ */ new Set(), Ke = /* @__PURE__ */ new WeakMap();\nif (D && me) {\n  const e = me[4];\n  document.addEventListener(\n    e,\n    (t) => {\n      if (Wt.forEach((n) => {\n        n.value = !1;\n      }), t.target) {\n        const n = Ke.get(t.target);\n        n && (n.value = !0);\n      }\n    },\n    !1\n  );\n}\nfunction Jr(e = z(null)) {\n  const t = W({\n    get: () => we(e),\n    set: (l) => {\n      Oe(e) && (e.value = l);\n    }\n  });\n  if (!D || !Ye)\n    return { ...On, target: t };\n  const [n, r, o] = me, i = z(!1);\n  Q(\n    () => we(e),\n    (l, f) => {\n      f && Ke.delete(f), l && Ke.set(l, i);\n    },\n    { immediate: !0, flush: \"post\" }\n  ), Wt.add(i), De() && J(c);\n  async function s(l = !1) {\n    await c();\n    const f = we(e);\n    return f && (l || !document[o]) ? (await f[n](), i.value = !0, document[o] === f) : !1;\n  }\n  async function c(l = !1) {\n    const f = we(e);\n    return l || document[o] && document[o] === f ? (await document[r](), i.value = !1, document[o] !== f) : !1;\n  }\n  async function a(l = !1) {\n    return i.value ? await c(l) : await s(l);\n  }\n  return {\n    supported: Ye,\n    target: t,\n    full: W(() => i.value),\n    enter: s,\n    exit: c,\n    toggle: a\n  };\n}\nfunction Zr(e = z(null)) {\n  const t = z(!1);\n  q(e, \"mouseenter\", n), q(e, \"mouseleave\", r);\n  function n() {\n    t.value = !0;\n  }\n  function r() {\n    t.value = !1;\n  }\n  return { wrapper: e, isHover: t };\n}\nconst xe = /* @__PURE__ */ new WeakMap(), kn = /\\s+/g, zn = /(px|%)$/;\nfunction eo(e) {\n  const t = e.target || z(null);\n  if (!D)\n    return { target: t, disconnect: P };\n  const { handler: n } = e;\n  let r = e.root ?? document;\n  const o = Ft(e.threshold || 0).join() || \"0\", i = m(e.rootMargin);\n  xe.has(r) || xe.set(r, /* @__PURE__ */ new Map());\n  const s = xe.get(r);\n  s.has(o) || s.set(o, /* @__PURE__ */ new Map());\n  const c = s.get(o);\n  c.has(i) || c.set(i, {\n    ob: new IntersectionObserver(v, { ...e, rootMargin: i }),\n    count: 0,\n    handlers: /* @__PURE__ */ new WeakMap()\n  });\n  let a = c.get(i), { ob: l, handlers: f } = a, p = P;\n  const b = Q(\n    () => T(t),\n    (d) => {\n      p(), !(!d || !l) && (f.set(d, n), l.observe(d), a && a.count++, p = () => {\n        l.unobserve(d), f.delete(d), a && a.count--, p = P;\n      });\n    },\n    { immediate: !0, flush: \"post\" }\n  );\n  De() && J(u);\n  function m(d) {\n    if (!d || !d.trim())\n      return \"_\";\n    const h = d.trim().split(kn, 4);\n    h.length = 4;\n    for (let g = 0; g < 4; ++g) {\n      const w = h[g];\n      h[g] = zn.test(w) ? w : `${vn(w)}px`;\n    }\n    return h.join(\" \");\n  }\n  function v(d) {\n    for (let h = 0, g = d.length; h < g; ++h) {\n      const w = d[h], O = f.get(w.target);\n      typeof O == \"function\" && O(w);\n    }\n  }\n  function u() {\n    b(), p(), a && (a.count <= 0 && (c.delete(i), c.size || (s.delete(o), s.size || xe.delete(r))), a = void 0, l = void 0, f = void 0, r = void 0);\n  }\n  return { target: t, disconnect: u };\n}\nfunction to() {\n  const e = /* @__PURE__ */ new Set();\n  function t(r) {\n    return hn((o, i) => {\n      let s = r;\n      const c = () => {\n        r !== s && (s = r, i());\n      };\n      return {\n        // eslint-disable-next-line no-sequences\n        get: () => (o(), r),\n        set: (a) => {\n          a !== r && (r = a, e.add(c));\n        }\n      };\n    });\n  }\n  function n() {\n    for (const r of e)\n      r();\n    e.clear();\n  }\n  return { updateSet: e, manualRef: t, triggerUpdate: n };\n}\nconst Cn = {\n  ctrl: \"control\",\n  command: \"meta\",\n  cmd: \"meta\",\n  option: \"alt\",\n  up: \"arrowup\",\n  down: \"arrowdown\",\n  left: \"arrowleft\",\n  right: \"arrowright\"\n}, An = /[+_-]/, Mn = /[+_-]/g, Ln = [\"activeKeys\", \"resetAll\"];\nfunction no(e = {}) {\n  const {\n    autoReset: t = !0,\n    capture: n = !1,\n    passive: r = !0,\n    onKeyDown: o = P,\n    onKeyUp: i = P\n  } = e, s = e.target || z(null), c = { ...Cn, ...e.aliasMap || {} }, a = Ve(/* @__PURE__ */ new Set()), l = /* @__PURE__ */ new Set(), f = Ve({ activeKeys: a, resetAll: m });\n  function p(u, d) {\n    u in f && (f[u] = d);\n  }\n  function b(u, d) {\n    var O, S;\n    const h = (O = u.key) == null ? void 0 : O.toLocaleLowerCase(), w = [(S = u.code) == null ? void 0 : S.toLocaleLowerCase(), h].filter(Boolean);\n    for (const R of w)\n      a[d ? \"add\" : \"delete\"](R), p(R, d);\n    if (!d && h === \"meta\") {\n      for (const R of l)\n        a.delete(R), p(R, !1);\n      l.clear();\n    } else if (d && typeof u.getModifierState == \"function\" && u.getModifierState(\"Meta\"))\n      for (const R of [...a, ...w])\n        l.add(R);\n  }\n  function m() {\n    Object.keys(f).forEach((u) => {\n      f[u] = !1;\n    }), f.activeKeys = a, f.resetAll = m;\n  }\n  const v = new Proxy(f, {\n    get(u, d, h) {\n      if (typeof d != \"string\" || Ln.includes(d))\n        return Reflect.get(u, d, h);\n      if (d = d.toLocaleLowerCase(), d in c && (d = c[d]), !(d in f))\n        if (An.test(d)) {\n          const g = d.split(Mn).map((w) => w.trim());\n          f[d] = W(() => g.every((w) => T(v[w])));\n        } else\n          f[d] = z(a.has(d));\n      return T(Reflect.get(u, d, h));\n    }\n  });\n  return q(\n    s,\n    \"keydown\",\n    (u) => {\n      b(u, !0), o(u, v);\n    },\n    { capture: n, passive: r }\n  ), q(\n    s,\n    \"keyup\",\n    (u) => {\n      b(u, !1), i(u, v);\n    },\n    { capture: n, passive: r }\n  ), t && q(s, \"blur\", m, { capture: n, passive: r }), { target: s, modifier: v };\n}\nfunction ro(e) {\n  const t = z(!1), n = () => t.value = !0;\n  return Ze(() => {\n    e === \"tick\" ? Lt(n) : e === \"frame\" ? requestAnimationFrame(n) : n();\n  }), et(() => {\n    t.value = !1;\n  }), { isMounted: Bt(t) };\n}\nfunction He(e) {\n  e.cancelable && (e.stopPropagation(), e.preventDefault());\n}\nfunction oo(e) {\n  const t = e.target || z(null), n = Oe(e.x) ? e.x : z(0), r = Oe(e.y) ? e.y : z(0), o = Oe(e.lazy) ? e.lazy : z(!1), { capture: i = !0, stopMouse: s = !0, stopTouch: c = !0 } = e, a = z(!1), l = {\n    xStart: 0,\n    yStart: 0,\n    xEnd: 0,\n    yEnd: 0,\n    clientX: 0,\n    clientY: 0,\n    deltaX: 0,\n    deltaY: 0,\n    lazy: !1\n  };\n  let f = 0, p = 0;\n  const b = Pt((h) => {\n    var g;\n    p < f || (d(h), l.lazy || (n.value = l.xEnd, r.value = l.yEnd), (g = e.onMove) == null || g.call(e, l, h));\n  });\n  function m(h) {\n    var g;\n    Object.assign(l, {\n      xStart: n.value,\n      yStart: r.value,\n      xEnd: n.value,\n      yEnd: r.value,\n      clientX: h.clientX,\n      clientY: h.clientY,\n      lazy: o.value\n    }), ((g = e.onStart) == null ? void 0 : g.call(e, l, h)) !== !1 && (document.addEventListener(\"pointermove\", v, { capture: i }), document.addEventListener(\"pointerup\", u, { capture: i }), p = f, a.value = !0);\n  }\n  function v(h) {\n    He(h), b(h);\n  }\n  function u(h) {\n    var g;\n    document.removeEventListener(\"pointermove\", v, { capture: i }), document.removeEventListener(\"pointerup\", u, { capture: i }), d(h), l.lazy && (n.value = l.xEnd, r.value = l.yEnd), a.value = !1, ++f, (g = e.onEnd) == null || g.call(e, l, h);\n  }\n  function d(h) {\n    const { clientX: g, clientY: w } = h, { xStart: O, yStart: S, clientX: R, clientY: M } = l, A = g - R, B = w - M;\n    l.deltaX = A, l.deltaY = B, l.xEnd = O + A, l.yEnd = S + B;\n  }\n  return q(t, \"pointerdown\", m, { capture: i }), s && q(t, \"mousedown\", He, { capture: i }), c && q(t, \"touchstart\", He, { capture: i }), {\n    target: t,\n    moving: W(() => a.value),\n    x: n,\n    y: r,\n    lazy: o\n  };\n}\nconst pe = /* @__PURE__ */ new Set(), K = /* @__PURE__ */ new Map();\nK.set(\"x\", 0);\nK.set(\"y\", 0);\nfunction Bn(e) {\n  const { pageX: t, pageY: n } = e;\n  K.set(\"x\", t), K.set(\"y\", n), pe.forEach((r) => {\n    r.x.value = t, r.y.value = n;\n  });\n}\nconst It = Pt(Bn);\nfunction Pn(e) {\n  !pe.size && window && (K.set(\"x\", 0), K.set(\"y\", 0), window.addEventListener(\"pointermove\", It, { passive: !0 })), pe.add(e);\n}\nfunction ht(e) {\n  pe.delete(e), !pe.size && window && window.removeEventListener(\"pointermove\", It);\n}\nfunction io(e = {}) {\n  const t = z(e.x ?? K.get(\"x\")), n = z(e.y ?? K.get(\"y\")), r = { x: t, y: n };\n  return Pn(r), e.manualStop || et(() => {\n    ht(r);\n  }), { ...r, unregister: () => ht(r) };\n}\nconst Dn = [\"top\", \"right\", \"bottom\", \"left\"], ce = Math.min, ee = Math.max, Ce = Math.round, Ee = Math.floor, U = (e) => ({\n  x: e,\n  y: e\n}), Fn = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n}, _n = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction Ue(e, t, n) {\n  return ee(e, ce(t, n));\n}\nfunction le(e, t) {\n  return typeof e == \"function\" ? e(t) : e;\n}\nfunction re(e) {\n  return e.split(\"-\")[0];\n}\nfunction be(e) {\n  return e.split(\"-\")[1];\n}\nfunction Ht(e) {\n  return e === \"x\" ? \"y\" : \"x\";\n}\nfunction tt(e) {\n  return e === \"y\" ? \"height\" : \"width\";\n}\nfunction Fe(e) {\n  return [\"top\", \"bottom\"].includes(re(e)) ? \"y\" : \"x\";\n}\nfunction nt(e) {\n  return Ht(Fe(e));\n}\nfunction Nn(e, t, n) {\n  n === void 0 && (n = !1);\n  const r = be(e), o = nt(e), i = tt(o);\n  let s = o === \"x\" ? r === (n ? \"end\" : \"start\") ? \"right\" : \"left\" : r === \"start\" ? \"bottom\" : \"top\";\n  return t.reference[i] > t.floating[i] && (s = Ae(s)), [s, Ae(s)];\n}\nfunction Wn(e) {\n  const t = Ae(e);\n  return [Ge(e), t, Ge(t)];\n}\nfunction Ge(e) {\n  return e.replace(/start|end/g, (t) => _n[t]);\n}\nfunction In(e, t, n) {\n  const r = [\"left\", \"right\"], o = [\"right\", \"left\"], i = [\"top\", \"bottom\"], s = [\"bottom\", \"top\"];\n  switch (e) {\n    case \"top\":\n    case \"bottom\":\n      return n ? t ? o : r : t ? r : o;\n    case \"left\":\n    case \"right\":\n      return t ? i : s;\n    default:\n      return [];\n  }\n}\nfunction Hn(e, t, n, r) {\n  const o = be(e);\n  let i = In(re(e), n === \"start\", r);\n  return o && (i = i.map((s) => s + \"-\" + o), t && (i = i.concat(i.map(Ge)))), i;\n}\nfunction Ae(e) {\n  return e.replace(/left|right|bottom|top/g, (t) => Fn[t]);\n}\nfunction $n(e) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...e\n  };\n}\nfunction $t(e) {\n  return typeof e != \"number\" ? $n(e) : {\n    top: e,\n    right: e,\n    bottom: e,\n    left: e\n  };\n}\nfunction Me(e) {\n  return {\n    ...e,\n    top: e.y,\n    left: e.x,\n    right: e.x + e.width,\n    bottom: e.y + e.height\n  };\n}\nfunction mt(e, t, n) {\n  let {\n    reference: r,\n    floating: o\n  } = e;\n  const i = Fe(t), s = nt(t), c = tt(s), a = re(t), l = i === \"y\", f = r.x + r.width / 2 - o.width / 2, p = r.y + r.height / 2 - o.height / 2, b = r[c] / 2 - o[c] / 2;\n  let m;\n  switch (a) {\n    case \"top\":\n      m = {\n        x: f,\n        y: r.y - o.height\n      };\n      break;\n    case \"bottom\":\n      m = {\n        x: f,\n        y: r.y + r.height\n      };\n      break;\n    case \"right\":\n      m = {\n        x: r.x + r.width,\n        y: p\n      };\n      break;\n    case \"left\":\n      m = {\n        x: r.x - o.width,\n        y: p\n      };\n      break;\n    default:\n      m = {\n        x: r.x,\n        y: r.y\n      };\n  }\n  switch (be(t)) {\n    case \"start\":\n      m[s] -= b * (n && l ? -1 : 1);\n      break;\n    case \"end\":\n      m[s] += b * (n && l ? -1 : 1);\n      break;\n  }\n  return m;\n}\nconst qn = async (e, t, n) => {\n  const {\n    placement: r = \"bottom\",\n    strategy: o = \"absolute\",\n    middleware: i = [],\n    platform: s\n  } = n, c = i.filter(Boolean), a = await (s.isRTL == null ? void 0 : s.isRTL(t));\n  let l = await s.getElementRects({\n    reference: e,\n    floating: t,\n    strategy: o\n  }), {\n    x: f,\n    y: p\n  } = mt(l, r, a), b = r, m = {}, v = 0;\n  for (let u = 0; u < c.length; u++) {\n    const {\n      name: d,\n      fn: h\n    } = c[u], {\n      x: g,\n      y: w,\n      data: O,\n      reset: S\n    } = await h({\n      x: f,\n      y: p,\n      initialPlacement: r,\n      placement: b,\n      strategy: o,\n      middlewareData: m,\n      rects: l,\n      platform: s,\n      elements: {\n        reference: e,\n        floating: t\n      }\n    });\n    if (f = g ?? f, p = w ?? p, m = {\n      ...m,\n      [d]: {\n        ...m[d],\n        ...O\n      }\n    }, S && v <= 50) {\n      v++, typeof S == \"object\" && (S.placement && (b = S.placement), S.rects && (l = S.rects === !0 ? await s.getElementRects({\n        reference: e,\n        floating: t,\n        strategy: o\n      }) : S.rects), {\n        x: f,\n        y: p\n      } = mt(l, b, a)), u = -1;\n      continue;\n    }\n  }\n  return {\n    x: f,\n    y: p,\n    placement: b,\n    strategy: o,\n    middlewareData: m\n  };\n};\nasync function Le(e, t) {\n  var n;\n  t === void 0 && (t = {});\n  const {\n    x: r,\n    y: o,\n    platform: i,\n    rects: s,\n    elements: c,\n    strategy: a\n  } = e, {\n    boundary: l = \"clippingAncestors\",\n    rootBoundary: f = \"viewport\",\n    elementContext: p = \"floating\",\n    altBoundary: b = !1,\n    padding: m = 0\n  } = le(t, e), v = $t(m), d = c[b ? p === \"floating\" ? \"reference\" : \"floating\" : p], h = Me(await i.getClippingRect({\n    element: (n = await (i.isElement == null ? void 0 : i.isElement(d))) == null || n ? d : d.contextElement || await (i.getDocumentElement == null ? void 0 : i.getDocumentElement(c.floating)),\n    boundary: l,\n    rootBoundary: f,\n    strategy: a\n  })), g = p === \"floating\" ? {\n    ...s.floating,\n    x: r,\n    y: o\n  } : s.reference, w = await (i.getOffsetParent == null ? void 0 : i.getOffsetParent(c.floating)), O = await (i.isElement == null ? void 0 : i.isElement(w)) ? await (i.getScale == null ? void 0 : i.getScale(w)) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  }, S = Me(i.convertOffsetParentRelativeRectToViewportRelativeRect ? await i.convertOffsetParentRelativeRectToViewportRelativeRect({\n    rect: g,\n    offsetParent: w,\n    strategy: a\n  }) : g);\n  return {\n    top: (h.top - S.top + v.top) / O.y,\n    bottom: (S.bottom - h.bottom + v.bottom) / O.y,\n    left: (h.left - S.left + v.left) / O.x,\n    right: (S.right - h.right + v.right) / O.x\n  };\n}\nconst Vn = (e) => ({\n  name: \"arrow\",\n  options: e,\n  async fn(t) {\n    const {\n      x: n,\n      y: r,\n      placement: o,\n      rects: i,\n      platform: s,\n      elements: c,\n      middlewareData: a\n    } = t, {\n      element: l,\n      padding: f = 0\n    } = le(e, t) || {};\n    if (l == null)\n      return {};\n    const p = $t(f), b = {\n      x: n,\n      y: r\n    }, m = nt(o), v = tt(m), u = await s.getDimensions(l), d = m === \"y\", h = d ? \"top\" : \"left\", g = d ? \"bottom\" : \"right\", w = d ? \"clientHeight\" : \"clientWidth\", O = i.reference[v] + i.reference[m] - b[m] - i.floating[v], S = b[m] - i.reference[m], R = await (s.getOffsetParent == null ? void 0 : s.getOffsetParent(l));\n    let M = R ? R[w] : 0;\n    (!M || !await (s.isElement == null ? void 0 : s.isElement(R))) && (M = c.floating[w] || i.floating[v]);\n    const A = O / 2 - S / 2, B = M / 2 - u[v] / 2 - 1, F = ce(p[h], B), N = ce(p[g], B), L = F, y = M - u[v] - N, x = M / 2 - u[v] / 2 + A, E = Ue(L, x, y), C = !a.arrow && be(o) != null && x != E && i.reference[v] / 2 - (x < L ? F : N) - u[v] / 2 < 0, k = C ? x < L ? x - L : x - y : 0;\n    return {\n      [m]: b[m] + k,\n      data: {\n        [m]: E,\n        centerOffset: x - E - k,\n        ...C && {\n          alignmentOffset: k\n        }\n      },\n      reset: C\n    };\n  }\n}), Xn = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"flip\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        placement: o,\n        middlewareData: i,\n        rects: s,\n        initialPlacement: c,\n        platform: a,\n        elements: l\n      } = t, {\n        mainAxis: f = !0,\n        crossAxis: p = !0,\n        fallbackPlacements: b,\n        fallbackStrategy: m = \"bestFit\",\n        fallbackAxisSideDirection: v = \"none\",\n        flipAlignment: u = !0,\n        ...d\n      } = le(e, t);\n      if ((n = i.arrow) != null && n.alignmentOffset)\n        return {};\n      const h = re(o), g = re(c) === c, w = await (a.isRTL == null ? void 0 : a.isRTL(l.floating)), O = b || (g || !u ? [Ae(c)] : Wn(c));\n      !b && v !== \"none\" && O.push(...Hn(c, u, v, w));\n      const S = [c, ...O], R = await Le(t, d), M = [];\n      let A = ((r = i.flip) == null ? void 0 : r.overflows) || [];\n      if (f && M.push(R[h]), p) {\n        const L = Nn(o, s, w);\n        M.push(R[L[0]], R[L[1]]);\n      }\n      if (A = [...A, {\n        placement: o,\n        overflows: M\n      }], !M.every((L) => L <= 0)) {\n        var B, F;\n        const L = (((B = i.flip) == null ? void 0 : B.index) || 0) + 1, y = S[L];\n        if (y)\n          return {\n            data: {\n              index: L,\n              overflows: A\n            },\n            reset: {\n              placement: y\n            }\n          };\n        let x = (F = A.filter((E) => E.overflows[0] <= 0).sort((E, C) => E.overflows[1] - C.overflows[1])[0]) == null ? void 0 : F.placement;\n        if (!x)\n          switch (m) {\n            case \"bestFit\": {\n              var N;\n              const E = (N = A.map((C) => [C.placement, C.overflows.filter((k) => k > 0).reduce((k, j) => k + j, 0)]).sort((C, k) => C[1] - k[1])[0]) == null ? void 0 : N[0];\n              E && (x = E);\n              break;\n            }\n            case \"initialPlacement\":\n              x = c;\n              break;\n          }\n        if (o !== x)\n          return {\n            reset: {\n              placement: x\n            }\n          };\n      }\n      return {};\n    }\n  };\n};\nfunction pt(e, t) {\n  return {\n    top: e.top - t.height,\n    right: e.right - t.width,\n    bottom: e.bottom - t.height,\n    left: e.left - t.width\n  };\n}\nfunction vt(e) {\n  return Dn.some((t) => e[t] >= 0);\n}\nconst jn = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"hide\",\n    options: e,\n    async fn(t) {\n      const {\n        rects: n\n      } = t, {\n        strategy: r = \"referenceHidden\",\n        ...o\n      } = le(e, t);\n      switch (r) {\n        case \"referenceHidden\": {\n          const i = await Le(t, {\n            ...o,\n            elementContext: \"reference\"\n          }), s = pt(i, n.reference);\n          return {\n            data: {\n              referenceHiddenOffsets: s,\n              referenceHidden: vt(s)\n            }\n          };\n        }\n        case \"escaped\": {\n          const i = await Le(t, {\n            ...o,\n            altBoundary: !0\n          }), s = pt(i, n.floating);\n          return {\n            data: {\n              escapedOffsets: s,\n              escaped: vt(s)\n            }\n          };\n        }\n        default:\n          return {};\n      }\n    }\n  };\n};\nasync function Yn(e, t) {\n  const {\n    placement: n,\n    platform: r,\n    elements: o\n  } = e, i = await (r.isRTL == null ? void 0 : r.isRTL(o.floating)), s = re(n), c = be(n), a = Fe(n) === \"y\", l = [\"left\", \"top\"].includes(s) ? -1 : 1, f = i && a ? -1 : 1, p = le(t, e);\n  let {\n    mainAxis: b,\n    crossAxis: m,\n    alignmentAxis: v\n  } = typeof p == \"number\" ? {\n    mainAxis: p,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: 0,\n    crossAxis: 0,\n    alignmentAxis: null,\n    ...p\n  };\n  return c && typeof v == \"number\" && (m = c === \"end\" ? v * -1 : v), a ? {\n    x: m * f,\n    y: b * l\n  } : {\n    x: b * l,\n    y: m * f\n  };\n}\nconst Kn = function(e) {\n  return e === void 0 && (e = 0), {\n    name: \"offset\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        x: o,\n        y: i,\n        placement: s,\n        middlewareData: c\n      } = t, a = await Yn(t, e);\n      return s === ((n = c.offset) == null ? void 0 : n.placement) && (r = c.arrow) != null && r.alignmentOffset ? {} : {\n        x: o + a.x,\n        y: i + a.y,\n        data: {\n          ...a,\n          placement: s\n        }\n      };\n    }\n  };\n}, Un = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"shift\",\n    options: e,\n    async fn(t) {\n      const {\n        x: n,\n        y: r,\n        placement: o\n      } = t, {\n        mainAxis: i = !0,\n        crossAxis: s = !1,\n        limiter: c = {\n          fn: (d) => {\n            let {\n              x: h,\n              y: g\n            } = d;\n            return {\n              x: h,\n              y: g\n            };\n          }\n        },\n        ...a\n      } = le(e, t), l = {\n        x: n,\n        y: r\n      }, f = await Le(t, a), p = Fe(re(o)), b = Ht(p);\n      let m = l[b], v = l[p];\n      if (i) {\n        const d = b === \"y\" ? \"top\" : \"left\", h = b === \"y\" ? \"bottom\" : \"right\", g = m + f[d], w = m - f[h];\n        m = Ue(g, m, w);\n      }\n      if (s) {\n        const d = p === \"y\" ? \"top\" : \"left\", h = p === \"y\" ? \"bottom\" : \"right\", g = v + f[d], w = v - f[h];\n        v = Ue(g, v, w);\n      }\n      const u = c.fn({\n        ...t,\n        [b]: m,\n        [p]: v\n      });\n      return {\n        ...u,\n        data: {\n          x: u.x - n,\n          y: u.y - r\n        }\n      };\n    }\n  };\n};\nfunction G(e) {\n  return qt(e) ? (e.nodeName || \"\").toLowerCase() : \"#document\";\n}\nfunction _(e) {\n  var t;\n  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;\n}\nfunction X(e) {\n  var t;\n  return (t = (qt(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;\n}\nfunction qt(e) {\n  return e instanceof Node || e instanceof _(e).Node;\n}\nfunction V(e) {\n  return e instanceof Element || e instanceof _(e).Element;\n}\nfunction $(e) {\n  return e instanceof HTMLElement || e instanceof _(e).HTMLElement;\n}\nfunction gt(e) {\n  return typeof ShadowRoot > \"u\" ? !1 : e instanceof ShadowRoot || e instanceof _(e).ShadowRoot;\n}\nfunction ye(e) {\n  const {\n    overflow: t,\n    overflowX: n,\n    overflowY: r,\n    display: o\n  } = I(e);\n  return /auto|scroll|overlay|hidden|clip/.test(t + r + n) && ![\"inline\", \"contents\"].includes(o);\n}\nfunction Gn(e) {\n  return [\"table\", \"td\", \"th\"].includes(G(e));\n}\nfunction rt(e) {\n  const t = ot(), n = I(e);\n  return n.transform !== \"none\" || n.perspective !== \"none\" || (n.containerType ? n.containerType !== \"normal\" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== \"none\" : !1) || !t && (n.filter ? n.filter !== \"none\" : !1) || [\"transform\", \"perspective\", \"filter\"].some((r) => (n.willChange || \"\").includes(r)) || [\"paint\", \"layout\", \"strict\", \"content\"].some((r) => (n.contain || \"\").includes(r));\n}\nfunction Qn(e) {\n  let t = ae(e);\n  for (; $(t) && !_e(t); ) {\n    if (rt(t))\n      return t;\n    t = ae(t);\n  }\n  return null;\n}\nfunction ot() {\n  return typeof CSS > \"u\" || !CSS.supports ? !1 : CSS.supports(\"-webkit-backdrop-filter\", \"none\");\n}\nfunction _e(e) {\n  return [\"html\", \"body\", \"#document\"].includes(G(e));\n}\nfunction I(e) {\n  return _(e).getComputedStyle(e);\n}\nfunction Ne(e) {\n  return V(e) ? {\n    scrollLeft: e.scrollLeft,\n    scrollTop: e.scrollTop\n  } : {\n    scrollLeft: e.pageXOffset,\n    scrollTop: e.pageYOffset\n  };\n}\nfunction ae(e) {\n  if (G(e) === \"html\")\n    return e;\n  const t = (\n    // Step into the shadow DOM of the parent of a slotted node.\n    e.assignedSlot || // DOM Element detected.\n    e.parentNode || // ShadowRoot detected.\n    gt(e) && e.host || // Fallback.\n    X(e)\n  );\n  return gt(t) ? t.host : t;\n}\nfunction Vt(e) {\n  const t = ae(e);\n  return _e(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : $(t) && ye(t) ? t : Vt(t);\n}\nfunction ve(e, t, n) {\n  var r;\n  t === void 0 && (t = []), n === void 0 && (n = !0);\n  const o = Vt(e), i = o === ((r = e.ownerDocument) == null ? void 0 : r.body), s = _(o);\n  return i ? t.concat(s, s.visualViewport || [], ye(o) ? o : [], s.frameElement && n ? ve(s.frameElement) : []) : t.concat(o, ve(o, [], n));\n}\nfunction Xt(e) {\n  const t = I(e);\n  let n = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;\n  const o = $(e), i = o ? e.offsetWidth : n, s = o ? e.offsetHeight : r, c = Ce(n) !== i || Ce(r) !== s;\n  return c && (n = i, r = s), {\n    width: n,\n    height: r,\n    $: c\n  };\n}\nfunction it(e) {\n  return V(e) ? e : e.contextElement;\n}\nfunction ie(e) {\n  const t = it(e);\n  if (!$(t))\n    return U(1);\n  const n = t.getBoundingClientRect(), {\n    width: r,\n    height: o,\n    $: i\n  } = Xt(t);\n  let s = (i ? Ce(n.width) : n.width) / r, c = (i ? Ce(n.height) : n.height) / o;\n  return (!s || !Number.isFinite(s)) && (s = 1), (!c || !Number.isFinite(c)) && (c = 1), {\n    x: s,\n    y: c\n  };\n}\nconst Jn = /* @__PURE__ */ U(0);\nfunction jt(e) {\n  const t = _(e);\n  return !ot() || !t.visualViewport ? Jn : {\n    x: t.visualViewport.offsetLeft,\n    y: t.visualViewport.offsetTop\n  };\n}\nfunction Zn(e, t, n) {\n  return t === void 0 && (t = !1), !n || t && n !== _(e) ? !1 : t;\n}\nfunction oe(e, t, n, r) {\n  t === void 0 && (t = !1), n === void 0 && (n = !1);\n  const o = e.getBoundingClientRect(), i = it(e);\n  let s = U(1);\n  t && (r ? V(r) && (s = ie(r)) : s = ie(e));\n  const c = Zn(i, n, r) ? jt(i) : U(0);\n  let a = (o.left + c.x) / s.x, l = (o.top + c.y) / s.y, f = o.width / s.x, p = o.height / s.y;\n  if (i) {\n    const b = _(i), m = r && V(r) ? _(r) : r;\n    let v = b.frameElement;\n    for (; v && r && m !== b; ) {\n      const u = ie(v), d = v.getBoundingClientRect(), h = I(v), g = d.left + (v.clientLeft + parseFloat(h.paddingLeft)) * u.x, w = d.top + (v.clientTop + parseFloat(h.paddingTop)) * u.y;\n      a *= u.x, l *= u.y, f *= u.x, p *= u.y, a += g, l += w, v = _(v).frameElement;\n    }\n  }\n  return Me({\n    width: f,\n    height: p,\n    x: a,\n    y: l\n  });\n}\nfunction er(e) {\n  let {\n    rect: t,\n    offsetParent: n,\n    strategy: r\n  } = e;\n  const o = $(n), i = X(n);\n  if (n === i)\n    return t;\n  let s = {\n    scrollLeft: 0,\n    scrollTop: 0\n  }, c = U(1);\n  const a = U(0);\n  if ((o || !o && r !== \"fixed\") && ((G(n) !== \"body\" || ye(i)) && (s = Ne(n)), $(n))) {\n    const l = oe(n);\n    c = ie(n), a.x = l.x + n.clientLeft, a.y = l.y + n.clientTop;\n  }\n  return {\n    width: t.width * c.x,\n    height: t.height * c.y,\n    x: t.x * c.x - s.scrollLeft * c.x + a.x,\n    y: t.y * c.y - s.scrollTop * c.y + a.y\n  };\n}\nfunction tr(e) {\n  return Array.from(e.getClientRects());\n}\nfunction Yt(e) {\n  return oe(X(e)).left + Ne(e).scrollLeft;\n}\nfunction nr(e) {\n  const t = X(e), n = Ne(e), r = e.ownerDocument.body, o = ee(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), i = ee(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);\n  let s = -n.scrollLeft + Yt(e);\n  const c = -n.scrollTop;\n  return I(r).direction === \"rtl\" && (s += ee(t.clientWidth, r.clientWidth) - o), {\n    width: o,\n    height: i,\n    x: s,\n    y: c\n  };\n}\nfunction rr(e, t) {\n  const n = _(e), r = X(e), o = n.visualViewport;\n  let i = r.clientWidth, s = r.clientHeight, c = 0, a = 0;\n  if (o) {\n    i = o.width, s = o.height;\n    const l = ot();\n    (!l || l && t === \"fixed\") && (c = o.offsetLeft, a = o.offsetTop);\n  }\n  return {\n    width: i,\n    height: s,\n    x: c,\n    y: a\n  };\n}\nfunction or(e, t) {\n  const n = oe(e, !0, t === \"fixed\"), r = n.top + e.clientTop, o = n.left + e.clientLeft, i = $(e) ? ie(e) : U(1), s = e.clientWidth * i.x, c = e.clientHeight * i.y, a = o * i.x, l = r * i.y;\n  return {\n    width: s,\n    height: c,\n    x: a,\n    y: l\n  };\n}\nfunction bt(e, t, n) {\n  let r;\n  if (t === \"viewport\")\n    r = rr(e, n);\n  else if (t === \"document\")\n    r = nr(X(e));\n  else if (V(t))\n    r = or(t, n);\n  else {\n    const o = jt(e);\n    r = {\n      ...t,\n      x: t.x - o.x,\n      y: t.y - o.y\n    };\n  }\n  return Me(r);\n}\nfunction Kt(e, t) {\n  const n = ae(e);\n  return n === t || !V(n) || _e(n) ? !1 : I(n).position === \"fixed\" || Kt(n, t);\n}\nfunction ir(e, t) {\n  const n = t.get(e);\n  if (n)\n    return n;\n  let r = ve(e, [], !1).filter((c) => V(c) && G(c) !== \"body\"), o = null;\n  const i = I(e).position === \"fixed\";\n  let s = i ? ae(e) : e;\n  for (; V(s) && !_e(s); ) {\n    const c = I(s), a = rt(s);\n    !a && c.position === \"fixed\" && (o = null), (i ? !a && !o : !a && c.position === \"static\" && !!o && [\"absolute\", \"fixed\"].includes(o.position) || ye(s) && !a && Kt(e, s)) ? r = r.filter((f) => f !== s) : o = c, s = ae(s);\n  }\n  return t.set(e, r), r;\n}\nfunction sr(e) {\n  let {\n    element: t,\n    boundary: n,\n    rootBoundary: r,\n    strategy: o\n  } = e;\n  const s = [...n === \"clippingAncestors\" ? ir(t, this._c) : [].concat(n), r], c = s[0], a = s.reduce((l, f) => {\n    const p = bt(t, f, o);\n    return l.top = ee(p.top, l.top), l.right = ce(p.right, l.right), l.bottom = ce(p.bottom, l.bottom), l.left = ee(p.left, l.left), l;\n  }, bt(t, c, o));\n  return {\n    width: a.right - a.left,\n    height: a.bottom - a.top,\n    x: a.left,\n    y: a.top\n  };\n}\nfunction cr(e) {\n  return Xt(e);\n}\nfunction ar(e, t, n) {\n  const r = $(t), o = X(t), i = n === \"fixed\", s = oe(e, !0, i, t);\n  let c = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const a = U(0);\n  if (r || !r && !i)\n    if ((G(t) !== \"body\" || ye(o)) && (c = Ne(t)), r) {\n      const l = oe(t, !0, i, t);\n      a.x = l.x + t.clientLeft, a.y = l.y + t.clientTop;\n    } else\n      o && (a.x = Yt(o));\n  return {\n    x: s.left + c.scrollLeft - a.x,\n    y: s.top + c.scrollTop - a.y,\n    width: s.width,\n    height: s.height\n  };\n}\nfunction yt(e, t) {\n  return !$(e) || I(e).position === \"fixed\" ? null : t ? t(e) : e.offsetParent;\n}\nfunction Ut(e, t) {\n  const n = _(e);\n  if (!$(e))\n    return n;\n  let r = yt(e, t);\n  for (; r && Gn(r) && I(r).position === \"static\"; )\n    r = yt(r, t);\n  return r && (G(r) === \"html\" || G(r) === \"body\" && I(r).position === \"static\" && !rt(r)) ? n : r || Qn(e) || n;\n}\nconst lr = async function(e) {\n  let {\n    reference: t,\n    floating: n,\n    strategy: r\n  } = e;\n  const o = this.getOffsetParent || Ut, i = this.getDimensions;\n  return {\n    reference: ar(t, await o(n), r),\n    floating: {\n      x: 0,\n      y: 0,\n      ...await i(n)\n    }\n  };\n};\nfunction fr(e) {\n  return I(e).direction === \"rtl\";\n}\nconst Gt = {\n  convertOffsetParentRelativeRectToViewportRelativeRect: er,\n  getDocumentElement: X,\n  getClippingRect: sr,\n  getOffsetParent: Ut,\n  getElementRects: lr,\n  getClientRects: tr,\n  getDimensions: cr,\n  getScale: ie,\n  isElement: V,\n  isRTL: fr\n};\nfunction ur(e, t) {\n  let n = null, r;\n  const o = X(e);\n  function i() {\n    clearTimeout(r), n && n.disconnect(), n = null;\n  }\n  function s(c, a) {\n    c === void 0 && (c = !1), a === void 0 && (a = 1), i();\n    const {\n      left: l,\n      top: f,\n      width: p,\n      height: b\n    } = e.getBoundingClientRect();\n    if (c || t(), !p || !b)\n      return;\n    const m = Ee(f), v = Ee(o.clientWidth - (l + p)), u = Ee(o.clientHeight - (f + b)), d = Ee(l), g = {\n      rootMargin: -m + \"px \" + -v + \"px \" + -u + \"px \" + -d + \"px\",\n      threshold: ee(0, ce(1, a)) || 1\n    };\n    let w = !0;\n    function O(S) {\n      const R = S[0].intersectionRatio;\n      if (R !== a) {\n        if (!w)\n          return s();\n        R ? s(!1, R) : r = setTimeout(() => {\n          s(!1, 1e-7);\n        }, 100);\n      }\n      w = !1;\n    }\n    try {\n      n = new IntersectionObserver(O, {\n        ...g,\n        // Handle <iframe>s\n        root: o.ownerDocument\n      });\n    } catch {\n      n = new IntersectionObserver(O, g);\n    }\n    n.observe(e);\n  }\n  return s(!0), i;\n}\nfunction dr(e, t, n, r) {\n  r === void 0 && (r = {});\n  const {\n    ancestorScroll: o = !0,\n    ancestorResize: i = !0,\n    elementResize: s = typeof ResizeObserver == \"function\",\n    layoutShift: c = typeof IntersectionObserver == \"function\",\n    animationFrame: a = !1\n  } = r, l = it(e), f = o || i ? [...l ? ve(l) : [], ...ve(t)] : [];\n  f.forEach((h) => {\n    o && h.addEventListener(\"scroll\", n, {\n      passive: !0\n    }), i && h.addEventListener(\"resize\", n);\n  });\n  const p = l && c ? ur(l, n) : null;\n  let b = -1, m = null;\n  s && (m = new ResizeObserver((h) => {\n    let [g] = h;\n    g && g.target === l && m && (m.unobserve(t), cancelAnimationFrame(b), b = requestAnimationFrame(() => {\n      m && m.observe(t);\n    })), n();\n  }), l && !a && m.observe(l), m.observe(t));\n  let v, u = a ? oe(e) : null;\n  a && d();\n  function d() {\n    const h = oe(e);\n    u && (h.x !== u.x || h.y !== u.y || h.width !== u.width || h.height !== u.height) && n(), u = h, v = requestAnimationFrame(d);\n  }\n  return n(), () => {\n    f.forEach((h) => {\n      o && h.removeEventListener(\"scroll\", n), i && h.removeEventListener(\"resize\", n);\n    }), p && p(), m && m.disconnect(), m = null, a && cancelAnimationFrame(v);\n  };\n}\nconst hr = (e, t, n) => {\n  const r = /* @__PURE__ */ new Map(), o = {\n    platform: Gt,\n    ...n\n  }, i = {\n    ...o.platform,\n    _c: r\n  };\n  return qn(e, t, {\n    ...o,\n    platform: i\n  });\n};\nvar te = [], mr = function() {\n  return te.some(function(e) {\n    return e.activeTargets.length > 0;\n  });\n}, pr = function() {\n  return te.some(function(e) {\n    return e.skippedTargets.length > 0;\n  });\n}, wt = \"ResizeObserver loop completed with undelivered notifications.\", vr = function() {\n  var e;\n  typeof ErrorEvent == \"function\" ? e = new ErrorEvent(\"error\", {\n    message: wt\n  }) : (e = document.createEvent(\"Event\"), e.initEvent(\"error\", !1, !1), e.message = wt), window.dispatchEvent(e);\n}, ge;\n(function(e) {\n  e.BORDER_BOX = \"border-box\", e.CONTENT_BOX = \"content-box\", e.DEVICE_PIXEL_CONTENT_BOX = \"device-pixel-content-box\";\n})(ge || (ge = {}));\nvar ne = function(e) {\n  return Object.freeze(e);\n}, gr = /* @__PURE__ */ function() {\n  function e(t, n) {\n    this.inlineSize = t, this.blockSize = n, ne(this);\n  }\n  return e;\n}(), Qt = function() {\n  function e(t, n, r, o) {\n    return this.x = t, this.y = n, this.width = r, this.height = o, this.top = this.y, this.left = this.x, this.bottom = this.top + this.height, this.right = this.left + this.width, ne(this);\n  }\n  return e.prototype.toJSON = function() {\n    var t = this, n = t.x, r = t.y, o = t.top, i = t.right, s = t.bottom, c = t.left, a = t.width, l = t.height;\n    return { x: n, y: r, top: o, right: i, bottom: s, left: c, width: a, height: l };\n  }, e.fromRect = function(t) {\n    return new e(t.x, t.y, t.width, t.height);\n  }, e;\n}(), st = function(e) {\n  return e instanceof SVGElement && \"getBBox\" in e;\n}, Jt = function(e) {\n  if (st(e)) {\n    var t = e.getBBox(), n = t.width, r = t.height;\n    return !n && !r;\n  }\n  var o = e, i = o.offsetWidth, s = o.offsetHeight;\n  return !(i || s || e.getClientRects().length);\n}, xt = function(e) {\n  var t;\n  if (e instanceof Element)\n    return !0;\n  var n = (t = e == null ? void 0 : e.ownerDocument) === null || t === void 0 ? void 0 : t.defaultView;\n  return !!(n && e instanceof n.Element);\n}, br = function(e) {\n  switch (e.tagName) {\n    case \"INPUT\":\n      if (e.type !== \"image\")\n        break;\n    case \"VIDEO\":\n    case \"AUDIO\":\n    case \"EMBED\":\n    case \"OBJECT\":\n    case \"CANVAS\":\n    case \"IFRAME\":\n    case \"IMG\":\n      return !0;\n  }\n  return !1;\n}, he = typeof window < \"u\" ? window : {}, Re = /* @__PURE__ */ new WeakMap(), Et = /auto|scroll/, yr = /^tb|vertical/, wr = /msie|trident/i.test(he.navigator && he.navigator.userAgent), H = function(e) {\n  return parseFloat(e || \"0\");\n}, se = function(e, t, n) {\n  return e === void 0 && (e = 0), t === void 0 && (t = 0), n === void 0 && (n = !1), new gr((n ? t : e) || 0, (n ? e : t) || 0);\n}, Rt = ne({\n  devicePixelContentBoxSize: se(),\n  borderBoxSize: se(),\n  contentBoxSize: se(),\n  contentRect: new Qt(0, 0, 0, 0)\n}), Zt = function(e, t) {\n  if (t === void 0 && (t = !1), Re.has(e) && !t)\n    return Re.get(e);\n  if (Jt(e))\n    return Re.set(e, Rt), Rt;\n  var n = getComputedStyle(e), r = st(e) && e.ownerSVGElement && e.getBBox(), o = !wr && n.boxSizing === \"border-box\", i = yr.test(n.writingMode || \"\"), s = !r && Et.test(n.overflowY || \"\"), c = !r && Et.test(n.overflowX || \"\"), a = r ? 0 : H(n.paddingTop), l = r ? 0 : H(n.paddingRight), f = r ? 0 : H(n.paddingBottom), p = r ? 0 : H(n.paddingLeft), b = r ? 0 : H(n.borderTopWidth), m = r ? 0 : H(n.borderRightWidth), v = r ? 0 : H(n.borderBottomWidth), u = r ? 0 : H(n.borderLeftWidth), d = p + l, h = a + f, g = u + m, w = b + v, O = c ? e.offsetHeight - w - e.clientHeight : 0, S = s ? e.offsetWidth - g - e.clientWidth : 0, R = o ? d + g : 0, M = o ? h + w : 0, A = r ? r.width : H(n.width) - R - S, B = r ? r.height : H(n.height) - M - O, F = A + d + S + g, N = B + h + O + w, L = ne({\n    devicePixelContentBoxSize: se(Math.round(A * devicePixelRatio), Math.round(B * devicePixelRatio), i),\n    borderBoxSize: se(F, N, i),\n    contentBoxSize: se(A, B, i),\n    contentRect: new Qt(p, a, A, B)\n  });\n  return Re.set(e, L), L;\n}, en = function(e, t, n) {\n  var r = Zt(e, n), o = r.borderBoxSize, i = r.contentBoxSize, s = r.devicePixelContentBoxSize;\n  switch (t) {\n    case ge.DEVICE_PIXEL_CONTENT_BOX:\n      return s;\n    case ge.BORDER_BOX:\n      return o;\n    default:\n      return i;\n  }\n}, xr = /* @__PURE__ */ function() {\n  function e(t) {\n    var n = Zt(t);\n    this.target = t, this.contentRect = n.contentRect, this.borderBoxSize = ne([n.borderBoxSize]), this.contentBoxSize = ne([n.contentBoxSize]), this.devicePixelContentBoxSize = ne([n.devicePixelContentBoxSize]);\n  }\n  return e;\n}(), tn = function(e) {\n  if (Jt(e))\n    return 1 / 0;\n  for (var t = 0, n = e.parentNode; n; )\n    t += 1, n = n.parentNode;\n  return t;\n}, Er = function() {\n  var e = 1 / 0, t = [];\n  te.forEach(function(s) {\n    if (s.activeTargets.length !== 0) {\n      var c = [];\n      s.activeTargets.forEach(function(l) {\n        var f = new xr(l.target), p = tn(l.target);\n        c.push(f), l.lastReportedSize = en(l.target, l.observedBox), p < e && (e = p);\n      }), t.push(function() {\n        s.callback.call(s.observer, c, s.observer);\n      }), s.activeTargets.splice(0, s.activeTargets.length);\n    }\n  });\n  for (var n = 0, r = t; n < r.length; n++) {\n    var o = r[n];\n    o();\n  }\n  return e;\n}, Tt = function(e) {\n  te.forEach(function(n) {\n    n.activeTargets.splice(0, n.activeTargets.length), n.skippedTargets.splice(0, n.skippedTargets.length), n.observationTargets.forEach(function(o) {\n      o.isActive() && (tn(o.target) > e ? n.activeTargets.push(o) : n.skippedTargets.push(o));\n    });\n  });\n}, Rr = function() {\n  var e = 0;\n  for (Tt(e); mr(); )\n    e = Er(), Tt(e);\n  return pr() && vr(), e > 0;\n}, $e, nn = [], Tr = function() {\n  return nn.splice(0).forEach(function(e) {\n    return e();\n  });\n}, Sr = function(e) {\n  if (!$e) {\n    var t = 0, n = document.createTextNode(\"\"), r = { characterData: !0 };\n    new MutationObserver(function() {\n      return Tr();\n    }).observe(n, r), $e = function() {\n      n.textContent = \"\".concat(t ? t-- : t++);\n    };\n  }\n  nn.push(e), $e();\n}, Or = function(e) {\n  Sr(function() {\n    requestAnimationFrame(e);\n  });\n}, ke = 0, kr = function() {\n  return !!ke;\n}, zr = 250, Cr = { attributes: !0, characterData: !0, childList: !0, subtree: !0 }, St = [\n  \"resize\",\n  \"load\",\n  \"transitionend\",\n  \"animationend\",\n  \"animationstart\",\n  \"animationiteration\",\n  \"keyup\",\n  \"keydown\",\n  \"mouseup\",\n  \"mousedown\",\n  \"mouseover\",\n  \"mouseout\",\n  \"blur\",\n  \"focus\"\n], Ot = function(e) {\n  return e === void 0 && (e = 0), Date.now() + e;\n}, qe = !1, Ar = function() {\n  function e() {\n    var t = this;\n    this.stopped = !0, this.listener = function() {\n      return t.schedule();\n    };\n  }\n  return e.prototype.run = function(t) {\n    var n = this;\n    if (t === void 0 && (t = zr), !qe) {\n      qe = !0;\n      var r = Ot(t);\n      Or(function() {\n        var o = !1;\n        try {\n          o = Rr();\n        } finally {\n          if (qe = !1, t = r - Ot(), !kr())\n            return;\n          o ? n.run(1e3) : t > 0 ? n.run(t) : n.start();\n        }\n      });\n    }\n  }, e.prototype.schedule = function() {\n    this.stop(), this.run();\n  }, e.prototype.observe = function() {\n    var t = this, n = function() {\n      return t.observer && t.observer.observe(document.body, Cr);\n    };\n    document.body ? n() : he.addEventListener(\"DOMContentLoaded\", n);\n  }, e.prototype.start = function() {\n    var t = this;\n    this.stopped && (this.stopped = !1, this.observer = new MutationObserver(this.listener), this.observe(), St.forEach(function(n) {\n      return he.addEventListener(n, t.listener, !0);\n    }));\n  }, e.prototype.stop = function() {\n    var t = this;\n    this.stopped || (this.observer && this.observer.disconnect(), St.forEach(function(n) {\n      return he.removeEventListener(n, t.listener, !0);\n    }), this.stopped = !0);\n  }, e;\n}(), Qe = new Ar(), kt = function(e) {\n  !ke && e > 0 && Qe.start(), ke += e, !ke && Qe.stop();\n}, Mr = function(e) {\n  return !st(e) && !br(e) && getComputedStyle(e).display === \"inline\";\n}, Lr = function() {\n  function e(t, n) {\n    this.target = t, this.observedBox = n || ge.CONTENT_BOX, this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n  return e.prototype.isActive = function() {\n    var t = en(this.target, this.observedBox, !0);\n    return Mr(this.target) && (this.lastReportedSize = t), this.lastReportedSize.inlineSize !== t.inlineSize || this.lastReportedSize.blockSize !== t.blockSize;\n  }, e;\n}(), Br = /* @__PURE__ */ function() {\n  function e(t, n) {\n    this.activeTargets = [], this.skippedTargets = [], this.observationTargets = [], this.observer = t, this.callback = n;\n  }\n  return e;\n}(), Te = /* @__PURE__ */ new WeakMap(), zt = function(e, t) {\n  for (var n = 0; n < e.length; n += 1)\n    if (e[n].target === t)\n      return n;\n  return -1;\n}, Se = function() {\n  function e() {\n  }\n  return e.connect = function(t, n) {\n    var r = new Br(t, n);\n    Te.set(t, r);\n  }, e.observe = function(t, n, r) {\n    var o = Te.get(t), i = o.observationTargets.length === 0;\n    zt(o.observationTargets, n) < 0 && (i && te.push(o), o.observationTargets.push(new Lr(n, r && r.box)), kt(1), Qe.schedule());\n  }, e.unobserve = function(t, n) {\n    var r = Te.get(t), o = zt(r.observationTargets, n), i = r.observationTargets.length === 1;\n    o >= 0 && (i && te.splice(te.indexOf(r), 1), r.observationTargets.splice(o, 1), kt(-1));\n  }, e.disconnect = function(t) {\n    var n = this, r = Te.get(t);\n    r.observationTargets.slice().forEach(function(o) {\n      return n.unobserve(t, o.target);\n    }), r.activeTargets.splice(0, r.activeTargets.length);\n  }, e;\n}(), Ct = function() {\n  function e(t) {\n    if (arguments.length === 0)\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    if (typeof t != \"function\")\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    Se.connect(this, t);\n  }\n  return e.prototype.observe = function(t, n) {\n    if (arguments.length === 0)\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    if (!xt(t))\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    Se.observe(this, t, n);\n  }, e.prototype.unobserve = function(t) {\n    if (arguments.length === 0)\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    if (!xt(t))\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    Se.unobserve(this, t);\n  }, e.prototype.disconnect = function() {\n    Se.disconnect(this);\n  }, e.toString = function() {\n    return \"function ResizeObserver () { [polyfill code] }\";\n  }, e;\n}();\nconst Be = /* @__PURE__ */ new WeakMap();\nfunction Pr(e) {\n  for (let t = 0, n = e.length; t < n; ++t) {\n    const r = e[t], o = Be.get(r.target);\n    typeof o == \"function\" && o(r);\n  }\n}\nconst rn = new (D && window.ResizeObserver || Ct)(\n  Pr\n);\nfunction We(e, t) {\n  Be.set(e, t), rn.observe(e);\n}\nfunction on(e) {\n  Be.has(e) && (rn.unobserve(e), Be.delete(e));\n}\nfunction so() {\n  return {\n    observeResize: We,\n    unobserveResize: on\n  };\n}\nconst sn = z(!1), Dr = W(() => sn.value), ue = \"__rtl_observer__\";\nfunction Fr() {\n  return D && !document.querySelector(`#${ue}`) && _r(), { isRtl: Dr };\n}\nfunction _r() {\n  if (!D)\n    return;\n  const e = document.createElement(\"style\"), t = `#${ue} { width: 1px } html.rtl #${ue}, html[dir='rtl'] #${ue} { width: 2px }`;\n  e.textContent = t, document.head.appendChild(e);\n  const n = document.createElement(\"div\");\n  n.id = ue, n.role = \"none\", n.style.cssText = \"position: fixed; top -10px; left: -10px; height: 1px; visibility: hidden;\", We(n, () => {\n    D && (sn.value = document.documentElement.classList.contains(\"rtl\") || document.documentElement.getAttribute(\"dir\") === \"rtl\");\n  }), document.body.appendChild(n);\n}\nconst co = Object.freeze([\n  \"top\",\n  \"top-start\",\n  \"top-end\",\n  \"bottom\",\n  \"bottom-start\",\n  \"bottom-end\",\n  \"left\",\n  \"left-start\",\n  \"left-end\",\n  \"right\",\n  \"right-start\",\n  \"right-end\"\n]);\nfunction ao(e) {\n  const { transfer: t, wrapper: n, isDrop: r = !1 } = e, o = e.reference ?? Ie(null), i = e.popper ?? Ie(null), s = e.arrow ?? Ie(null), c = z(T(e.placement)), a = z(\"\"), l = e.isRtl ?? Fr().isRtl;\n  n && lt(() => {\n    const u = T(n), d = T(i);\n    u && (u.__transferElement = d);\n  }), t != null && (Q(\n    () => T(t),\n    (u) => {\n      m(u), b();\n    }\n  ), m(T(t))), Ze(() => {\n    requestAnimationFrame(() => {\n      lt(p);\n    });\n  });\n  let f;\n  async function p() {\n    if (!D)\n      return;\n    f == null || f();\n    const u = T(o), d = T(i);\n    if (!u || !d)\n      return;\n    const h = T(s), g = [Xn()];\n    if (r && g.push({\n      name: \"origin\",\n      fn({ placement: R, elements: M }) {\n        const A = v(R);\n        return A && (M.floating.style.transformOrigin = A), {};\n      }\n    }), e.offset) {\n      let R = T(e.offset);\n      Array.isArray(R) && (R = {\n        mainAxis: R[1],\n        crossAxis: R[0]\n      }), g.push(Kn(R));\n    }\n    if (e.shift) {\n      let R = T(e.shift);\n      typeof R == \"boolean\" && (R = {}), g.push(Un(R));\n    }\n    h && g.push(Vn({ element: h })), g.push(jn({ strategy: \"escaped\" }));\n    const w = T(l) || !1, O = {\n      middleware: g,\n      placement: T(e.placement),\n      platform: {\n        ...Gt,\n        isRTL: async () => w\n      }\n    }, S = async () => {\n      const {\n        x: R,\n        y: M,\n        placement: A,\n        strategy: B,\n        middlewareData: F\n      } = await hr(u, d, O);\n      if (T(o) !== u) {\n        T(i) === d && Object.assign(d.style, {\n          position: \"\",\n          top: \"\",\n          left: \"\"\n        });\n        return;\n      }\n      const N = {\n        position: B,\n        top: `${M}px`,\n        left: `${R}px`\n      };\n      if (h)\n        if (F.arrow) {\n          const { x: L, y } = F.arrow;\n          Object.assign(h.style, {\n            top: y != null ? `${y}px` : \"\",\n            left: L != null ? `${L}px` : \"\"\n          });\n        } else\n          Object.assign(h.style, { top: \"\", left: \"\" });\n      Object.assign(d.style, N), d.dataset.popperPlacement = A, c.value = A;\n    };\n    e.autoUpdate && (f = dr(u, d, S)), await S();\n  }\n  const b = () => new Promise((u) => {\n    requestAnimationFrame(() => {\n      p().then(u);\n    });\n  });\n  function m(u) {\n    a.value = typeof u == \"boolean\" ? u ? \"body\" : \"\" : u;\n  }\n  function v(u) {\n    if (u !== \"left\" && u !== \"right\") {\n      const [d, h] = u.split(\"-\");\n      return d === \"bottom\" || d !== \"top\" && h === \"start\" ? \"center top\" : \"center bottom\";\n    }\n  }\n  return {\n    wrapper: n,\n    reference: o,\n    popper: i,\n    placement: c,\n    transferTo: a,\n    updatePopper: b\n  };\n}\nconst At = \"__theme_style__\", ze = \"__theme_observer__\", Mt = /* @__PURE__ */ new WeakMap();\nfunction lo(e) {\n  const t = z();\n  if (D) {\n    e = e || document.body;\n    let n = Mt.get(e);\n    n || (n = Hr(t), e.appendChild(n), Mt.set(e, n));\n  }\n  return { theme: t };\n}\nconst Pe = Ve(/* @__PURE__ */ new Map()), Je = /* @__PURE__ */ new Map();\nQ(Pe, () => {\n  if (!D)\n    return;\n  Je.clear();\n  const e = document.head.querySelector(`#${At}`);\n  e && document.head.removeChild(e);\n  const t = document.createElement(\"style\");\n  let n = `.${ze} { width: 1px }`, r = 1;\n  for (const [o, [i, s]] of Pe.entries())\n    n += ` html.${i} .${ze}, .${s} .${ze} { width: ${++r}px }`, Je.set(r, o);\n  t.textContent = n, t.id = At, document.head.appendChild(t);\n});\nfunction Nr(e) {\n  for (const t of e) {\n    const {\n      name: n,\n      rootClass: r = n,\n      varsClass: o = `vxp-theme-vars-${r}`\n    } = typeof t == \"string\" ? { name: t } : t;\n    Pe.set(n, [r, o]);\n  }\n}\nfunction fo(e) {\n  Pe.clear(), Nr(e);\n}\nlet Wr = 0;\nfunction Ir() {\n  return `__theme_observer_${Wr++}__`;\n}\nfunction Hr(e) {\n  if (!D)\n    return;\n  const t = document.createElement(\"div\");\n  return t.id = Ir(), t.className = ze, t.role = \"none\", t.style.cssText = \"position: fixed; top -10px; left: -10px; height: 1px; visibility: hidden;\", We(t, (n) => {\n    var o;\n    if (!D)\n      return;\n    const r = ((o = n.borderBoxSize) == null ? void 0 : o[0].inlineSize) ?? n.contentRect.width;\n    e.value = Je.get(r);\n  }), t;\n}\nfunction $r() {\n  const e = {};\n  return J(() => {\n    Object.keys(e).forEach((t) => {\n      clearTimeout(e[t]);\n    });\n  }), { timer: e };\n}\nfunction qr() {\n  const e = {};\n  return J(() => {\n    Object.keys(e).forEach((t) => {\n      clearInterval(e[t]);\n    });\n  }), { timer: e };\n}\nfunction Vr() {\n  const e = {};\n  return J(() => {\n    Object.keys(e).forEach((t) => {\n      cancelAnimationFrame(e[t]);\n    });\n  }), { timer: e };\n}\nfunction uo() {\n  const { timer: e } = $r(), { timer: t } = qr(), { timer: n } = Vr();\n  return { timeout: e, interval: t, raf: n };\n}\nfunction ho(e, t, n = 100) {\n  let r;\n  function o() {\n    e.value === \"hover\" && (clearTimeout(r), r = setTimeout(() => {\n      t.value = !0;\n    }, n));\n  }\n  function i() {\n    e.value === \"hover\" && (clearTimeout(r), r = setTimeout(() => {\n      t.value = !1;\n    }, n));\n  }\n  function s() {\n    e.value === \"click\" && (t.value = !t.value);\n  }\n  return {\n    handleTriggerEnter: o,\n    handleTriggerLeave: i,\n    handleTriggerClick: s\n  };\n}\nfunction mo(e) {\n  const {\n    items: t,\n    itemSize: n,\n    itemFixed: r,\n    idKey: o,\n    defaultKeyAt: i,\n    bufferSize: s = z(5),\n    wrapper: c = z(null),\n    autoResize: a = !0\n  } = e, l = W(() => {\n    const y = T(t), x = y.length, E = T(o), C = /* @__PURE__ */ new Map();\n    for (let k = 0; k < x; ++k)\n      C.set(y[k][E], k);\n    return C;\n  }), f = z(0), p = /* @__PURE__ */ new Map(), b = W(() => {\n    const y = T(t), x = y.length, E = T(o), C = pn(x, T(n));\n    for (let k = 0; k < x; ++k) {\n      const j = y[k][E], Y = p.get(j);\n      Y && C.add(k, Y);\n    }\n    return C;\n  }), m = z(0), v = z(0), u = W(() => Math.max(\n    b.value.boundIndex(v.value) - Math.max(T(s), 0),\n    0\n  )), d = W(() => {\n    if (!f.value || f.value < 0)\n      return [];\n    const y = T(t), x = Math.min(\n      b.value.boundIndex(v.value + f.value) + 1 + Math.max(T(s), 0),\n      y.length\n    );\n    return y.slice(u.value, x);\n  }), h = W(() => {\n    m.value;\n    const y = b.value.sum(), x = T(r);\n    return {\n      height: x ? `${y}px` : void 0,\n      minHeight: x ? void 0 : `${y}px`,\n      boxSizing: \"content-box\"\n    };\n  }), g = W(() => (m.value, {\n    transform: `translate3d(0, ${b.value.sum(u.value)}px, 0)`\n  }));\n  if (a) {\n    let y = P;\n    const x = Q(\n      () => T(c),\n      (E) => {\n        y(), E && (We(E, S), y = () => {\n          on(E), y = P;\n        }, Xe(i) && B(i));\n      },\n      { immediate: !0, flush: \"post\" }\n    );\n    J(() => {\n      x(), y();\n    });\n  }\n  function w() {\n    const y = T(c);\n    y && (v.value = y.scrollTop);\n  }\n  function O() {\n    Tn(w);\n  }\n  function S(y) {\n    dt(y.target) || y.contentRect.height === f.value || (f.value = y.contentRect.height);\n  }\n  function R(y, x) {\n    var ct, at;\n    if (T(r))\n      return;\n    const E = l.value.get(y), C = b.value, k = C.get(E), j = ((at = (ct = x.borderBoxSize) == null ? void 0 : ct[0]) == null ? void 0 : at.blockSize) ?? x.contentRect.height;\n    if (j === k)\n      return;\n    if (dt(x.target)) {\n      k && (C.add(E, -k), m.value++);\n      return;\n    }\n    const Y = j - T(n), fe = j - k;\n    if (Y ? p.set(y, Y) : p.delete(y), !fe)\n      return;\n    C.add(E, fe), m.value++;\n    const Z = T(c);\n    if (Z) {\n      const cn = C.sum(E);\n      Z.scrollTop > cn && Z.scrollBy(0, fe), v.value = Z.scrollTop;\n    }\n  }\n  function M(y, x) {\n    const E = T(c);\n    E && E.scrollTo({\n      behavior: x,\n      top: y,\n      left: 0\n    });\n  }\n  function A(y, x) {\n    const E = T(c);\n    E && E.scrollBy({\n      behavior: x,\n      top: y,\n      left: 0\n    });\n  }\n  function B(y, x) {\n    const E = l.value.get(y);\n    E != null && F(E, x);\n  }\n  function F(y, x) {\n    const E = T(c);\n    E && E.scrollTo({\n      behavior: x,\n      top: b.value.sum(y),\n      left: 0\n    });\n  }\n  function N(y, x) {\n    const E = T(c);\n    if (!E)\n      return;\n    const C = b.value, k = E.scrollTop;\n    if (C.sum(y) < k) {\n      F(y, x);\n      return;\n    }\n    const Y = E.offsetHeight, fe = k + Y, Z = C.sum(y + 1);\n    Z > fe && M(Z - Y, x);\n  }\n  function L(y, x) {\n    const E = l.value.get(y);\n    E != null && N(E, x);\n  }\n  return {\n    wrapper: c,\n    indexMap: l,\n    heightTree: b,\n    startIndex: u,\n    scrollOffset: v,\n    visibleItems: d,\n    listStyle: h,\n    itemsStyle: g,\n    handleScroll: O,\n    handleResize: S,\n    handleItemResize: R,\n    scrollTo: M,\n    scrollBy: A,\n    scrollToKey: B,\n    scrollToIndex: F,\n    ensureIndexInView: N,\n    ensureKeyInView: L\n  };\n}\nexport {\n  _t as CLICK_OUTSIDE,\n  Nr as addActiveThemes,\n  Kr as createSlotRender,\n  Ur as flatVNodes,\n  dt as isHiddenElement,\n  We as observeResize,\n  co as placementWhileList,\n  Gr as proxyExposed,\n  Nt as queryOutsideHiddenElement,\n  fo as setActiveThemes,\n  on as unobserveResize,\n  we as unrefElement,\n  jr as useClickOutside,\n  Yr as useDisplay,\n  Jr as useFullScreen,\n  Zr as useHover,\n  eo as useIntersection,\n  q as useListener,\n  to as useManualRef,\n  no as useModifier,\n  ro as useMounted,\n  oo as useMoving,\n  io as usePointer,\n  ao as usePopper,\n  Vr as useRaf,\n  so as useResize,\n  Fr as useRtl,\n  qr as useSetInterval,\n  $r as useSetTimeout,\n  lo as useTheme,\n  uo as useTimerRecord,\n  ho as useTriggerHandler,\n  mo as useVirtual,\n  Qr as watchPauseable\n};\n//# sourceMappingURL=index.mjs.map\n","<script setup lang=\"ts\">\r\nimport {\r\n  ref,\r\n  reactive,\r\n  toRefs,\r\n  watch,\r\n  provide,\r\n  onBeforeMount,\r\n  onMounted,\r\n  onBeforeUnmount,\r\n  nextTick\r\n} from 'vue'\r\nimport GridItem from './grid-item.vue'\r\nimport { useResize } from '@vexip-ui/hooks'\r\nimport { createEventEmitter, isNull, debounce } from '@vexip-ui/utils'\r\nimport {\r\n  LAYOUT_KEY,\r\n  EMITTER_KEY,\r\n  bottom,\r\n  compact,\r\n  getLayoutItem,\r\n  moveElement,\r\n  validateLayout,\r\n  cloneLayout,\r\n  getAllCollisions\r\n} from '../helpers/common'\r\nimport {\r\n  getBreakpointFromWidth,\r\n  getColsFromBreakpoint,\r\n  findOrGenerateResponsiveLayout\r\n} from '../helpers/responsive'\r\n\r\nimport type { PropType } from 'vue'\r\nimport type {\r\n  Layout,\r\n  Breakpoint,\r\n  Breakpoints,\r\n  ResponsiveLayout,\r\n  LayoutInstance\r\n} from '../helpers/types'\r\n\r\nconst props = defineProps({\r\n  autoSize: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  colNum: {\r\n    type: Number,\r\n    default: 12\r\n  },\r\n  rowHeight: {\r\n    type: Number,\r\n    default: 150\r\n  },\r\n  maxRows: {\r\n    type: Number,\r\n    default: Infinity\r\n  },\r\n  margin: {\r\n    type: Array as PropType<number[]>,\r\n    default: () => [10, 10]\r\n  },\r\n  isDraggable: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  isResizable: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  isMirrored: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  isBounded: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  useCssTransforms: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  verticalCompact: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  restoreOnDrag: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  layout: {\r\n    type: Array as PropType<Layout>,\r\n    required: true\r\n  },\r\n  responsive: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  responsiveLayouts: {\r\n    type: Object as PropType<Partial<ResponsiveLayout>>,\r\n    default: () => ({})\r\n  },\r\n  transformScale: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  breakpoints: {\r\n    type: Object as PropType<Breakpoints>,\r\n    default: () => ({ lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 })\r\n  },\r\n  cols: {\r\n    type: Object as PropType<Breakpoints>,\r\n    default: () => ({ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 })\r\n  },\r\n  preventCollision: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  useStyleCursor: {\r\n    type: Boolean,\r\n    default: true\r\n  }\r\n})\r\n\r\nconst emit = defineEmits([\r\n  'layout-before-mount',\r\n  'layout-mounted',\r\n  'layout-updated',\r\n  'breakpoint-changed',\r\n  'update:layout',\r\n  'layout-ready'\r\n])\r\n\r\nconst state = reactive({\r\n  width: -1,\r\n  mergedStyle: {},\r\n  lastLayoutLength: 0,\r\n  isDragging: false,\r\n  placeholder: {\r\n    x: 0,\r\n    y: 0,\r\n    w: 0,\r\n    h: 0,\r\n    i: '' as number | string\r\n  },\r\n  layouts: {} as Record<Breakpoint, Layout>, // array to store all layouts from different breakpoints\r\n  lastBreakpoint: null as Breakpoint | null, // store last active breakpoint\r\n  originalLayout: null! as Layout // store original Layout\r\n})\r\n\r\nconst itemInstances = new Map<number | string, any>()\r\n\r\nconst currentLayout = ref(props.layout)\r\nconst wrapper = ref<HTMLElement>()\r\n\r\nconst { observeResize, unobserveResize } = useResize()\r\nconst emitter = createEventEmitter()\r\n\r\nemitter.on('resizeEvent', resizeEventHandler)\r\nemitter.on('dragEvent', dragEventHandler)\r\n\r\nonBeforeMount(() => {\r\n  emit('layout-before-mount', currentLayout.value)\r\n})\r\n\r\nonMounted(() => {\r\n  emit('layout-mounted', currentLayout.value)\r\n\r\n  nextTick(() => {\r\n    validateLayout(currentLayout.value)\r\n\r\n    state.originalLayout = currentLayout.value\r\n\r\n    nextTick(() => {\r\n      initResponsiveFeatures()\r\n      wrapper.value && observeResize(wrapper.value, debounce(onWindowResize, 16))\r\n      compact(currentLayout.value, props.verticalCompact)\r\n      emit('layout-updated', currentLayout.value)\r\n      updateHeight()\r\n      onWindowResize()\r\n    })\r\n  })\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  emitter.clearAll()\r\n  wrapper.value && unobserveResize(wrapper.value)\r\n})\r\n\r\nfunction resizeEventHandler(\r\n  eventType: string,\r\n  i: number | string,\r\n  x: number,\r\n  y: number,\r\n  h: number,\r\n  w: number\r\n) {\r\n  resizeEvent(eventType, i, x, y, h, w)\r\n}\r\n\r\nfunction dragEventHandler(\r\n  eventType: string,\r\n  i: number | string,\r\n  x: number,\r\n  y: number,\r\n  h: number,\r\n  w: number\r\n) {\r\n  dragEvent(eventType, i, x, y, h, w)\r\n}\r\n\r\nwatch(\r\n  () => state.width,\r\n  (newVal, oldVal) => {\r\n    nextTick(() => {\r\n      emitter.emit('updateWidth', newVal)\r\n      if (oldVal === -1) {\r\n        /*\r\n        If oldVal === -1 is when the width has never been\r\n        set before. That only occurs when mounting is\r\n        finished, and onWindowResize has been called and\r\n        this.width has been changed the first time after it\r\n        got set to null in the constructor. It is now time\r\n        to issue layout-ready events as the GridItems have\r\n        their sizes configured properly.\r\n\r\n        The reason for emitting the layout-ready events on\r\n        the next tick is to allow for the newly-emitted\r\n        updateWidth event (above) to have reached the\r\n        children GridItem-s and had their effect, so we're\r\n        sure that they have the final size before we emit\r\n        layout-ready (for this GridLayout) and\r\n        item-layout-ready (for the GridItem-s).\r\n\r\n        This way any client event handlers can reliably\r\n        investigate stable sizes of GridItem-s.\r\n      */\r\n        nextTick(() => {\r\n          emit('layout-ready', currentLayout.value)\r\n        })\r\n      }\r\n      updateHeight()\r\n    })\r\n  }\r\n)\r\nwatch(\r\n  () => [props.layout, props.layout.length],\r\n  () => {\r\n    currentLayout.value = props.layout\r\n    layoutUpdate()\r\n  }\r\n)\r\nwatch(\r\n  () => props.colNum,\r\n  val => {\r\n    emitter.emit('setColNum', val)\r\n  }\r\n)\r\nwatch(\r\n  () => props.rowHeight,\r\n  value => {\r\n    emitter.emit('setRowHeight', value)\r\n  }\r\n)\r\nwatch(\r\n  () => props.isDraggable,\r\n  value => {\r\n    emitter.emit('setDraggable', value)\r\n  }\r\n)\r\nwatch(\r\n  () => props.isResizable,\r\n  value => {\r\n    emitter.emit('setResizable', value)\r\n  }\r\n)\r\nwatch(\r\n  () => props.isBounded,\r\n  value => {\r\n    emitter.emit('setBounded', value)\r\n  }\r\n)\r\nwatch(\r\n  () => props.transformScale,\r\n  value => {\r\n    emitter.emit('setTransformScale', value)\r\n  }\r\n)\r\nwatch(\r\n  () => props.responsive,\r\n  value => {\r\n    if (!value) {\r\n      emit('update:layout', state.originalLayout)\r\n      emitter.emit('setColNum', props.colNum)\r\n    }\r\n    onWindowResize()\r\n  }\r\n)\r\nwatch(\r\n  () => props.maxRows,\r\n  value => {\r\n    emitter.emit('setMaxRows', value)\r\n  }\r\n)\r\nwatch([() => props.margin, () => props.margin[1]], updateHeight)\r\n\r\nprovide(\r\n  LAYOUT_KEY,\r\n  reactive({\r\n    ...toRefs(props),\r\n    ...toRefs(state),\r\n    increaseItem,\r\n    decreaseItem\r\n  }) as LayoutInstance\r\n)\r\nprovide(EMITTER_KEY, emitter)\r\n\r\ndefineExpose({ state, getItem, resizeEvent, dragEvent })\r\n\r\nfunction increaseItem(item: any) {\r\n  itemInstances.set(item.i, item)\r\n}\r\n\r\nfunction decreaseItem(item: any) {\r\n  itemInstances.delete(item.i)\r\n}\r\n\r\nfunction getItem(id: number | string) {\r\n  return itemInstances.get(id)\r\n}\r\n\r\nfunction layoutUpdate() {\r\n  if (!isNull(currentLayout.value) && !isNull(state.originalLayout)) {\r\n    if (currentLayout.value.length !== state.originalLayout.length) {\r\n      const diff = findDifference(currentLayout.value, state.originalLayout)\r\n\r\n      if (diff.length > 0) {\r\n        if (currentLayout.value.length > state.originalLayout.length) {\r\n          state.originalLayout = state.originalLayout.concat(diff)\r\n        } else {\r\n          const ids = new Set(diff.map(item => item.i))\r\n          state.originalLayout = state.originalLayout.filter(item => !ids.has(item.i))\r\n        }\r\n      }\r\n\r\n      state.lastLayoutLength = currentLayout.value.length\r\n      initResponsiveFeatures()\r\n    }\r\n\r\n    compact(currentLayout.value, props.verticalCompact)\r\n    emitter.emit('updateWidth', state.width)\r\n    updateHeight()\r\n\r\n    emit('layout-updated', currentLayout.value)\r\n  }\r\n}\r\n\r\nfunction updateHeight() {\r\n  state.mergedStyle = {\r\n    height: containerHeight()\r\n  }\r\n}\r\n\r\nfunction onWindowResize() {\r\n  if (wrapper.value) {\r\n    state.width = wrapper.value.offsetWidth\r\n  }\r\n\r\n  emitter.emit('resizeEvent')\r\n}\r\n\r\nfunction containerHeight() {\r\n  if (!props.autoSize) return\r\n\r\n  const marginY = parseFloat(props.margin[1] as any)\r\n  const containerHeight = bottom(currentLayout.value) * (props.rowHeight + marginY) + marginY + 'px'\r\n  return containerHeight\r\n}\r\n\r\nlet positionsBeforeDrag: Record<string, { x: number, y: number }> | undefined\r\n\r\nfunction dragEvent(\r\n  eventName: string,\r\n  id: number | string,\r\n  x: number,\r\n  y: number,\r\n  h: number,\r\n  w: number\r\n) {\r\n  let l = getLayoutItem(currentLayout.value, id)!\r\n\r\n  // GetLayoutItem sometimes returns null object\r\n  if (isNull(l)) {\r\n    l = { h: 0, w: 0, x: 0, y: 0, i: '' }\r\n  }\r\n\r\n  if (eventName === 'dragstart' && !props.verticalCompact) {\r\n    positionsBeforeDrag = currentLayout.value.reduce(\r\n      (result, { i, x, y }) => ({\r\n        ...result,\r\n        [i]: { x, y }\r\n      }),\r\n      {}\r\n    )\r\n  }\r\n\r\n  if (eventName === 'dragmove' || eventName === 'dragstart') {\r\n    state.placeholder.i = id\r\n    state.placeholder.x = l.x\r\n    state.placeholder.y = l.y\r\n    state.placeholder.w = w\r\n    state.placeholder.h = h\r\n\r\n    nextTick(() => {\r\n      state.isDragging = true\r\n    })\r\n\r\n    emitter.emit('updateWidth', state.width)\r\n  } else {\r\n    nextTick(() => {\r\n      state.isDragging = false\r\n    })\r\n  }\r\n\r\n  // Move the element to the dragged location.\r\n  currentLayout.value = moveElement(currentLayout.value, l, x, y, true, props.preventCollision)\r\n\r\n  if (props.restoreOnDrag) {\r\n    // Do not compact items more than in layout before drag\r\n    // Set moved item as static to avoid to compact it\r\n    l.static = true\r\n    compact(currentLayout.value, props.verticalCompact, positionsBeforeDrag)\r\n    l.static = false\r\n  } else {\r\n    compact(currentLayout.value, props.verticalCompact)\r\n  }\r\n\r\n  // needed because vue can't detect changes on array element properties\r\n  emitter.emit('compact')\r\n  updateHeight()\r\n  if (eventName === 'dragend') {\r\n    positionsBeforeDrag = undefined\r\n    emit('layout-updated', currentLayout.value)\r\n  }\r\n}\r\n\r\nfunction resizeEvent(\r\n  eventName: string,\r\n  id: number | string,\r\n  x: number,\r\n  y: number,\r\n  h: number,\r\n  w: number\r\n) {\r\n  let l = getLayoutItem(currentLayout.value, id)!\r\n  // GetLayoutItem sometimes return null object\r\n  if (isNull(l)) {\r\n    l = { h: 0, w: 0, x: 0, y: 0, i: '' }\r\n  }\r\n\r\n  let hasCollisions\r\n  if (props.preventCollision) {\r\n    const collisions = getAllCollisions(currentLayout.value, { ...l, w, h }).filter(\r\n      layoutItem => layoutItem.i !== l.i\r\n    )\r\n    hasCollisions = collisions.length > 0\r\n\r\n    // If we're colliding, we need adjust the placeholder.\r\n    if (hasCollisions) {\r\n      // adjust w && h to maximum allowed space\r\n      let leastX = Infinity\r\n      let leastY = Infinity\r\n      collisions.forEach(layoutItem => {\r\n        if (layoutItem.x > l.x) leastX = Math.min(leastX, layoutItem.x)\r\n        if (layoutItem.y > l.y) leastY = Math.min(leastY, layoutItem.y)\r\n      })\r\n\r\n      if (Number.isFinite(leastX)) l.w = leastX - l.x\r\n      if (Number.isFinite(leastY)) l.h = leastY - l.y\r\n    }\r\n  }\r\n\r\n  if (!hasCollisions) {\r\n    // Set new width and height.\r\n    l.w = w\r\n    l.h = h\r\n  }\r\n\r\n  if (eventName === 'resizestart' || eventName === 'resizemove') {\r\n    state.placeholder.i = id\r\n    state.placeholder.x = x\r\n    state.placeholder.y = y\r\n    state.placeholder.w = l.w\r\n    state.placeholder.h = l.h\r\n    nextTick(() => {\r\n      state.isDragging = true\r\n    })\r\n    // this.$broadcast(\"updateWidth\", this.width);\r\n    emitter.emit('updateWidth', state.width)\r\n  } else {\r\n    nextTick(() => {\r\n      state.isDragging = false\r\n    })\r\n  }\r\n\r\n  if (props.responsive) responsiveGridLayout()\r\n\r\n  compact(currentLayout.value, props.verticalCompact)\r\n  emitter.emit('compact')\r\n  updateHeight()\r\n\r\n  if (eventName === 'resizeend') emit('layout-updated', currentLayout.value)\r\n}\r\n\r\nfunction responsiveGridLayout() {\r\n  const newBreakpoint = getBreakpointFromWidth(props.breakpoints, state.width)\r\n  const newCols = getColsFromBreakpoint(newBreakpoint, props.cols)\r\n\r\n  // save actual layout in layouts\r\n  if (!isNull(state.lastBreakpoint) && !state.layouts[state.lastBreakpoint]) {\r\n    state.layouts[state.lastBreakpoint] = cloneLayout(currentLayout.value)\r\n  }\r\n\r\n  // Find or generate a new layout.\r\n  const layout = findOrGenerateResponsiveLayout(\r\n    state.originalLayout,\r\n    state.layouts,\r\n    props.breakpoints,\r\n    newBreakpoint,\r\n    state.lastBreakpoint!,\r\n    newCols,\r\n    props.verticalCompact\r\n  )\r\n\r\n  // Store the new layout.\r\n  state.layouts[newBreakpoint] = layout\r\n\r\n  if (state.lastBreakpoint !== newBreakpoint) {\r\n    emit('breakpoint-changed', newBreakpoint, layout)\r\n  }\r\n\r\n  // new prop sync\r\n  emit('update:layout', layout)\r\n\r\n  state.lastBreakpoint = newBreakpoint\r\n  emitter.emit('setColNum', getColsFromBreakpoint(newBreakpoint, props.cols))\r\n}\r\n\r\nfunction initResponsiveFeatures() {\r\n  // clear layouts\r\n  state.layouts = Object.assign({} as Record<Breakpoint, Layout>, props.responsiveLayouts)\r\n}\r\n\r\nfunction findDifference(layout: Layout, originalLayout: Layout) {\r\n  const originalIds = new Set(originalLayout.map(item => item.i))\r\n  const ids = new Set(layout.map(item => item.i))\r\n\r\n  // Find values that are in result1 but not in result2\r\n  const uniqueResultOne = layout.filter(item => !originalIds.has(item.i))\r\n\r\n  // Find values that are in result2 but not in result1\r\n  const uniqueResultTwo = originalLayout.filter(item => !ids.has(item.i))\r\n\r\n  // Combine the two arrays of unique entries#\r\n  return uniqueResultOne.concat(uniqueResultTwo)\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div ref=\"wrapper\" class=\"vgl-layout\" :style=\"state.mergedStyle\">\r\n    <slot v-if=\"$slots.default\"></slot>\r\n    <template v-else>\r\n      <GridItem v-for=\"item in currentLayout\" :key=\"item.i\" v-bind=\"item\">\r\n        <slot name=\"item\" :item=\"item\"></slot>\r\n      </GridItem>\r\n    </template>\r\n    <GridItem\r\n      v-show=\"state.isDragging\"\r\n      class=\"vgl-item--placeholder\"\r\n      :x=\"state.placeholder.x\"\r\n      :y=\"state.placeholder.y\"\r\n      :w=\"state.placeholder.w\"\r\n      :h=\"state.placeholder.h\"\r\n      :i=\"state.placeholder.i\"\r\n    ></GridItem>\r\n  </div>\r\n</template>\r\n"],"names":["y","At","ne","ot","G","Wr","e","n","r","o","jr","Xt","s","c","Kr","x","Zt","fn","Xr","LAYOUT_KEY","EMITTER_KEY","bottom","layout","max","bottomY","i","len","cloneLayout","newLayout","cloneLayoutItem","layoutItem","collides","l1","l2","compact","verticalCompact","minPositions","compareWith","getStatics","sorted","sortLayoutItemsByRowCol","out","l","compactItem","getFirstCollision","minY","correctBounds","bounds","collidesWith","getLayoutItem","id","getAllCollisions","moveElement","isUserAction","preventCollision","oldX","oldY","movingUp","collisions","collision","moveElementAwayFromCollision","itemToMove","fakeItem","setTransform","top","left","width","height","translate","setTransformRtl","right","setTopLeft","setTopRight","a","b","validateLayout","contextName","subProps","keyArr","item","j","useNameHelper","block","namespace","element","modifier","getControlPosition","offsetXYFromParentOf","evt","offsetParent","_a","offsetParentRect","createCoreData","lastX","lastY","isNum","num","getBreakpointFromWidth","breakpoints","sortBreakpoints","matching","breakpointName","getColsFromBreakpoint","breakpoint","cols","findOrGenerateResponsiveLayout","orgLayout","layouts","lastBreakpoint","breakpointsSorted","breakpointsAbove","currentDir","hasDocument","getDocumentDir","prefixNames","prefix","classNames","_i","className","name","prefixCSS","css","_","selector","ref","target","refs","Properties","properties","action","component","prototype","property","withMethods","methods","duplicate","propertyName","methodName","args","result","FUNCTION","OBJECT","STRING","NUMBER","UNDEFINED","IS_WINDOW","doc","OPEN_CLOSED_CHARACTERS","TINY_NUM","DEFAULT_UNIT_PRESETS","pos","size","__spreadArrays","il","k","jl","dot","a1","a2","b1","b2","isUndefined","value","isObject","isArray","isString","isNumber","isFunction","isEqualSeparator","character","separator","isCharacterSpace","isSeparatorSpace","findOpen","openCharacter","texts","index","length","openCloseCharacters","isIgnore","findIgnore","findClose","otherText","closeCharacter","_loop_1","nextIndex","find","open","out_i_1","state_1","splitText","text","splitOptions","_b","isSeparateFirst","isSeparateOnlyOpenClose","_c","isSeparateOpenClose","_d","openClosedText","close","regexText","regex","chr","values","tempValues","resetTemp","_loop_2","out_i_2","nextOpenCloseCharacters","state_2","splitSpace","splitComma","splitBracket","matches","splitUnit","unit","camelize","str","all","letter","decamelize","letter2","now","findIndex","arr","callback","defaultIndex","defalutValue","requestAnimationFrame","firstTime","raf","currTime","cancelAnimationFrame","caf","handle","getKeys","obj","getValues","keys","key","convertUnitSize","sizeFunction","between","min","checkBoundSize","targetSize","compareSize","isMax","ratio","throttle","defaultSize","throttledSize","calculateBoundSize","minSize","maxSize","keepRatio","minWidth","minHeight","maxWidth","maxHeight","sum","nums","total","average","getRad","pos1","pos2","distX","distY","rad","getCenterPoint","points","getShapeDirection","center","pos1Rad","pos2Rad","getDist","reverseUnit","throttleArray","counter","flat","prev","cur","pushSet","elements","hasClass","addClass","removeClass","reg","addEvent","el","type","listener","options","removeEvent","getDocument","getDocumentElement","getDocumentBody","getWindow","isWindow","val","isNode","PolyMap","__proto","prevIndex","HashMap","SUPPORT_MAP","Link","prevLink","nextLink","link","orderChanged","changed","fixed","fromLinks","toLinks","from","to","fromLink","toLink","fromIndex","toIndex","Result","prevList","list","added","removed","maintained","changedBeforeAdded","ordered","pureChanged","fromBefore","toBefore","diff","findKeyCallback","mapClass","prevKeys","prevKeyMap","keyMap","removedMap","addedCount","removedCount","prevListIndex","listIndex","ListDiffer","newData","extendStatics","d","p","__extends","__","__assign","t","__rest","__spreadArray","pack","ar","fillKeys","arr2","fillProps","props","defaultProps","name_1","isDiff","getAttributes","otherProps","splitProps","attributes","events","name_2","findContainerNode","provider","base","removeNode","node","parentNode","executeHooks","hooks","hook","renderFunctionComponent","hooksIndex","Provider","ps","contexts","nextElement","nextState","isForceUpdate","self","currentDepth","scheduledContexts","context","scheduledSubs","isContextUpdate","nextChildSubs","childs","sub","depth","child","renderProviders","prevProps","setCurrentInstance","fr","getCurrentInstance","getHooksIndex","setHooksInex","nextHooksIndex","Component","state","prevState","isUpdate","PureComponent","_super","createRef","defaultValue","refCallback","forwardRef","func","createComponent","contextValue","ComponentProvider","container","_this","nextProps","isMount","contextType","template","nextContexts","ef","def","diffAttributes","attrs1","attrs2","diffObject","name_3","diffEvents","events1","events2","provier","name_4","name_5","keys1","keys2","diffStyle","style1","style2","style","beforeName","name_6","name_7","name_8","getNativeEventName","ElementProvider","isRemove","eventName","contextValues","containerNode","isSVG","prevAttributes","prevEvents","nextAttributes","nextEvents","name_9","findDOMNode","comp","providers","findNodeProvider","createElement","children","flat$1","ContainerProvider","TextProvider","diffProviders","containerProvider","childrenKeys","childrenProvider","next","createProvider","childProvider","getNextSibiling","childProviders","providerClass","updatedHooks","hyd","updated","nodeProvider","renderProvider","isProvider","renderSelf","checkHookInfo","info","inst","prevHt","useMemo","defaultFunction","deps","useRef","useEffect","effect","unshift","effects","useImperativeHandle","some","getUserAgentString","agent","userAgent","execRegExp","pattern","hasUserAgentData","userAgentData","brands","findVersion","versionTest","convertVersion","findPreset","presets","userPreset","version","preset","findPresetBrand","brandInfo","findBrand","brand","BROWSER_PRESETS","CHROMIUM_PRESETS","WEBKIT_PRESETS","WEBVIEW_PRESETS","OS_PRESETS","isWebView","getLegacyAgent","nextAgent","isMobile","browser","os","browserPreset","browserVersion","osPreset","osVersion","chromiumPreset","webkitPreset","getClientHintsAgent","osData","fullVersionList","firstBrand","platform","chromiumBrand","webkitBrand","platfomResult","browserBrandByFullVersionList","browserBrand","add","matrix","inverseMatrix","startIndex","fromX","swap","v","iv","divide","ignoreDimension","m","newMatrix","invert","createIdentityMatrix","identityIndex","targetStartIndex","targetIndex","transpose","getOrigin","originMatrix","w","fromTranslation","convertPositionMatrix","convertDimension","multiplies","matrixes","multiply","matrix2","plus","nextPos","minus","convertCSStoMatrix","is2d","convertMatrixtoCSS","calculate","rotateX3d","rotateY3d","rotateZ3d","createRotateMatrix","scale3d","sx","sy","sz","rotate","translate3d","tx","ty","tz","matrix3d","matrix1","cos","sin","createScaleMatrix","scale","createOriginMatrix","origin","createWarpMatrix","pos0","pos3","nextPos0","nextPos1","nextPos2","nextPos3","x0","y0","x1","y1","x2","y2","x3","y3","u0","v0","u1","v1","u2","v2","u3","v3","h","createMatrix","parseMat","transform","toMat","parse","calculateMatrixDist","res","matrixInfos","matrixFunction","functionValue","transforms","functionName","nextSize_1","posX","posY","posZ","nextSize","_e","_f","_g","_h","unitValue","childrenCount","ChildrenDiffer","diff$1","ChildrenDiffer$1","EventEmitter","resolve","param","isStop","listeners","EventEmitter$1","getDefaultScrollPosition","checkDefaultScrollEvent","getContainerElement","DragScroll","inputEvent","rect","clientX","clientY","threshold","_startRect","_startPos","direction","prevScrollPos","throttleTime","isDrag","nextScrollPos","offsetX","offsetY","nextDirection","getScrollPosition","useScroll","nowTime","distTime","checkScrollEvent","DragScroll$1","tinyThrottle","isSameConstants","linearConstants1","linearConstants2","isSamePoint","point1","point2","getAreaSize","point","nextPoint","fitPoints","getMinMaxs","minX","maxX","maxY","ratioX","ratioY","xs","ys","isInside","excludeLine","xLine","xLinearConstants","getLinearConstants","lines","convertLines","intersectionPosInfos","line","linearConstants","standardPoint","xPoints","getPointsOnLines","getIntersectionPointsByConstants","linePoint","intersectionCount","xMap","prevValue","nextValue","dx","dy","c1","c2","isZeroA","isZeroB","results","minMaxs","order","minMax","pointX","pointY","getOverlapPointInfos","points1","points2","targetPoints1","targetPoints2","lines1","lines2","linearConstantsList1","line1","linearConstantsList2","line2","overlapInfos","linePointInfos","intersectionPoints","isNext","index2","index1","pointMap","getOverlapPoints","infos","getOverlapSize","getRotatiion","touches","isMultiTouch","getEventClients","getClients","getClient","isMouseEvent","getPosition","clients","prevClients","startClients","getAverageClient","originalClientX","originalClientY","prevX","prevY","startX","startY","deltaX","deltaY","sumClient","minLength","client","ClientStore","isAdd","position","positions","movement","currentClient","prevClient","INPUT_TAGNAMES","Gesto","targets","isTrusted","isDragAPI","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","dragFocusedInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","useTouch","isDragStart","activeElement","tagName","hasInput","hasContentEditable","activeTagName","timer","isScroll","dragResult","clientsLength","currentTime","isDouble","firstTarget","checkWindowBlur","passive_1","isCallDrag","store","nextClients","data","currentData","pinchThreshold","isPinch","isPrevDrag","isFirstDrag","storePosition","win","passive","hash","stringHash","getHash","getShadowRoot","parentElement","rootNode","replaceStyle","trimmedSelector","subSelector","trimmedSubSelector","injectStyle","shadowRoot","styled","injectClassName","styleElement","count","injectCount","Tag","injector","cssStyled","cssId","targetRef","injectResult","__decorate","decorators","desc","__values","__read","error","makeAble","able","DIRECTIONS4","DIRECTIONS","getSVGCursor","degree","getCursorCSS","degree45","defaultCursor","getAgent","IS_WEBKIT","IS_WEBKIT605","navi","browserName","IS_CHROME","IS_CHROMIUM","chromiumVersion","IS_CHROMIUM109","IS_FIREFOX","IS_SAFARI_ABOVE15","PREFIX","directionCSS","dir","originX","originY","offset","MOVEABLE_CSS","NEARBY_POS","FLOAT_POINT_NUM","MIN_SCALE","MAX_NUM","MIN_NUM","DIRECTION_REGION_TO_DIRECTION","DIRECTION_INDEXES","DIRECTION_ROTATIONS","MOVEABLE_METHODS","setCustomDrag","delta","isConvert","ableName","datas","ableDatas","convertDragDist","CustomGesto","originalDatas","calculateElementPosition","is3d","poses","calculatePoses","x4","y4","calculatePosition","sign","calculatePointerDist","moveable","moveableClientRect","rootMatrix","calculateInversePosition","getDragDist","setDragStart","allMatrix","beforeMatrix","offsetMatrix","targetMatrix","transformOrigin","getTransformDirection","resolveTransformEvent","event","nextTransforms","nextTransformAppendedIndexes","convertTransformInfo","targetFunction","matFunctionName","convertTransformFormat","dist","getTransformDist","getBeforeDragDist","bx","by","getTransfromMatrix","isAfter","beforeTransform","afterTransform","beforeTransform2","afterTransform2","targetAllTransform","nextTargetMatrix","res1","afterTargetMatrix","inverseBeforeMatrix","startDragBeforeDist","absoluteOrigin","isBefore","startDragDist","getInverseDragDist","calculateTransformOrigin","prevWidth","prevHeight","prevOrigin","prevSize","measureRatio","getPosIndexesByDirection","indexes","getPosesByDirection","getPosBySingleDirection","getPosByDirection","startPos","fixedDirection","fixedPos","getNextMatrix","getAbsoluteMatrix","getNextTransformMatrix","isAllTransform","targetTransform","scaleMatrix","fillTransformStartEvent","getBeforeRenderableDatas","setTransformIndex","setDefaultTransformIndex","startTransforms","fillOriginalTransform","getNextTransforms","getNextTransformText","getNextStyle","fillTransformEvent","nextTransform","drag","Draggable","fillCSSObject","getTranslateFixedPosition","fixedOffset","nextMatrix","nextFixedPosition","getDirectionOffset","getTranslateDist","fixedPosition","groupable","groupLeft","groupTop","getScaleDist","getDirectionByPos","fixedOffsetPosition","getRotateDist","rotateDist","getResizeDist","nextOrigin","getAbsolutePosition","getAbsolutePosesByState","getGestoData","targetGesto","controlGesto","getIndividualTransforms","getStyle","individualTransforms","getMatrixStackInfo","checkContainer","documentElement","requestEnd","isEnd","targetTransformOrigin","hasFixed","offsetContainer","getOffsetInfo","zoom","getCachedStyle","getElementTransform","isFixed","getTransformMatrix","isOffsetEnd","isStatic","parentClientLeft","parentClientTop","fixedClientLeft","fixedClientTop","fixedInfo","getPositionFixedInfo","length_1","convert3DMatrixes","getOffsetPosInfo","hasOffset","origin_1","targetOrigin","offsetPos","offsetLeft","offsetTop","getSVGMatrix","targetZoom","offsetInfo","offsetZoom","parentSlotElement","customOffsetParent","customOffsetLeft","customOffsetTop","margin","getBodyOffset","isElementTarget","scrollLeft","scrollTop","cacheStyleMap","clientRectStyleMap","matrixContainerInfos","setStoreCache","useCache","getCachedClientRect","clientRect","nextClientRect","getClientRect","getCachedMatrixContainerInfo","result_1","cache","nextStyle_1","cached","fillChildEvents","groupableDatas","childDatas","triggerChildGesto","isStart","moveables","childEvents","eventParams","ev","childMoveable","gestos","childEvent","triggerChildAbles","eachEvent","startChildDist","parentDatas","startPositions","originalX","originalY","renderDirectionControlsByInfos","renderDirections","React","renderPoses","rotationRad","getProps","degRotation","absDegree","directionMap","renderState","renderDirectionMap","directionSign","directionRotation","dataAttrs","getControlTransform","renderDirectionControls","defaultDirections","directions","displayAroundControls","renderAroundControls","renderLine","rotation","getLineStyle","renderEdgeLines","edge","getRenderDirections","renderDiagonalDirections","renderAllDirections","checkBoundPoses","verticalPoses","horizontalPoses","nextBounds","checkBounds","getBounds","externalBounds","containerHeight","containerWidth","clientLeft","clientTop","snapOffsetLeft","snapOffsetTop","snapOffsetRight","snapOffsetBottom","isCSS","checkBoundKeepRatio","endPos","endX","endY","abs","isBottom","isRight","verticalInfo","horizontalInfo","isBound","isVertical","startBoundPos","endBoundPos","minPos","maxPos","boundInfos","isBoundRotate$1","relativePoses","boundRect","nextPoses","boundRotate","vec","boundPos","getDistSize","checkRotateBounds","prevPoses","relativeLeft","relativeRight","relativeTop","relativeBottom","relativeRad1","relativeRad2","nextRad","VERTICAL_NAMES","HORIZONTAL_NAMES","SNAP_SKIP_NAMES_MAP","VERTICAL_NAMES_MAP","HORIZONTAL_NAMES_MAP","getInitialBounds","hasGuidelines","snappable","innerBounds","verticalGuidelines","horizontalGuidelines","snapGridWidth","snapGridHeight","guidelines","enableSnap","getSnapDirections","snapDirections","mapSnapDirectionPoses","snapPoses","nextSnapDirections","nextSnapPoses","splitSnapDirectionPoses","horizontalNames","verticalNames","calculateContainerPos","containerRect","clientPos","solveLineConstants","TINY_NUM$1","NAME_snapRotationThreshold","NAME_snapRotationDegrees","NAME_snapHorizontalThreshold","NAME_snapVerticalThreshold","checkMoveableSnapPoses","posesX","posesY","dirXs","dirYs","customSnapVerticalThreshold","customSnapHorizontalThreshold","snapThresholdMultiples","snapHorizontalThreshold","selectValue","snapVerticalThreshold","checkSnapPoses","multiples","checkSnap","checkSnapKeepRatio","getTinyDist","verticalSnapInfo","horizontalSnapInfo","getNearestSnapGuidelineInfo","isVerticalSnap","verticalGuideline","isHorizontalSnap","horizontalGuideline","horizontalPos","verticalPos","isSnap","getStringDirection","stringDirection","checkSnaps","horizontalDirection","verticalDirection","snapInfo","posInfo","guidelineInfo","guideline","targetType","targetPoses","snapThreshold","dirs","posType","snapPosInfos","targetPos","guidelineInfos","snapPosInfo","getSnapInfosByDirection","snapDirection","nextDir","checkSnapBoundPriority","aDist","bDist","getNearOffsetInfo","offsets","aSign","bSign","aOffset","bOffset","getCheckSnapDirections","endDirection_1","signX","signY","signs","isStartLine","cx","cy","hitTestLine","test1","test2","isSameStartLine","dots","centerSign","checkInnerBoundDot","start","end","checkInnerBound","verticalSign","horizontalSign","lineConstants","leftLine","topLine","rightLine","bottomLine","topBoundInfo","checkLineBoundCollision","bottomBoundInfo","leftBoundInfo","rightBoundInfo","isAllVerticalBound","isVerticalBound","isAllHorizontalBound","isHorizontalBound","verticalOffset","maxOffset","horizontalOffset","isAllBound","boundLine","isRender","dot1","boundDot1","boundDot2","dy2","dx2","hasDx","hasDy","slope","getInnerBoundInfo","lineInfos","multiple","sizeOffset","getInnerBoundDragInfo","getCheckInnerBoundLineInfos","innerBoundInfo","widthOffsetInfo","heightOffsetInfo","getCheckSnapLineDirections","lineDirections","virtualPoses","dir1","dir2","virtualLine","isBoundRotate","boundDots","getDistPointLine","solveReverseLine","checkRotateInnerBounds","dotInfos","lineRad","lineDist","dotDist","dotRad","distRad","nextRad1","nextRad2","checkInnerBoundPoses","boundMap","pos4","lineInfo","isHorizontalStart","isVerticalStart","solveEquation","snapOffset","solveNextOffset","getDist$1","dist1","dist2","isOutside","widthOffset","heightOffset","getSnapBound","boundInfo","checkThrottleDragRotate","throttleDragRotate","adjustPoses","adjustPos","prevDistY","checkSnapBoundsDrag","ignoreSnap","getAbsolutePoses","getRect","boundPoses","checkMoveableSnapBounds","verticalSnapBoundInfo","horizontalSnapBoundInfo","verticalInnerBoundInfo","horizontalInnerBoundInfo","horizontalBoundInfos","verticalBoundInfos","horizontalDist","verticalDist","checkSnapBounds","guideines","checkSnapRightLine","snapBoundInfo","rad180","isHorizontalLine","isVerticalLine","getSnapBoundInfo","isRequest","startDirection","endDirection","otherStartPos","otherEndPos","checkSnapBoundsKeepRatio","otherHorizontalOffset","isOtherHorizontalBound","isOtherHorizontalSnap","otherVerticalOffset","isOtherVerticalBound","isOtherVerticalSnap","snapLine","getSnapBoundOffset","horizontalBoundInfo","verticalBoundInfo","checkMaxBounds","left_1","top_1","right_1","bottom_1","otherDirection","isCheckVertical","isCheckHorizontal","otherPos","deg","nextOtherPos","isHeightOutside","isWidthOutside","hideThrottleDragRotateLine","dragInfo","beforeOrigin","parentEvent","parentGesto","startCheckSnapDrag","params","fillParams","triggerEvent","parentFlag","deltaOffset","useSnap","isGroup","parentThrottleDrag","prevDist","prevBeforeDist","startValue","parentMoveable","throttleDrag","dragRotateRad","startDragRotate","ry","rx","beforeTranslate","beforeDist","beforeDelta","fillEndParams","nextParams","passDelta","getFixedDirectionInfo","getOffsetFixedDirectionInfo","nextFixedOffset","getOffsetFixedPositionInfo","offsetFixedPosition","directionCondition$2","getDirectionCondition","Resizable","getDirectionViewClassName","parentDirection","parentFixedDirection","getTotalDirection","setRatio","setFixedDirection","setFixedPosition","setMin","setMax","nextMaxSize","startWidth","startHeight","parentKeepRatio","dragClient","parentDist","resolveMatrix","isResize","startOffsetWidth","startOffsetHeight","isWidth","startOffsetMatrix","startTransformOrigin","targetN","nextAllMatrix","resizeFormat","throttleResize","keepRatioFinally","sizeDirection","distWidth","distHeight","getNextBoundingSize","getOffsetSizeDist","nextWidth","nextHeight","boundingWidth","boundingHeight","nextFixedDirection","snapDist","checkSnapResize","computeSize","isNoSnap","inverseDelta","fillAfterTransform","errorWidth","errorHeight","isErrorWidth","isErrorHeight","originalEvents","parentStartOffsetWidth","parentStartOffsetHeight","updateGroupMin","originalMinSize","childMinSize","childStartOffsetWidth","childStartOffsetHeight","parentMinWidth","parentMinHeight","updateGroupMax","originalMaxSize","childMaxSize","parentMaxWidth","parentMaxHeight","catchEvent","parentScale","setRotateStartInfo","startAbsoluteOrigin","getAbsoluteDist","defaultDeg","prevDeg","normalizedPrevDeg","loop","getAbsoluteDistByClient","getRotateInfo","moveableRect","throttleRotate","prevSnapDeg","snapRotation","checkSnapRotate","snapDeg","getRotationPositions","rotationPosition","radPoses","getRotationRad","isReverse","dragControlCondition","rotationTarget","getRefTargets","Rotatable","rotatable","rotateAroundControls","resolveAblesWithRotatable","jsxs","ables","resolveMap_1","directionControlInfos","parentRotate","beforeDirection","resizeStart","startClientX","startClientY","externalRotate","inputTarget","regionDirection","controlDirection","clientPoses","calculateMoveableClientPositions","originalFixedPosition_1","fixedBeforeOrigin","fixedAfterOrigin","posDelta","dragStart","resolveAble","getTotalOrigin","rotatation","clientDistX","clientDistY","groupDelta","beforeInfo","afterInfo","absoluteInfo","isRotate","targetDirection","beforeRotation","absoluteDelta","absoluteDist","absoluteRotation","startRotation","absoluteStartRotation","nextClientX","nextClientY","nextRotation","inverseDist","dragEvent","transformEvent","parentDistance","resize","resizeEvent","parentLeft","parentTop","parentBeforeOrigin","childClient","startGroupClient","prevClientX","prevClientY","distRotate","renderGuideline","isHorizontal","scaleType","renderInnerGuideline","renderSnapPoses","renderPos","renderGuidelines","targetRect","isDisplayInnerSnapDigit","mainNames","targetStart","targetEnd","hide","elementRect","renderDigitLine","lineType","gap","snapDigit","isDisplaySnapDigit","snapDistFormat","sizeName","absGap","snapSize","groupByElementGuidelines","otherIndex","names","groupBy","nextGuidelines","inner","elementRect1","elementRect2","renderDashedGuidelines","rendered","groups","sideNames","sidePos","prevRect","nextRect","size1","size2","renderPos1","renderPos2","renderGapGuidelines","targetSideStart","targetSideEnd","gapRects","sideStartPos","sideEndPos","sideCenterPos","getTotalGuidelines","containerClientRect","overflow","containerClientHeight","containerClientWidth","snapGap","maxSnapElementGuidelineDistance","isDisplayGridGuidelines","elementGuidelines","getElementGuidelines","totalGuidelines","getGapGuidelines","getGridGuidelines","getDefaultGuidelines","checkBetweenRects","snapThresholds","maxSnapElementGapDistance","elementRects","gapGuidelines","targetCenter","targetStart2","targetEnd2","snapThresholdMap","nextElementRects","snapRect1","snapRect2","rect1","rect2","rect1Start","rect1End","rect2Start","rect2End","isCenter","startGridGroupGuidelines","snapGridAll","snapRenderInfo","hasDirection","rect_1","children_1","posName","clientOffset","rectSize","rectPos","childSizes","firstChildSize","childSnapSizes","rectRatio","childSize","startOffset","snapThresholdInfo","defaultSnapGridWidth","defaultSnapGridHeight","pushGuideline","distance","prevValues","snapRect","nextElementGuidelines","getRefTarget","nextValues","getSnapElementRects","elementSnapDirections","topValue","leftValue","rightValue","bottomValue","centerValue","middleValue","horizontal","vertical","rectTop","rectLeft","sizes","getObjectGuidelines","containerSize","posGuideline","snapWidth","snapHeight","offsetDelta","containerLeft","containerTop","elementLeft","elementTop","elementRight","elementBottom","checkSnapInfo","snapContainer","snapContainerTarget","snapContainerRect","offset1","getDragDistByState","offset2","getNextFixedPoses","nextFixedPos","normalized","getSizeOffsetInfo","innerBoundLineInfos","recheckSizeByTwoDirection","snapPos","nextWidthOffset","nextHeightOffset","checkSizeDist","getNextPoses","isWidthBound","isHeightBound","widthDist","heightDist","isGetWidthOffset","bumpDegree","baseDeg","deg1","deg2","getMinDegreeDistance","deg3","snapRotationThreshold","snapRotationDegrees","origin2_1","rad_1","firstDegree","checkSnapScale","sizeDist","getSnapGuidelines","posInfos","addBoundGuidelines","verticalSnapPoses","horizontalSnapPoses","innerBoundMap","verticalInnerBoundPoses","horizontalInnerBoundPoses","innerPos","directionCondition$1","Snappable","targetTop","targetLeft","snapRenderThreshold","watchValue","minLeft","minTop","externalPoses","snapInfos","hasExternalPoses","externalRect","verticalPosInfos","horizontalPosInfos","allGuidelines","nextBoundMap","nextInnerBoundMap","multiply2","defaultSync","measureSVGSize","viewBox","getSVGViewBox","getBeforeTransformOrigin","relativeOrigin","getTransformOrigin","getComputedStyle","getTransformOriginArray","computedTransform","baseVal","lastParent","isParent","checkZoom","getTargetStyle","hasSlot","assignedSlotParentElement","isCustomElement","targetPosition","willChange","slotParentNode","targetParentNode","getSVGGraphicsOffset","getBodyStyle","bodyPosition","marginLeft","marginTop","fixedContainer","hasTransform","body","makeMatrixCSS","clientWidth","clientHeight","viewBoxWidth","viewBoxHeight","scaleX","scaleY","preserveAspectRatio","align","meetOrSlice","svgOrigin","xAlign","yAlign","scaleDimension","isGTarget","isFillBox","bbox","rectWidth","rectHeight","calculateRect","getSVGOffset","targetInfo","getSize","mat","prevLeft","prevTop","posOrigin","rectOrigin","mat2","nextLeft","nextTop","distLeft","distTop","rootClientRect","rootPoses","getDiagonalSize","offsetWidth","offsetHeight","cssWidth","cssHeight","contentWidth","contentHeight","minOffsetWidth","minOffsetHeight","maxOffsetWidth","maxOffsetHeight","inlineCSSWidth","inlineCSSHeight","svg","targetStyle","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","horizontalPadding","verticalPadding","horizontalBorder","verticalBorder","getParentStyle","resetClientRect","getExtendsRect","isRoot","extendsRect","getClientRectByPosition","isExtends","baseTop","baseLeft","convertTransformOriginArray","getDirection","direciton","unsetAbles","isControl","unsetGesto","gestoName","gesto","resolvedEvent","prevEvent","nextEvent","isBeforeEvent","isManager","pseudoElt","filterAbles","triggerAblesSimultaneously","enabledAbles","ableGroups","method","equals","groupKeys","groupKey","keyIndex","group","groupByMap","calculatePadding","xAdded","yAdded","nextAdded","convertCSSSize","isRelative","checkAbles","beforeFunctionTexts","beforeFunctionTexts2","targetFunctionText","afterFunctionTexts","afterFunctionTexts2","beforeFunctions","beforeFunctions2","afterFunctions","afterFunctions2","targetFunctions","beforeFunctionMatrix","beforeFunctionMatrix2","afterFunctionMatrix","afterFunctionMatrix2","allFunctionMatrix","isArrayFormat","isSelector","userTargets","getAbsoluteRotation","getSizeDistByDist","startSize","standardRad","signSize","startWidthSize","startHeightSize","secondRad","firstRad","distSize","pinchScale","startFixedDirection","directionsDists","directionRatios","ratioDistance","dist_1","convertTransformUnit","xy","leftOrigin","rightOrigin","originObject","nextOriginObject","rotatePosesInfo","isDeepArrayEquals","arr1","value1","value2","isArray1","isArray2","valueKey","countEach","getPaddingBox","padding","Pinchable","angle","pinchable","controlEventName","pinchAbles","ableEvent","directionCondition","Scalable","setMinScaleSize","setMaxScaleSize","isScale","throttleScale","tempScaleValue","getNextScale","stateDirection","nextScale","distSign","isSelfPinch","startOffsetSize","scaleSize","distText","scaleText","isZeroScale","scaleEndParam","moveableScale","getMiddleLinePos","getTriangleRad","rad1","rad2","isValidPos","poses1","poses2","pi","Warpable","resizable","scalable","warpable","linePosFrom1","linePosFrom2","linePosFrom3","linePosFrom4","linePosTo1","linePosTo2","linePosTo3","linePosTo4","targetInverseMatrix","prevMatrix","isWarp","posIndexes","absolutePoses","selectedPoses","nearByPoses","afterMatrix","totalMatrix","AREA_PIECES","AREA_PIECE","AVOID","VIEW_DRAGGING","restoreStyle","renderPieces","DragArea","dragArea","passDragArea","areaElement","rects","Origin","originStyle","scrollContainer","Scrollable","scrollOptions","dragScroll","scrollContainerElement","scrollThreshold","scrollThrottleTime","Default","Padding","paddingDirections","paddingPos1","paddingPos2","paddingPos3","paddingPos4","RADIUS_DIRECTIONS","calculateRatio","sumSize","sumRatio","HORIZONTAL_RADIUS_ORDER","VERTICAL_RADIUS_ORDER","HORIZONTAL_RADIUS_DIRECTIONS","VERTICAL_RADIUS_DIRECTIONS","getRadiusStyles","clipStyles","radiusPoses","raws","rawPos","getRadiusRange","controlPoses","horizontalRange","verticalRange","clipPose","getRadiusValues","minCounts","full","splitIndex","splitLength","horizontalValues","verticalValues","horizontalValuesLength","verticalValuesLength","hasVerticalValues","nwValue","neValue","seValue","_j","swValue","_k","_l","wnValue","_m","enValue","_o","esValue","_p","wsValue","horizontalRawPoses","verticalRawPoses","nextHorizontalPoses","nextVerticalPoses","removeRadiusPos","radiuslIndex","deleteCount","addRadiusPos","horizontalIndex","verticalIndex","radiusX","radiusY","startVerticalIndex","splitRadiusPoses","horizontals","verticals","CLIP_DIRECTIONS","CLIP_RECT_DIRECTIONS","getClipStyles","clipPath","clipRelative","clipType","clipPoses","isRect","isCircle","subWidth","subHeight","getRectPoses","dirx","diry","getControlSize","xRange","yRange","getClipPath","defaultClip","customClip","clipText","clipPrefix","splitter","xPos","yPos","radiusX_1","radiusY_1","radius","xRadius","yRadius","centerPos_1","roundIndex","rectLength","radiusValues","_q","_r","_s","top_2","_t","nextRight","nextBottom","_u","posValue","top_3","moveControlPos","dists","verticalDirections","horizontalDirections","verticalDirection_1","horizontalDirection_1","fixedIndex","nextDist","nextControlPoses_1","controlPose","controlDir","dirDir","dirHorizontal","dirVertical","addClipPath","clipIndex","clipStyle","removeClipPath","Clippable","customClipPath","defaultClipPath","clipArea","clipPathState","snapBoundInfos","calculatedPos","controls","isInset","isPolygon","linePoses_1","clipLeft","clipTop","ellipseClipPath","piece","areaPoses","allWidth","allHeight","allLeft_1","allTop_1","directionType","snapPos1","snapPos2","dragWithClip","isDragTarget","isLine","isArea","originalDraggable","originalDist","firstDist","isDragWithTarget","isAll","guidePoses","isEllipse","guideRect","guideXPoses","guideYPoses","rectPoses","rectDists_1","boundDelta","snapOffsetY","snapOffsetX","distSnapX","distSnapY","width_1","height_1","nextControlPoses_2","nextClipStyles","dragDist","isClipStart","OriginDraggable","originRelative","distOrigin","dragDelta","addBorderRadiusByLine","lineIndex","horizontalsLength","virtual","verticalsLength","controlIndex","controlPoseInfo","addBorderRadius","removeBorderRadius","getBorderRadius","borderRadius","triggerRoundEvent","styles","getStyleBorderRadius","firstMoveable","Roundable","roundClickable","borderRadiusState","minRoundControls","maxRoundControls","roundPadding","isDisplayShadowRoundControls","verticalCount","horizontalCount","basePos","originalPos","isDisplayVerticalShadow","isDisplay","indexAttr","roundRelative","selectedControlPose","selectedVertical","selectedHorizontal","pose","poseDist","isIdentityMatrix","identityMatrix","BeforeRenderable","inlineTransform","cssMatrix","startTransform","Renderable","transformObject","matrixInfo","triggerAble","moveableAbles","eventOperations","eventAffix","eventType","requestInstant","requestAble_1","isDragStop","stop","isFirstStart","gestoType","prevGesto","trigger","conditionName","nextDatas","forceEndedCount","updatedCount","eventOperation","eventAbles","isForceEnd","flushSync","checkMoveableTarget","eventTarget","dragTargetElement","getTargetAbleGesto","moveableTarget","controlBox","dragTarget","checkTarget","getAbleGesto","getControlAbleGesto","checkControlTarget","ableType","conditionFunctions","isTargetAbles","preventClickDefault","dragContaienrOption","dragContainer","isPinchScheduled","EventManager","calculateMatrixStack","rootContainer","isAbsolute3d","prevTargetMatrix","containerZoom","rootMatrixes","isRoot3d","offsetRootContainer","rootZoom","isNext3d","isSVGGraphicElement","nextRootMatrixes","originalRootContainer","endContainer","rootMatrixBeforeOffset","nextInfo","isMatrix3d","originalRootMatrix","calculateElementInfo","allResult","getMoveableTargetInfo","moveableElement","parentContainer","requestStyles","targetClientRect","rootContainerClientRect","getStyle_1","beforePosition","absoluteTargetPosition","absoluteContainerPosition","containerClientRectLeft","containerClientRectTop","containterClientLeft","containerClientTop","clientDelta","getPersistState","MoveableManager","parentPosition","propsTarget","cspNonce","translateZ","ControlBoxElement","linePadding","controlPadding","stateTarget","groupTargets","isDragging","ableAttributes","ableClassName","isVisible","React.createElement","viewContainer","manager","wrapperMoveable","totalSize","isTarget","isSetState","isSingle","persistState","statePos","isInstant","allAbles","requsetAble","ableRequester","requester","ableParam","originalBeforeOrigin","stateLeft","stateTop","isPersisted","renderPos3","renderPos4","zoomOffset","stateContainer","isTargetChanged","isChanged","moveableContainer","tag","customStyleMap","hasControlBox","persistData","firstRenderState","pinchStart","dragControlStart","targetAbles","controlAbles","Renderer","render","styleNames","ableStyleNames","hasTargetAble","hasControlAble","isUnset","hideDefaultLines","hideChildMoveableDefaultLines","useDragArea","nextTarget","prevTarget","prevDragArea","isDragTargetChanged","isDragAreaChanged","eventKeys","hasAbles","viewContainerOption","nextClassNames","prevClassNames","classPrefix","targetGestoData","controlGestoData","observer","records","e_1","records_1","records_1_1","mutation","e_1_1","React.PureComponent","Groupable","renderGroupRects","persistDatChildren","Clickable","isMoveableElement","containsElement","containsTarget","parentTarget","getDraggableEvent","edgeDraggable","IndividualGroupable","MOVEABLE_ABLES","MOVEABLE_EVENTS","current","MOVEABLE_PROPS","solveConstantsDistance","solveC","getMaxPos","getMinPos","getGroupRect","parentPoses","fixedRotation","a1_1","a2_1","a1MinMax_1","a1MinMaxPos_1","a2MinMax_1","a2MinMaxPos_1","a1Dist","a2Dist","a1MinPos","a1MaxPos","a2MinPos","a2MaxPos","minHorizontalLine","maxHorizontalLine","minVerticalLine","maxVerticalLine","minX_1","minY_1","maxX_1","maxY_1","changedX","findMoveableGroups","childTargetGroups","targetGroup","childMoveableGroups","checked","MoveableGroup","checkeds","targetGroups","moveableGroups","useDefaultGroupRotate","finded","isReset","defaultGroupRotate","persistedRoatation","getMoveableGroupRect","parentRotation","posesRotations","rotations","groupRotation","firstRotation","isSameRotation","groupPoses","groupRect","rootGroupRect","posesInfo","rotateScale","isContainerChanged","MoveableIndividualGroup","canPersist","individualProps","controlBoxElement","dragElement","getElementTargets","refTargets","selectorMap","elementTargets","getTargetGroups","compareRefTargets","prevRefTargets","nextRefTargets","InitialMoveable","cssMap","moveableContructor","userAbles","userProps","nextSelectorMap","totalAbles","prevMoveable","target_1","prevTargetMoveable","mv","resolvePromise","isBrowser","updateSelectorMap","selectorTarget","Moveable","InnerMoveable","Moveable$1","React.Component","PROPERTIES","METHODS","EVENTS","nextOptions","selfElement","innerMoveable","inject","emitter","interactObj","reactive","dragEventSet","resizeEventSet","lastW","lastH","previousW","previousH","previousX","previousY","innerX","innerY","innerW","innerH","wrapper","instance","toRef","calcXY","updateWidthHandler","updateWidth","compactHandler","setDraggableHandler","isDraggable","isNull","setResizableHandler","isResizable","setBoundedHandler","isBounded","setTransformScaleHandler","transformScale","setRowHeightHandler","rowHeight","setMaxRowsHandler","maxRows","directionchangeHandler","setColNum","colNum","onBeforeMount","onMounted","watchEffect","nextTickOnce","createStyle","onBeforeUnmount","expose","isAndroid","resizableAndNotStatic","computed","renderRtl","draggableOrResizableAndNotStatic","nh","resizerClass","watch","tryMakeDraggable","tryMakeResizable","emitContainerResized","calcPosition","styleProps","prop","emit","handleResize","newSize","coreEvent","calcWH","handleDrag","newPosition","parentRect","cLeft","pLeft","cRight","pRight","cTop","pTop","bottomBoundary","calcGridItemWHPx","clamp","colWidth","calcColWidth","rightBoundary","gridUnits","colOrRowSize","marginPx","lowerBound","upperBound","autoSizeFlag","tryInteract","D","ft","Xe","P","mn","gn","yn","bn","wn","je","Sn","me","Ye","W","Wt","Ke","K","te","mr","pr","wt","vr","ge","gr","Qt","st","Jt","xt","br","he","Re","Et","yr","wr","H","se","Rt","f","u","g","O","S","R","M","A","B","F","N","L","en","xr","tn","Er","Tt","Rr","$e","nn","Tr","Sr","Or","ke","kr","zr","Cr","St","Ot","qe","Ar","Qe","kt","Mr","Lr","Br","Te","zt","Se","Ct","Be","Pr","rn","We","on","so","sn","z","ze","Pe","Ve","Je","Q","itemInstances","currentLayout","observeResize","unobserveResize","useResize","createEventEmitter","resizeEventHandler","dragEventHandler","nextTick","initResponsiveFeatures","debounce","onWindowResize","updateHeight","newVal","oldVal","layoutUpdate","provide","toRefs","increaseItem","decreaseItem","getItem","findDifference","ids","marginY","positionsBeforeDrag","hasCollisions","leastX","leastY","responsiveGridLayout","newBreakpoint","newCols","originalLayout","originalIds","uniqueResultOne","uniqueResultTwo"],"mappings":"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","x_google_ignoreList":[0,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22]}